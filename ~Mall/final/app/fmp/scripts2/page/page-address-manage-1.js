define("config.page.event",[],function(){"use strict";var e=window.capi.get(),n=e.jsData.location.redirect,t=e.jsData.userInfo.centerId;$(document).on("touchend","[href*='void(0)'],[href='#'],[href='']",function(){$(this).removeAttr("href")}),t&&e.jsUtil.weChat.browser()&&$.when(e.jsModel.send("THIRD_WECHAT_CONFIG",{url:n})).done(function(e){wx.config({debug:!1,appId:e.obj.appid,nonceStr:e.obj.nonceStr,timestamp:e.obj.timestamp,signature:e.obj.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","scanQRCode"]})})}),define("text!modular/template/template-header-1.mustache",[],function(){return'<div class="component-header-content">\r\n    <span class="component-header-left">\r\n        {{#region.config.text_mpMall}}\r\n            <a href="javascript:void(0)" class="btn text text_mpMall">前往微店</a>\r\n        {{/region.config.text_mpMall}}\r\n\r\n        {{#region.config.text_login}}\r\n            <a href="javascript:void(0)" class="btn text text_login">返回登录</a>\r\n        {{/region.config.text_login}}\r\n\r\n        {{#region.config.icon_back}}\r\n            <a href="javascript:void(0)" class="btn icon icon_back"></a>\r\n        {{/region.config.icon_back}}\r\n\r\n        {{#region.config.icon_home}}\r\n            <a href="javascript:void(0)" class="btn icon icon_home"></a>\r\n        {{/region.config.icon_home}}\r\n\r\n        {{#region.config.icon_scan}}\r\n            <a href="javascript:void(0)" class="btn icon icon_scan"></a>\r\n        {{/region.config.icon_scan}}\r\n    </span>\r\n\r\n    {{#if region.config.title_shop}}\r\n        <div class="component-header-title title_shop">\r\n            <div class="shopImg">\r\n                <img src="{{{region.config.shopInfo.headImg}}}" alt="{{region.config.shopInfo.name}}">\r\n            </div>\r\n            <div class="shopText">\r\n                <span>{{region.config.shopInfo.name}}</span>\r\n                <span>{{region.config.shopInfo.description}}</span>\r\n            </div>\r\n        </div>\r\n    {{else}}\r\n        {{#if region.config.title_text}}\r\n            <span class="component-header-title title_text">{{region.config.title_text}}</span>\r\n        {{/if}}\r\n    {{/if}}\r\n\r\n    {{#region.config.input}}\r\n        <span class="component-header-input">\r\n            <form action="javascript:void(0)" >\r\n                <i class="i_search"></i>\r\n                <input type="search" placeholder="{{region.config.placeholder}}" can-value="region.request.searchCont">\r\n                <i class="i_clear"></i>\r\n            </form>\r\n        </span>\r\n    {{/region.config.input}}\r\n\r\n\r\n    <span class="component-header-right">\r\n        {{#region.config.icon_search}}\r\n            <a href="javascript:void(0)" class="btn icon icon_search"></a>\r\n        {{/region.config.icon_search}}\r\n\r\n        {{#region.config.icon_shopCart}}\r\n            <a href="javascript:void(0)" class="icon icon_shopCart">\r\n                {{#region.response.shopCartCount}}\r\n                    <span class="shopCartCount">{{region.response.shopCartCount}}</span>\r\n                {{/region.response.shopCartCount}}\r\n            </a>\r\n        {{/region.config.icon_shopCart}}\r\n\r\n        {{#region.config.icon_AddressManage}}\r\n            <a href="javascript:void(0)" class="btn icon icon_AddressManage"></a>\r\n        {{/region.config.icon_AddressManage}}\r\n\r\n        {{#region.config.icon_AddressSure}}\r\n            <a href="javascript:void(0)" class="btn icon icon_AddressSure"></a>\r\n        {{/region.config.icon_AddressSure}}\r\n\r\n        {{#region.config.icon_shopCartEdit}}\r\n            <a href="javascript:void(0)" class="btn icon icon_shopCartEdit"></a>\r\n        {{/region.config.icon_shopCartEdit}}\r\n\r\n        {{#region.config.icon_shopCartSave}}\r\n            <a href="javascript:void(0)" class="btn icon icon_shopCartSave"></a>\r\n        {{/region.config.icon_shopCartSave}}\r\n\r\n        {{#region.config.icon_orderList}}\r\n            <a href="javascript:void(0)" class="btn icon icon_orderList"></a>\r\n        {{/region.config.icon_orderList}}\r\n\r\n        {{#region.config.icon_choose}}\r\n            <a href="javascript:void(0)" class="btn icon icon_choose"></a>\r\n        {{/region.config.icon_choose}}\r\n\r\n        {{#region.config.icon_close}}\r\n            <a href="javascript:void(0)" class="btn icon icon_close"></a>\r\n        {{/region.config.icon_close}}\r\n\r\n        {{#region.config.icon_news}}\r\n            <a href="javascript:void(0)" class="btn icon icon_news"></a>\r\n        {{/region.config.icon_news}}\r\n\r\n        {{#region.config.input_cancel}}\r\n            <a href="javascript:void(0)" class="btn text input_cancel">取消</a>\r\n        {{/region.config.input_cancel}}\r\n\r\n        {{#region.config.info_shop}}\r\n            <div class="info_shop">\r\n                <div class="shopImg">\r\n                    <img src="{{{region.config.shopInfo.headImg}}}" alt="{{region.config.shopInfo.name}}">\r\n                </div>\r\n                <div class="shopText">\r\n                    <span>{{region.config.shopInfo.name}}</span>\r\n                    <span>{{region.config.shopInfo.description}}</span>\r\n                </div>\r\n            </div>\r\n        {{/region.config.info_shop}}\r\n    </span>\r\n</div>'}),define("modular/component/component-header-1",["text!modular/template/template-header-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-header-1",template:e,helpers:{},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-footer-1.mustache",[],function(){return'<div class="component-footer-content">\r\n    {{#region.config.home}}\r\n        <div class="component-footer-shortcutIcon icon_3">\r\n            <a href="{{#if region.config.isCall}}/index.html{{else}}javascript:void(0){{/if}}" class="icon icon_home {{region.config.home}}"></a>\r\n        </div>\r\n    {{/region.config.home}}\r\n\r\n    {{#region.config.shoppingCart}}\r\n        <div class="component-footer-shortcutIcon icon_3">\r\n            <a href="{{#if region.config.isCall}}/shoppingCart.html{{else}}javascript:void(0){{/if}}" class="icon icon_shoppingCart {{region.config.shoppingCart}}">\r\n               {{#if region.config.isLogin}}\r\n                   {{#if region.response.count}}\r\n                       <span class="number">{{region.response.count}}</span>\r\n                   {{/if}}\r\n               {{/if}}\r\n            </a>\r\n        </div>\r\n    {{/region.config.shoppingCart}}\r\n\r\n    {{#region.config.personalCenter}}\r\n        <div class="component-footer-shortcutIcon icon_3">\r\n            <a href="{{#if region.config.isCall}}/personal-center.html{{else}}javascript:void(0){{/if}}" class="icon icon_personal {{region.config.personalCenter}}"></a>\r\n        </div>\r\n    {{/region.config.personalCenter}}\r\n\r\n    {{#region.config.goodsDetail}}\r\n        <div class="component-footer-goodsDetail">\r\n            <div class="btnBox">\r\n                <a href="javascript:void(0)" class="btn icon_top small"></a>\r\n                <a href="javascript:void(0)" class="btn icon_back small"></a>\r\n                <a href="javascript:void(0)" class="btn text_toBuy large">立即购买</a>\r\n                <a href="javascript:void(0)" class="btn text_addShopCart large">加入购物车</a>\r\n            </div>\r\n        </div>\r\n    {{/region.config.goodsDetail}}\r\n\r\n</div>'}),define("modular/component/component-footer-1",["text!modular/template/template-footer-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-footer-1",template:e,helpers:{scopeConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object");var t=this.spcConfig.attr();if(t.price){var r=t.realPrice||0===t.realPrice,o=r&&t.price>t.realPrice?t.realPrice:t.price;this.attr("spcPrice",(1*o).toFixed(2))}else this.attr("spcPrice","")},retrunTotal:function(e,t){return(n.jsUtil.mustache.getContent(e,"number")*n.jsUtil.mustache.getContent(t,"number")).toFixed(2)},returnTotalPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)}},scope:{spcPrice:""},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-searchHistory-1.mustache",[],function(){return'<div class="component-searchHistory-content">\r\n    {{#returnHistory region.config.historyCache}}\r\n        <div class="component-searchHistory-cache">\r\n            <h1>历史记录</h1>\r\n            <span class="icon_delete">\r\n               <img src="/images/platform/header/i_delete.png" alt="福利商城">\r\n            </span>\r\n            <ul>\r\n                {{#each region.config.historyCache}}\r\n                    {{#setRenderRange @index 0 9}}\r\n                        <li firstId="{{firstId}}" secondId="{{secondId}}" thirdId="{{thirdId}}">{{goodsName}}</li>\r\n                    {{/setRenderRange}}\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    {{/returnHistory}}\r\n</div>'}),define("modular/component/component-searchHistory-1",["text!modular/template/template-searchHistory-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-searchhistory-1",template:e,helpers:{returnHistory:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");return $.isArray(r)&&r.length>0?t.fn(this.context):t.inverse(this.context)}},scope:{},events:{}})}),define("text!modular/template/template-message-1.mustache",[],function(){return'{{scopeModule module}}\r\n{{scopeFunction "cancel" region.config}}\r\n{{scopeFunction "confirm" region.config}}\r\n{{scopeFunction "timeOutFun" region.config}}\r\n{{scopeDOMClick region.config.DOMClick}}\r\n\r\n{{#if region.config.content}}\r\n    {{#returnConfirmBtn region.config.confirmBtn}}\r\n        <div class="component-message-content completed">\r\n            <div class="component-message-header">\r\n            <span class="message-text">\r\n                {{returnHeaderText region.config.type region.config.language}}\r\n            </span>\r\n                <span class="message-icon icon_{{returnHeaderIcon region.config.type}}"></span>\r\n            </div>\r\n            <div class="component-message-body">\r\n                <table class="message-content">\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <span>{{region.config.content}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div class="component-message-footer">\r\n            <span class="message-btnGroup">\r\n                {{#returnConfirmBtn region.config.confirmBtn}}\r\n                    <a class="btn btn_confirm">\r\n                        {{returnFooterText "confirm" region.config.language}}\r\n                    </a>\r\n                {{/returnConfirmBtn}}\r\n\r\n                {{#returnCancelBtn region.config.cancelBtn}}\r\n                    <a class="btn btn_cancel">\r\n                        {{returnFooterText "cancel" region.config.language}}\r\n                    </a>\r\n                {{/returnCancelBtn}}\r\n            </span>\r\n            </div>\r\n        </div>\r\n    {{/returnConfirmBtn}}\r\n    {{^returnConfirmBtn region.config.confirmBtn}}\r\n        <div class="component-message-content unCompleted">\r\n            <div class="component-message-body">\r\n                <table class="message-content">\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <span>{{region.config.content}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    {{/returnConfirmBtn}}\r\n{{/if}}'}),define("modular/component/component-message-1",["text!modular/template/template-message-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-message-1",template:e,helpers:{scopeModule:function(e){this.spcModule=n.jsUtil.mustache.getContent(e,"object")},returnHeaderText:function(e,t){var r=null,o=n.jsUtil.mustache.getContent(e,"string");if("en"===n.jsUtil.mustache.getContent(t,"string"))switch(o){case"success":r="Success";break;case"error":r="Error";break;case"warning":r="Warning";break;default:r="Information"}else switch(o){case"success":r="成功";break;case"error":r="失败";break;case"warning":r="警告";break;default:r="提示"}return can.mustache.safeString(r)},returnHeaderIcon:function(e){var t=null;switch(n.jsUtil.mustache.getContent(e,"string")){case"success":t="success";break;case"error":t="error";break;case"warning":t="warning";break;default:t="info"}return can.mustache.safeString(t)},returnConfirmBtn:function(e,t){return!1===n.jsUtil.mustache.getContent(e)?t.inverse(t.context||this):t.fn(t.context||this)},returnCancelBtn:function(e,t){return!0===n.jsUtil.mustache.getContent(e)?t.fn(t.context||this):t.inverse(t.context||this)},returnFooterText:function(e,t){var r=null,o=n.jsUtil.mustache.getContent(e,"string"),s=n.jsUtil.mustache.getContent(t,"string");return"confirm"===o?r="en"===s?"confirm":"确定":"cancel"===o&&(r="en"===s?"cancel":"取消"),can.mustache.safeString(r)},scopeFunction:function(e,t){var r=n.jsUtil.mustache.getContent(t,"object"),o=n.jsUtil.mustache.getContent(e,"string");"cancel"===o&&(this.cancelFun=r.cancelFun),"confirm"===o&&(this.confirmFun=r.confirmFun),"timeOutFun"===o&&(this.timeOutFun=r.timeOutFun)},scopeDOMClick:function(e){!1===("function"==typeof e?e():e)&&(this.DOMClick=!1)}},scope:{spcModule:null,DOMClick:!0,triggerMode:null,cancelFun:null,confirmFun:null},events:{inserted:function(){var e=this,n=e.element,t=e.scope.spcModule,r=t&&t.config||{},o=n.find(".component-message-content");r.global.content&&!1!==r.global.confirmBtn?(r.global.isShowing=!0,o.css({opacity:0}),o.animate({opacity:1},600,"linear",function(){r.global.isShowing=!1})):r.global.content&&(r.global.isShowing=!0,o.css({opacity:0}),o.finish().animate({opacity:1},360,function(){setTimeout(function(){o.finish().animate({opacity:0},600,function(){r.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},r.global.isShowing=!1,$.isFunction(e.scope.timeOutFun)&&e.scope.timeOutFun(),t.refresh()})},r.global.time||2e3)}))},removed:function(){var e=this,n=e.scope.attr("triggerMode"),t=!1!==e.scope.confirmBtn;t&&"document"===n?!0===e.scope.cancelBtn&&$.isFunction(e.scope.cancelFun)?e.scope.cancelFun():!1!==e.scope.confirmBtn&&$.isFunction(e.scope.confirmFun)&&e.scope.confirmFun():t&&"cancel"===n?$.isFunction(e.scope.cancelFun)&&e.scope.cancelFun():t&&"confirm"===n&&$.isFunction(e.scope.confirmFun)&&e.scope.confirmFun()},"{document} touchend":function(e,n){var t=this,r=n||window.event,o=$(r.target||r.srcElement),s=o.parents(".component-message-content").length>0,a=!1!==t.scope.confirmBtn,i=!1!==t.scope.DOMClick;!s&&a&&i&&t.scope.attr("triggerMode","document")},".component-message-footer .btn_cancel touchend":function(){this.scope.attr("triggerMode","cancel")},".component-message-footer .btn_confirm touchend":function(){this.scope.attr("triggerMode","confirm")}}})}),define("text!modular/template/template-searchProduct-1.mustache",[],function(){return'<div class="component-searchProduct-content">\r\n    <div class="searchProduct-header">\r\n        <ul class="content">\r\n            <li class="choose_general {{addElementClass region.config.sortType 1 "active"}}">综合</li>\r\n            <li class="choose_new {{addElementClass region.config.sortType 2 "active"}}">最新</li>\r\n            <li class="choose_price\r\n                     {{addElementClass region.config.sortType 3 "sortType3"}}\r\n                     {{addElementClass region.config.sortType 4 "sortType4"}}">\r\n                价格\r\n                {{#returnImg region.config.sortType}}\r\n                       <img src="/images/platform/product/{{path}}.png" class="sort" alt="福利商城">\r\n                {{/returnImg}}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    {{#if region.response.goodsList}}\r\n        {{#if region.response.goodsList.length}}\r\n            <div class="searchProduct-body">\r\n                <ul class="searchProduct-body-item" style="min-height: {{region.config.minHeight}}px">\r\n                    {{#each region.response.goodsList}}\r\n                        <li class="item-content"  isSingleSpec="{{returnIsSingleSpec goodsSpecsList}}" toUrl=\'{{{href}}}\'goodsId="{{goodsId}}">\r\n                            <a href="{{{href}}}">\r\n                                <div class="imgBox">\r\n                                    <div>\r\n                                        {{#if goodsFileList}}\r\n                                            {{#each goodsFileList}}\r\n                                                {{#setRenderRange @index 0 1}}\r\n                                                    <img src="{{{path}}}" alt="{{{customGoodsName}}}">\r\n                                                {{/setRenderRange}}\r\n                                            {{/each}}\r\n                                        {{else}}\r\n                                            <img src="/images/platform/account/default_img.jpg" alt="{{{customGoodsName}}}">\r\n                                        {{/if}}\r\n                                        {{#returnIsShow type}}\r\n                                            <img class="corner_mark" src="{{returnImgSrc type}}" alt="福利商城">\r\n                                        {{/returnIsShow}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class="description">\r\n                                    <span class="text">\r\n                                        {{#if description}}\r\n                                            {{description}}\r\n                                        {{else}}\r\n                                            福利商城\r\n                                        {{/if}}\r\n                                    </span>\r\n                                    {{#if goodsSpecsList}}\r\n                                        <span class="tagBox">\r\n                                            {{#returnTags goodsSpecsList}}\r\n                                                {{#each .}}\r\n                                                    <span class="icon {{.}}"></span>\r\n                                                {{/each}}\r\n                                            {{/returnTags}}\r\n                                        </span>\r\n                                    {{/if}}\r\n                                </div>\r\n                            </a>\r\n                            <ul class="textGroup">\r\n                                <li class="name">\r\n                                    <a href="javascript:void(0)">\r\n                                        {{{customGoodsName}}}\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <span class="realPrice">￥{{returnPrice realPrice}}</span>\r\n                                    <span class="imgBox search_addShoppingCart">\r\n                                        <img src="/images/platform/search/icon_shoppingCart.png" alt="福利商城">\r\n                                    </span>\r\n                                    <span class="price">￥{{returnPrice price}}</span>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                    {{/each}}\r\n                </ul>\r\n                <div class="isLoading">\r\n                    <div class="component-load-text">\r\n                        <span>请下拉加载...</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n    {{/if}}\r\n    {{#if region.response.goodsList}}\r\n        {{^if region.response.goodsList.length}}\r\n            <div class="empty_search">\r\n                <img src="/images/platform/product/search.png" alt="福利商城">\r\n                <span class="text">您寻找的商品还未上架！</span>\r\n            </div>\r\n        {{/if}}\r\n    {{else}}\r\n        <div class="empty_search">\r\n            <img src="/images/platform/product/search.png" alt="福利商城">\r\n            <span class="text">您寻找的商品还未上架！</span>\r\n        </div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-searchProduct-1",["text!modular/template/template-searchProduct-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-searchproduct-1",template:e,helpers:{returnTags:function(e,t){var r=[],o=[],s=n.jsUtil.mustache.getDepContent(e,"object");return $.each(s||[],function(e,n){$.each(n.tagList||[],function(e,n){o.push(n)})}),$.each(o||[],function(e,n){switch(n.tagName){case"必选":-1===$.inArray("icon_tag1",r)&&r.push("icon_tag1");break;case"爆款":-1===$.inArray("icon_tag2",r)&&r.push("icon_tag2");break;case"热销":-1===$.inArray("icon_tag3",r)&&r.push("icon_tag3");break;case"优选":-1===$.inArray("icon_tag4",r)&&r.push("icon_tag4")}}),t.fn(r)},returnImg:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 3===r?t.fn({path:"down"}):4===r?t.fn({path:"up"}):t.fn({path:"none"})},returnPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsSingleSpec:function(e){var t=n.jsUtil.mustache.getDepContent(e,"object");return $.isArray(t)&&t.length>1?"no":"yes"}},scope:{},events:{inserted:function(){},"{document} click":function(e,n){var t=this,r=t.element,o=n||window.event,s=$(o.target||o.srcElement);s.hasClass("searchProduct-header-right")||s.parents(".searchProduct-header-right").length||r.find(".searchProduct-header .searchProduct-header-right.active").click()},".searchProduct-header .searchProduct-header-right touchend":function(e){$(e).toggleClass("active")}}})}),define("text!modular/template/template-personal-center-1.mustache",[],function(){return'<div class="component-personal-center-content">\r\n    <div class="component-personal-center-header">\r\n        <div class="content">\r\n            <span class="defaultHeadPortrait">\r\n                <span class="imgBox">\r\n                    <span class="img" style="background-image:\r\n                            url(\'{{region.config.shopInfo.headImg}}\');"></span>\r\n                </span>\r\n            </span>\r\n            <span class="userName">\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.userInfo.userDetail}}\r\n                        {{#if region.response.userInfo.userDetail.nickName}}\r\n                            <span class="text">{{region.response.userInfo.userDetail.nickName}}(用户)</span>\r\n                        {{else}}\r\n                            {{#if region.response.userInfo.userDetail.name}}\r\n                                <span class="text">{{region.response.userInfo.userDetail.name}}(用户)</span>\r\n                            {{else}}\r\n                                {{#if region.response.userInfo.phone}}\r\n                                    <span class="text">{{region.response.userInfo.phone}}(用户)</span>\r\n                                {{else}}\r\n                                    <span class="text">游客</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        {{/if}}\r\n                    {{else}}\r\n                        {{#if region.response.userInfo.phone}}\r\n                            <span class="text">{{region.response.userInfo.phone}}(用户)</span>\r\n                        {{else}}\r\n                            <span class="text">游客</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                {{else}}\r\n                    <span class="text">游客</span>\r\n                {{/if}}\r\n            </span>\r\n            <span class="aboutus">\r\n               <span class="text">微店简介：{{region.config.shopInfo.aboutus}}</span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="component-personal-center-order">\r\n        <div class="body">\r\n            <a href="/orderList.html" class="order order_all">\r\n                <span class="icon icon_order_all"></span>\r\n            </a>\r\n            <a href="/orderList.html?queryType=needPay" class="order order_needPay">\r\n                <span class="icon icon_order_needPay">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needPay}}\r\n                            <span class="number">{{region.response.orderStatus.needPay}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a href="/orderList.html?queryType=needDeliver" class="order order_needDeliver">\r\n                <span class="icon icon_order_needDeliver">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needDeliver}}\r\n                            <span class="number">{{region.response.orderStatus.needDeliver}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a  href="/orderList.html?queryType=needReceived" class="order order_needReceived">\r\n                <span class="icon icon_order_needReceived">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needReceived}}\r\n                            <span class="number">{{region.response.orderStatus.needReceived}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a  href="/orderList.html?queryType=finished" class="order order_finish">\r\n                <span class="icon icon_order_finished">\r\n                </span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="component-personal-center-function">\r\n        <a href="/address-manage.html?jumpUrl={{region.config.pathUrl}}" class="function needSign editDeliveryAddress">\r\n            <span class="icon icon_deliveryAddress"></span>\r\n            <span class="text">收货地址</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        <a href="/personal-information.html?jumpUrl={{region.config.pathUrl}}" class="function needSign information">\r\n            <span class="icon icon_information"></span>\r\n            <span class="text">个人信息</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        <a href="/customerService.html?jumpUrl={{region.config.pathUrl}}" class="function customerService">\r\n            <span class="icon icon_customerService"></span>\r\n            <span class="text">客服信息</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        <a href="javascript:void(0)" class="function mpMall">\r\n            <span class="icon icon_welfare"></span>\r\n            <span class="text">微店商城</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        {{#notShow}}\r\n            <a href="/discount.html?jumpUrl={{region.config.pathUrl}}?type=personalCenter" class="function discount">\r\n                <img src="/images/platform/personal/icon_discount.png" alt="福利商城">\r\n                <span class="text">我的优惠券</span>\r\n                <span class="icon icon_right icon_href"></span>\r\n            </a>\r\n        {{/notShow}}\r\n    </div>\r\n    {{#if region.config.isLogin}}\r\n        <div class="component-personal-center-logout">\r\n            <span class="text">退出当前账号</span>\r\n        </div>\r\n    {{else}}\r\n        <a class="component-personal-center-login">\r\n            <span class="text">登 录</span>\r\n        </a>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-personal-center-1",["text!modular/template/template-personal-center-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-personal-center-1",template:e,helpers:{},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-login-1.mustache",[],function(){return'<div class="component-login-content">\r\n    <div class="component-login-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-login-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-login-loginBtn {{loginBtn_state}}">登录</a>\r\n    <div class="component-login-prompt">\r\n        <a href="/register.html?jumpUrl={{region.config.jumpUrl}}" target="_self">账号注册</a>\r\n        <a href="/forgetPassword.html?jumpUrl={{region.config.jumpUrl}}" target="_self">忘记密码</a>\r\n    </div>\r\n    <div class="component-login-third">\r\n        <div class="header">\r\n            使用其他方式登录\r\n        </div>\r\n        <div class="body">\r\n            <a href="javascript:void(0)" class="img_weChat">\r\n                <img src="/images/platform/account/weixin.png" alt="福利商城">\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("modular/component/component-login-1",["text!modular/template/template-login-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-login-1",template:e,helpers:{},scope:{account_state:"",password_state:"",loginBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-login-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-login-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},".component-login-loginBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("password_state");t&&r?e.scope.attr("loginBtn_state",""):e.scope.attr("loginBtn_state","state_error")}}})}),define("text!modular/template/template-register-1.mustache",[],function(){
return'<div class="component-register-content">\r\n    <div class="component-register-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-register-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <div class="component-register-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <div class="component-register-confirmPassword  {{confirmPassword_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="请再次确认密码..." can-value="region.request.confirmPassword"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <div class="component-register-invitationCode">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="invitationCode" name="invitationCode" placeholder="请输入邀请码...(选填)" can-value="region.request.invitationCode"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-register-registerBtn {{registerBtn_state}}">确认注册</a>\r\n</div>'}),define("modular/component/component-register-1",["text!modular/template/template-register-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-register-1",template:e,helpers:{returnShow:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"boolean"),s=n.jsUtil.mustache.getContent(t,"boolean");return o&&s?r.fn(this):r.inverse(this)}},scope:{account_state:"",validation_state:"",password_state:"",confirmPassword_state:"",registerBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)},validateConfirmPassword:function(e,n){return""!==n.trim()&&e===n&&/^.{6,12}$/gi.test(e)},validateInvitationCode:function(e){return""!==e.trim()}},events:{inserted:function(){},removed:function(){},".component-register-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-register-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},"#confirmPassword blur":function(e){var n=this,t=$(e),r=n.element,o=r.find("#password");n.scope.validateConfirmPassword(o.val(),t.val())?n.scope.attr("confirmPassword_state",""):n.scope.attr("confirmPassword_state","state_error")},".component-register-registerBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur"),n.find("#validation").trigger("blur"),n.find("#confirmPassword").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state"),o="state_error"!==e.scope.attr("password_state"),s="state_error"!==e.scope.attr("confirmPassword_state");t&&r&&o&&s?e.scope.attr("registerBtn_state",""):e.scope.attr("registerBtn_state","state_error")}}})}),define("text!modular/template/template-bindInvitation-1.mustache",[],function(){return'<div class="component-bindInvitation-content">\r\n    <div class="component-bindInvitation-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="未获取到手机号..." can-value="region.request.account" {{#if region.config.account}}readonly="readonly"{{/if}}/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-bindInvitation-invitationCode {{invitationCode_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="invitationCode" name="invitationCode" placeholder="请输入邀请码..." can-value="region.request.invitationCode"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-bindInvitation-bingBtn {{bingBtn_state}}">绑定邀请码</a>\r\n    {{#returnShow}}\r\n    <p class="getCode"><span>获取邀请码</span></p>\r\n    {{/returnShow}}\r\n</div>'}),define("modular/component/component-bindInvitation-1",["text!modular/template/template-bindInvitation-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-bindinvitation-1",template:e,helpers:{returnShow:function(e){if(124==localStorage.getItem("shopId"))return e.fn(e.context||this)}},scope:{bingBtn_state:"",account_state:"",invitationCode:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateInvitation:function(e){return""!==e.trim()}},events:{inserted:function(){},removed:function(){},".component-bindInvitation-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-bindInvitation-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#invitationCode blur":function(e){var n=this,t=$(e);n.scope.validateInvitation(t.val())?n.scope.attr("invitationCode_state",""):n.scope.attr("invitationCode_state","state_error")},".component-bindInvitation-bingBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#invitationCode").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("invitationCode_state");t&&r?e.scope.attr("bingBtn_state",""):e.scope.attr("bingBtn_state","state_error")}}})}),define("text!modular/template/template-bindMobile-1.mustache",[],function(){return'<div class="component-bindMobile-content">\r\n    <div class="component-bindMobile-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-bindMobile-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-bindMobile-bingBtn {{bingBtn_state}}">完成绑定</a>\r\n</div>'}),define("modular/component/component-bindMobile-1",["text!modular/template/template-bindMobile-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-bindmobile-1",template:e,helpers:{},scope:{spcConfig:{},bingBtn_state:"",account_state:"",validation_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-bindMobile-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-bindMobile-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},".component-bindMobile-bingBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#validation").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state");t&&r?e.scope.attr("bingBtn_state",""):e.scope.attr("bingBtn_state","state_error")}}})}),define("text!modular/template/template-personal-information-1.mustache",[],function(){return'<div class="component-personal-information-content">\r\n\r\n    <div class="component-personal-information-prompt">\r\n        <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n        <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n    </div>\r\n\r\n    <div class="component-personal-information-main">\r\n        <div class="mainCont headPortrait big">\r\n            <span class="name">头像</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="icon headPortrait">\r\n                    <img src="/images/platform/personal/headPortrait.jpg" alt="福利商城">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont nickname">\r\n            <span class="name">昵称</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont nickname">\r\n                    <input type="text" id="nickname" name="nickname" value="{{region.response.userDetail.nickName}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont realname">\r\n            <span class="name important">真实姓名</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont realname">\r\n                    <input type="text" id="realname" name="realname" value="{{region.response.userDetail.name}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont gender">\r\n            <span class="name important">性别</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont gender">\r\n                    <select id="gender" name="gender">\r\n                        <option value ="1"\r\n                            {{#returnSelected region.response.userDetail.sex 1}}\r\n                                selected="selected"\r\n                            {{/returnSelected}}>女性</option>\r\n                        <option value ="0"\r\n                            {{#returnSelected region.response.userDetail.sex 0}}\r\n                                selected="selected"\r\n                            {{/returnSelected}}>男性</option>\r\n                    </select>\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont location">\r\n            <span class="name">所在地</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont location">\r\n                    <input type="text" id="location" name="location" value="{{region.response.userDetail.location}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont identification">\r\n            <span class="name important">身份证</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont identification">\r\n                    <input type="text" id="identification" name="identification" value="{{region.response.userDetail.idNum}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#notShow}}\r\n        <div class="component-personal-information-other">\r\n            <div class="otherCont">\r\n                <span class="name">其他</span>\r\n                <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont">\r\n                    <input type="text" id="" name="" value="其他内容">\r\n                </span>\r\n            </span>\r\n            </div>\r\n        </div>\r\n    {{/notShow}}\r\n\r\n    {{#if region.config.detailExist}}\r\n        <div class = "edit component-personal-information-commit">保存个人信息</div>\r\n    {{else}}\r\n        <div class = "add component-personal-information-commit">创建个人信息</div>\r\n    {{/if}}>\r\n\r\n</div>'}),define("modular/component/component-personal-information-1",["text!modular/template/template-personal-information-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-personal-information-1",template:e,helpers:{returnSelected:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"string"),s=n.jsUtil.mustache.getContent(t,"string");if("1"!==o&&(o="0"),o===s)return r.fn(this)},returnSex:function(e){return"0"===n.jsUtil.mustache.getContent(e,"string")?"男性":"女性"}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-address-manage-1.mustache",[],function(){return'<div class="component-address-manage-content">\r\n    {{#returnList region.response}}\r\n        <ul class="component-address-manage-list">\r\n            {{#each .}}\r\n                <li class="item {{#region.config.isFormOrder}}select{{/region.config.isFormOrder}}" id="{{id}}">\r\n                    <div class="info">\r\n                <span class="name">\r\n                    {{receiveName}}\r\n                </span>\r\n                        <span class="mobilePhone">\r\n                            {{receivePhone}}\r\n                        </span>\r\n                        <span class="address">\r\n                    {{province}}{{city}}{{area}}{{address}}\r\n                </span>\r\n                    </div>\r\n                    <div class="setting">\r\n                        <div class="btnBox_left {{#if setDefault}}active{{/if}}">\r\n                            <span class="icon btn"></span>\r\n                            <span class="text"></span>\r\n                        </div>\r\n                        {{^region.config.isFormOrder}}\r\n                            <div class="btnBox_right">\r\n                                <a href="javascript:void(0)" class="btn btn_remove">删除</a>\r\n                                <a href="/address-edit.html?edit={{id}}" class="btn btn_edit">编辑</a>\r\n                            </div>\r\n                        {{/region.config.isFormOrder}}\r\n                    </div>\r\n                </li>\r\n            {{/each}}\r\n        </ul>\r\n    {{/returnList}}\r\n    {{^returnList region.response}}\r\n        <ul class="component-address-manage-empty">\r\n            <img src="/images/platform/address/empty.png" alt="福利商城">\r\n            <span>暂无收货地址信息</span>\r\n        </ul>\r\n    {{/returnList}}\r\n    <div class="component-address-manage-create">\r\n        <div class="box">\r\n            <a href="/address-edit.html" class="btn content">添加新地址</a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("modular/component/component-address-manage-1",["text!modular/template/template-address-manage-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-address-manage-1",template:e,helpers:{returnList:function(e,t){var r=n.jsUtil.mustache.getDepContent(e);return $.isArray(r)&&r.length>0?t.fn(r):t.inverse(r)}},scope:{},events:{inserted:function(){},removed:function(){},".address-manage-list .btnBox_left touchend":function(e){var n=this,t=$(e);n.element.find(".btnBox_left").removeClass("active"),t.addClass("active")}}})}),define("text!modular/template/template-address-edit-1.mustache",[],function(){return'<div class="component-address-edit-content">\r\n    <div class="component-address-edit-prompt">\r\n        <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n        <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n    </div>\r\n    <div class="component-address-edit-info picker-country" id="{{region.response.id}}">\r\n        <div class="consignee">\r\n            <span class="name">收货人</span>\r\n            <span class="text">\r\n                <input type="text" id="consignee" name="consignee" class="receiveName_state" can-value="region.response.receiveName">\r\n            </span>\r\n        </div>\r\n        <div class="telephone">\r\n            <span class="name">联系电话</span>\r\n            <span class="text">\r\n                <input type="tel" pattern="[0-9]*" id="telephone" name="telephone" class="receivePhone_state" can-value="region.response.receivePhone">\r\n            </span>\r\n        </div>\r\n        <div class="province obvious">\r\n            <span class="name">选择省份</span>\r\n            <span class="text">\r\n                <select id="province" name="province" class="picker-province province_state" data-name="{{region.response.province}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="city obvious">\r\n            <span class="name">选择城市</span>\r\n            <span class="text">\r\n                <select id="city" name="city" class="picker-city city_state"  data-name="{{region.response.city}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="city obvious">\r\n            <span class="name">选择市区</span>\r\n            <span class="text">\r\n                <select id="area" name="area" class="picker-area area_state" data-name="{{region.response.area}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="address">\r\n            <span class="name">详细地址</span>\r\n            <span class="text">\r\n                <input type="text" id="address" name="address" class="address_state" can-value="region.response.address">\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="component-address-edit-defaultSetting">\r\n        <div class="text">\r\n            设置为默认收货地址\r\n        </div>\r\n        <div class="btnBox {{#region.response.setDefault}}active{{/region.response.setDefault}}">\r\n            <span class="btnSet">\r\n                <span class="btn"></span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#if region.response.id}}\r\n        <div class="component-address-edit-commit">保存收货地址</div>\r\n    {{else}}\r\n        <div class="component-address-edit-commit">创建收货地址</div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-address-edit-1",["text!modular/template/template-address-edit-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-address-edit-1",template:e,helpers:{},scope:{check_province:function(e){return e&&"---- 所在省 ----"!==e},check_city:function(e,n){return 1===n||e&&"---- 所在市 ----"!==e},check_area:function(e,n){return 1===n||e&&"---- 所在区 ----"!==e},check_address:function(e){return!(!e||!e.trim())},check_zipCode:function(e){return n.jsUtil.check.zipCode(e)},check_receiveName:function(e){return!(!e||!e.trim())},check_receivePhone:function(e){return n.jsUtil.check.phone(e)}},events:{inserted:function(){this.element.find(".picker-country").picker()},removed:function(){},".component-address-edit-info .receiveName_state blur":function(e){var n=this,t=$(e),r=(n.element,t.val()&&t.val().trim());n.scope.check_receiveName(r)?t.removeClass("state_error"):t.addClass("state_error"),t.text(r)},".component-address-edit-info .receivePhone_state blur":function(e){var n=this,t=$(e),r=(n.element,t.val()&&t.val().trim());n.scope.check_receivePhone(r)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .province_state change":function(e){var n=this,t=$(e),r=t.val();n.element,n.scope.check_province(r)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .city_state change":function(e){var n=this,t=$(e),r=t.val(),o=(n.element,t.find("option").length);n.scope.check_city(r,o)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .area_state change":function(e){var n=this,t=$(e),r=t.val(),o=(n.element,t.find("option").length);n.scope.check_area(r,o)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .address_state blur":function(e){var n=this,t=$(e),r=t.val()&&t.val().trim();n.scope.check_address(r)?t.removeClass("state_error"):t.addClass("state_error"),t.text(r)}}})}),define("text!modular/template/template-shoppingCart-1.mustache",[],function(){return'<div class="component-shoppingCart-content">\r\n    {{scopeConfig region.config}}\r\n    {{spoceOrder region.response.orders region.config}}\r\n\r\n    {{#if region.response.orders.quantity}}\r\n        {{#region.response.orders}}\r\n            <div class="component-shoppingCart-ordersDetails" style="min-height: {{region.config.minHeight}}px">\r\n                {{#each typeObj}}\r\n                    {{#each .}}\r\n                        {{#each itemObj}}\r\n                            <div class="goodsList" type="{{type}}" supplierId="{{supplierId}}" goodsId="{{goodsId}}" ids="{{ids}}">\r\n                                <div class="body">\r\n                                    <div class="itemList" itemId="{{itemId}}">\r\n                                        <div class="commodity-group">\r\n                                            <span goodsId="{{goodsId}}" itemId="{{itemId}}" class="commodity-select {{#returnItemSelect selected status region.config.optionsOpen}}active{{/returnItemSelect}}">\r\n                                                {{#if region.config.optionsOpen}}\r\n                                                    <span class="icon icon_logo"></span>\r\n                                                {{else}}\r\n                                                    {{#returnStatus status}}\r\n                                                        {{#returnStock stock minQuantity}}\r\n                                                            <span class="icon icon_logo"></span>\r\n                                                        {{/returnStock}}\r\n                                                        {{^returnStock stock minQuantity}}\r\n                                                            <span class="text text_lose">库存不足</span>\r\n                                                        {{/returnStock}}\r\n                                                    {{/returnStatus}}\r\n                                                    {{^returnStatus status}}<span class="text text_lose">已下架</span>{{/returnStatus}}\r\n                                                {{/if}}\r\n                                            </span>\r\n                                            <a class="commodity-img" href="{{{href}}}">\r\n                                                {{#if itemImg}}\r\n                                                    <img src="{{{itemImg}}}" alt="{{goodsName}}">\r\n                                                {{else}}\r\n                                                    <img src="/images/platform/account/default_img.jpg" alt="{{goodsName}}">\r\n                                                {{/if}}\r\n                                                {{#returnIsShow type}}\r\n                                                    <img class="corner_mark" src="{{returnImgSrc type}}" alt="福利商城">\r\n                                                {{/returnIsShow}}\r\n                                            </a>\r\n                                            <span class="commodity-info">\r\n                                                <span class="commodity-name">\r\n                                                    <a href="{{{href}}}">\r\n                                                        <span class="text">{{#if supplierName}}[{{supplierName}}]{{/if}}{{goodsName}}</span>\r\n                                                    </a>\r\n                                                </span>\r\n                                                {{#returnSpec itemSpecs.info}}\r\n                                                    <span class="commodity-itemId">\r\n                                                        <span class="text">规格：{{#each .}} {{.}}、 {{/each}}</span>\r\n                                                    </span>\r\n                                                {{/returnSpec}}\r\n                                                {{#itemSpecs.carton}}\r\n                                                    <span class="commodity-gauge">\r\n                                                        <span class="text">箱规：{{itemSpecs.carton}}</span>\r\n                                                    </span>\r\n                                                {{/itemSpecs.carton}}\r\n                                                <span class="commodity-price">\r\n                                                    <span class="text">￥{{returnPrice rakebackPrice rakebackRealPrice}}</span>\r\n                                                </span>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div class="commodity-quantity">\r\n                                        <span class="inputGroup">\r\n                                            <span class="btn btn_plus"></span>\r\n                                            <input type="number" pattern="[0-9]*" class="btn btn_input" can-value="quantity">\r\n                                            <span class="btn btn_minus"></span>\r\n                                        </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="controlGroup">\r\n                                    <span class="control control_delete" ids="{{ids}}">删除</span>\r\n                                </div>\r\n                            </div>\r\n                        {{/each}}\r\n                    {{/each}}\r\n                {{/each}}\r\n            </div>\r\n        {{/region.response.orders}}\r\n    {{/if}}\r\n\r\n    {{#if region.response.orders.quantity}}\r\n        <div class="component-shoppingCart-optionsGroup">\r\n            <div class="content">\r\n                <span class="control control_selectAll {{#region.response.orders.allSelected}}active{{/region.response.orders.allSelected}}">\r\n                    <span class="icon icon_selectAll"></span>\r\n                    <span class="text text_count">已选({{region.response.orders.selectedCount}})</span>\r\n                </span>\r\n                {{#if region.config.optionsOpen}}\r\n                    <span class="btnGroup">\r\n                        <span class="btn btn_deleteMore {{^if region.response.orders.oneSelected}}lose{{/if}}">删除</span>\r\n                    </span>\r\n                {{else}}\r\n                    <span class="btnGroup">\r\n                        <span class="btn btn_commitOrder {{^if region.response.orders.oneSelected}}lose{{/if}}">下单</span>\r\n                        <span class="text text_price">\r\n                            \x3c!--&lt;!&ndash;￥{{returnOrderPrice region.response.orders}}&ndash;&gt;--\x3e\r\n                            \x3c!--<p>一般：￥{{returnOrderNormalPrice}}</p>--\x3e\r\n                            \x3c!--<p>跨境：￥{{returnOrderCrossPrice}}</p>--\x3e\r\n                            {{#returnNormalShow}}\r\n                                {{#returnCrossShow}}\r\n                                    <p>一般：￥{{returnOrderNormalPrice}}</p>\r\n                                {{/returnCrossShow}}\r\n                            {{/returnNormalShow}}\r\n                            {{^returnNormalShow}}\r\n                                {{#returnCrossShow}}\r\n                                    跨境：￥{{returnOrderCrossPrice}}\r\n                                {{/returnCrossShow}}\r\n                            {{/returnNormalShow}}\r\n                            {{#returnCrossShow}}\r\n                                {{#returnNormalShow}}\r\n                                    <p>跨境：￥{{returnOrderCrossPrice}}</p>\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                            {{^returnCrossShow}}\r\n                                {{#returnNormalShow}}\r\n                                    一般：￥{{returnOrderNormalPrice}}\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                            {{^returnCrossShow}}\r\n                                {{^returnNormalShow}}\r\n                                    总价：￥0.00\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                        </span>\r\n                    </span>\r\n                {{/if}}\r\n            </div>\r\n        </div>\r\n    {{else}}\r\n        <div class="component-shoppingCart-empty">\r\n            <img src="/images/platform/shopCart/empty.png" class="img" alt="福利商城">\r\n            <span class="text">购物车空了，去买点什么吧！</span>\r\n            {{^region.config.isLogin}}\r\n                <a class="btn" href="/login.html?jumpUrl={{region.config.pathUrl}}">登录</a>\r\n            {{/region.config.isLogin}}\r\n        </div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-shoppingCart-1",["text!modular/template/template-shoppingCart-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-shoppingcart-1",template:e,helpers:{returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)},scopeConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object")},spoceOrder:function(e,t){this.orders=n.jsUtil.mustache.getContent(e,"object"),this.config=n.jsUtil.mustache.getContent(t,"object"),this.setInit(),this.setNormalTotalPrice(),this.setCrossTotalPrice(),this.setOrderAllSelect(),this.setOrderOneSelect(),this.setOrderSelectedCount()},returnPrice:function(e,t){
var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getContent(t,"number");return(o<r?o:r).toFixed(2)},returnOrderNormalPrice:function(){return this.orders.attr("orderNormalTotalPrice").toFixed(2)},returnOrderCrossPrice:function(){return this.orders.attr("orderCrossTotalPrice").toFixed(2)},returnOrderPrice:function(e){var t=n.jsUtil.mustache.getDepContent(e,"object");return t&&t.orderTotalPrice&&t.orderTotalPrice.toFixed(2)||"0.00"},returnItemSelect:function(e,t,r,o){var s=n.jsUtil.mustache.getContent(e,"boolean"),a=n.jsUtil.mustache.getContent(t,"number"),i=n.jsUtil.mustache.getContent(r,"boolean");return s&&(0!==a||i)?o.fn(this):o.inverse(this)},returnStatus:function(e,t){return 0!==n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnStock:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),s=n.jsUtil.mustache.getContent(t,"number");return o>0&&o>=s?r.fn(this):r.inverse(this)},returnNormalShow:function(e){return this.orders.attr("orderNormalTotalPrice").toFixed(2)>0?e.fn(this):e.inverse(this)},returnCrossShow:function(e){return this.orders.attr("orderCrossTotalPrice").toFixed(2)>0?e.fn(this):e.inverse(this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t}},scope:{isFirst:!0,goodsTotalPrice:{},orderTotalPrice:0,setInit:function(){var e=this,n=e.orders.attr(),t=0;$.each(n.typeObj,function(n,r){$.each(r,function(r,o){$.each(o.itemObj,function(){t+=1}),$.isEmptyObject(o.itemObj)&&(e.orders.typeObj[n][r].removeAttr("itemObj"),e.orders.typeObj[n].removeAttr(r))}),$.isEmptyObject(r)&&e.orders.typeObj.removeAttr(n)}),e.orders.attr("quantity",t)},setNormalTotalPrice:function(){var e=this,n=0,t=e.orders.attr();$.each(t.typeObj,function(t,r){$.each(r,function(r,o){var s=0,a=0,i=0,c=0,l=0,d=0,p=0,u=0,m=0;$.each(o.itemObj,function(n,f){if(2==o.type){var g=e.getNumRegion(f.priceList),h=g.minQuantity,b=g.maxQuantity;f.quantity=f.quantity>b?b:f.quantity,f.quantity=f.quantity<h?h:f.quantity,f.quantity=f.quantity>f.stock?f.stock:f.quantity,f.quantity=f.quantity>0?f.quantity:1,e.orders.typeObj[t][r].itemObj[n].attr("quantity",f.quantity),e.orders.typeObj[t][r].itemObj[n].attr("minQuantity",g.minQuantity),e.orders.typeObj[t][r].itemObj[n].attr("maxQuantity",g.maxQuantity);var v=e.getPriceList(f.priceList,f.quantity);e.orders.typeObj[t][r].itemObj[n].attr("price",v.price),e.orders.typeObj[t][r].itemObj[n].attr("vipPrice",v.vipPrice),e.orders.typeObj[t][r].itemObj[n].attr("realPrice",v.realPrice),e.orders.typeObj[t][r].itemObj[n].attr("realVipPrice",v.realVipPrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackPrice",f.itemSpecs.welfarePrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackVipPrice",0),e.orders.typeObj[t][r].itemObj[n].attr("rakebackRealPrice",f.itemSpecs.welfarePrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackRealVipPrice",0),e.orders.typeObj[t][r].itemObj[n].attr("stock",f.stock>0?f.stock:0),e.isFirst&&(e.isFirst=!1,e.orders.typeObj[t][r].itemObj[n].attr("selected",0!==f.status&&f.stock>0&&f.stock>=h)),f.selected&&0!==f.status&&f.stock>0&&(s+=f.weight*f.quantity,a+=v.price*f.quantity,i+=v.vipPrice*f.quantity,c+=v.realPrice*f.quantity,l+=v.realVipPrice*f.quantity,d+=f.itemSpecs.welfarePrice*f.quantity,p+=0*f.quantity,u+=f.itemSpecs.welfarePrice*f.quantity,m+=0*f.quantity),h&&b&&h!==-1/0&&b!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前允许购买量为: "+h+"~"+b):h&&h!==-1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最小购买量为: "+h):b&&b!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最大购买量为: "+b):e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","")}}),2==t&&(e.orders.typeObj[t][r].attr("supplierWeight",1*s),e.orders.typeObj[t][r].attr("supplierPrice",1*a),e.orders.typeObj[t][r].attr("supplierVipPrice",1*i),e.orders.typeObj[t][r].attr("supplierRealPrice",1*c),e.orders.typeObj[t][r].attr("supplierRealVipPrice",1*l),e.orders.typeObj[t][r].attr("rakebackSupplierPrice",1*d),e.orders.typeObj[t][r].attr("rakebackSupplierVipPrice",1*p),e.orders.typeObj[t][r].attr("rakebackSupplierRealPrice",1*u),e.orders.typeObj[t][r].attr("rakebackSupplierRealVipPrice",1*m)),n+=u<d?u:d})}),e.orders.attr("orderNormalTotalPrice",n)},setCrossTotalPrice:function(){var e=this,n=0,t=e.orders.attr();$.each(t.typeObj,function(t,r){$.each(r,function(r,o){var s=0,a=0,i=0,c=0,l=0,d=0,p=0,u=0,m=0;$.each(o.itemObj,function(n,f){if(0==o.type){var g=e.getNumRegion(f.priceList),h=g.minQuantity,b=g.maxQuantity;f.quantity=f.quantity>b?b:f.quantity,f.quantity=f.quantity<h?h:f.quantity,f.quantity=f.quantity>f.stock?f.stock:f.quantity,f.quantity=f.quantity>0?f.quantity:1,e.orders.typeObj[t][r].itemObj[n].attr("quantity",f.quantity),e.orders.typeObj[t][r].itemObj[n].attr("minQuantity",g.minQuantity),e.orders.typeObj[t][r].itemObj[n].attr("maxQuantity",g.maxQuantity);var v=e.getPriceList(f.priceList,f.quantity);e.orders.typeObj[t][r].itemObj[n].attr("price",v.price),e.orders.typeObj[t][r].itemObj[n].attr("vipPrice",v.vipPrice),e.orders.typeObj[t][r].itemObj[n].attr("realPrice",v.realPrice),e.orders.typeObj[t][r].itemObj[n].attr("realVipPrice",v.realVipPrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackPrice",f.itemSpecs.welfarePrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackVipPrice",0),e.orders.typeObj[t][r].itemObj[n].attr("rakebackRealPrice",f.itemSpecs.welfarePrice),e.orders.typeObj[t][r].itemObj[n].attr("rakebackRealVipPrice",0),e.orders.typeObj[t][r].itemObj[n].attr("stock",f.stock>0?f.stock:0),e.isFirst&&(e.isFirst=!1,e.orders.typeObj[t][r].itemObj[n].attr("selected",0!==f.status&&f.stock>0&&f.stock>=h)),f.selected&&0!==f.status&&f.stock>0&&(s+=f.weight*f.quantity,a+=v.price*f.quantity,i+=v.vipPrice*f.quantity,c+=v.realPrice*f.quantity,l+=v.realVipPrice*f.quantity,d+=f.itemSpecs.welfarePrice*f.quantity,p+=0*f.quantity,u+=f.itemSpecs.welfarePrice*f.quantity,m+=0*f.quantity),h&&b&&h!==-1/0&&b!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前允许购买量为: "+h+"~"+b):h&&h!==-1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最小购买量为: "+h):b&&b!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最大购买量为: "+b):e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","")}}),0==t&&(e.orders.typeObj[t][r].attr("supplierWeight",1*s),e.orders.typeObj[t][r].attr("supplierPrice",1*a),e.orders.typeObj[t][r].attr("supplierVipPrice",1*i),e.orders.typeObj[t][r].attr("supplierRealPrice",1*c),e.orders.typeObj[t][r].attr("supplierRealVipPrice",1*l),e.orders.typeObj[t][r].attr("rakebackSupplierPrice",1*d),e.orders.typeObj[t][r].attr("rakebackSupplierVipPrice",1*p),e.orders.typeObj[t][r].attr("rakebackSupplierRealPrice",1*u),e.orders.typeObj[t][r].attr("rakebackSupplierRealVipPrice",1*m)),n+=u<d?u:d})}),e.orders.attr("orderCrossTotalPrice",n)},setOrderAllSelect:function(){var e=this,n=e.orders.attr(),t=this.config.attr("optionsOpen"),r=n.quantity,o=!0;$.each(n.typeObj,function(n,s){$.each(s,function(e,n){$.each(n.itemObj,function(e,n){if(!n.selected&&(0!==n.status&&n.stock>0&&n.stock>=n.minQuantity||t))return o=!1,!1;n.selected||!(0===n.status||n.stock<=0||n.stock<n.minQuantity)||t||(r-=1)})}),e.orders.attr("allSelected",o&&!!r)})},setOrderOneSelect:function(){var e=this,n=this.orders.attr(),t=n.quantity,r=!1;$.each(n.typeObj,function(n,o){$.each(o,function(t,o){$.each(o.itemObj,function(o,s){var a=e.orders.typeObj[n][t].itemObj[o].attr("quantity");if(s.selected&&a)return r=!0,!1})}),e.orders.attr("oneSelected",r&&!!t)})},setOrderSelectedCount:function(){var e=this.orders.attr(),n=0;$.each(e.typeObj,function(e,t){$.each(t,function(e,t){$.each(t.itemObj,function(e,t){t.selected&&(n+=1)})})}),this.orders.attr("selectedCount",n)},getNumRegion:function(e){var n={},t=[],r=[],o=!1;return $.each(e,function(e,n){var s=n.min?n.min:0,a=n.max?n.max:Number.POSITIVE_INFINITY;t.push(a),r.push(s),o=!0}),o?(n.minQuantity=Math.min.apply(Math,r),n.maxQuantity=Math.max.apply(Math,t),n):{minQuantity:0,maxQuantity:Number.POSITIVE_INFINITY}},getPriceList:function(e,n){var t={},r={},o=[],s=[],a=[],i=[],c=[],l=[],d=[],p=!1;return $.each(e,function(e,n){var t=n.min?n.min:0,r=n.max?n.max:Number.POSITIVE_INFINITY,u=n.price||0===n.price?(1*n.price).toFixed(2):null,m=n.vipPrice||0===n.vipPrice?(1*n.vipPrice).toFixed(2):null,f=u?n.discount?(n.price*n.discount/10).toFixed(2):(1*n.price).toFixed(2):null,g=m?n.discount?(n.vipPrice*n.discount/10).toFixed(2):(1*n.vipPrice).toFixed(2):null;o.push({prices:{price:u,vipPrice:m,realPrice:f,realVipPrice:g},min:t,max:r}),a.push(t),s.push(r),i.push(u),c.push(m),l.push(f),d.push(g),p=!0}),p?(r.min=Math.min.apply(Math,a),r.max=Math.max.apply(Math,s),r.minPrice=Math.min.apply(Math,i),r.vipMinPrice=Math.min.apply(Math,c),r.realMinPrice=Math.min.apply(Math,l),r.realVipMinPrice=Math.min.apply(Math,d),r.maxPrice=Math.max.apply(Math,i),r.vipMaxPrice=Math.max.apply(Math,c),r.realMaxPrice=Math.max.apply(Math,l),r.realVipMaxPrice=Math.max.apply(Math,d),n<r.min?{price:r.maxPrice,vipPrice:r.vipMaxPrice,realPrice:r.realMaxPrice,realVipPrice:r.realVipMaxPrice}:n>r.max?{price:r.minPrice,vipPrice:r.vipMinPrice,realPrice:r.realMinPrice,realVipPrice:r.realVipMinPrice}:($.each(o,function(e,r){if(n>=r.min&&n<=r.max)return t={price:r.prices.price,vipPrice:r.prices.vipPrice,realPrice:r.prices.realPrice,realVipPrice:r.prices.realVipPrice},!1}),t)):{price:null,vipPrice:null,realPrice:null,realVipPrice:null}}},events:{inserted:function(){this.element.find(".component-shoppingCart-ordersDetails    .goodsList ").find(".controlGroup").css("transform","translate3d(748px, 0, 0)")},removed:function(){}}})}),define("text!modular/template/template-orderConfirm-1.mustache",[],function(){return'<div class="component-orderConfirm-content">\r\n    {{#notShow}}\r\n        <div class="component-orderConfirm-prompt">\r\n            <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n            <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n        </div>\r\n    {{/notShow}}\r\n    {{#region.config.address}}\r\n        <a href="/address-manage.html?formOrder=1&jumpUrl={{region.config.pathUrl}}" target="_self" class="component-orderConfirm-deliveryInfo">\r\n        <span class="textGroup">\r\n            <span class="text delivery-name">\r\n                <span class="name" style="letter-spacing:9px;">收货人</span>\r\n                <span class="value">{{receiveName}}</span>\r\n            </span>\r\n            <span class="text delivery-iphone">\r\n                <span class="name">联系电话</span>\r\n                <span class="value">{{receivePhone}}</span>\r\n            </span>\r\n            <span class="text delivery-address">\r\n                <span class="name">收货地址</span>\r\n                <span class="value">{{province}}{{city}}{{area}}{{address}}</span>\r\n            </span>\r\n        </span>\r\n        </a>\r\n    {{/region.config.address}}\r\n    {{spoceOrder region.response.ordersInfo}}\r\n    {{#region.response.ordersInfo}}\r\n        <div class="component-orderConfirm-orderDetails">\r\n            {{#each typeObj}}\r\n                {{#each .}}\r\n                    <div class="goodsList" type="{{type}}" supplierId="{{supplierId}}">\r\n                        <div class="header">\r\n                            <span class="circle"></span>\r\n                            <span class="text">仓库: {{returnSupplierName supplierName}}{{#if typeName}} ---- {{typeName}}{{/if}}</span>\r\n                            <span class="icon"></span>\r\n                        </div>\r\n                        <div class="body">\r\n                            {{#each itemObj}}\r\n                                <div class="itemList" itemId="{{itemId}}" goodsId="{{goodsId}}">\r\n                                    <span class="commodity-info">\r\n                                        <span class="commodity-img">\r\n                                            {{#if itemImg}}\r\n                                                <img src="{{{itemImg}}}" alt="{{goodsName}}">\r\n                                            {{else}}\r\n                                                <img src="/images/platform/account/default_img.jpg" alt="{{goodsName}}">\r\n                                            {{/if}}\r\n                                            {{#returnIsShow type}}\r\n                                                <img class="corner_mark" src="{{returnImgSrc type}}" alt="福利商城">\r\n                                            {{/returnIsShow}}\r\n                                        </span>\r\n                                        <span class="commodity-description">\r\n                                            <span class="commodity-name">\r\n                                                <span class="text">{{goodsName}}</span>\r\n                                            </span>\r\n                                            {{#info}}\r\n                                                <span class="commodity-specifications">\r\n                                                    {{#returnSpec info}}\r\n                                                       <span class="name">规格</span>\r\n                                                       <span class="value">{{#each .}}{{.}}、 {{/each}}</span>\r\n                                                    {{/returnSpec}}\r\n                                                </span>\r\n                                            {{/info}}\r\n                                            {{#carton}}\r\n                                                <span class="commodity-gauge">\r\n                                                    <span class="text">箱规: {{carton}}</span>\r\n                                                </span>\r\n                                            {{/carton}}\r\n                                            {{#notShow}}\r\n                                                <span class="commodity-itemId">\r\n                                                    <span class="text">商品编号: {{itemId}}</span>\r\n                                                </span>\r\n                                            {{/notShow}}\r\n                                        </span>\r\n                                        <span class="commodity-number">\r\n                                           <span class="commodity-price">{{returnPrice rakebackRealPrice}}</span>\r\n                                           <span class="commodity-quantity">{{quantity}}</span>\r\n                                        </span>\r\n                                    </span>\r\n                                </div>\r\n                            {{/each}}\r\n                            <span class="commodity-priceInfo">\r\n                                <span class="commodity-taxFee">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{returnTaxFee taxFee type}}</span>\r\n                                        <span class="text">税费</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-postFee">\r\n                                    <span class="commodity-price">\r\n                                        {{{returnPostFee type postFee}}}\r\n                                        <span class="text">运费</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-totalPrice">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{totalPrice}}</span>\r\n                                        <span class="symbol">￥</span>\r\n                                        <span class="text">商品总价</span>\r\n                                    </span>\r\n                                </span>\r\n                            </span>\r\n                            <a class="commodity-coupon">\r\n                                <span class="text">优惠券<b>(优惠金额：<i>￥{{returnPrice discountPrice}})</i></b></span>\r\n                                <span class="icon icon_right icon_href"></span>\r\n                            </a>\r\n                            <span class="commodity-remark">\r\n                                <input type="text" placeholder="买家留言：选填，填写内容已和客服确认">\r\n                            </span>\r\n                            <span class="commodity-payInfo">\r\n                                <span class="commodity-actualPrice">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{orderDiscountPrice}}</span>\r\n                                        <span class="symbol">￥</span>\r\n                                        <span class="text">实际价格</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-payBtn">\r\n                                    {{#if committed}}\r\n                                        <span>{{commitText}}</span>\r\n                                    {{else}}\r\n                                        {{#if commitText}}\r\n                                            <span class="btn btn_commit">{{commitText}}</span>\r\n                                        {{else}}\r\n                                            <span class="btn btn_commit">提交订单</span>\r\n                                        {{/if}}\r\n                                    {{/if}}\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                {{/each}}\r\n            {{/each}}\r\n        </div>\r\n    {{/region.response.ordersInfo}}\r\n    <div region="payChoose"></div>\r\n</div>'}),define("modular/component/component-orderConfirm-1",["text!modular/template/template-orderConfirm-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderconfirm-1",template:e,helpers:{spoceOrder:function(e){this.orders=n.jsUtil.mustache.getContent(e),this.setTaxFee(),this.setOrderPrice()},returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)},returnPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)},returnSupplierName:function(e){var t="",r=n.jsUtil.mustache.getDepContent(e,"string");switch(r){case"天天仓":t="保税TT仓";break;case"粮油仓":t="保税LY仓";break;case"行云仓":t="保税XY仓";break;case"富邦仓":t="保税FB仓";break;default:t=r}return t},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnPostFee:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=n.jsUtil.mustache.getContent(t,"number");return"2"===r?'<span class="money">物流或快递</span><span class="symbol"></span>':'<span class="money">'+o.toFixed(2)+'</span><span class="symbol">￥</span>'},returnTaxFee:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 2==n.jsUtil.mustache.getContent(t,"number")?"总价已含税费":"￥"+r}},scope:{setTaxFee:function(){var e=this,n=e.orders.attr();$.each(n.typeObj,function(n,t){$.each(t,function(t,r){var o=0,s=0,a=0,i=r.postFee,c=r.supplierPrice;$.each(r.itemObj,function(l,d){if(0==d.freeTax&&0==r.type){var p=(d.quantity||0)*(d.price||0),u=p/c*i,m=(p+u)/(1-d.exciseTax)*d.exciseTax,f=(p+u+m)*d.incrementTax,g=.7*(m+f);e.orders.typeObj[n][t].itemObj[l].attr("taxFee",g),e.orders.typeObj[n][t].itemObj[l].attr("postFee",u),o+=g,s+=m,a+=f}}),e.orders.typeObj[n][t].attr("taxFee",1*o.toFixed(2)),e.orders.typeObj[n][t].attr("exciseTaxFee",1*s.toFixed(2)),e.orders.typeObj[n][t].attr("incrementTaxFee",1*a.toFixed(2))})})},setOrderPrice:function(){var e=this,n=this.orders.attr();$.each(n.typeObj,function(n,t){$.each(t,function(t,r){var o=1*r.rakebackSupplierRealPrice,s=r.discountPrice||0,a=1*r.taxFee+1*r.rakebackSupplierRealPrice+1*r.postFee;e.orders.typeObj[n][t].attr("totalPrice",(1*o).toFixed(2)),e.orders.typeObj[n][t].attr("orderPrice",(1*a).toFixed(2)),e.orders.typeObj[n][t].attr("orderDiscountPrice",(1*a-1*s).toFixed(2))})})}},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-orderList-1.mustache",[],function(){return'<div class="component-orderList-content">\r\n    <div class="component-orderList-stateGroup">\r\n        <div class = "stateGroup-content">\r\n            <span class="state state_all {{region.config.orderAll}}">\r\n                所有订单\r\n            </span>\r\n            <span class="state state_needPay {{region.config.orderNeedPay}}">\r\n            待付款\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needPay}}\r\n                        <span class="number">{{region.response.orderStatus.needPay}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_needDeliver {{region.config.orderNeedDeliver}}">\r\n            待发货\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needDeliver}}\r\n                        <span class="number">{{region.response.orderStatus.needDeliver}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_needReceive {{region.config.orderNeedReceive}}">\r\n            待收货\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needReceived}}\r\n                        <span class="number">{{region.response.orderStatus.needReceived}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_finished {{region.config.orderFinished}}">已完成</span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#returnList region.response.orderInfo.orderList}}\r\n        <div class="component-orderList-orderDetails" style="min-height:{{region.config.minHeight}}px">\r\n            {{#each .}}\r\n                <div class="orderItem">\r\n                    <div class="header">\r\n                        <span class="circle"></span>\r\n                        <span class="text">\r\n                        <span>订单号: {{orderId}}</span>\r\n                        <span>({{returnNewTime createTime}})</span>\r\n                    </span>\r\n                        <span class="state {{returnStatusClass status}}">\r\n                            {{returnStatusText status orderExpressList orderDetail.payType}}\r\n                        </span>\r\n                    </div>\r\n                    <div class="body">\r\n                        {{#each orderGoodsList}}\r\n                            <span class="order-commodity">\r\n                                <span class="commodity-img">\r\n                                    <a href="{{{href}}}" itemId="{{itemId}}">\r\n                                        {{#if itemImg}}\r\n                                            <img src="{{{itemImg}}}" alt="{{itemName}}">\r\n                                        {{else}}\r\n                                            <img src="/images/platform/account/default_img.jpg" alt="{{itemName}}">\r\n                                        {{/if}}\r\n                                        {{#returnIsShow orderFlag}}\r\n                                            <img class="corner_mark" src="{{returnImgSrc orderFlag}}" alt="福利商城">\r\n                                        {{/returnIsShow}}\r\n                                    </a>\r\n                                </span>\r\n                                <span class="commodity-info">\r\n                                    <span class="commodity-name">\r\n                                        <a href="{{{href}}}">\r\n                                            <span class="text">{{itemName}}</span>\r\n                                        </a>\r\n                                    </span>\r\n                                    {{#returnSpec itemInfo}}\r\n                                        <span class="commodity-itemId">\r\n                                            <span class="text">规格：{{#each .}}{{.}}、 {{/each}}</span>\r\n                                        </span>\r\n                                    {{/returnSpec}}\r\n                                </span>\r\n                                <span class="commodity-number">\r\n                                    <span class="commodity-price">{{returnPrice actualPrice}}</span>\r\n                                    <span class="commodity-quantity">{{itemQuantity}}</span>\r\n                                </span>\r\n                            </span>\r\n                        {{/each}}\r\n                        {{#orderDetail}}\r\n                            <span class="commodity-totalPrice">\r\n                            <span class="commodity-totalAmount {{^returnDeliverCls ../status}}isMiddle{{/returnDeliverCls}}">\r\n                                <span class="logistics">配送费:￥{{returnPrice postFee}}</span>\r\n                                <span class="taxFee">综合税:￥{{returnPrice taxFee}}</span>\r\n                                <span class="money">{{returnPrice payment}}</span>\r\n                                <span class="symbol">￥</span>\r\n                                <span class="text">总金额</span>\r\n                            </span>\r\n                            <span class="commodity-deliverDes">\r\n                                {{returnDeliverDes ../createType ../status orderFlag}}\r\n                            </span>\r\n                        </span>\r\n                        {{/orderDetail}}\r\n                        <span class="order-btnControl">\r\n                        <span class="btnBox">\r\n                            {{#returnBtnDelivery status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_confirmDelivery">确认收货</a>\r\n                            {{/returnBtnDelivery}}\r\n                            {{#returnBtnToPay status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_toPay">立即付款</a>\r\n                            {{/returnBtnToPay}}\r\n                            {{#returnBtnRefund status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_refund">申请退款</a>\r\n                            {{/returnBtnRefund}}\r\n                            {{#returnBtnDel status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_delOrder">删除订单</a>\r\n                            {{/returnBtnDel}}\r\n                            {{#returnBtnCancelOrder status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_cancelOrder">取消订单</a>\r\n                            {{/returnBtnCancelOrder}}\r\n                            {{#returnBtnCloseOrder status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_closeOrder">关闭订单</a>\r\n                            {{/returnBtnCloseOrder}}\r\n                            {{#returnBtnLogistics status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_viewLogistics">查看物流</a>\r\n                            {{/returnBtnLogistics}}\r\n                            <a href="/orderDetail.html?orderId={{orderId}}" target="_self" class="btn btn_viewDetail">查看详情</a>\r\n                        </span>\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="isLoading">\r\n            <div class="component-load-text">\r\n                <span>请下拉加载...</span>\r\n            </div>\r\n        </div>\r\n        <div region="payChoose"></div>\r\n    {{/returnList}}\r\n\r\n    {{^returnList region.response.orderInfo.orderList}}\r\n        <div class="order-empty">\r\n            <img src="/images/platform/order/empty.png" alt="福利商城">\r\n            <span class="text">还没有这类订单呢！</span>\r\n        </div>\r\n    {{/returnList}}\r\n\r\n</div>'}),define("modular/component/component-orderList-1",["text!modular/template/template-orderList-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderlist-1",template:e,helpers:{returnList:function(e,t){var r=n.jsUtil.mustache.getDepContent(e);return $.isArray(r)&&r.length>0?t.fn(r):t.inverse(r)},returnNewTime:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,10):""},returnDeliverCls:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 0===r||1===r||11===r||12===r||2===r||3===r||4===r||5===r?t.fn(this):t.inverse(this)},returnDeliverDes:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),s=n.jsUtil.mustache.getContent(t,"number"),a=n.jsUtil.mustache.getContent(r,"number");if(0==a){if(0===s)return 4!==o?"订单付款成功后，我们将在两个工作日之内尽快给您发货！":"预售产品我们会在付款成功后给您安排发货，请您耐心等待！";if(1===s||11===s||12===s||2===s||3===s||4===s||5===s)return 4!==o?"付款成功，我们将在两个工作日之内尽快给您发货！":"付款成功, 预售产品我们会尽快给您安排发货，请您耐心等待！"}else if(2==a){if(0===s)return 4!==o?"订单付款成功后，我们将在72小时之内尽快给您发货！":"预售产品我们会在付款成功后给您安排发货，请您耐心等待！";if(1===s||11===s||12===s||2===s||3===s||4===s||5===s)return 4!==o?"付款成功，我们会在72小时内将货物发出，24小时后反馈物流单号!":"付款成功, 预售产品我们会尽快给您安排发货，请您耐心等待！"}},returnStatusClass:function(e){if(6===n.jsUtil.mustache.getContent(e,"number"))return"state_finished"},returnStatusText:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),s=n.jsUtil.mustache.getDepContent(t,"object");return n.jsUtil.mustache.getDepContent(r,"number"),0===o?"待付款":1===o||11===o||12===o?"已支付":2===o||3===o||4===o||5===o?"待发货":6===o?"待收货":7===o?"交易完成":8===o?"已退款":9===o?"交易关闭":21===o?"退款中":99===o?s[0].status:void 0},returnItemInfo:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string");return r=r?JSON.parse(r):null,"object"==typeof r?t.fn(r):t.inverse(r)},returnPrice:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t>=0?t.toFixed(2):null},returnBtnDelivery:function(e,t){if(6===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnBtnRefund:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(0!==r&&7!==r&&8!==r&&9!==r&&21!==r)return t.fn(t.context||this)},returnBtnDel:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(7===r||8===r||9===r)return t.fn(t.context||this)},returnBtnCancelOrder:function(e,t){n.jsUtil.mustache.getContent(e,"number")},returnBtnCloseOrder:function(e,t){if(0===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnBtnLogistics:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(6===r||7===r)return t.fn(t.context||this)},returnBtnToPay:function(e,t){if(0===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnSpec:function(e,t){
var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-orderDetail-1.mustache",[],function(){return'{{#region.response.orderInfo}}\r\n    <div class="component-orderDetail-content">\r\n        <div class="component-orderDetail-thanks">\r\n            <span class="icon icon_ok"></span>\r\n            <span class="text">\r\n                    感谢您的使用，期待再次为您服务！\r\n                </span>\r\n        </div>\r\n        <div class="component-orderDetail-deliveryInfo">\r\n            <span class="icon icon_address"></span>\r\n            <span class="textGroup">\r\n                    <span class="text delivery-title">\r\n                        <span class="name delivery-name font_blod">{{orderDetail.receiveName}}</span>\r\n                        <span class="value delivery-iphone font_blod">{{orderDetail.receivePhone}}</span>\r\n                    </span>\r\n                    <span class="text delivery-address">\r\n                        <span class="name">收货地址</span>\r\n                        <span class="value">\r\n                            {{orderDetail.receiveProvince}}{{orderDetail.receiveCity}}{{orderDetail.receiveArea}}{{orderDetail.receiveAddress}}\r\n                        </span>\r\n                    </span>\r\n                </span>\r\n        </div>\r\n        <div class="component-orderDetail-log">\r\n            <span class="text order-code">\r\n                <span class="name">订单编码</span>\r\n                <span class="value">{{orderId}}</span>\r\n            </span>\r\n            <span class="text logisticsFee">\r\n                <span class="name">订单时间</span>\r\n                <span class="value">{{returnNewTime2 createTime}}</span>\r\n            </span>\r\n            <span class="text order-state">\r\n                <span class="name">订单状态</span>\r\n                <span class="value">{{returnOrderState status orderExpressList}}</span>\r\n                {{#returnPay status}}\r\n                    <span class="btnBox">\r\n                       <span class="btn btn_toPay" orderId="{{orderId}}">去支付</span>\r\n                    </span>\r\n                {{/returnPay}}\r\n            </span>\r\n        </div>\r\n        {{#returnPaymentMethod status orderDetail.payType}}\r\n            <div class="component-orderDetail-paymentMethod">\r\n                <span class="name">支付方式</span>\r\n                <span class="value">{{paymentMethod}}</span>\r\n            </div>\r\n        {{/returnPaymentMethod}}\r\n        <div class="component-orderDetail-show">\r\n            <div class="orderItem">\r\n                <div class="header">\r\n                    <span class="circle"></span>\r\n                    <span class="text">\r\n                        <span>订单号: {{orderId}}</span>\r\n                        <span>({{returnNewTime createTime}})</span>\r\n                    </span>\r\n                    <span class="btnBox">\r\n                        {{#returnLogistics status}}\r\n                            <span class="btn btn_viewLogistics" orderId="{{orderId}}">看物流</span>\r\n                        {{/returnLogistics}}\r\n                    </span>\r\n                </div>\r\n                <div class="body">\r\n                    {{#each orderGoodsList}}\r\n                        <span class="commodity-info">\r\n                            <span class="commodity-img">\r\n                                <a href="{{{href}}}" itemId="{{itemId}}">\r\n                                  {{#if itemImg}}\r\n                                      <img src="{{{itemImg}}}" alt="{{itemName}}">\r\n                                  {{else}}\r\n                                      <img src="/images/platform/account/default_img.jpg" alt="{{itemName}}">\r\n                                  {{/if}}\r\n                                  {{#returnIsShow orderFlag}}\r\n                                      <img class="corner_mark" src="{{returnImgSrc orderFlag}}" alt="福利商城">\r\n                                  {{/returnIsShow}}\r\n                                </a>\r\n                            </span>\r\n                            <span class="commodity-info">\r\n                                    <span class="commodity-name">\r\n                                        <span class="text">{{itemName}}</span>\r\n                                    </span>\r\n                                    {{#returnSpec itemInfo}}\r\n                                        <span class="commodity-itemId">\r\n                                            <span class="text">规格：{{#each .}}{{.}}、 {{/each}}</span>\r\n                                        </span>\r\n                                    {{/returnSpec}}\r\n                                </span>\r\n                            <span class="commodity-number">\r\n                                <span class="commodity-price">{{returnPrice actualPrice}}</span>\r\n                                <span class="commodity-quantity">{{itemQuantity}}</span>\r\n                            </span>\r\n                        </span>\r\n                    {{/each}}\r\n                    <span class="commodity-priceList">\r\n                        <span class="text shopTotalPrice">\r\n                            <span class="value">￥{{returnShopPrice orderGoodsList}}</span>\r\n                            <span class="name">商品总额</span>\r\n                        </span>\r\n                        <span class="text shopTotalPrice">\r\n                            <span class="value">￥{{returnTaxFee orderDetail.taxFee}}</span>\r\n                            <span class="name">税费总额</span>\r\n                        </span>\r\n                        <span class="text logisticsFee">\r\n                            <span class="value">￥{{returnPostFee orderDetail.postFee}}</span>\r\n                            <span class="name" style="letter-spacing:9px;">物流费</span>\r\n                        </span>\r\n                    </span>\r\n                    <span class="commodity-totalPrice">\r\n                        <span class="commodity-attention"></span>\r\n                        <span class="commodity-totalAmount">\r\n                            <span class="money">{{orderDetail.payment}}</span>\r\n                            <span class="symbol">￥</span>\r\n                            <span class="text">金额</span>\r\n                        </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div region="payChoose"></div>\r\n{{/region.response.orderInfo}}'}),define("modular/component/component-orderDetail-1",["text!modular/template/template-orderDetail-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderdetail-1",template:e,helpers:{returnNewTime:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,10):""},returnNewTime2:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,19):""},returnItemInfo:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string");return r=r?JSON.parse(r):null,"object"==typeof r?t.fn(r):t.inverse(r)},returnPrice:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t?JSON.parse(t):null,t>=0?t.toFixed(2):null},returnShopPrice:function(e){var t=0,r=n.jsUtil.mustache.getDepContent(e,"object");return $.each(r,function(e,n){t+=n.actualPrice*n.itemQuantity}),t.toFixed(2)},returnTaxFee:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t>0?t:0,t.toFixed(2)},returnPostFee:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t>0?t:0,t.toFixed(2)},returnOrderState:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getDepContent(t,"object");return 0===r?"待付款":1===r||11===r||12===r?"已付款":2===r||3===r||4===r||5===r||6===r?"待收货":7===r?"交易完成":8===r?"已退款":9===r?"交易关闭":21===r?"退款中":99===r?o[0].status:void 0},returnPaymentMethod:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),s=n.jsUtil.mustache.getContent(t,"number"),a=1===s?"微信支付":2===s?"支付宝":3===s?"银联支付":"";return 0!==o&&8!==o?r.fn({paymentMethod:a}):r.inverse({paymentMethod:a})},returnPay:function(e,t){return 0===n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnLogistics:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(6===r||7===r)return t.fn(t.context||this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-logistics-1.mustache",[],function(){return'<div class="component-logistics-content">\r\n    {{#each region.response.orderInfo.orderExpressList}}\r\n        <div class="component-logistics-item">\r\n            <div class="component-logistics-basic {{#if region.config.isMore}}isMore{{/if}}">\r\n                <div class="commodityDescription">\r\n                    {{#if region.config.isMore}}\r\n                        <div class="text shop">\r\n                            <div class="name">商品名称</div>\r\n                            <div class="value">{{itemName}}</div>\r\n                        </div>\r\n                    {{/if}}\r\n                    <div class="text code">\r\n                        <div class="name">运单编号</div>\r\n                        <div class="value">{{#if expressId}}{{expressId}}{{else}}暂无{{/if}}</div>\r\n                    </div>\r\n                    <div class="text carrier">\r\n                        <div class="name">承运信息</div>\r\n                        <div class="value">{{#if expressName}}{{expressName}}{{else}}暂无{{/if}}</div>\r\n                    </div>\r\n                </div>\r\n                {{#returnLength region.config.length}}\r\n                    <span class="commodityBtnBox">\r\n                        <span class="btn btn_open" index="{{@index}}">展开详情</span>\r\n                    </span>\r\n                {{/returnLength}}\r\n            </div>\r\n            {{#if infoArr}}\r\n                <div class="component-logistics-details" {{#returnLength region.config.length}}style="display:none;"{{/returnLength}}>\r\n                    {{#each infoArr}}\r\n                        <span class="logisticsItem newest">\r\n                            <span class="text">\r\n                                <span class="description">\r\n                                    {{AcceptStation}}\r\n                                </span>\r\n                                <span class="time">\r\n                                    {{AcceptTime}}\r\n                                </span>\r\n                            </span>\r\n                        </span>\r\n                    {{/each}}\r\n                </div>\r\n            {{/if}}\r\n        </div>\r\n    {{/each}}\r\n</div>'}),define("modular/component/component-logistics-1",["text!modular/template/template-logistics-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-logistics-1",template:e,helpers:{returnLength:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return r>1?t.fn(this):t.inverse(r)}},scope:{},events:{inserted:function(){},removed:function(){},".component-logistics-item .component-logistics-basic .btn_open touchend":function(e){var n=this,t=$(e),r=n.element,o=t.attr("index"),s=t.parents(".component-logistics-item"),a=$(window).scrollTop(),i=155*o;r.find(".component-logistics-basic .btn").text("展开详情"),r.find(".component-logistics-basic .btn").addClass("btn_open"),r.find(".component-logistics-basic .btn").removeClass("btn_close"),r.find(".component-logistics-details").css({display:"none"}),s.find(".component-logistics-details").css({display:"block"}),a>i&&$("html,body").animate({scrollTop:i-10}),t.removeClass("btn_open"),t.addClass("btn_close"),t.text("关闭详情")},".component-logistics-item .component-logistics-basic .btn_close touchend":function(e){var n=this,t=$(e),r=n.element,o=t.attr("index"),s=$(window).scrollTop(),a=155*o;r.find(".component-logistics-basic .btn").text("展开详情"),r.find(".component-logistics-basic .btn").addClass("btn_open"),r.find(".component-logistics-basic .btn").removeClass("btn_close"),r.find(".component-logistics-details").css({display:"none"}),s>a&&$("html,body").animate({scrollTop:a-10})}}})}),define("text!modular/template/template-alert-discount-1.mustache",[],function(){return'{{#region.config.isShow}}\r\n<div class="component-alert-discount-content">\r\n    <div class="component-alert-discount-alert">\r\n        <div class="msg-btn"></div>\r\n        <div class="cancel-btn"></div>\r\n    </div>\r\n</div>\r\n{{/region.config.isShow}}'}),define("modular/component/component-alert-discount-1",["text!modular/template/template-alert-discount-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-alert-discount-1",template:e,helpers:{},scope:{},events:{inserted:function(){}}})}),define("text!modular/template/template-discount-1.mustache",[],function(){return'<div class="component-discount-content">\r\n\r\n    {{#retrunStatus region.config.type "personalCenter"}}\r\n        <div class="component-discount-type">\r\n            <ul>\r\n                <li class="{{addElementClass region.config.status 0 "active"}}" type="0">可使用</li>\r\n                <li class="{{addElementClass region.config.status 1 "active"}}" type="1">已使用</li>\r\n            </ul>\r\n        </div>\r\n        {{#returnObject region.response}}\r\n            <div class="component-discount-list personalCenter">\r\n                {{#each region.response}}\r\n                    <div class="list-item {{returnType type region.config.status}}">\r\n                        <ul>\r\n                            <li>{{returnPrice rule.deductibleValue rule.valueType}}</li>\r\n                            <li>{{name}}</li>\r\n                            <li>{{returnRegion rule.range}}</li>\r\n                            <li>{{returnTime startTime endTime}}</li>\r\n                        </ul>\r\n                        {{#retrunRule rule.range 0}}\r\n                            <div class="availableAll">\r\n                                <b>前去购买</b>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 1}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 2}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 3}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 4}}\r\n                            <div class="lookGoodsDetail" index="{{@index}}">\r\n                                <b>查看商品</b>\r\n                                <i><span>注:</span><span>随机跳转至可使用该优惠券的某商品详情</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                    </div>\r\n                {{/each}}\r\n            </div>\r\n        {{/returnObject}}\r\n        {{^returnObject region.response}}\r\n            <div class="component-discount-list nothing">\r\n                <span class="text">{{returnText region.config.status}}</span>\r\n            </div>\r\n        {{/returnObject}}\r\n    {{/retrunStatus}}\r\n\r\n    {{#retrunStatus region.config.type "orderConfirm"}}\r\n        {{#returnOrder region.response.orderDiscount}}\r\n            <div class="component-discount-list orderConfirm">\r\n                {{#returnInfo region.response.orderDiscount.info region.config.showDiscount}}\r\n                    {{#each .}}\r\n                        {{#each .}}\r\n                            <div discountType="{{../@key}}" couponId="{{couponId}}" class="list-item\r\n                                {{returnType type}}\r\n                                {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}\r\n                                {{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">\r\n                                <ul>\r\n                                    <li>{{returnPrice rule.deductibleValue rule.valueType}}</li>\r\n                                    <li>{{name}}</li>\r\n                                    <li>{{returnRegion rule.range}}</li>\r\n                                    <li>{{returnTime startTime endTime}}</li>\r\n                                </ul>\r\n                                {{#retrunRule rule.superposition 1}}\r\n                                    <div class="superposition">\r\n                                        <b class="{{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}">正在使用</b>\r\n                                        <b class="{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">已被使用</b>\r\n                                        <b class="\r\n                                             {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}\r\n                                         ">可叠加使用</b>\r\n                                    </div>\r\n                                {{/retrunRule}}\r\n                                {{#retrunRule rule.superposition 0}}\r\n                                    <div class="unSuperposition">\r\n                                        <b class="{{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}">正在使用</b>\r\n                                        <b class="{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">已被使用</b>\r\n                                        <b class="\r\n                                             {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}\r\n                                             {{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}\r\n                                         ">不可叠加使用</b>\r\n                                    </div>\r\n                                {{/retrunRule}}\r\n                            </div>\r\n                        {{/each}}\r\n                    {{/each}}\r\n                {{/returnInfo}}\r\n            </div>\r\n        {{/returnOrder}}\r\n    {{/retrunStatus}}\r\n\r\n</div>'}),define("modular/component/component-discount-1",["text!modular/template/template-discount-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-discount-1",template:e,helpers:{retrunStatus:function(e,t,r){return n.jsUtil.mustache.getContent(e,"string")===n.jsUtil.mustache.getContent(t,"string")?r.fn(this):r.inverse(this)},returnOrder:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");return $.isEmptyObject(r)?t.inverse(this):t.fn(this)},returnType:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=n.jsUtil.mustache.getContent(t,"number"),s="discount_1_normal";return"新人券"===r?(0===o&&(s="discount_2_normal normal"),1===o&&(s="discount_2_lose lose")):(0===o&&(s="discount_1_normal normal"),1===o&&(s="discount_1_lose lose")),s},returnPrice:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return"1"===n.jsUtil.mustache.getContent(t,"string")?"￥"+r.toFixed(2):r+"折"},returnRegion:function(e){var t=n.jsUtil.mustache.getDepContent(e,"string");return"0"===t?"适用范围：全场通用":"1"===t||"2"===t||"3"===t?"适用范围：部分商品":"适用范围：特定商品"},returnTime:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=n.jsUtil.mustache.getContent(t,"number");return r&&o?"使用时间："+r+"-"+o:r?"开始时间："+r:o?"截至时间："+o:"使用时间：无期限"},retrunRule:function(e,t,r){return n.jsUtil.mustache.getDepContent(e,"string")===n.jsUtil.mustache.getDepContent(t,"string")?r.fn(this):r.inverse(this)},returnText:function(e){var t=n.jsUtil.mustache.getDepContent(e,"string");return"0"===t?"你好！目前暂无可使用的优惠券！":"1"===t?"你好！目前暂无已使用的优惠券！":void 0},returnInfo:function(e,t,r){var o={},s=n.jsUtil.mustache.getDepContent(e,"object"),a=n.jsUtil.mustache.getDepContent(t,"object");return $.each(s,function(e,n){$.each(n.pool,function(n,t){o[e]=o[e]||[],o[e].push(a[e].pool[t])})}),r.fn(o)},returnSelect:function(e,t,r,o){var s=n.jsUtil.mustache.getDepContent(e,"string"),a=n.jsUtil.mustache.getDepContent(t,"string"),i=n.jsUtil.mustache.getDepContent(r,"object"),c=n.jsUtil.mustache.getDepContent(o,"string");return"superposition"===s?-1!==$.inArray(a,i)?"select":"":"unSuperposition"===s?a===c?"select":"":void 0},returnLose:function(e,t,r,o,s){var a=n.jsUtil.mustache.getDepContent(e,"string"),i=n.jsUtil.mustache.getDepContent(t,"string"),c=n.jsUtil.mustache.getDepContent(r,"object"),l=n.jsUtil.mustache.getDepContent(o,"string"),d=n.jsUtil.mustache.getDepContent(s,"object");if("superposition"===a){if(-1!==$.inArray(i,c))return"";if(-1!==$.inArray(i,Object.keys(d[a].chooseObj)))return"lose"}if("unSuperposition"===a){if(i===l)return"";if(-1!==$.inArray(i,Object.keys(d[a].chooseObj)))return"used";if(l&&"-1"!==l)return"lose"}}},scope:{},events:{inserted:function(e){},removed:function(){}}})}),define("text!modular/template/template-forgetPassword-1.mustache",[],function(){return'<div class="component-forgetPassword-content">\r\n    <div class="component-forgetPassword-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-forgetPassword-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <div class="component-forgetPassword-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <div class="component-forgetPassword-confirmPassword  {{confirmPassword_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="请再次确认密码..." can-value="region.request.confirmPassword"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-forgetPassword-forgetPasswordBtn {{forgetPasswordBtn_state}}">提交密码</a>\r\n</div>'}),define("modular/component/component-forgetPassword-1",["text!modular/template/template-forgetPassword-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-forgetpassword-1",template:e,helpers:{},scope:{account_state:"",validation_state:"",password_state:"",confirmPassword_state:"",forgetPasswordBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)},validateConfirmPassword:function(e,n){return""!==n.trim()&&e===n&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-forgetPassword-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-forgetPassword-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},"#confirmPassword blur":function(e){var n=this,t=$(e),r=n.element,o=r.find("#password");n.scope.validateConfirmPassword(o.val(),t.val())?n.scope.attr("confirmPassword_state",""):n.scope.attr("confirmPassword_state","state_error")},".component-forgetPassword-forgetPasswordBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur"),n.find("#validation").trigger("blur"),n.find("#confirmPassword").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state"),o="state_error"!==e.scope.attr("password_state"),s="state_error"!==e.scope.attr("confirmPassword_state");t&&r&&o&&s?e.scope.attr("forgetPasswordBtn_state",""):e.scope.attr("forgetPasswordBtn_state","state_error")}}})}),define("text!modular/template/template-pagination-1.mustache",[],function(){return'\r\n{{spcRegion region}}\r\n{{spcModule module}}\r\n{{#if region.response.pagination}}\r\n    {{#if region.response.pagination.totalRows}}\r\n        <div class="component-pagination-content">\r\n            <ul class ="pagination_ul">\r\n                <li class="pagination_page {{returnLose region.response.pagination.currentPage 1}}">\r\n                    <a class="pagination_btn prevBtn">上一页</a>\r\n                </li>\r\n                {{#regionProcessing region.response.pagination}}\r\n                    <li class="pagination_page">\r\n                        <select class="pagination_select">\r\n                            {{#pageList}}\r\n                                <option value ="{{index}}">第 {{index}} 页</option>\r\n                            {{/pageList}}\r\n                        </select>\r\n                    </li>\r\n                {{/regionProcessing}}\r\n                <li class="pagination_page {{returnLose region.response.pagination.currentPage region.response.pagination.totalPages}}">\r\n                    <a class="pagination_btn nextBtn">下一页</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    {{/if}}\r\n{{/if}}'}),define("modular/component/component-pagination-1",["text!modular/template/template-pagination-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-pagination-1",template:e,helpers:{spcRegion:function(e){this.region=n.jsUtil.mustache.getContent(e,"object")},spcModule:function(e){this.module=n.jsUtil.mustache.getContent(e,"object")},returnLose:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getContent(t,"number");return r&&r===o?"lose":""},regionProcessing:function(e,t){for(var r=[],o=n.jsUtil.mustache.getContent(e,"object"),s=(o.attr("currentPage"),1*o.attr("totalPages")),a=0;a<s;a++)r.push({index:a+1});return o.attr("pageList",r),t.fn(o)}},scope:{},events:{inserted:function(e){var n=this,t=$(e),r=n.scope.region||{},o=(r.response||{}).pagination,s=o&&o.attr("currentPage"),a=t.find(".pagination_select > option")[s-1];a&&(a.selected=!0)},".pagination_ul li:not(.lose):not(.active) > a.pagination_btn touchend":function(e){var n=this,t=$(e),r=n.scope.region,o=n.scope.module,s=r.response.pagination,a=1*s.attr("currentPage"),i=1*s.attr("totalPages");t.hasClass("prevBtn")?(a=a>1?1*a-1:1,s.attr("currentPage",1*a)):t.hasClass("nextBtn")&&(a=a<i?1*a+1:i,s.attr("currentPage",1*a)),r.config&&"object"==typeof r.config&&"function"==typeof r.config.eventFunc&&r.config.eventFunc(o,a)},".pagination_ul li > .pagination_select change":function(e){var n=this,t=$(e),r=n.scope.region,o=n.scope.module,s=1*t.find("option:selected").val();r.config&&"object"==typeof r.config&&"function"==typeof r.config.eventFunc&&r.config.eventFunc(o,s>0?s:1)}}})}),define("text!modular/template/template-pay-choose-1.mustache",[],function(){return'{{spoceConfig region.config}}\r\n<div class="component-pay-choose-content" style="display:{{#if region.config.payChooseShow}}block{{else}}none{{/if}}">\r\n    <div class="component-pay-choose-btnGroup">\r\n        <ul>\r\n            {{#returnShow "btn_wx"}}<li class="btn_wx">微信支付</li>{{/returnShow}}\r\n            {{#returnShow "btn_zfb"}}<li class="btn_zfb">支付宝支付</li>{{/returnShow}}\r\n            {{#notShow}}\r\n                {{#returnShow "btn_yl"}}<li class="btn_yl">银联支付</li>{{/returnShow}}\r\n            {{/notShow}}\r\n            <li class="btn_cancel">取消</li>\r\n        </ul>\r\n    </div>\r\n</div>'}),define("modular/component/component-pay-choose-1",["text!modular/template/template-pay-choose-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-pay-choose-1",template:e,helpers:{spoceConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object")},returnShow:function(e,t){var r=n.jsUtil.weChat.browser(),o=n.jsUtil.mustache.getContent(e,"string");return"btn_wx"===o?r?t.fn(this):t.inverse(this):"btn_zfb"===o?r?t.inverse(this):t.fn(this):"btn_yl"===o?t.fn(this):void 0}},scope:{},events:{inserted:function(){},removed:function(){},".component-pay-choose-btnGroup ul li touchend":function(){var e=this;if(n.jsEvent.touch.touchIsMoved)return null;e.scope.spcConfig.attr("payChooseShow",!1)},".component-pay-choose-btnGroup .btn_cancel touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.reject(),!1)},".component-pay-choose-btnGroup .btn_wx touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("weChatPay"),!1)},".component-pay-choose-btnGroup .btn_zfb touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("aliPay"),!1)},".component-pay-choose-btnGroup .btn_yl touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("unionPay"),!1)}}})}),define("text!modular/template/template-site-introduce-1.mustache",[],function(){
return'<div class="component-site-introduce-content">\r\n   <ul class="component-site-introduce-group">\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>跨境电商央企品牌</li>\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>供应链正关渠道直采</li>\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>品牌商品正品信赖</li>\r\n   </ul>\r\n</div>'}),define("modular/component/component-site-introduce-1",["text!modular/template/template-site-introduce-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-site-introduce-1",template:e,helpers:{},scope:{},events:{inserted:function(e){},removed:function(){}}})}),define("text!modular/template/template-scroll-top-1.mustache",[],function(){return'<div class="component-scroll-top-content">\r\n    <div class="scrollTop">\r\n        <img src="/images/platform/scroll/top.png" alt="福利商城">\r\n    </div>\r\n</div>'}),define("modular/component/component-scroll-top-1",["text!modular/template/template-scroll-top-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-scroll-top-1",template:e,helpers:{},scope:{},events:{inserted:function(){$(window).scrollTop()>=1500?$(this.element).find(".scrollTop").css("display","block"):$(this.element).find(".scrollTop").css("display","none")},"{window} scroll":function(){$(window).scrollTop()>=1500?$(this.element).find(".scrollTop").css("display","block"):$(this.element).find(".scrollTop").css("display","none")},".component-scroll-top-content .scrollTop touchend":function(){$("html,body").animate({scrollTop:0},500)}}})}),define("config.page.render",[],function(){"use strict";var e=window.capi.get(),n=$.each,t=$.when,r=$.extend,o=$.Deferred,s=$.isEmptyObject,a=$.isPlainObject,i=$.isFunction,c=$.isArray,l=$.inArray;return can.Control.extend({tags:{},region:{},config:{},request:{},response:{},renderData:{},sendArr:[],reload:!1,sendRequest:function(e,n,t){var s=this;return void 0===e?o().resolve():a(s.jsModel.path[e])?s.jsModel.send(e,r(!0,{},s.request[e],n||{}),t):o().reject()},setRenderData:function(e,n,t,r){var o=this,s=null,l=e.split("/"),d=l.shift()||"",p=l.shift()||"";o.renderData[d]||(o.renderData[d]={}),o.renderData[d][n]||(o.renderData[d][n]={});var u=o.renderData[d][n],m=i(u.attr),f=i(u),g=m?u.attr():f?u():u;p?a(g)&&(g[p]=t):g=t,s=r&&c(g)?new can.List(g):s,s=r&&a(g)?new can.Map(g):s,s=r&&!s?can.compute(g):s,o.renderData[d][n]=r?s:g,s=null,g=null},renderTemplate:function(e){var r=this,o=null,s=c(e),a=-1!==l("global",e);s&&a&&(e=[],e.unshift("global"),o=document.createDocumentFragment(),n(Object.keys(this.tags),function(n,t){"global"!==t&&e.push(t)})),t.apply(null,[].concat(r.queue)).done(function(){n(s?e:[],function(e,n){var t=r.tags[n],s="[region='"+n+"']",i=a?o.querySelector(s):r.element.find(s),c={module:r,root:r.renderData,region:r.renderData[n]},l="global"===n?o:i;null!==t&&void 0!==t&&n&&l&&(a?l.appendChild(can.mustache(t)(c)):l.html(can.mustache(t)(c)))}),s&&a&&r.element.html(o),"pending"===r.state.state()&&r.state.resolve()})},init:function(){this.jsUtil=e.jsUtil,this.jsModel=e.jsModel,this.jsEvent=e.jsEvent,this.modules=e.jsModular.modules,this.queue=e.jsEvent.page.state,this.state=e.jsEvent.page.state=o(),this.tags=r(!0,{global:{}},this.tags,this.options.tags),this.region=r(!0,{global:{}},this.region,this.options.region),this.config=r(!0,{global:{}},this.config,this.options.config),this.request=r(!0,{global:{}},this.request,this.options.request),this.response=r(!0,{global:{}},this.response,this.options.response),this.renderData=r(!0,{global:{}},this.renderData,this.options.renderData),this.sendArr=r(!0,[],this.sendArr,this.options.sendArr),this.reload=!0===this.reload||!0===this.options.reload,this.toRender(this.sendArr,[],Object.keys(this.tags),this.reload)},toRender:function(e,i,c,l){var d=this,p=!0,u=[],m=-1,f=o(),g=[].concat(e),h=[].concat(i),b=[].concat(c);return n(g,function(e,n){if("string"==typeof n&&n){var t=n.split("/"),r="string"==typeof t[0]&&t.shift()||"",i="string"==typeof t[0]&&t.shift()||"global",c="string"==typeof t[0]&&t.shift()||"",f=a(h[e])&&h[e]||{},g=s(d.response[i]);r&&(!1!==l||g)&&(u[++m]=o(),function(e){d.sendRequest(r,f,!0).done(function(n){var t=d.response[i];!a(t)&&(d.response[i]={}),!c&&(d.response[i]=n),c&&(d.response[i][c]=n),u[e].resolve()}).fail(function(){p=!1,u[e].resolve()})}(m))}}),t.apply(null,u).always(function(){var e={},n={},t={},o={config:d.config},s={request:d.request},a={response:d.response};r(!0,e,o,s,a),r(!0,n,o,s,a),r(!0,t,o,s,a),d.beforeFunc(b,e,p),d.renderFunc(b,n,p),d.afterFunc(b,t,p)}),d.renderState=f},beforeFunc:function(e,t,r){var o=this,s=o.region,d=c(e),p=l("global",e);d&&-1!==p&&(e.splice(p,1),e.unshift("global")),n(d?e:[],function(e,n){var r="object"==typeof n&&n,c=r?Object.keys(n)[0]:n;"string"==typeof c&&c&&o.tags[c]&&a(s[c])&&i(s[c].beforeFunc)&&s[c].beforeFunc(o,t)})},renderFunc:function(e,t,r){var o=this,s=[],i=c(e);$(function(){n(i?e.sort():[],function(e,n){var t="string"==typeof n&&n,r="object"==typeof n&&n,i=r?Object.keys(n)[0]:n,c=i.split("/")[0],d=o.region[c];if((t||r)&&s.push(c),a(d)||(o.region[c]={}),t||r){var p=o.config[c]||null,u=o.request[c]||null,m=o.response[c]||null,f=!0===o.region[c].cfgDynamic,g=!0===o.region[c].reqDynamic,h=!0===o.region[c].resDynamic,b=r&&-1!==l("config",[].concat(n[i])),v=r&&-1!==l("request",[].concat(n[i])),y=r&&-1!==l("response",[].concat(n[i]));(t||b)&&o.setRenderData(i,"config",p,f),(t||v)&&o.setRenderData(i,"request",u,g),(t||y)&&o.setRenderData(i,"response",m,h)}}),o.renderTemplate(s)})},afterFunc:function(e,r,o){var s=this,d=[],p=s.region,u=c(e),m=l("global",e);u&&-1!==m&&(e.splice(m,1),e.push("global")),$(function(){t.apply(null,[].concat(s.queue)).done(function(){n(u?e:[],function(e,n){var t="object"==typeof n&&n,o=t?Object.keys(n)[0]:n;"string"==typeof o&&o&&s.tags[o]&&a(p[o])&&i(p[o].afterFunc)&&(d[d.length]=p[o].afterFunc(s,r))}),t.apply(null,d).done(function(){o?s.renderState.resolve():s.renderState.reject()}).fail(function(){s.renderState.reject()})})})}})}),define("modular/module/module-header-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=n.jsData.userInfo.shopId,o=[];return t&&o.push("ORDER_SHOPPINGCART_COUNT/global/shopCartCount"),r&&o.push("USER_SHOPINFO_QUERY/global/shopInfo"),e.extend({tags:{global:"<component-header-1></component-header-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){var t=e.config.global.shopName,r=e.config.global.shopAbout,o=e.config.global.shopHeadImg,s=e.config.global.shopDescribe;e.config.global.shopInfo=n.response.global&&n.response.global.shopInfo||{},e.config.global.shopInfo.headImg=e.config.global.shopInfo.headImg||o,e.config.global.shopInfo.aboutus=e.config.global.shopInfo.aboutus||r,e.config.global.shopInfo.name=e.config.global.shopInfo.name?e.config.global.shopInfo.name:t,e.config.global.shopInfo.description=s},afterFunc:function(e,t){n.jsModel.send("PAGE_HEADER1_QUERY_NODE",{}).done(function(n){var t=n&&n.cont&&n.cont[0]&&n.cont[0].title||"";e.renderData.global.config.attr("placeholder",t)})}}},config:{global:{historyCache:[],shopName:n.jsData.siteInfo.shopName,shopAbout:n.jsData.siteInfo.shopAbout,shopHeadImg:n.jsData.siteInfo.shopHeadImg,shopDescribe:n.jsData.siteInfo.shopDescribe}},request:{ORDER_SHOPPINGCART_COUNT:{platformSource:7}},response:{global:{}},sendArr:o,reload:!1,timer:null,".component-header-left   .icon_scan           touchend":function(){var e=this,n=e.modules.message;e.jsUtil.weChat.browser()?wx?wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){e&&e.resultStr&&(window.location.href=e.resultStr)}})}):n.refresh({confirmBtn:!1,content:"暂且无法使用扫一扫功能，敬请谅解！"}):n.refresh({confirmBtn:!1,content:"请在微信端进行操作！"})},".component-header-left   .text_login          touchend":function(){var e=this,n=e.renderData.global.config.jumpUrl;window.location.href=n?"/login.html?jumpUrl="+n:"/login.html"},".component-header-left   .text_mpMall         touchend":function(){var e=n.jsData.userInfo.userId,r=n.jsData.userInfo.shopId,o=n.jsData.userInfo.authId,s=n.jsData.userInfo.openId,a=n.jsData.siteInfo.mDomainName;window.location.href=t?n.jsUtil.path.setParam(a,{userId:e,shopId:r,authId:o,openId:s}):n.jsUtil.path.setParam(a,{userId:"0",shopId:r,authId:"noToken",openId:s})},".component-header-left   .icon_back           touchend":function(){var e=this,n=e.renderData.global.config.backUrl;e.jsUtil.url.jumpPage(n,-1,!0)},".component-header-left   .icon_home           touchend":function(){window.location.href="/index.html"},".component-header-input   input               focus":function(e){var n=this,t=[],r=$(e),o=n.modules,s=r.parents(".component-header-input"),a=JSON.parse(window.localStorage.getItem("historyCache"))||[];s.addClass("isFocus"),$("html,body").animate({scrollTop:0}),$(document).find("component-footer-1").css("display","none"),$(o.searchHistory.element).css({display:"block"}),$(o.searchHistory.element).animate({left:"0"},500),n.renderData.global.config.attr("icon_scan",!1),n.renderData.global.config.attr("icon_news",!1),n.renderData.global.config.attr("info_shop",!1),n.renderData.global.config.attr("icon_back",!1),n.renderData.global.config.attr("icon_home",!1),n.renderData.global.config.attr("text_edit",!1),n.renderData.global.config.attr("text_save",!1),n.renderData.global.config.attr("icon_close",!1),n.renderData.global.config.attr("title_shop",!1),n.renderData.global.config.attr("title_text",!1),n.renderData.global.config.attr("text_login",!1),n.renderData.global.config.attr("text_manage",!1),n.renderData.global.config.attr("text_choose",!1),n.renderData.global.config.attr("icon_search",!1),n.renderData.global.config.attr("icon_shopCart",!1),n.renderData.global.config.attr("text_orderList",!1),n.renderData.global.config.attr("input",!0),n.renderData.global.config.attr("input_search",!0),n.renderData.global.config.attr("input_cancel",!0),$.each(a,function(e,n){t.push(n)}),o.searchHistory.renderData.global.config.attr("historyCache",t)},".component-header-input   input               keyup":function(){var e=this,t=$(e.element),r=t.find(".component-header-input input").val(),o=t.find(".component-header-input input").attr("placeholder");if(!r&&o&&(r=o),13===n.jsEvent.keyboard.keyboardCode)if(r.trim()){var s=[],a=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(a,function(e,n){s.push(n.goodsName)});var i=$.inArray(r,s);-1!==i&&a.splice(i,1),a.unshift({goodsName:r}),a.splice(9,a.length-9),t.find(".component-header-input > input").blur(),window.localStorage.setItem("historyCache",JSON.stringify(a)),window.location.href=encodeURI("/searchProduct.html?goodsName="+r)}else window.location.href="/searchProduct.html?upShelves=1"},".component-header-input  .i_clear             touchend":function(e){$(e).parent().find("input").val("")},".component-header-right  .input_cancel        touchend":function(){var e=this,n=e.modules,t=e.element;e.renderData.global.config.attr("input",!1),e.renderData.global.config.attr("input_search",!1),e.renderData.global.config.attr("input_cancel",!1),$(n.searchHistory.element).animate({left:"101%"},500,function(){$(n.searchHistory.element).css({display:"none"})}),$.each(e.config.initList,function(n,t){e.renderData.global.config.attr(n,t)}),t.find(".component-header-input input").blur(),t.find(".component-header-input").removeClass("isFocus"),$(document).find("component-footer-1").css("display","block"),$("body").css({position:"static",overflow:"visible"})},".component-header-right  .icon_search         touchend":function(){var e=this,n=e.element;e.renderData.global.config.attr("input",!0),n.find(".component-header-input input").focus()},".component-header-right  .icon_close          touchend":function(){var e=this,n=e.renderData.global.config.backUrl;e.jsUtil.url.jumpPage(n,-1,!0)},".component-header-right  .info_shop           touchend":function(){var e=this,n=e.renderData.global.config.jumpUrl;window.location.href=n?"/index.html?jumpUrl="+n:"/index.html"},".component-header-right  .icon_shopCart       touchend":function(){window.location.href="/shoppingCart.html"},".component-header-right  .icon_orderList      touchend":function(){var e=this,n=e.renderData.global.config.pathUrl;window.location.href="/orderList.html?jumpUrl="+n},".component-header-right  .icon_choose         touchend":function(){var e=this,n=e.modules.discount,t=e.renderData.global.config.jumpUrl,r=n.renderData.global.response.attr(),o=n.renderData.global.config.showDiscount.attr(),s=n.renderData.global.response.attr("type"),a=n.renderData.global.response.attr("supplierId"),i=JSON.stringify(o||{}),c=localStorage.getItem("ordersInfo"),l=JSON.parse(c);l&&s&&a&&(l.typeObj[s][a]=r,c=JSON.stringify(l||{}),window.localStorage.removeItem("orderInfo"),window.localStorage.setItem("ordersInfo",c),window.localStorage.setItem("showDiscount",i),e.jsUtil.url.jumpPage(t,-1,!0))},".component-header-right  .icon_news           touchend":function(){this.modules.message.refresh({confirmBtn:!1,content:"咨询功能暂未开放，敬请谅解！"})}})}),define("modular/module/module-footer-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=(n.jsData.userInfo.welfareVip,t?["ORDER_SHOPPINGCART_COUNT/global/count"]:[]);return e.extend({tags:{global:"<component-footer-1></component-footer-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0}},config:{global:{isCall:!0}},request:{ORDER_SHOPPINGCART_COUNT:{platformSource:7}},response:{},sendArr:r,reload:!1})}),define("modular/module/module-searchHistory-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-searchhistory-1></component-searchhistory-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!1,resDynamic:!1}},config:{global:{showIndex:0}},request:{},response:{},sendArr:[],reload:!1,".component-searchHistory-content li touchend":function(e){var t=$(e),r=t.text()&&t.text().trim()||"",o=t.attr("firstId")&&t.attr("firstId").trim()||"",s=t.attr("secondId")&&t.attr("secondId").trim()||"",a=t.attr("thirdId")&&t.attr("thirdId").trim()||"";if(!n.jsEvent.touch.touchIsMoved){var i=[],c=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(c,function(e,n){i.push(n.goodsName)});var l=$.inArray(r,i);-1!==l&&c.splice(l,1),c.unshift({goodsName:r,firstId:o,secondId:s,thirdId:a}),c.splice(9,c.length-9),window.localStorage.setItem("historyCache",JSON.stringify(c)),window.location.href=encodeURI("/searchProduct.html?goodsName="+r+"&firstCategory="+o+"&secondCategory="+s+"&thirdCategory="+a)}},".component-searchHistory-content .icon_delete touchend":function(){var e=this;e.modules.message.refresh({content:"是否清除所有搜索内容？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.localStorage.setItem("historyCache",JSON.stringify([])),e.renderData.global.config.attr("historyCache",[])}})}})}),define("modular/module/module-message-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-message-1></component-message-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{},response:{},sendArr:[],reload:!1,refresh:function(e){var n=this;"object"==typeof e&&$.each(e,function(t){n.config.global[t]=e[t]}),n.config.global.isShowing||n.renderFunc(["global"])},"{document} touchend":function(e,n){var t=this,r=n||window.event,o=$(r.target||r.srcElement),s=t.element,a=s.find(".component-message-content"),i=o.parents(".component-message-content").length>0,c=!1!==t.config.global.confirmBtn,l=!1!==t.config.global.DOMClick;!i&&c&&l&&a.animate({opacity:0},600,function(){t.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},t.refresh()})},".component-message-footer .btn_confirm touchend":function(){var e=this;e.element.find(".component-message-content").animate({opacity:0},600,function(){e.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},e.refresh()})},".component-message-footer .btn_cancel touchend":function(){var e=this;e.element.find(".component-message-content").animate({opacity:0},600,function(){e.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},e.refresh()})}})}),define("modular/module/module-site-introduce-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-site-introduce-1></component-site-introduce-1>"},region:{},config:{},request:{},response:{},sendArr:[],reload:!1})}),define("modular/module/module-searchProduct-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.shopId,r=n.jsData.userInfo.gradeId;return e.extend({tags:{global:"<component-searchproduct-1></component-searchproduct-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!1,resDynamic:!0,beforeFunc:function(e,n){e.config.global.currentPage=(n.response.global.pagination||{}).currentPage,e.config.global.totalPages=(n.response.global.pagination||{}).totalPages},afterFunc:function(e,n){e.config.global.currentPage===e.config.global.totalPages?$(e.element).find(".isLoading span").text("没有更多数据了..."):$(e.element).find(".isLoading span").text("请下拉加载...")}}},config:{global:{}},request:{GOODS_BASE_QUERY:{upShelves:n.jsUtil.url.getParam("upShelves")?1:null,numPerPage:10,currentPage:1,welfare:!0,gradeId:t||r,fx:1}},response:{global:{}},sendArr:["GOODS_BASE_QUERY"],reload:!1,".searchProduct-header li touchend":function(e){var n=this,t=$(e),r=n.config.global.popState;t.hasClass("active")&&!t.hasClass("choose_price")||(t.hasClass("choose_general")?(r.sortType=1,r.currentPage=1,n.config.global.sortType=1,delete n.request.GOODS_BASE_QUERY["sortList[0].sortField"],delete n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]):t.hasClass("choose_new")?(r.sortType=2,r.currentPage=1,n.config.global.sortType=2,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="create_time",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="desc"):t.hasClass("sortType3")?(r.sortType=4,r.currentPage=1,n.config.global.sortType=4,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="price",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="asc"):(r.sortType=3,r.currentPage=1,n.config.global.sortType=3,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="price",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="desc"),n.config.global.currentPage=1,n.request.GOODS_BASE_QUERY.currentPage=1,n.toRender("GOODS_BASE_QUERY",{currentPage:1},["global"]).done(function(){$("html,body").animate({scrollTop:0},300)}),n.jsUtil.url.setParam(r,"cover",{code:"searchProduct"}))},"{window} scroll":function(){var e=this,n=$(document),t=e.config.global.totalPages,r=e.config.global.currentPage,o=e.request.GOODS_BASE_QUERY.currentPage,s=r===t,a=r<o,i=$(window).scrollTop()+$(window).height()+350>$(document).height();s?n.find(".isLoading span").text("没有更多数据了..."):n.find(".isLoading span").text("请下拉加载..."),!i||s||a||(e.request.GOODS_BASE_QUERY.currentPage++,e.sendRequest("GOODS_BASE_QUERY",{currentPage:r+1}).done(function(t){if(t&&t.success){var r=t.obj;$.each(r.goodsList,function(n,t){e.renderData.global.response.goodsList.push(t)}),r.pagination.currentPage===r.pagination.totalPages&&n.find(".isLoading span").text("没有更多数据了..."),e.config.global.currentPage=r.pagination.currentPage,e.config.global.totalPages=r.pagination.totalPages}}))},".component-searchProduct-content .search_addShoppingCart touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.parents(".item-content"),s=t.parents(".item-content").attr("toUrl"),a=t.parents(".item-content").attr("goodsId"),i=n.renderData.global.response.goodsList;"yes"===o.attr("isSingleSpec")?$.each(i,function(e,t){if(t.goodsId==a){var s=1,i=t.goodsFileList&&t.goodsFileList[0]||{},c=t.goodsSpecsList&&t.goodsSpecsList[0]||{},l=c.stock||0,d=c.priceList||[],p=function(e){var n={},t=[],r=[],o=!1;return $.each(e,function(e,n){var s=1*n.min?1*n.min:0,a=1*n.max?1*n.max:1/0;t.push(a),r.push(s),o=!0}),o?(n.minQuantity=Math.min.apply(Math,r),n.maxQuantity=Math.max.apply(Math,t),n):{minQuantity:0,maxQuantity:1/0}},u=p(d).minQuantity,m=p(d).maxQuantity;if(!n.renderData.global.config.isLogin)return void r.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?isBack=1"}});if(s<u&&(s=u),l<=0)return void r.refresh({content:"当前商品库存不足, 无法加入购物车中！",confirmBtn:!1});if(u>l)return void r.refresh({content:"当前数量已达至商品库存量, 无法加入购物车中！",confirmBtn:!1});var f=function(e){var s=o.find("img"),a=s.clone(),l=n.modules.footer.element,d=l.find("component-footer-1 .icon_shoppingCart");a.length&&(a.offset({top:s.offset().top,left:s.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"99999999"}).appendTo($("body")).animate({top:d.offset().top+20,left:d.offset().left+70,width:50,height:50},1e3,"linear"),a.animate({width:0,height:0},function(){$(this).detach()})),n.sendRequest("ORDER_SHOPPINGCART_CREATE",{type:t.type,itemId:c.itemId,supplierId:t.supplierId,supplierName:t.supplierName,goodsName:t.customGoodsName,goodsImg:i.path||"",quantity:e,platformSource:7}).done(function(){n.modules.header.sendRequest("ORDER_SHOPPINGCART_COUNT",{platformSource:7}).done(function(e){n.modules.footer.renderData.global.response.attr("count",e.obj),r.refresh({content:"添加成功",confirmBtn:!1})})})};n.sendRequest("ORDER_SHOPPINGCART_COUNT_ID",{itemId:t.goodsSpecsList[0].itemId,platformSource:7}).done(function(e){if(e&&e.success){var n=e.obj||0;if(null!=m&&0!=m)if(n>=m)r.refresh({content:"当前该商品在购物车中的数量已达到最大购买量, 无法继续加入购物车中！",confirmBtn:!1});else if(s+n>m){var t=m-n;r.refresh({title:"购物车数量上限",content:"最大量"+m+"件; 已添加:"+n+"件, 可添加"+t+"件! 是否继续？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){f(t)}})}else f(s);else f(s)}else r.refresh({content:"查询购物车内该商品数量失败！",confirmBtn:!1})}).fail(function(){r.refresh({content:"网络信号弱，请刷新重试",confirmBtn:!1})})}}):s&&r.refresh({title:"温馨提示",content:"该商品含有多个规格，正前往商品详情页面中！",DOMClick:!1,confirmBtn:!1,timeOutFun:function(){window.location.href=s}})}})}),define("modular/module/module-bindInvitation-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.shopId,r=n.jsData.userInfo.userId,o=n.jsData.userInfo.gradeId;return e.extend({tags:{global:"<component-bindinvitation-1></component-bindinvitation-1>"},region:{global:{reqDynamic:!0,resDynamic:!1,beforeFunc:function(e,n){e.response.global.userInfo&&(e.config.global.account=e.response.global.userInfo.phone||"",e.request.global.account=e.response.global.userInfo.phone||"")}}},config:{global:{}},request:{global:{account:"",invitationCode:""},USER_INVITERCODE_BIND:{id:r,shopId:t||o}},response:{global:{}},sendArr:["USER_DETAIL_QUERY/global/userInfo"],reload:!1,".component-bindInvitation-bingBtn:not(.state_error) touchend":function(){var e=this,t=e.modules.message,r=e.renderData.global.request.attr(),o=e.renderData.global.config.jumpUrl;e.jsUtil.weChat.browser()?e.sendRequest("USER_INVITERCODE_BIND",{phone:r.account,invitationCode:r.invitationCode}).done(function(r){if(r&&r.success)if(r&&r.obj){var s=n.jsData.userInfo.shopId,a=n.jsData.userInfo.userId,i="v:"+s+"-"+a;o&&(window.localStorage.setItem("welfareVip",i),e.jsUtil.url.jumpPage(o,null)),o||(window.localStorage.setItem("welfareVip",i),e.jsUtil.url.jumpPage("/index.html",null))}else r&&r.errorMsg?t.refresh({type:"error",content:r.errorMsg,cancelBtn:!1,confirmBtn:!1}):t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1});else r&&r.errorMsg?t.refresh({type:"error",content:r.errorMsg,cancelBtn:!1,confirmBtn:!1}):t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1})}).fail(function(){t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1})}):t.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-bindInvitation-content .getCode span touchend":function(){var e=this,n=e.response.global.userInfo.phone,t=localStorage.getItem("shopId"),r=e.modules.message;124==t?e.sendRequest("USER_INVITERCODE_APPLY",{gradeId:t,phone:n}).done(function(e){e&&e.success?r.refresh({type:"success",content:"邀请码已发送！",cancelBtn:!1,confirmBtn:!1}):r.refresh({type:"error",content:"抱歉，邀请码发送失败，请重试！",cancelBtn:!1,confirmBtn:!1})}).fail(function(){r.refresh({type:"error",content:"网络故障，请确认网络是否正常！",cancelBtn:!1,confirmBtn:!1})}):r.refresh({type:"error",content:"",cancelBtn:!1,confirmBtn:!1})}})}),define("modular/module/module-personal-center-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.shopId,r=n.jsData.userInfo.gradeId,o=n.jsData.userInfo.userId,s=(n.jsData.userInfo.authId,n.jsData.userInfo.openId,n.jsData.userInfo.isLogin),a=(n.jsData.userInfo.welfareVip,[]);return t&&(a=a.concat(["USER_SHOPINFO_QUERY/global/shopInfo"])),s&&(a=a.concat(["USER_DETAIL_QUERY/global/userInfo","ORDER_USER_STATUS_COUNT/global/orderStatus","USER_INVITERINFO_CHECK/global/getInvitation"])),e.extend({tags:{global:"<component-personal-center-1></component-personal-center-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){var t=0,r=0,o=0,s=0,a=e.config.global.shopName,i=e.config.global.shopAbout,c=e.config.global.shopHeadImg,l=e.config.global.shopDescribe;$.each(n.response.global.orderStatus,function(e,n){var a=n.status,i=n.total;0===a?t+=i:1===a||2===a||3===a||4===a||5===a||11===a||12===a?r+=i:6===a?o+=i:7===a&&(s+=i)}),e.config.global.shopInfo=n.response.global&&n.response.global.shopInfo||{},e.config.global.shopInfo.headImg=e.config.global.shopInfo.headImg||c,e.config.global.shopInfo.aboutus=e.config.global.shopInfo.aboutus||i,e.config.global.shopInfo.name=e.config.global.shopInfo.name||a,e.config.global.shopInfo.description=l,e.response.global.orderStatus={},e.response.global.orderStatus.needPay=t,e.response.global.orderStatus.needDeliver=r,e.response.global.orderStatus.needReceived=o,e.response.global.orderStatus.finish=s}}},config:{global:{shopName:n.jsData.siteInfo.shopName,shopAbout:n.jsData.siteInfo.shopAbout,shopHeadImg:n.jsData.siteInfo.shopHeadImg,shopDescribe:n.jsData.siteInfo.shopDescribe}},request:{global:{},USER_INVITERINFO_CHECK:{centerId:t||r,id:o}},response:{global:{}},sendArr:a,reload:!1,".component-personal-center-function a touchend":function(e){var t=this,r=$(e),o=t.modules.message,s=t.config.global.pathUrl,a=r.hasClass("needSign");return!n.jsEvent.touch.touchIsMoved&&(a&&!t.renderData.global.config.isLogin?(o.refresh({content:"您尚未登录，是否登录？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?jumpUrl="+s}}),!1):void 0)},".component-personal-center-function a.mpMall touchend":function(e){if(n.jsEvent.touch.touchIsMoved)return!1;var t=n.jsData.userInfo.userId,r=n.jsData.userInfo.shopId,o=n.jsData.userInfo.authId,s=n.jsData.userInfo.openId,a=n.jsData.siteInfo.mDomainName;window.location.href=n.jsUtil.path.setParam(a,{userId:t,shopId:r,authId:o,openId:s})},".component-personal-center-logout touchend":function(){var e=this,t=e.modules.message,r=e.config.global.pathUrl;if(n.jsEvent.touch.touchIsMoved)return!1;t.refresh({content:"是否退出当前账号？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("authId"),window.localStorage.removeItem("welfareVip"),window.location.href="/login.html?jumpUrl="+r}})},".component-personal-center-login touchend":function(){var e=this,t=e.config.global.pathUrl;if(n.jsEvent.touch.touchIsMoved)return!1;window.location.href="/login.html?jumpUrl="+t}})}),define("modular/module/module-login-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-login-1></component-login-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",password:""}},response:{global:{}},sendArr:[],reload:!1,".component-login-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&0==e.obj?(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号尚未注册！"}),t.addClass("state_error")):t.removeClass("state_error")}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.removeClass("state_error")})},".component-login-loginBtn:not(.state_error) touchend":function(){var e=this,t=e.modules.message,r=n.jsData.userInfo.shopId||"",o=e.renderData.global.request.attr(),s=e.renderData.global.config.jumpUrl;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("welfareVip"),e.jsUtil.weChat.browser()?e.sendRequest("AUTH_LOGIN",{phone:o.account,password:o.password}).done(function(o){if(o&&o.success){var a=n.jsData.location.hostUrl,i=a+"/wechat-transfer.html",c='"Bearer "'+o.obj.token,l=o.obj.userCenterId,d=!1+"，，"+s+"，"+r+"，"+l+"，"+c+"，";e.sendRequest("THIRD_WECHAT",{snsapiBase:!1,redirectUrl:i+"?info="+d}).done(function(e){"string"==typeof e&&(window.location.href=e)})}else o.errorMsg?t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:o.errorMsg}):t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})}).fail(function(){t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})}):t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-login-third .img_weChat touchend":function(){var e=this,t=e.modules.message,r=e.config.global.jumpUrl,o=n.jsData.location.hostUrl,s=o+"/wechat-transfer.html",a=!0+"，，"+r;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("welfareVip"),e.jsUtil.weChat.browser()?e.sendRequest("THIRD_WECHAT",{snsapiBase:!0,redirectUrl:s+"?info="+a}).done(function(e){"string"==typeof e&&(window.location.href=e)}):t.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-register-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-register-1></component-register-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",validation:"",password:"",confirmPassword:"",invitationCode:""}},sendArr:[],reload:!1,".component-register-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&1==e.obj?(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号已被注册！"}),t.addClass("state_error")):t.removeClass("state_error")}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.removeClass("state_error")})},".component-register-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,s=t.parents(".component-register-validation");r.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.request.attr();!r.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.account)&&n.sendRequest("THIRD_PHONE",{
phone:e.account}).done(function(e){if(e&&e.success){var n=60,r=function(e){n>0?(n--,s.find(".doing .val").text(n),setTimeout(function(){r(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),r(t)}else o.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-register-registerBtn:not(.state_error) touchend":function(){var e=this,t=e.element,r=e.modules.message,o=n.jsData.userInfo.shopId||"",s=n.jsData.userInfo.gradeId||"",a=e.renderData.global.config.jumpUrl||"";window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("welfareVip"),e.jsUtil.weChat.browser()?setTimeout(function(){var i=e.renderData.global.request.attr(),c=!t.find("#account").hasClass("state_error"),l=i.invitationCode&&(""+i.invitationCode).trim();c&&e.jsUtil.check.phone(i.account)&&e.sendRequest("USER_REGISTRATION",{centerId:o||s,phone:i.account,pwd:i.password,code:i.validation,invitationCode:l?(""+i.invitationCode).trim():void 0}).done(function(t){if(t&&t.success){var s=t.obj;e.sendRequest("AUTH_REGISTER",{phone:i.account,password:i.password,userCenterId:s}).done(function(t){if(t&&t.success){var s=n.jsData.location.hostUrl,i=s+"/wechat-transfer.html",c='"Bearer "'+t.obj.token,l=t.obj.userCenterId,d=!1+"，true，"+a+"，"+o+"，"+l+"，"+c+"，";e.sendRequest("THIRD_WECHAT",{snsapiBase:!1,redirectUrl:i+"?info="+d}).done(function(e){"string"==typeof e&&(window.location.href=e)})}else t.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})})}else t&&1==t.obj?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"验证码失效，请重试！"}):t.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})})},200):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-bindMobile-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-bindmobile-1></component-bindmobile-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",validation:""}},response:{global:{}},sendArr:[],reload:!1,".component-bindMobile-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr(),s=t.parents(".component-bindMobile-validation");n.jsUtil.weChat.browser()?n.jsUtil.check.phone(o.account)&&n.sendRequest("THIRD_PHONE",{phone:o.account}).done(function(e){if(e&&e.success){var n=60,o=function(e){n>0?(n--,s.find(".doing .val").text(n),setTimeout(function(){o(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),o(t)}else r.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})}):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-bindMobile-bingBtn:not(.state_error) touchend":function(){var e=this,t=e.element,r=e.modules.message,o=e.renderData.global.config.jumpUrl,s=n.jsData.userInfo.shopId,a=n.jsData.userInfo.openId;window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("authId"),e.jsUtil.weChat.browser()?setTimeout(function(){var n=e.renderData.global.request.attr();!t.find("#account").hasClass("state_error")&&e.jsUtil.check.phone(n.account)&&e.sendRequest("USER_REGISTRATION",{phone:n.account,code:n.validation}).done(function(n){if(n&&n.success){var t=n.obj;e.sendRequest("AUTH_LOGIN",{userCenterId:t}).done(function(n){if(n&&n.success){var i='"Bearer "'+n.obj.token;window.localStorage.setItem("userId",t),window.localStorage.setItem("authId",i),window.localStorage.setItem("openId",a),window.localStorage.setItem("alertDiscount",!0),s&&window.localStorage.setItem("shopId",s),e.jsUtil.url.jumpPage("/bindInvitation.html?jumpUrl="+o,null)}else n.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:n.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"绑定手机失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"绑定手机失败！"})})}else n&&1==n.obj?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"验证码失效，请重试！"}):n.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:n.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"绑定手机失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"绑定手机失败！"})})},200):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-personal-information-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-personal-information-1></component-personal-information-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,afterFunc:function(e,n){var t=n.response.global&&n.response.global.userDetail||{};t&&t.id?e.renderData.global.config.attr("detailExist",!0):e.renderData.global.config.attr("detailExist",!1),e.response.global=n.response.global||{},e.response.global.userDetail=e.response.global.userDetail||{}}}},config:{global:{detailExist:null}},request:{global:{}},response:{global:{}},sendArr:["USER_DETAIL_QUERY"],reload:!1,".component-personal-information-commit  touchend":function(e){var t=this,r=$(e),o=t.element,s=t.modules.message,a=t.config.global.jumpUrl,i=r.hasClass("edit")?"edit":r.hasClass("add")?"add":"",c=o.find("#identification").val().trim(),l=o.find(".headPortrait img").attr("src"),d=o.find("#nickname").val().trim(),p=o.find("#realname").val().trim(),u=o.find("#location").val().trim(),m=o.find("#gender").val().trim();p&&m&&c&&p.trim()&&m.trim()&&c.trim()?n.jsUtil.check.chinaName(p)?n.jsUtil.check.identity(c)?"edit"===i?t.sendRequest("USER_DETAIL_UPDATE",{headImg:l,nickName:d,name:p,sex:m,location:u,idNum:c}).done(function(){t.jsUtil.url.jumpPage(a,"/personal-center.html",!0)}):"add"===i&&t.sendRequest("USER_DETAIL_CREATE",{headImg:l,nickName:d,name:p,sex:m,location:u,idNum:c}).done(function(){t.jsUtil.url.jumpPage(a,"/personal-center.html",!0)}):s.refresh({content:"身份证填写有误！"}):s.refresh({content:"请正确填写您的中文姓名！"}):s.refresh({content:"请完善好个人信息！"})}})}),define("modular/module/module-address-manage-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-address-manage-1></component-address-manage-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,afterFunc:function(e,n){var t=e.modules.header,r=n.response.global;e.config.global.isFormOrder&&$.isArray(r)&&r.length>0?(t.renderData.global.config.attr("icon_AddressSure",!1),t.renderData.global.config.attr("icon_AddressManage",!0)):(t.renderData.global.config.attr("icon_AddressSure",!1),t.renderData.global.config.attr("icon_AddressManage",!1))}}},config:{},request:{global:{},USER_ADDRESS_QUERY:{numPerPage:5,currentPage:1}},response:{global:{},pagination:{}},sendArr:["USER_ADDRESS_QUERY"],reload:!1,".component-address-manage-list>.item:not(.select) .btn_remove  touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.parents("li").attr("id");o&&r.refresh({title:"温馨提示",content:"是否删除该条收货信息？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("USER_ADDRESS_DELETE",{id:o}).done(function(){n.toRender("USER_ADDRESS_QUERY",{},[{global:"response"}])})}})},".component-address-manage-list>.item:not(.select) .btnBox_left touchend":function(e){var n=this,t=$(e),r=t.parents("li").attr("id");n.sendRequest("USER_ADDRESS_UPDATE",{id:r,setDefault:1}).done(function(){n.toRender("USER_ADDRESS_QUERY",{},[{global:"response"}])})},".component-address-manage-list>.item.select                    touchend":function(e){var n=this,t=$(e),r=t.attr("id"),o=n.config.global.jumpUrl,s=n.jsUtil.path.delParam(o,["addressId"]);s=n.jsUtil.path.setParam(s,{addressId:r}),n.jsUtil.url.jumpPage(s,null,!0)},"{document} .component-header-right    .icon_AddressManage      touchend":function(){var e=this,n=e.modules.header;n.renderData.global.config.attr("icon_AddressSure",!0),n.renderData.global.config.attr("icon_AddressManage",!1),n.renderData.global.config.attr("title_text","管理收货地址"),e.renderData.global.config.attr("isFormOrder",!1)},"{document} .component-header-right    .icon_AddressSure        touchend":function(){var e=this,n=e.modules.header;n.renderData.global.config.attr("icon_AddressSure",!1),n.renderData.global.config.attr("icon_AddressManage",!0),n.renderData.global.config.attr("title_text","选择收货地址"),e.renderData.global.config.attr("isFormOrder",!0)}})}),define("modular/module/module-address-edit-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-address-edit-1></component-address-edit-1>"},region:{global:{reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){e.config.global.id&&$.each(n.response.global,function(n,t){t.id==e.config.global.id&&(e.response.global=t)})}}},config:{},request:{},response:{},sendArr:[],reload:!1,".component-address-edit-defaultSetting .btnSet   touchend":function(){var e=this,n=e.renderData.global.response.attr().setDefault;e.renderData.global.response.attr("setDefault",n?0:1)},".component-address-edit-commit                   touchend":function(){var e=this,n=e.element,t=e.renderData.global.config.jumpUrl,r=e.renderData.global.response.attr(),o=e.modules.message;n.find(".receiveName_state").trigger("blur"),n.find(".receivePhone_state").trigger("blur"),n.find(".province_state").trigger("change"),n.find(".city_state").trigger("change"),n.find(".area_state").trigger("change"),n.find(".address_state").trigger("blur"),n.find(".state_error").length>0?o.refresh({content:"请正确填写地址信息！"}):(r.receiveName=n.find("#consignee").val(),r.receivePhone=n.find("#telephone").val(),r.province=n.find("#province").val(),r.city="---- 所在市 ----"===n.find("#city").val()?"":n.find("#city").val(),r.area="---- 所在区 ----"===n.find("#area").val()?"":n.find("#area").val(),r.address=n.find("#address").val(),r.setDefault=r.setDefault?1:0,r.id?e.sendRequest("USER_ADDRESS_UPDATE",r).done(function(n){n.success?e.jsUtil.url.jumpPage(t,-1,!0):n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):o.refresh({content:"修改收货地址失败！",confirmBtn:!1})}):e.sendRequest("USER_ADDRESS_CREATE",r).done(function(n){n.success?e.jsUtil.url.jumpPage(t,-1,!0):n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):o.refresh({content:"创建收货地址失败！",confirmBtn:!1})}).fail(function(e){e.errorMsg?o.refresh({content:e.errorMsg,confirmBtn:!1}):o.refresh({content:"创建收货地址失败！",confirmBtn:!1})}))}})}),define("modular/module/module-shoppingCart-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=n.jsData.platform.rule.crossOrder.maxPrice,o=n.jsData.platform.rule.normalOrder.minPrice;return e.extend({tags:{global:"<component-shoppingcart-1></component-shoppingcart-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){var t={};t.typeObj={},t.quantity=0,t.allSelected=!1,t.oneSelected=!1,$.each(n.response.global,function(e,n){if(n.goodsSpecs){var r=n.type,o=n.itemId,s=n.goodsSpecs.status,a=n.supplierId,i=n.supplierName,c=0===r?"跨境":2===r?"一般":1===r?"大贸":"";t.quantity+=1,t.typeObj[r]=t.typeObj[r]||{},t.typeObj[r][a]=t.typeObj[r][a]||{},t.typeObj[r][a].type=r,t.typeObj[r][a].typeName=c,t.typeObj[r][a].supplierId=a,t.typeObj[r][a].supplierName=i,t.typeObj[r][a].itemObj=t.typeObj[r][a].itemObj||{},t.typeObj[r][a].itemObj[o]={},t.typeObj[r][a].itemObj[o].ids=n.id,t.typeObj[r][a].itemObj[o].status=s,t.typeObj[r][a].itemObj[o].selected=n.goodsSpecs.stock>0&&0!==s,t.typeObj[r][a].itemObj[o].goodsId=n.goodsSpecs.goodsId,t.typeObj[r][a].itemObj[o].firstCategory=n.goodsSpecs.firstCategory,t.typeObj[r][a].itemObj[o].secondCategory=n.goodsSpecs.secondCategory,t.typeObj[r][a].itemObj[o].thirdCategory=n.goodsSpecs.thirdCategory,t.typeObj[r][a].itemObj[o].type=r,t.typeObj[r][a].itemObj[o].href=n.href,t.typeObj[r][a].itemObj[o].itemId=n.itemId,t.typeObj[r][a].itemObj[o].freePost=n.freePost,t.typeObj[r][a].itemObj[o].freeTax=n.freeTax,t.typeObj[r][a].itemObj[o].itemImg=n.picPath,t.typeObj[r][a].itemObj[o].quantity=n.quantity,t.typeObj[r][a].itemObj[o].itemName=n.goodsName,t.typeObj[r][a].itemObj[o].goodsName=n.goodsName,t.typeObj[r][a].itemObj[o].itemSpecs=n.goodsSpecs,t.typeObj[r][a].itemObj[o].itemCode=n.goodsSpecs.itemCode,t.typeObj[r][a].itemObj[o].stock=n.goodsSpecs.stock>0?n.goodsSpecs.stock:0,t.typeObj[r][a].itemObj[o].weight=n.goodsSpecs.weight,t.typeObj[r][a].itemObj[o].exciseTax=n.goodsSpecs.exciseTax,t.typeObj[r][a].itemObj[o].incrementTax=n.goodsSpecs.incrementTax,t.typeObj[r][a].itemObj[o].priceList=n.goodsSpecs.priceList,t.typeObj[r][a].itemObj[o].carton=n.goodsSpecs.carton,t.typeObj[r][a].itemObj[o].tagList=[],$.each(n.goodsSpecs.tagList,function(e,n){"预售"===n.tagName&&(t.typeObj[r][a].itemObj[o].tagFunId=n.tagFunId,t.typeObj[r][a].itemObj[o].preSaleName=n.tagName,t.typeObj[r][a].itemObj[o].preSaleDesc=n.description),t.typeObj[r][a].itemObj[o].tagList.push(n)})}}),e.response.global={},e.response.global.orders=t}}},config:{quantityTimer:null,quantityDeferred:null},request:{ORDER_SHOPPINGCART_QUERY:{platformSource:7}},response:{},sendArr:t?["ORDER_SHOPPINGCART_QUERY"]:[],reload:!1,".component-shoppingCart-ordersDetails    .goodsList                    touchmove":function(e,t){var r=$(e),o=t||window.event,s=Math.abs(n.jsEvent.touch.touchSX),a=Math.abs(n.jsEvent.touch.touchSY),i=r.parent().find(".goodsList").not(r),c=s<=280?s:280;a<s-80&&(n.jsEvent.touch.touchSX>0&&(r.parent().find(".goodsList .controlGroup").css("display","block"),r.hasClass("inControl")&&r.find(".body").css("transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-o-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-ms-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-moz-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-webkit-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-o-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-ms-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-moz-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-webkit-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-o-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-ms-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-moz-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".body,.controlGroup").css("transition","none"),i.find(".body,.controlGroup").css("-o-transition","none"),i.find(".body,.controlGroup").css("-ms-transition","none"),i.find(".body,.controlGroup").css("-moz-transition","none"),i.find(".body,.controlGroup").css("-webkit-transition","none")),n.jsEvent.touch.touchSX<0&&(r.hasClass("inControl")||(r.find(".controlGroup").css("transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".body").css("transform","translate3d("+(0-(s-80))+"px, 0, 0)"),r.find(".body").css("-o-transform","translate3d("+(0-(s-80))+"px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d("+(0-(s-80))+"px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d("+(0-(s-80))+"px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d("+(0-(s-80))+"px, 0, 0)")),r.hasClass("inControl")&&(r.find(".body").css("transform","translate3d("+(-200-(s-80))+"px, 0, 0)"),r.find(".body").css("-o-transform","translate3d("+(-200-(s-80))+"px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d("+(-200-(s-80))+"px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d("+(-200-(s-80))+"px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d("+(-200-(s-80))+"px, 0, 0)")),r.find(".body,.controlGroup").css("transition","none"),r.find(".body,.controlGroup").css("-o-transition","none"),r.find(".body,.controlGroup").css("-ms-transition","none"),r.find(".body,.controlGroup").css("-moz-transition","none"),r.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)"),i.find(".body,.controlGroup").css("transition","200ms linear"),i.find(".body,.controlGroup").css("-o-transition","200ms linear"),i.find(".body,.controlGroup").css("-ms-transition","200ms linear"),i.find(".body,.controlGroup").css("-moz-transition","200ms linear"),i.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),i.find(".body").css("transform","translate3d(0, 0, 0)"),i.find(".body").css("-o-transform","translate3d(0, 0, 0)"),i.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),i.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),i.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.parent().find(".goodsList .controlGroup").css("display","block"),i.removeClass("inControl")),o.preventDefault(),o.stopPropagation())},".component-shoppingCart-ordersDetails    .goodsList                    touchend":function(e,t){var r=$(e),o=r.parent().find(".goodsList").not(r);n.jsEvent.touch.touchIsMoved&&(r.hasClass("inControl")&&n.jsEvent.touch.touchSX>=30&&(r.removeClass("inControl"),o.removeClass("inControl"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")),r.hasClass("inControl")&&n.jsEvent.touch.touchSX<30&&(r.addClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!r.hasClass("inControl")&&n.jsEvent.touch.touchSX<=-80&&(r.addClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!r.hasClass("inControl")&&n.jsEvent.touch.touchSX>-80&&(r.removeClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")))},".component-shoppingCart-ordersDetails    .btn_plus                     touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,s=t.parents("[goodsId]").attr("type"),a=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=1*t.parent().find("input").val(),l=o.typeObj[s][a].itemObj[i].attr("stock"),d=o.typeObj[s][a].itemObj[i].attr("minQuantity"),p=o.typeObj[s][a].itemObj[i].attr("maxQuantity");!s&&0!==s||!a&&0!==a||!i&&0!==i||(t.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),t.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),l<=0||c<=l&&d&&l<d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):p&&c>p?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):d&&c<d&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(p||0===p)&&c>p?p:c,c=(d||0===d)&&c<d?d:c,c=c>l?l:c,c=c>0?c:1,t.val(1*c),o.typeObj[s][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_minus                    touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,s=t.parents("[goodsId]").attr("type"),a=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=1*t.parent().find("input").val(),l=o.typeObj[s][a].itemObj[i].attr("stock"),d=o.typeObj[s][a].itemObj[i].attr("minQuantity"),p=o.typeObj[s][a].itemObj[i].attr("maxQuantity");!s&&0!==s||!a&&0!==a||!i&&0!==i||(t.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),t.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),l<=0||c<=l&&d&&l<d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):p&&c>p?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):d&&c<d&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(p||0===p)&&c>p?p:c,c=(d||0===d)&&c<d?d:c,c=c>l?l:c,c=c>0?c:1,t.val(1*c),o.typeObj[s][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_input                    input":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,s=t.parents("[goodsId]").attr("type"),a=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=o.typeObj[s][a].itemObj[i].attr("stock"),l=(o.typeObj[s][a].itemObj[i].attr("quantity"),o.typeObj[s][a].itemObj[i].attr("minQuantity")),d=o.typeObj[s][a].itemObj[i].attr("maxQuantity");if((s||0===s)&&(a||0===a)&&(i||0===i)){var p=t.val()?t.val().trim():0,u=/\D/.test(p)?p.replace(/\D/g,""):p;clearTimeout(n.config.quantityTimer),n.config.quantityTimer=setTimeout(function(){var e=1*u>0?1*u:1;c<=0||e<=c&&l&&c<l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[s][a].itemObj[i].attr("quantity",1*e)}}):e>c?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量大于库存可用量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[s][a].itemObj[i].attr("quantity",1*e)}}):d&&e>d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已大于最大购买量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[s][a].itemObj[i].attr("quantity",1*e)}}):l&&e<l&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已低于最小购买量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[s][a].itemObj[i].attr("quantity",1*e)}})},650)}},".component-shoppingCart-ordersDetails    .btn_input                    blur":function(e){var n=this,t=$(e),r=n.renderData.global.response.orders,o=t.parents("[goodsId]").attr("type"),s=t.parents("[goodsId]").attr("supplierId"),a=t.parents("[itemId]").attr("itemId"),i=r.typeObj[o][s].itemObj[a].attr("stock"),c=r.typeObj[o][s].itemObj[a].attr("minQuantity"),l=r.typeObj[o][s].itemObj[a].attr("maxQuantity");if((o||0===o)&&(s||0===s)&&(a||0===a)){var d=t.val()?t.val().trim():0;d=(l||0===l)&&d>l?l:d,d=(c||0===c)&&d<c?c:d,d=d>i?i:d,d=d>0?d:1,t.val(1*d),r.typeObj[o][s].itemObj[a].attr("quantity",1*d)}},".component-shoppingCart-ordersDetails    .commodity-select             touchend":function(e){var n=this,t=$(e),r=n.renderData.global.config.attr("optionsOpen"),o=n.renderData.global.response.orders,s=t.parents("[goodsId]").attr("type"),a=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId");if(s&&a&&i){var c=o.typeObj[s][a].itemObj[i].attr("selected"),l=o.typeObj[s][a].itemObj[i].attr("status"),d=o.typeObj[s][a].itemObj[i].attr("stock"),p=o.typeObj[s][a].itemObj[i].attr("minQuantity"),u=c?!c:!!(0!==l&&d>0&&d>=p||r)&&!c;o.typeObj[s][a].itemObj[i].attr("selected",u)}},".component-shoppingCart-ordersDetails    .control_delete               touchend":function(e){var n=this,t=$(e),r=n.modules.footer,o=n.modules.header,s=n.modules.message,a=n.renderData.global.response,i=t.attr("ids"),c=a.orders;s.refresh({content:"是否删除该商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:i,platformSource:7}).done(function(e){e&&e.success&&($.each(c.attr().typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){""+r.ids===i&&c.typeObj[e][n].itemObj.removeAttr(t)})})}),n.sendRequest("ORDER_SHOPPINGCART_COUNT",{platformSource:7}).done(function(e){e&&e.success&&(r.renderData.global.response.attr("count",e.obj),o.renderData.global.response.attr("shopCartCount",e.obj),e.obj||(o.renderData.global.config.attr("icon_search",!0),o.renderData.global.config.attr("icon_shopCartEdit",!1),o.renderData.global.config.attr("icon_shopCartSave",!1)))}))}),t.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})},".component-shoppingCart-optionsGroup     .control_selectAll            touchend":function(e){var n=this,t=n.renderData.global.response.orders,r=n.renderData.global.config.attr("optionsOpen"),o=!t.attr("allSelected"),s=t.attr();$.each(s.typeObj,function(e,n){$.each(n,function(n,s){$.each(s.itemObj,function(s,a){"boolean"==typeof a.selected&&(0!==a.status&&a.stock>0&&a.stock>=a.minQuantity||r?t.typeObj[e][n].itemObj[s].attr("selected",o):t.typeObj[e][n].itemObj[s].attr("selected",!1))})})})},".component-shoppingCart-optionsGroup     .btn_deleteMore:not(.lose)    touchend":function(e){var n=this,t=$(e),r=n.modules.footer,o=n.modules.header,s=n.modules.message,a=n.renderData.global.response.orders,i=a.attr(),c=[];$.each(i.typeObj,function(e,n){$.each(n,function(e,n){$.each(n.itemObj,function(e,n){!0===n.selected&&c.push(n.ids)})})});var l=c.join(",");l?s.refresh({content:"是否删除选中商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:l,platformSource:7}).done(function(e){e&&e.success&&($.each(a.attr().typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){-1!==$.inArray(r.ids,c)&&a.typeObj[e][n].itemObj.removeAttr(t)})})}),n.sendRequest("ORDER_SHOPPINGCART_COUNT",{platformSource:7}).done(function(e){e&&e.success&&(r.renderData.global.response.attr("count",e.obj),o.renderData.global.response.attr("shopCartCount",e.obj),e.obj||(o.renderData.global.config.attr("icon_search",!0),o.renderData.global.config.attr("icon_shopCartEdit",!1),o.renderData.global.config.attr("icon_shopCartSave",!1)))})),t.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),
t.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")})}}):s.refresh({content:"请选择所要删除的商品！"})},".component-shoppingCart-optionsGroup     .btn_commitOrder:not(.lose)   click":function(){var e=this,n=e.renderData.global.response.orders.attr(),t=e.config.global.pathUrl,s={},a=0,i=e.modules.message;if($.each(n.typeObj,function(e,n){$.each(n,function(n,t){var r=!1,o=0,i=0,c=0,l=0,d=0,p=0,u=0,m=0,f=0;$.each(t.itemObj,function(g,h){0!==h.status&&h.stock>0&&h.stock>=h.minQuantity&&h.selected&&h.quantity>0&&(r=!0,o+=h.weight*h.quantity,i+=h.price*h.quantity,c+=h.vipPrice*h.quantity,l+=h.realPrice*h.quantity,d+=h.realVipPrice*h.quantity,p+=h.itemSpecs.welfarePrice*h.quantity,u+=0*h.quantity,m+=h.itemSpecs.welfarePrice*h.quantity,f+=0*h.quantity,s.typeObj=s.typeObj||{},s.typeObj[e]=s.typeObj[e]||{},s.typeObj[e][n]=s.typeObj[e][n]||{},s.typeObj[e][n].taxFee=0,s.typeObj[e][n].postFee=0,s.typeObj[e][n].exciseTaxFee=0,s.typeObj[e][n].incrementTaxFee=0,s.typeObj[e][n].type=t.type,s.typeObj[e][n].typeName=t.typeName,s.typeObj[e][n].supplierId=t.supplierId,s.typeObj[e][n].supplierName=t.supplierName,s.typeObj[e][n].supplierWeight=1*o,s.typeObj[e][n].supplierPrice=1*i,s.typeObj[e][n].supplierVipPrice=1*c,s.typeObj[e][n].supplierRealPrice=1*l,s.typeObj[e][n].supplierRealVipPrice=1*d,s.typeObj[e][n].rakebackSupplierPrice=1*p,s.typeObj[e][n].rakebackSupplierVipPrice=1*u,s.typeObj[e][n].rakebackSupplierRealPrice=1*m,s.typeObj[e][n].rakebackSupplierRealVipPrice=1*f,s.typeObj[e][n].itemObj=s.typeObj[e][n].itemObj||{},s.typeObj[e][n].itemObj[g]={},s.typeObj[e][n].itemObj[g].ids=h.ids,s.typeObj[e][n].itemObj[g].type=t.type,s.typeObj[e][n].itemObj[g].href=h.href,s.typeObj[e][n].itemObj[g].status=h.status,s.typeObj[e][n].itemObj[g].itemId=h.itemId,s.typeObj[e][n].itemObj[g].freePost=h.freePost,s.typeObj[e][n].itemObj[g].freeTax=h.freeTax,s.typeObj[e][n].itemObj[g].goodsId=h.goodsId,s.typeObj[e][n].itemObj[g].firstCategory=h.firstCategory,s.typeObj[e][n].itemObj[g].secondCategory=h.secondCategory,s.typeObj[e][n].itemObj[g].thirdCategory=h.thirdCategory,s.typeObj[e][n].itemObj[g].itemImg=h.itemImg,s.typeObj[e][n].itemObj[g].picPath=h.picPath,s.typeObj[e][n].itemObj[g].goodsName=h.itemName,s.typeObj[e][n].itemObj[g].quantity=h.quantity,s.typeObj[e][n].itemObj[g].exciseTax=h.exciseTax,s.typeObj[e][n].itemObj[g].incrementTax=h.incrementTax,s.typeObj[e][n].itemObj[g].priceList=h.priceList,s.typeObj[e][n].itemObj[g].tagList=h.tagList,s.typeObj[e][n].itemObj[g].tagFunId=h.tagFunId,s.typeObj[e][n].itemObj[g].preSaleName=h.preSaleName,s.typeObj[e][n].itemObj[g].preSaleDesc=h.preSaleDesc,s.typeObj[e][n].itemObj[g].sku=h.itemSpecs.sku,s.typeObj[e][n].itemObj[g].info=h.itemSpecs.info,s.typeObj[e][n].itemObj[g].stock=h.itemSpecs.stock>0?h.itemSpecs.stock:0,s.typeObj[e][n].itemObj[g].weight=h.itemSpecs.weight,s.typeObj[e][n].itemObj[g].itemCode=h.itemSpecs.itemCode,s.typeObj[e][n].itemObj[g].price=h.price,s.typeObj[e][n].itemObj[g].vipPrice=h.vipPrice,s.typeObj[e][n].itemObj[g].realPrice=h.realPrice,s.typeObj[e][n].itemObj[g].realVipPrice=h.realVipPrice,s.typeObj[e][n].itemObj[g].rakebackPrice=h.rakebackPrice,s.typeObj[e][n].itemObj[g].rakebackVipPrice=h.rakebackVipPrice,s.typeObj[e][n].itemObj[g].rakebackRealPrice=h.rakebackRealPrice,s.typeObj[e][n].itemObj[g].rakebackRealVipPrice=h.rakebackRealVipPrice,s.typeObj[e][n].itemObj[g].minPrice=h.itemSpecs.minPrice,s.typeObj[e][n].itemObj[g].maxPrice=h.itemSpecs.maxPrice,s.typeObj[e][n].itemObj[g].vipMinPrice=h.itemSpecs.vipMinPrice,s.typeObj[e][n].itemObj[g].vipMaxPrice=h.itemSpecs.vipMaxPrice,s.typeObj[e][n].itemObj[g].realMinPrice=h.itemSpecs.realMinPrice,s.typeObj[e][n].itemObj[g].realMaxPrice=h.itemSpecs.realMaxPrice,s.typeObj[e][n].itemObj[g].realVipMinPrice=h.itemSpecs.realVipMinPrice,s.typeObj[e][n].itemObj[g].realVipMaxPrice=h.itemSpecs.realVipMaxPrice,s.typeObj[e][n].itemObj[g].carton=h.itemSpecs.carton,a++)}),r&&a++})}),s.orderCount=a,!$.isEmptyObject(s)){var c=0,l=0,d=!0,p=!0,u=!0;$.each(s.typeObj,function(e,n){if($.each(n,function(n,t){var s=0,a=0,m=t.supplierId,f=t.supplierName;return $.each(t.itemObj,function(e,n){0===n.type?(s+=n.rakebackRealPrice*n.quantity,c+=n.quantity):2===n.type&&(a+=n.rakebackRealPrice*n.quantity,l+=n.quantity)}),"0"===e&&s>r&&c>1?(u=d=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品单笔订单价格超过"+r+"元，请调整！"}),!1):"2"===e&&1*m==6&&a<o?(u=p=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品订单未满"+o+"元，请调整！"}),!1):!!u&&void 0}),!u)return!1}),u&&(d||p)&&(window.localStorage.setItem("showDiscount","{}"),window.localStorage.setItem("ordersInfo",JSON.stringify(s)),window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+t))}},"{document} .component-header-right       .icon_shopCartEdit            touchend":function(e){var n=this,t=n.element,r=t.find(".goodsList"),o=n.renderData.global.response.orders,s=n.modules.header,a=o.attr();$.each(a.typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){o.typeObj[e][n].itemObj[t].attr("selected",!1)})})}),n.renderData.global.config.attr("optionsOpen",!0),s.renderData.global.config.attr("icon_shopCartSave",!0),s.renderData.global.config.attr("icon_shopCartEdit",!1),r.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")},"{document} .component-header-right       .icon_shopCartSave            touchend":function(e){var n=this,t=n.element,r=t.find(".goodsList"),o=n.renderData.global.response.orders,s=n.modules.header,a=o.attr();$.each(a.typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){o.typeObj[e][n].itemObj[t].attr("selected",!1)})})}),n.renderData.global.config.attr("optionsOpen",!1),s.renderData.global.config.attr("icon_shopCartSave",!1),s.renderData.global.config.attr("icon_shopCartEdit",!0),r.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})}),define("modular/module/module-orderConfirm-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.platform.rule.crossOrder.maxPrice,r=n.jsData.platform.rule.normalOrder.minPrice;return e.extend({tags:{global:"<component-orderconfirm-1></component-orderconfirm-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){if($.isEmptyObject(e.config.global.showDiscount)){var t=0,r=n.response.global.ordersInfo,o=n.response.discount||[],s={},a={superposition:{pool:{},chooseObj:{}},unSuperposition:{pool:{},chooseObj:{}}};s[0]={},s[1]={},s[2]={},s[3]={},s[4]={},$.each(o,function(e,n){var t=n.name;n.name=t.split("/")[0],n.type=t.split("/")[1]||"",s[n.rule.range][n.couponId]=n}),$.each(r.typeObj,function(n,r){$.each(r,function(r,o){var i={type:o.type,info:{superposition:{pool:[],chooseArr:[]},unSuperposition:{pool:[],choose:"-1"}},supplierId:o.supplierId},c={};t++,c[0]={price:o.supplierPrice},c[1]={},c[2]={},c[3]={},c[4]={},$.each(o.itemObj,function(e,n){c[1][n.firstCategory]=c[1][n.firstCategory]||{},c[2][n.secondCategory]=c[2][n.secondCategory]||{},c[3][n.thirdCategory]=c[3][n.thirdCategory]||{},c[4][n.goodsId]=c[4][n.goodsId]||{};var t=c[1][n.firstCategory].price||0,r=c[2][n.secondCategory].price||0,o=c[3][n.thirdCategory].price||0;c[1][n.firstCategory].price=t+n.quantity*n.realPrice,c[2][n.secondCategory].price=r+n.quantity*n.realPrice,c[3][n.thirdCategory].price=o+n.quantity*n.realPrice,c[4][n.goodsId].price=n.quantity*n.realPrice}),$.each(c,function(e,n){$.each(n,function(n,t){var r="1"===e||"2"===e||"3"===e;"0"===e?$.each(s[e],function(e,n){1*t>=n.rule.condition&&(0!==n.rule.superposition?i.info.superposition.pool.push(n.couponId):i.info.unSuperposition.pool.push(n.couponId),0!==n.rule.superposition?a.superposition.pool[n.couponId]=n:a.unSuperposition.pool[n.couponId]=n)}):"4"===e?$.each(s[e],function(e,r){$.each(r.rule.bindingList,function(e,o){n==o.goodsId&&1*t.price>=r.rule.condition&&(0!==r.rule.superposition?i.info.superposition.pool.push(r.couponId):i.info.unSuperposition.pool.push(r.couponId),0!==r.rule.superposition?a.superposition.pool[r.couponId]=r:a.unSuperposition.pool[r.couponId]=r,t.couponId=r.couponId)})}):r&&$.each(s[e],function(e,r){n==r.rule.category&&1*t.price>=r.rule.condition&&(0!==r.rule.superposition?i.info.superposition.pool.push(r.couponId):i.info.unSuperposition.pool.push(r.couponId),0!==r.rule.superposition?a.superposition.pool[r.couponId]=r:a.unSuperposition.pool[r.couponId]=r,t.couponId=r.couponId)})})}),e.response.global.ordersInfo.orderCount=t,e.response.global.ordersInfo.typeObj[n][r].goodsTypeObj=c,e.response.global.ordersInfo.typeObj[n][r].discountPrice=0,e.response.global.ordersInfo.typeObj[n][r].orderDiscount=i})}),e.config.global.showDiscount=a,window.localStorage.setItem("showDiscount",JSON.stringify(a||{})),window.localStorage.setItem("ordersInfo",JSON.stringify(e.response.global.ordersInfo||{}))}},afterFunc:function(e,n){var t=[],r={},o=e.renderData.global.config.centerId,s=n.response.global.ordersInfo||{},a=n.config.global.address.province;$.each(s.typeObj,function(e,n){"0"===e&&$.each(n,function(n,s){var i=s.supplierPrice,c=s.supplierWeight;$.each(s.itemObj,function(s,l){0==l.freePost&&(r[n]=e,a&&i&&c&&t.push({centerId:o,supplierId:n,province:a,weight:c,price:i}))})})}),t&&t.length>0&&e.sendRequest("ORDER_USER_POSTFEE",{data:encodeURI(JSON.stringify(t))}).done(function(n){n&&n.success&&$.each(n.obj,function(n,t){var o=t.supplierId,s=r[o];e.renderData.global.response.ordersInfo.typeObj[s][o].attr("postFee",t.postFee||0)})})}},payChoose:{cfgDynamic:!0}},config:{global:{},payChoose:{payChooseShow:!1,payState:null}},request:{COUPON_USERLIST_QUERY:{status:0}},response:{global:{}},sendArr:["COUPON_USERLIST_QUERY/discount"],reload:!0,".component-orderConfirm-orderDetails .commodity-coupon touchend":function(e){var n=this,t=$(e),r=!0,o=!1,s=n.modules.message,a=t.parents(".goodsList"),i=n.config.global.pathUrl,c=n.renderData.global.response.ordersInfo.attr(),l=n.renderData.global.config.showDiscount.attr(),d=a.attr("type"),p=a.attr("supplierId"),u=c.typeObj[d][p],m=u.orderDiscount,f=m.info.superposition.chooseArr.join(",")||"",g=m.info.unSuperposition.choose||"-1";if(f||g&&"-1"!==g?o=!0:$.each(m.info,function(e,n){$.each(n.pool,function(e,n){if(!r)return!1;r=!1,o=!0})}),o){var h=JSON.stringify(u||{}),b=JSON.stringify(c||{}),v=JSON.stringify(l||{});window.localStorage.setItem("orderInfo",h),window.localStorage.setItem("ordersInfo",b),window.localStorage.setItem("showDiscount",v),window.location.href="/discount.html?type=orderConfirm&jumpUrl="+i+"&choose1="+f+"&choose2="+g}else s.refresh({content:"该订单暂无可使用的优惠券！",cancelBtn:!1,confirmBtn:!1})},".component-orderConfirm-content .commodity-payBtn .btn_commit touchend":function(e){var o=this,s=$(e),a={},i=[],c=[],l=o.element,d=o.modules.message,p=o.config.global.jumpUrl,u=o.config.global.pathUrl,m=o.config.global.redirect,f=s.parents(".goodsList");if(n.jsEvent.touch.focusTime<=500)return null;var g=f.attr("type"),h=f.attr("supplierId"),b=o.config.global.address,v=o.renderData.global.response.ordersInfo,y=v.typeObj[g][h].attr(),j=y.orderDiscount.info.superposition.chooseArr,_=y.orderDiscount.info.unSuperposition.choose,w=v.attr("orderCount"),O=window.localStorage.getItem("openId"),C=window.localStorage.getItem("pushUserId"),I=0,D=l.find(".commodity-remark input").val()||"",S=!1,x=!1;o.renderData.payChoose.config.attr("payChooseShow",!0),o.renderData.payChoose.config.attr("payState",$.Deferred());var P=0,R={},U=[];if(R.receiveName=b.receiveName,R.receivePhone=b.receivePhone,R.receiveProvince=b.province,R.receiveCity=b.city,R.receiveArea=b.area,R.receiveAddress=b.address,R.payment=1*y.orderPrice-1*y.discountPrice,R.postFee=y.postFee,R.taxFee=y.taxFee,$.each(y.itemObj,function(e,n){if(n.ids&&i.push(n.ids),U.push({sku:n.sku,itemId:n.itemId,goodsId:n.goodsId,itemCode:n.itemCode,itemName:n.goodsName,itemImg:n.itemImg,itemInfo:n.info,itemQuantity:n.quantity,itemPrice:n.realPrice,actualPrice:n.rakebackRealPrice}),!n.stock||n.stock<=0)return S=!0,x=n.goodsName,!1;I=n.tagFunId||0,P++}),S)return void d.refresh({title:"库存不足",content:"该订单"+x+"商品库存不足，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){o.jsUtil.url.jumpPage(p,null,!0)}});a={tdq:P,openId:O,supplierId:h,orderDetail:R,orderGoodsList:U,createType:1===I?4:0,expressType:0,orderSource:7,orderFlag:g,pushUserId:C,redirect:m,tagFun:I,remark:D},_&&"-1"!==_&&c.push(_),$.each(j,function(e,n){c.push(n)}),c.length>0&&(a.couponIds=c.join(",")),$.when(o.renderData.payChoose.config.attr().payState).done(function(e){var n=function(){},s=function(){v.attr("orderCount",w),v.typeObj[g][h].attr("commitText","提交成功"),window.localStorage.setItem("ordersInfo",JSON.stringify(v.attr())),window.localStorage.removeItem("pushUserId")},c=function(){v.typeObj[g].removeAttr(h),w<=0&&v.removeAttr("orderCount"),$.isEmptyObject(v.typeObj[g].attr())&&v.typeObj.removeAttr(g),$.isEmptyObject(v.typeObj.attr())&&v.removeAttr("typeObj"),window.localStorage.setItem("ordersInfo",JSON.stringify(v.attr())),w<=0&&window.location.replace("/orderList.html")},l=function(){var e=v.attr();delete e.typeObj[g][h],w<=0&&delete e.orderCount,$.isEmptyObject(e.typeObj[g])&&delete e.typeObj[g],$.isEmptyObject(e.typeObj)&&delete e.typeObj,window.localStorage.setItem("ordersInfo",JSON.stringify(e)),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay")};v.typeObj[g][h].attr("committed",!0),v.typeObj[g][h].attr("commitText","正在提交.."),"weChatPay"===e&&(a.type="JSAPI",a.payType=a.orderDetail.payType=1,n=function(e){o.jsUtil.weChat.toPay("JSAPI",e.obj,{success:c,cancel:c})}),"aliPay"===e&&(a.type="scanCode",a.payType=a.orderDetail.payType=2,n=function(e){if(e.obj){l();var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"unionPay"===e&&(a.type="08",a.payType=a.orderDetail.payType=3,n=function(e){if(e.obj){l();var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),o.sendRequest("USER_DETAIL_QUERY").done(function(e){if(e&&e.success){if($.isPlainObject(e.obj))if($.isPlainObject(e.obj.userDetail)&&e.obj.userDetail.idNum){var c=0;0==g?a.orderDetail.payment>t&&(1===a.orderGoodsList.length&&1===a.orderGoodsList[0].itemQuantity||(c=1)):2==g&&a.orderDetail.payment<r&&1*a.supplierId==6&&(c=2),0==c?o.sendRequest("ORDER_USER_CREATE",a).done(function(e){e&&e.success?(w--,i.join(",")?o.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:i.join(","),platformSource:7}).done(function(){s(),n(e)}):(s(),n(e))):(d.refresh({type:"error",content:(e||{}).errorMsg||"提交订单失败！",cancelBtn:!1,confirmBtn:!1}),v.typeObj[g][h].attr("committed",!1),v.typeObj[g][h].attr("commitText","重新提交"),window.localStorage.setItem("ordersInfo",JSON.stringify(v.attr())))}).fail(function(e){d.refresh({type:"error",content:(e||{}).errorMsg||"提交订单失败！",cancelBtn:!1,confirmBtn:!1}),v.typeObj[g][h].attr("committed",!1),v.typeObj[g][h].attr("commitText","重新提交"),window.localStorage.setItem("ordersInfo",JSON.stringify(v.attr()))}):1==c?d.refresh({title:"温馨提示",content:"根据海关相关规定，单笔跨境订单金额不得超过"+t+"元，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){v.typeObj[g][h].attr("committed",!1),v.typeObj[g][h].attr("commitText","重新提交")},confirmFun:function(){o.jsUtil.url.jumpPage(p,null,!0)}}):2==c&&d.refresh({title:"温馨提示",content:"该笔一般贸易订单金额未满"+r+"元，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){v.typeObj[g][h].attr("committed",!1),v.typeObj[g][h].attr("commitText","重新提交")},confirmFun:function(){o.jsUtil.url.jumpPage(p,null,!0)}})}else d.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/personal-information.html?jumpUrl="+u}})}else d.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/personal-information.html?jumpUrl="+u}})})})}})}),define("modular/module/module-orderList-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-orderlist-1></component-orderlist-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!1,resDynamic:!0,beforeFunc:function(e,n){var t=0,r=0,o=0,s=0,a=n.response.global.orderInfo||{};$.each(n.response.global.orderStatus,function(e,n){var a=n.status,i=n.total;0===a?t+=i:1===a||2===a||3===a||4===a||5===a||11===a||12===a?r+=i:6===a?o+=i:7===a&&(s+=i)}),e.config.global.currentPage=(a.pagination||{}).currentPage,e.config.global.totalPages=(a.pagination||{}).totalPages,e.response.global.orderStatus={needPay:t,needDeliver:r,needReceived:o,finish:s}},afterFunc:function(e,n){e.config.global.currentPage===e.config.global.totalPages?$(e.element).find(".isLoading span").text("没有更多数据了..."):$(e.element).find(".isLoading span").text("请下拉加载...")}},payChoose:{cfgDynamic:!0}},config:{global:{siteInfo:n.jsData.siteInfo},payChoose:{payChooseShow:!1,payState:null}},request:{global:{},ORDER_USER_QUERY:{numPerPage:5,currentPage:1}},response:{global:{}},sendArr:["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],reload:!1,".component-orderList-content       span.state touchend":function(e){var n=this,t=$(e),r=n.modules.message;t.hasClass("active")||(t.hasClass("state_all")?(delete n.request.ORDER_USER_QUERY.status,delete n.request.ORDER_USER_QUERY.statusArr,n.request.ORDER_USER_QUERY.currentPage=1,n.renderData.global.config.attr("orderAll","active"),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.delParam(["queryType"],"cover")):t.hasClass("state_needPay")?(n.request.ORDER_USER_QUERY.status=0,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay","active"),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needPay"},"cover")):t.hasClass("state_needDeliver")?(delete n.request.ORDER_USER_QUERY.status,n.request.ORDER_USER_QUERY.currentPage=1,n.request.ORDER_USER_QUERY.statusArr="1,2,3,4,5,11,12",n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver","active"),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needDeliver"},"cover")):t.hasClass("state_needReceive")?(n.request.ORDER_USER_QUERY.status=6,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive","active"),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needReceived"},"cover")):t.hasClass("state_finished")&&(n.request.ORDER_USER_QUERY.status=7,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished","active"),n.jsUtil.url.setParam({queryType:"finished"},"cover")),n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]).done(function(){$("html,body").animate({scrollTop:0},300)}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"获取失败，请重试！"})}))},".component-orderList-orderDetails .btn_confirmDelivery touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_CONFIRM.orderId=r,o.refresh({type:"info",language:"zh",content:"该订单是否确认收货？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_CONFIRM").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"确认收货失败！"})}).fail(function(e){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"确认收货失败！"})})}})},".component-orderList-orderDetails .btn_closeOrder touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_CLOSE.orderId=r,o.refresh({type:"info",language:"zh",content:"是否关闭该订单？请确认！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_CLOSE").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"关闭订单失败！"})}).fail(function(e){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"关闭订单失败！"})})}})},".component-orderList-orderDetails .btn_delOrder touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_DELETE.orderId=r,o.refresh({type:"info",language:"zh",content:"是否删除该订单？请确认！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_DELETE").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"订单确认失败！"})}).fail(function(e){e&&e.errorMsg&&o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e.errorMsg||"订单确认失败！"})})}})},".component-orderList-orderDetails .btn_refund touchend":function(){var e=this,n=e.modules.message,t=e.renderData.global.config.siteInfo.attr()||{};t.qq?window.open("http://wpa.qq.com/msgrd?v=3&uin="+t.qq+"&site=qq&menu=yes"):n.refresh({content:"暂时无法联系客服!",confirmBtn:!1})},".component-orderList-orderDetails .btn_toPay touchend":function(e){var t=this,r=$(e),o=t.modules.message,s=t.config.global.redirect,a=r.attr("orderId"),i=localStorage.getItem("openId");if(n.jsEvent.touch.focusTime<=300)return null;t.renderData.payChoose.config.attr("payChooseShow",!0),t.renderData.payChoose.config.attr("payState",$.Deferred()),$.when(t.renderData.payChoose.config.attr().payState).done(function(e){var n="",r="",c=function(){},l=function(){setTimeout(function(){window.location.replace(window.location.href)},200)};"weChatPay"===e&&(n="JSAPI",r=1,c=function(e){t.jsUtil.weChat.toPay("JSAPI",e.obj,{success:l})}),"aliPay"===e&&(n="scanCode",r=2,c=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"unionPay"===e&&(n="08",r=3,c=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),t.sendRequest("PAY_ORDER",{orderId:a,payType:r,type:n,openId:i,redirect:s}).done(function(n){n&&n.success?c(n):n&&n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):"weChatPay"===e&&o.refresh({content:"该订单已被微信关闭，请手动关闭该订单！",confirmBtn:!1})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"支付失败！"})})})},".component-orderList-orderDetails .btn_viewLogistics touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orderInfo.orderList.attr(),s=t.attr("orderId"),a=null;if($.each(o||{},function(e,n){if(s===n.orderId)return a=n,!1}),a){var i=!1,c=a.orderExpressList||[];$.each(c,function(e,n){if(n.expressId&&n.expressName)return i=!0,!1}),i?window.location.href="/logistics.html?orderId="+s:r.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！"})}else r.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！"})},"{window}   scroll":function(){var e=this,n=$(document),t=e.config.global.totalPages,r=e.config.global.currentPage,o=e.request.ORDER_USER_QUERY.currentPage,s=r===t,a=r<o,i=$(window).scrollTop()+$(window).height()+350>$(document).height();s?n.find(".isLoading span").text("没有更多数据了..."):n.find(".isLoading span").text("请下拉加载..."),!i||s||a||(e.request.ORDER_USER_QUERY.currentPage++,e.sendRequest("ORDER_USER_QUERY",{currentPage:r+1}).done(function(t){if(t&&t.success){var r=t.obj;$.each(r.orderList,function(n,t){e.renderData.global.response.orderInfo.orderList.push(t)}),r.pagination.currentPage===r.pagination.totalPages&&n.find(".isLoading span").text("没有更多数据了..."),e.config.global.currentPage=r.pagination.currentPage,e.config.global.totalPages=r.pagination.totalPages}}))}})}),define("modular/module/module-orderDetail-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-orderdetail-1></component-orderdetail-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{resDynamic:!0,beforeFunc:function(e,n){e.response.global.orderInfo=n.response.global.orderInfo.orderList[0]||{}}},payChoose:{cfgDynamic:!0}},config:{payChoose:{payChooseShow:!1,payState:null}},request:{},response:{},sendArr:["ORDER_USER_QUERY/global/orderInfo"],reload:!1,".component-orderDetail-content .orderItem .btn_viewLogistics touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.attr("orderId"),s=n.renderData.global.response.orderInfo.attr();if(s){var a=!1,i=s.orderExpressList||[];$.each(i,function(e,n){if(n.expressId&&n.expressName)return a=!0,!1}),a?window.location.href="/logistics.html?orderId="+o:r.refresh({content:"暂无物流信息！"})}else r.refresh({content:"暂无物流信息！"})},".component-orderDetail-content .component-orderDetail-log .btn_toPay touchend":function(e){var t=this,r=$(e),o=t.modules.message,s=t.config.global.redirect,a=r.attr("orderId"),i=localStorage.getItem("openId");if(n.jsEvent.touch.focusTime<=300)return null;t.renderData.payChoose.config.attr("payChooseShow",!0),t.renderData.payChoose.config.attr("payState",$.Deferred()),$.when(t.renderData.payChoose.config.attr().payState).done(function(e){var n="",r="",c=function(){},l=function(){setTimeout(function(){window.location.replace(window.location.href)},200)};"weChatPay"===e&&(n="JSAPI",r=1,c=function(e){t.jsUtil.weChat.toPay("JSAPI",e.obj,{success:l})}),"aliPay"===e&&(n="scanCode",r=2,c=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"unionPay"===e&&(n="08",r=3,c=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),t.sendRequest("PAY_ORDER",{orderId:a,payType:r,type:n,openId:i,redirect:s}).done(function(n){n&&n.success?c(n):n&&n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):"weChatPay"===e&&o.refresh({content:"该订单已被微信关闭，请手动关闭该订单！",confirmBtn:!1})}).fail(function(){o.refresh({type:"error",content:"支付失败！"})})})}})}),define("modular/module/module-logistics-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-logistics-1></component-logistics-1>"},region:{global:{beforeFunc:function(e,n){delete e.response.global.pagination,e.response.global.orderInfo=n.response.global.orderList[0]||{}},afterFunc:function(e){var n=$.Deferred(),t=e.modules.message,r=e.response.global.orderInfo,o=r?r.orderExpressList:[];if(o.length>0){var s=[];return $.each(o,function(n,r){if(!r.expressId||!r.expressName)return!0;var a={expressId:r.expressId,carrierName:r.expressName},i=function(e,n,a,c){c&&(s[e]=$.Deferred()),n.sendRequest("THIRD_LOGISTICS",a).done(function(n){n&&n.success&&$.isArray((n.obj||{}).Traces)?(o[e].infoArr=n.obj.Traces.reverse(),s[e].resolve()):(t.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+r.expressId+"’的物流信息！"}),s[e].resolve())}).fail(function(){c?i(e,n,a,!1):(t.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+r.expressId+"’的物流信息！"}),s[e].resolve())})};i(n,e,a,!0)}),$.when.apply(e,s).done(function(){e.config.global.isMore=o.length>1,e.config.global.length=o.length,e.renderFunc(["global"]),n.resolve()}),n}t.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！",timeOutFun:function(){window.history.go(-1)}})}}},config:{global:{}},request:{global:{}},response:{global:{}},sendArr:["ORDER_USER_QUERY"],reload:!1})}),define("modular/module/module-alert-discount-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=t?["COUPON_NODE_QUERY/global"]:[];return e.extend({tags:{global:"<component-alert-discount-1></component-alert-discount-1>"},region:{global:{reqDynamic:!0,resDynamic:!1,beforeFunc:function(e,n){$.isArray(n.response.global)&&0!==n.response.global.length||(e.config.global.isShow=!1)}}},config:{global:{isShow:window.localStorage.getItem("alertDiscount")}},request:{COUPON_NODE_QUERY:{node:1}},sendArr:r,reload:!1,refresh:function(e){var n=this,t=n.renderData.global.response,r=$.isArray(t)&&$.isPlainObject(t[0]);"object"==typeof e&&$.each(e,function(t){n.config.global[t]=e[t]}),r&&-1!==!t[0].receiveStatus||(n.config.global.isShow=!1),n.renderFunc(["global"])},".component-alert-discount-alert .msg-btn touchend":function(){var e=this,n=e.modules.message,t=e.renderData.global.response[0].couponId;e.sendRequest("COUPON_RECEIVE",{couponId:t}).done(function(t){t.success?(n.refresh({content:"领取成功！是否跳转到我的优惠券？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href=".discount.html?jumpUrl=/personal-center.html"}}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()):(n.refresh({cancelBtn:!1,confirmBtn:!1,
content:t.errorMsg||"领取失败！"}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh())}).fail(function(){n.refresh({cancelBtn:!1,confirmBtn:!1,content:"领取失败！"}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()})},".component-alert-discount-alert .cancel-btn touchend":function(){var e=this;window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()}})}),define("modular/module/module-discount-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-discount-1></component-discount-1>"},region:{global:{cfgDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){null===n.response.global&&(e.response.global={}),"personalCenter"===e.config.global.type&&$.each(e.response.global,function(e,n){n.type=n.name.split("/")[1]||"",n.name=n.name.split("/")[0]||""})}}},config:{global:{status:0}},request:{COUPON_USERLIST_QUERY:{status:0}},response:{global:{}},sendArr:["COUPON_USERLIST_QUERY/global"],reload:!1,".component-discount-type li:not(.active) touchend":function(e){var n=this,t=$(e),r=t.attr("type");n.config.global.status=r,t.addClass("active").siblings(".active").removeClass("active"),n.toRender("COUPON_USERLIST_QUERY/global",{status:r},["global"])},".component-discount-list.personalCenter .list-item.normal .availableAll touchend":function(e){window.location.href="/index.html"},".component-discount-list.personalCenter .list-item.normal .classification touchend":function(e){var n=this,t=$(e),r=t.attr("index"),o=n.response.global[r].rule.range,s=n.response.global[r].rule.category;1===o&&(window.location.href="/searchProduct.html?firstCategory="+s),2===o&&(window.location.href="/searchProduct.html?secondCategory="+s),3===o&&(window.location.href="/searchProduct.html?thirdCategory="+s)},".component-discount-list.personalCenter .list-item.normal .lookGoodsDetail touchend":function(e){var n=this,t=$(e),r=t.attr("index"),o=n.response.global[r].rule.range,s=n.response.global[r].rule.bindingList||[],a=s.length;if(4===o&&s&&a>0){var i=Math.floor(Math.random()*a),c=s[i].goodsId;window.location.href="/goodsDetail.html?goodsId="+c}},".component-discount-list.orderConfirm .list-item:not(.lose):not(.used) touchend":function(e){var n=this,t=$(e),r=t.attr("couponId"),o=t.attr("discountType"),s=t.hasClass("select"),a=n.renderData.global.config,i=n.renderData.global.response,c=n.renderData.global.config.showDiscount,l=c.attr(),d=i.goodsTypeObj.attr(),p=i.attr("discountPrice"),u=i.orderDiscount.attr(),m=u.type,f=u.supplierId,g=l[o].pool[r],h=g.rule.range,b=g.rule.category,v=g.rule.valueType,y=g.rule.bindingList,j=g.rule.deductibleValue,_=0,w=-1,O=-1,C="",I="",D="";if(0===h)_=d[h].price,0===v&&(p=s?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=s?1*p-j:1*p+j,i.attr("discountPrice",p));else if(4===h){var S=[];$.each(y,function(e,n){void 0!==d[h][n]&&S.push(d[h][n].price)}),_=Math.max.apply(Math,S),0===v&&(p=s?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=s?1*p-j:1*p+j,i.attr("discountPrice",p))}else _=d[h][b].price,0===v&&(p=s?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=s?1*p-j:1*p+j,i.attr("discountPrice",p));"unSuperposition"===o&&(s?(C=l[o].chooseObj[r],I=C.split("_")[0]===m.toString(),D=C.split("_")[1]===f.toString(),I&&D&&(a.attr("choose","-1"),i.orderDiscount.info[o].attr("choose","-1"),c[o].chooseObj.removeAttr(r))):(a.attr("choose",r),i.orderDiscount.info[o].attr("choose",r),c[o].chooseObj.attr(r,m+"_"+f))),"superposition"===o&&(s?(C=l[o].chooseObj[r],I=C.split("_")[0]===m.toString(),D=C.split("_")[1]===f.toString(),I&&D&&(w=$.inArray(r,a.chooseArr),O=$.inArray(r,u.info[o].chooseArr),-1!==w&&a.chooseArr.splice(w,1),-1!==O&&i.orderDiscount.info[o].chooseArr.splice(O,1),c[o].chooseObj.removeAttr(r))):(w=$.inArray(r,a.chooseArr),O=$.inArray(r,u.info[o].chooseArr),-1===w&&a.chooseArr.push(r),-1===O&&i.orderDiscount.info[o].chooseArr.push(r),c[o].chooseObj.attr(r,m+"_"+f)))}})}),define("modular/module/module-forgetPassword-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-forgetpassword-1></component-forgetpassword-1>"},region:{global:{reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",validation:"",password:"",confirmPassword:""}},sendArr:[],reload:!1,".component-forgetPassword-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&1==e.obj?t.removeClass("state_error"):(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号尚未注册！"}),t.addClass("state_error"))}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.addClass("state_error")})},".component-forgetPassword-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,s=t.parents(".component-forgetPassword-validation");r.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.request.attr();!r.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.account)&&n.sendRequest("THIRD_PHONE",{phone:e.account}).done(function(e){if(e&&e.success){var n=60,r=function(e){n>0?(n--,s.find(".doing .val").text(n),setTimeout(function(){r(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),r(t)}else o.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-forgetPassword-forgetPasswordBtn:not(.state_error) touchend":function(){var e=this,n=e.element,t=e.modules.message,r=e.renderData.global.config.jumpUrl;e.jsUtil.weChat.browser()?setTimeout(function(){var o=e.renderData.global.request.attr();!n.find("#account").hasClass("state_error")&&e.jsUtil.check.phone(o.account)&&(window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),e.sendRequest("AUTH_PWD_CHANGE",{userName:o.account,password:o.password,code:o.validation}).done(function(e){e&&e.success?t.refresh({content:"修改密码成功!",cancelBtn:!1,confirmBtn:!1,timeOutFun:function(){window.location.href=r?"/login.html?jumpUrl="+r:"/login.html"}}):t.refresh({cancelBtn:!1,confirmBtn:!1,content:e.errorMsg})}).fail(function(){t.refresh({content:"修改密码失败!",confirmBtn:!1})}))},200):t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-scroll-top-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-scroll-top-1></component-scroll-top-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!1,resDynamic:!1}},config:{},request:{},response:{},sendArr:[],reload:!1})}),define("modular/frames/fn",["fn.roller","fn.picker","fn.timeout"],function(){}),define("modular/component",["modular/frames/fn","modular/component/component-header-1","modular/component/component-footer-1","modular/component/component-searchHistory-1","modular/component/component-message-1","modular/component/component-searchProduct-1","modular/component/component-personal-center-1","modular/component/component-login-1","modular/component/component-register-1","modular/component/component-bindInvitation-1","modular/component/component-bindMobile-1","modular/component/component-personal-information-1","modular/component/component-address-manage-1","modular/component/component-address-edit-1","modular/component/component-shoppingCart-1","modular/component/component-orderConfirm-1","modular/component/component-orderList-1","modular/component/component-orderDetail-1","modular/component/component-logistics-1","modular/component/component-alert-discount-1","modular/component/component-discount-1","modular/component/component-forgetPassword-1","modular/component/component-pagination-1","modular/component/component-pay-choose-1","modular/component/component-site-introduce-1","modular/component/component-scroll-top-1"],function(){}),define("config.page.modular",["modular/component","modular/module/module-header-1","modular/module/module-footer-1","modular/module/module-searchHistory-1","modular/module/module-message-1","modular/module/module-site-introduce-1","modular/module/module-searchProduct-1","modular/module/module-bindInvitation-1","modular/module/module-personal-center-1","modular/module/module-login-1","modular/module/module-register-1","modular/module/module-bindMobile-1","modular/module/module-personal-information-1","modular/module/module-address-manage-1","modular/module/module-address-edit-1","modular/module/module-shoppingCart-1","modular/module/module-orderConfirm-1","modular/module/module-orderList-1","modular/module/module-orderDetail-1","modular/module/module-logistics-1","modular/module/module-alert-discount-1","modular/module/module-discount-1","modular/module/module-forgetPassword-1","modular/module/module-scroll-top-1"],function(e,n,t,r,o,s,a,i,c,l,d,p,u,m,f,g,h,b,v,y,j,_,w,O){"use strict";var C=window.capi.get();C.jsModular||Object.defineProperty(C,"jsModular",{configurable:!1,writable:!1,value:{}}),C.jsModular.codes||Object.defineProperty(C.jsModular,"codes",{configurable:!1,writable:!1,value:{module_00001:{md:n,cls:"module-header-1"},module_00002:{md:t,cls:"module-footer-1"},module_00005:{md:r,cls:"module-searchHistory-1"},module_00006:{md:o,cls:"module-message-1"},module_00007:{md:s,cls:"module-site-introduce-1"},module_00010:{md:a,cls:"module-searchProduct-1"},module_00011:{md:i,cls:"module-bindInvitation-1"},module_00012:{md:c,cls:"module-personal-center-1"},module_00013:{md:l,cls:"module-login-1"},module_00014:{md:d,cls:"module-register-1"},module_00015:{md:p,cls:"module-bindMobile-1"},module_00016:{md:u,cls:"module-personal-information-1"},module_00017:{md:m,cls:"module-address-manage-1"},module_00018:{md:f,cls:"module-address-edit-1"},module_00019:{md:g,cls:"module-shoppingCart-1"},module_00020:{md:h,cls:"module-orderConfirm-1"},module_00021:{md:b,cls:"module-orderList-1"},module_00022:{md:v,cls:"module-orderDetail-1"},module_00023:{md:y,cls:"module-logistics-1"},module_00024:{md:j,cls:"module-alert-discount-1"},module_00025:{md:_,cls:"module-discount-1"},module_00026:{md:w,cls:"module-forgetPassword-1"},module_00029:{md:O,cls:"module-scroll-top-1"}}}),C.jsModular.modules||Object.defineProperty(C.jsModular,"modules",{configurable:!1,writable:!1,value:{message:"module_00006",alertDiscount:"module_00024"}})}),define("config.page.mustache",[],function(){"use strict";var e=window.capi.get();can.mustache.registerHelper("look",function(n){var t=e.jsUtil.mustache.getContent(n),r=e.jsUtil.mustache.getDepContent(n);console.dir(t),console.dir(r)}),can.mustache.registerHelper("isExist",function(n,t){var r=e.jsUtil.mustache.getDepContent(n,"object");return can.isEmptyObject(r)?t.inverse(r||this):t.fn(r||this)}),can.mustache.registerHelper("setRenderRange",function(n,t,r,o){var s=e.jsUtil.mustache.getContent(n,"number"),a=e.jsUtil.mustache.getContent(t,"number"),i=e.jsUtil.mustache.getContent(r,"number");return a>=0&&s>=a&&(-1===i||s<a+r)?o.fn(o.context||this):o.inverse(o.context||this)}),can.mustache.registerHelper("addElementClass",function(n,t,r){var o=e.jsUtil.mustache.getContent(n),s=e.jsUtil.mustache.getContent(t),a=e.jsUtil.mustache.getContent(r);if("number"==typeof o&&(o=o.toString()),"number"==typeof s&&(s=s.toString()),o&&s&&a)return o===s?a:""}),can.mustache.registerHelper("zIndexDesc",function(n,t){var r=e.jsUtil.mustache.getContent(n,"number"),o=e.jsUtil.mustache.getContent(t,"number");if(r>=0&&o>0)return o-1*r}),can.mustache.registerHelper("zIndexAsc",function(n,t){var r=e.jsUtil.mustache.getContent(n,"number"),o=e.jsUtil.mustache.getContent(t,"number");if(r>=0&&o>0)return o+1*r})}),require(["config.page.event","config.page.modular","config.page.mustache"],function(){"use strict";var e=$.Deferred(),n=window.capi.get(!0),t=(n.jsData.userInfo.openId,n.jsData.userInfo.shopId),r=n.jsData.userInfo.userId,o=n.jsData.userInfo.gradeId,s=n.jsData.userInfo.isLogin,a=(n.jsData.userInfo.centerId,n.jsData.userInfo.welfareVip),i=(n.jsData.siteInfo.mDomainName,n.jsData.siteInfo.fDomainName,n.jsData.location.pathUrl),c=n.jsUtil.url.getParam("jumpUrl",1),l=n.jsUtil.url.getParam("formOrder"),d="1"===l,p=d?"选择收货地址":"管理收货地址";if(!s)return void setTimeout(function(){window.location.href="/login.html?jumpUrl="+i},200);a?e.resolve():n.jsModel.send("USER_INVITERINFO_CHECK",{shopId:t||o,id:r}).done(function(o){o&&o.success&&!0===o.obj?(n.jsData.userInfo.welfareVip=!0,window.localStorage.setItem("welfareVip","v:"+t+"-"+r),e.resolve()):(n.jsData.userInfo.welfareVip=!1,window.localStorage.removeItem("welfareVip"),window.location.href="/bindInvitation.html?jumpUrl="+i,e.reject())}).fail(function(){setTimeout(function(){window.location.href="/login.html?jumpUrl="+i},200),e.reject()}),$.when(e).done(function(){$.each(n.jsModular.modules,function(e,t){n.jsEvent.page.mdArr.push({role:e,code:t,area:"",tags:{},region:{},config:{global:{isLogin:s,jumpUrl:c,pathUrl:i}},request:{},response:{},floorCode:{0:10}})}),n.jsEvent.page.mdArr.push({role:"header",code:"module_00001",area:"#body-header",tags:{},region:{},config:{global:{isLogin:s,pathUrl:i,backUrl:"",jumpUrl:c,icon_back:!0,title_text:p,icon_AddressManage:d}},request:{},response:{},floorCode:{1:1}}),n.jsEvent.page.mdArr.push({role:"addressManage",code:"module_00017",area:"#body-center",tags:{},region:{},config:{global:{isLogin:s,jumpUrl:c,pathUrl:i,isFormOrder:d}},request:{},response:{},floorCode:{2:1}}),n.jsEvent.page.mdArr.push({role:"scrollTop",code:"module_00029",area:"",tags:{},region:{},config:{global:{isLogin:s,jumpUrl:c,pathUrl:i}},request:{},response:{},floorCode:{3:1}}),n.jsUtil.modular.floorQueue(n.jsEvent.page,"mdArr"),n.jsUtil.modular.showModules(n.jsEvent.page.mdArr),$.when(n.jsModular.modules.header.state).done(function(){document.querySelector("title").innerHTML=n.jsModular.modules.header.config.global.shopInfo.name||"福利商城"})})}),define("page.address.manage.1",function(){});