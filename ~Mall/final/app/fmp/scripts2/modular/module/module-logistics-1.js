define(["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-logistics-1></component-logistics-1>"},region:{global:{beforeFunc:function(e,n){delete e.response.global.pagination,e.response.global.orderInfo=n.response.global.orderList[0]||{}},afterFunc:function(e){var n=$.Deferred(),r=e.modules.message,o=e.response.global.orderInfo,s=o?o.orderExpressList:[];if(s.length>0){var t=[];return $.each(s,function(n,o){if(!o.expressId||!o.expressName)return!0;var l={expressId:o.expressId,carrierName:o.expressName},i=function(e,n,l,c){c&&(t[e]=$.Deferred()),n.sendRequest("THIRD_LOGISTICS",l).done(function(n){n&&n.success&&$.isArray((n.obj||{}).Traces)?(s[e].infoArr=n.obj.Traces.reverse(),t[e].resolve()):(r.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+o.expressId+"’的物流信息！"}),t[e].resolve())}).fail(function(){c?i(e,n,l,!1):(r.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+o.expressId+"’的物流信息！"}),t[e].resolve())})};i(n,e,l,!0)}),$.when.apply(e,t).done(function(){e.config.global.isMore=s.length>1,e.config.global.length=s.length,e.renderFunc(["global"]),n.resolve()}),n}r.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！",timeOutFun:function(){window.history.go(-1)}})}}},config:{global:{}},request:{global:{}},response:{global:{}},sendArr:["ORDER_USER_QUERY"],reload:!1})});