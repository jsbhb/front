!function(){"use strict";var e=window.app.getApi("jsData"),o=window.app.getApi("jsUtil"),t=window.app.getApi("jsModel"),i=window.app.getApi("jsEvent"),r=e.userInfo.userId,n=e.userInfo.shopId,s=e.userInfo.gradeId,a=e.userInfo.centerId,p=e.userInfo.isLogin,d=e.userInfo.welfareVip,l=e.location.pathUrl,u=e.siteInfo.shopName,h=e.siteInfo.shopAbout,I=e.siteInfo.shopHeadImg,c=e.siteInfo.shopDescribe,f=e.location.pathname.replace(/(\/?[^\/]+\/)*([^\/]+)\.html$/i,"$2"),m=o.url.getParam("itemId"),w=o.url.getParam("pushUserId"),g=o.url.getParam("jumpUrl",1),j=$.Deferred(),U={icon_home:!0,title_text:"商品详情",icon_search:!0,icon_shopCart:!0};if(!p)return void setTimeout(function(){window.location.href="/login.html?jumpUrl="+l},200);if(d?j.resolve():t.send("USER_INVITERINFO_CHECK",{shopId:n||s,id:r}).done(function(o){o&&o.success&&!0===o.obj?(e.userInfo.welfareVip=!0,window.localStorage.setItem("welfareVip","v:"+n+"-"+r),j.resolve()):(e.userInfo.welfareVip=!1,window.localStorage.removeItem("welfareVip"),window.location.href="/bindInvitation.html?jumpUrl="+l,j.reject())}).fail(function(){setTimeout(function(){window.location.href="/login.html?jumpUrl="+l},200),j.reject()}),o.url.delParam(["shopId","pushUserId"],"cover"),l=o.path.delParam(l,["shopId","pushUserId"]),"isShoper"!==w&&w&&window.localStorage.setItem("pushUserId",w),"isShoper"===w&&w&&window.localStorage.removeItem("pushUserId"),!f&&!m)return void setTimeout(function(){window.location.href="/index.html"},300);var v={jsData:e,jsUtil:o,jsModel:t,jsEvent:i,userId:r,shopId:n,gradeId:s,centerId:a,isLogin:p,welfareVip:d,pathUrl:l,jumpUrl:g,backUrl:"",toRender:j,shopName:u,shopAbout:h,shopHeadImg:I,shopDescribe:c,goodsId:f,itemId:m,initList:U,icon_home:!0,title_text:"商品详情",icon_search:!0,icon_shopCart:!0,home:"",shoppingCart:"",personalCenter:"",goodsDetail:!0,gradientHide:!0};window.app.setPage=function(e,o){"string"==typeof e&&e.trim()&&(v[e]=o)},window.app.getPage=function(e){return"string"==typeof e&&e.trim()?v[e]:v}}();