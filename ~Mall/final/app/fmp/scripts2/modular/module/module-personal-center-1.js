define(["config.page.render"],function(o){"use strict";var e=window.capi.get(),n=e.jsData.userInfo.shopId,a=e.jsData.userInfo.gradeId,t=e.jsData.userInfo.userId,s=(e.jsData.userInfo.authId,e.jsData.userInfo.openId,e.jsData.userInfo.isLogin),r=(e.jsData.userInfo.welfareVip,[]);return n&&(r=r.concat(["USER_SHOPINFO_QUERY/global/shopInfo"])),s&&(r=r.concat(["USER_DETAIL_QUERY/global/userInfo","ORDER_USER_STATUS_COUNT/global/orderStatus","USER_INVITERINFO_CHECK/global/getInvitation"])),o.extend({tags:{global:"<component-personal-center-1></component-personal-center-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(o,e){var n=0,a=0,t=0,s=0,r=o.config.global.shopName,l=o.config.global.shopAbout,c=o.config.global.shopHeadImg,i=o.config.global.shopDescribe;$.each(e.response.global.orderStatus,function(o,e){var r=e.status,l=e.total;0===r?n+=l:1===r||2===r||3===r||4===r||5===r||11===r||12===r?a+=l:6===r?t+=l:7===r&&(s+=l)}),o.config.global.shopInfo=e.response.global&&e.response.global.shopInfo||{},o.config.global.shopInfo.headImg=o.config.global.shopInfo.headImg||c,o.config.global.shopInfo.aboutus=o.config.global.shopInfo.aboutus||l,o.config.global.shopInfo.name=o.config.global.shopInfo.name||r,o.config.global.shopInfo.description=i,o.response.global.orderStatus={},o.response.global.orderStatus.needPay=n,o.response.global.orderStatus.needDeliver=a,o.response.global.orderStatus.needReceived=t,o.response.global.orderStatus.finish=s}}},config:{global:{shopName:e.jsData.siteInfo.shopName,shopAbout:e.jsData.siteInfo.shopAbout,shopHeadImg:e.jsData.siteInfo.shopHeadImg,shopDescribe:e.jsData.siteInfo.shopDescribe}},request:{global:{},USER_INVITERINFO_CHECK:{centerId:n||a,id:t}},response:{global:{}},sendArr:r,reload:!1,".component-personal-center-function a touchend":function(o){var n=this,a=$(o),t=n.modules.message,s=n.config.global.pathUrl,r=a.hasClass("needSign");return!e.jsEvent.touch.touchIsMoved&&(r&&!n.renderData.global.config.isLogin?(t.refresh({content:"您尚未登录，是否登录？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?jumpUrl="+s}}),!1):void 0)},".component-personal-center-function a.mpMall touchend":function(o){if(e.jsEvent.touch.touchIsMoved)return!1;var n=e.jsData.userInfo.userId,a=e.jsData.userInfo.shopId,t=e.jsData.userInfo.authId,s=e.jsData.userInfo.openId,r=e.jsData.siteInfo.mDomainName;window.location.href=e.jsUtil.path.setParam(r,{userId:n,shopId:a,authId:t,openId:s})},".component-personal-center-logout touchend":function(){var o=this,n=o.modules.message,a=o.config.global.pathUrl;if(e.jsEvent.touch.touchIsMoved)return!1;n.refresh({content:"是否退出当前账号？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("authId"),window.localStorage.removeItem("welfareVip"),window.location.href="/login.html?jumpUrl="+a}})},".component-personal-center-login touchend":function(){var o=this,n=o.config.global.pathUrl;if(e.jsEvent.touch.touchIsMoved)return!1;window.location.href="/login.html?jumpUrl="+n}})});