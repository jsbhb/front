!function(){"use strict";var e={};window.app.setModule=function(t,i){var r=window.app.getPage("jsUtil"),n=window.app.getPage("jsData"),a=window.app.getPage("jsModel"),o=(window.app.getPage("jsEvent"),window.app.getPage("title")),s=window.app.getPage("shopId"),c=window.app.getPage("centerId"),d=window.app.getPage("isLogin"),l=window.app.getPage("pathUrl"),u=window.app.getPage("jumpUrl"),p=(window.app.getPage("pageName"),window.app.getPage("shopName"),window.app.getPage("shopAbout"),window.app.getPage("shopHeadImg"),window.app.getPage("shopDescribe"),window.app.getPage("redirect")),m=window.app.getPage("itemId"),f=window.app.getPage("goodsId"),h=(window.app.getPage("pageData"),window.app.getPage("mainHide")),g=window.app.getPage("isBack"),y=window.app.getPage("mode"),v=window.app.getPage("platUserType"),b=window.app.getPage("loginType"),O=window.app.getPage("userType"),w=(window.app.getPage("isHide"),window.app.getPage("childId")),j=window.app.getPage("childType"),P=window.app.getPage("form"),T=(window.app.getPage("priceMin"),window.app.getPage("priceMax"),window.app.getPage("priceAreaMin")),I=window.app.getPage("priceAreaMax"),S=window.app.getPage("sortId"),C=window.app.getPage("sortType"),_=window.app.getPage("screenType"),D=(window.app.getPage("numPerPage"),window.app.getPage("currentPage"),window.app.getPage("filterCategory")),E=(window.app.getPage("firstCategory"),window.app.getPage("secondCategory"),window.app.getPage("thirdCategory"),window.app.getPage("categoryName"),window.app.getPage("dictName"),window.app.getPage("entryName")),R=window.app.getPage("goodsName"),x=(window.app.getPage("upShelves"),window.app.getPage("useStorage")),N=window.app.getPage("brandpys"),k=window.app.getPage("category"),q=window.app.getPage("origins"),M=window.app.getPage("brands"),L=window.app.getPage("origin"),A=window.app.getPage("brand"),U=window.app.getPage("type"),F=(window.app.getPage("tag"),window.app.getPage("locationId")),V=window.app.getPage("locations"),B=window.app.getPage("popState"),Q=window.app.getPage("search"),Y=window.app.getPage("status"),H=[],G=[];if(/^error-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{},methods:{},created:function(){$("body").css("background-color","#f6f7f9")},mounted:function(){var e=$("#body-center").css("height");$(i).css("height",e)}})),/^message-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{type:"info",language:"zh",content:null,title:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){}},computed:{returnCancelText:function(){return"en"===this.language?"cancel":"取消"},returnConfirmText:function(){return"en"===this.language?"confirm":"确认"}},methods:{refresh:function(e){var t=this;$.each(e,function(e,i){t[e]=i})},cancelClick:function(){var e=this;"function"==typeof e.cancelFun&&e.cancelFun(),$(this.$el).find(".message-1-content").animate({opacity:0},500,function(){e.type="info",e.language="zh",e.content=null,e.title=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){}})},confirmClick:function(){var e=this;"function"==typeof e.confirmFun&&e.confirmFun(),$(this.$el).find(".message-1-content").animate({opacity:0},500,function(){e.type="info",e.language="zh",e.content=null,e.title=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){}})}},watch:{content:function(){this.content&&($(this.$el).find(".message-1-content").stop(!0,!0),$(this.$el).find(".message-1-content").css({opacity:0}),$(this.$el).find(".message-1-content").animate({opacity:1},500))}},mounted:function(){var e=this;$(document).on("click",function(t){var i=t||window.event,r=$(i.target||i.srcElement);e.DOMClick&&0===r.parents(e.$el).length&&(e.cancelBtn&&"function"==typeof e.cancelFun?e.cancelFun():e.confirmBtn&&"function"==typeof e.confirmFun&&e.confirmFun(),$(e.$el).find(".message-1-content").animate({opacity:0},500,function(){e.type="info",e.language="zh",e.content=null,e.title=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){}}))})}})),/^alertDefault-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{content:null},computed:{},methods:{refresh:function(e){this.evFunc=e.evFunc,this.content=e.content}},watch:{content:function(){if(this.content){var e=this;$(i).stop(!0,!0),$(i).css({opacity:0}),$(i).animate({opacity:1},500,function(){setTimeout(function(){$(i).animate({opacity:0},1e3,function(){e.content="","function"==typeof e.evFunc&&e.evFunc(),e.evFunc=null})},1200)})}}}})),/^alertDiscount-1-\d+$/.test(t)){var z=e["alertDefault-1-1"];e[t]=new Vue({el:i,data:{isShow:!1,couponId:-1,isBack:g},computed:{},methods:{refresh:function(e){this.isShow=e.isShow},cancelBtnClick:function(){this.isBack?window.history.back(-1):window.location.href="/index.html"},msgBtnClick:function(e){var t=e||window.event,i=$(t.currentTarget),r=window.localStorage.getItem("authId"),n=i.attr("couponId");a.send("COUPON_RECEIVE",{couponId:n,reqHeader:{authentication:r},userId:window.localStorage.getItem("userId")}).done(function(e){e.success?(z.refresh({content:"领取成功"}),window.location.href="/personal.html?childType=discount"):z.refresh({content:e.errorMsg})})}},watch:{}})}if(/^header-1-\d+$/.test(t)&&(H=[],d&&H.push("USER_DETAIL_QUERY"),d&&H.push("ORDER_SHOPPINGCART_COUNT"),s&&H.push("USER_SHOPINFO_QUERY"),e[t]=new Vue({el:i,data:{title:"",isLogin:d,searchCont:R,shopName:o,showName:"",cartCount:0},beforeCreate:function(){var e=this;a.send(["PAGE_HEADER1_QUERY_NODE"],[]).done(function(t){e.title=t&&t.cont&&t.cont[0]&&t.cont[0].title||""}),a.send(H,[],!0).done(function(t){var i={},r={},n=0;H.length>1?(i=t&&t.USER_DETAIL_QUERY||{},r=t&&t.USER_SHOPINFO_QUERY||{},n=t&&t.ORDER_SHOPPINGCART_COUNT||0):1===H.length&&(d&&(i=t&&t.USER_DETAIL_QUERY||{}),s&&(r=t&&t.USER_SHOPINFO_QUERY||{}),d&&(n=t&&t.ORDER_SHOPPINGCART_COUNT||0)),n&&(e.cartCount=n||0),r.name&&(e.shopName=o+" --- "+r.name),i.userDetail&&i.userDetail.nickName?e.showName=i.userDetail.nickName:i.userDetail&&i.userDetail.name?e.showName=i.userDetail.name:i.phone&&(e.showName=i.phone)})},mounted:function(){}}),$(i).on("click",".header-1-content .btn_search",function(){var e=$(this).prev().val(),t=$(this).prev().attr("placeholder");window.location.href=encodeURI("/search.html?goodsName="+(e||t))}),$(i).on("keydown",".header-1-content .input_search",function(e){var t=e||window.event;13===(t.keyCode||t.which)&&$(i).find(".header-input .btn_search").click()}),$(i).on("click",".header-1-content .btn_clear, .header-1-top-title a.cancel_out",function(){window.localStorage.clear(),window.location.reload()})),/^header-2-\d+$/.test(t)&&(H=[],d&&H.push("USER_DETAIL_QUERY"),d&&H.push("ORDER_SHOPPINGCART_COUNT"),s&&H.push("USER_SHOPINFO_QUERY"),e[t]=new Vue({el:i,data:{title:"",isLogin:d,searchCont:R,showName:o,shopName:"",cartCount:0},beforeCreate:function(){var e=this;a.send(["PAGE_HEADER2_QUERY_NODE"],[]).done(function(t){e.title=t&&t.cont&&t.cont[0]&&t.cont[0].title||""}),a.send(H,[],!0).done(function(t){var i={},r={},n=0;H.length>1?(i=t&&t.USER_DETAIL_QUERY||{},r=t&&t.USER_SHOPINFO_QUERY||{},n=t&&t.ORDER_SHOPPINGCART_COUNT||0):1===H.length&&(d&&(i=t&&t.USER_DETAIL_QUERY||{}),s&&(r=t&&t.USER_SHOPINFO_QUERY||{}),d&&(n=t&&t.ORDER_SHOPPINGCART_COUNT||0)),n&&(e.cartCount=n||0),r.name&&(e.shopName=o+" --- "+r.name),i.userDetail&&i.userDetail.nickName?e.showName=i.userDetail.nickName:i.userDetail&&i.userDetail.name?e.showName=i.userDetail.name:i.phone&&(e.showName=i.phone)})}}),$(i).on("click",".header-2-content .btn_search",function(){var e=$(this).prev().val(),t=$(this).prev().attr("placeholder");window.location.href=encodeURI("/search.html?goodsName="+(e||t))}),$(i).on("keydown",".header-2-content .input_search",function(e){var t=e||window.event;13===(t.keyCode||t.which)&&$(i).find(".header-input .btn_search").click()}),$(i).on("click",".header-2-content .btn_clear, .header-2-top-title a.cancel_out",function(){window.localStorage.clear(),window.location.reload()}),$(window).on("scroll",function(){$(window).scrollTop()>=141?$(i).slideDown(200):$(i).hide()})),/^nav-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{mode:y,sortId:S,timer_ul:null,isLeaveEnd:!0,timer_contType:null,contType_mouseLeave:function(e){var t=this,i=e.find(".contType>ul"),r=!e.find(".contType").hasClass("showed");r&&t.isLeaveEnd?(i.css("overflow","hidden"),i.stop(!0,!0).animate({height:"0px"},200,function(){e.find(".contType").removeClass("showing")})):r&&(t.timer_ul=setTimeout(function(){t.contType_mouseLeave(e)},150))},ul_mouseLeave:function(e){var t=this,i=e.find(".contType>ul"),r=e.find(".contType>ul>li"),n=r.find(".showContItemList"),a=r.find(".contTypeTitle > img");parseFloat(n.css("width"))<5?(t.isLeaveEnd=!0,i.removeClass("hover"),r.removeClass("hover"),a.each(function(){$(this).attr("src",$(this).attr("src").replace("/on/","/off/"))}),n.css("visibility","hidden")):(t.isLeaveEnd=!1,t.timer_contType=setTimeout(function(){t.ul_mouseLeave(e)},150))}},methods:{getFaName:function(e){return["fa-child","fa-heartbeat","fa-star","fa-home","fa-github-alt"][e%5]},contTypeMouseenter:function(e){var t=$(e.currentTarget).find(">ul");t.addClass("showing").stop(!0,!0),t.css({height:50*t.find(">li").length+"px",overflow:"visible"})},contTypeMouseleave:function(e){var t=this,i=$(this.$el);this.timer=setTimeout(function(){t.contType_mouseLeave(i)},200)},contTypeUlMouseenter:function(e){clearTimeout(this.timer_ul),$(e.currentTarget).addClass("hover")},contTypeUlMouseleave:function(e){var t=this,i=$(this.$el);this.timer=setTimeout(function(){t.ul_mouseLeave(i)},200)},contTypeUlLiMouseenter:function(e){$(e.currentTarget).parent().find(">li").removeClass("hover"),$(e.currentTarget).parent().find(">li .showContItemList").css("visibility","hidden"),$(e.currentTarget).parent().find(">li:not(.hover) .contTypeTitle > img").each(function(){$(this).attr("src",$(this).attr("src").replace("/on/","/off/"))}),$(e.currentTarget).addClass("hover"),$(e.currentTarget).find(".showContItemList").css("visibility","visible"),$(e.currentTarget).find(".contTypeTitle > img").each(function(){$(this).attr("src",$(this).attr("src").replace("/off/","/on/"))})},contTypeTitleClick:function(e){var t=$(e.currentTarget).find("span").text().trim()||"",i=$(e.currentTarget).parent().attr("id");window.location.href=encodeURI("/search.html?categoryName="+t+"&firstCategory="+i)},entryIdClick:function(e){var t=$(e.currentTarget).text().trim()||"",i=$(e.currentTarget).parents("li[dictId]").find(".title > span").text().trim()||"",r=$(e.currentTarget).parents("li[id]").find(".contTypeTitle>span").text().trim()||"",n=$(e.currentTarget).attr("entryId"),a=$(e.currentTarget).parents("[dictid]").attr("dictid"),o=$(e.currentTarget).parents("[id]").attr("id");window.location.href=encodeURI("/search.html?categoryName="+r+"&dictName="+i+"&entryName="+t+"&thirdCategory="+n+"&secondCategory="+a+"&firstCategory="+o)},titleClick:function(e){var t=$(e.currentTarget).find("> span").text().trim()||"",i=$(e.currentTarget).parents("li[id]").find(".contTypeTitle>span").text().trim()||"",r=$(e.currentTarget).parent().attr("dictid"),n=$(e.currentTarget).parents("[id]").attr("id");window.location.href=encodeURI("/search.html?categoryName="+i+"&dictName="+t+"&secondCategory="+r+"&firstCategory="+n)}},mounted:function(){$(i).on("click",".nav-1-content .contNav > a",function(e){var t=$(this).attr("href"),i=$(this).attr("sortId");return r.path.getParam(t,"upShelves")?window.location.href=r.path.setParam(t,{sortId:i,filterCategory:"show"}):window.location.href=r.path.setParam(t,{sortId:i}),!1})}})),/^banner-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{length:$(i).find(".banner-bannerImg > a").length,toBanner:function(e,t,i,r){var n=this,a=e.find(".carousel_i:eq("+t+")");n.length<=1||1!==a.filter(".isShowed").length||(e.find(".carousel_i:eq("+t+")").removeClass("showing isShowed"),e.find(".carousel_i:eq("+i+")").addClass("showing"),e.find("a").fadeOut(500),e.find("a:eq("+i+")").fadeIn(1500,function(){r||(n.timer=setTimeout(function(){t=i,i=t+1<n.length?t+1:0,n.toBanner(e,t,i)},3500)),e.find(".carousel_i:eq("+i+")").addClass("isShowed")}))},carouselClick:function(e,t){var i=this,r=1*e.find(".carousel_i.showing").index();i.toBanner(e,r,t,!0)}},methods:{imgMouseenter:function(){var e=$(this.$el);clearTimeout(this.timer),e.find("a").stop(!0,!0),clearTimeout(this.timer)},imgMouseleave:function(){var e=this,t=$(this.$el),i=1*t.find(".carousel_i.showing").index(),r=i+1<this.length?i+1:0;e.timer=setTimeout(function(){e.toBanner(t,i,r)},1500)},carouselIClick:function(e){var t=$(this.$el),i=$(e.currentTarget);if($(e.currentTarget).hasClass("showing"))clearTimeout(this.timer),t.find("a").stop(!0,!0),clearTimeout(this.timer);else{clearTimeout(this.timer),t.find("a").stop(!0,!0),clearTimeout(this.timer);var r=1*i.index();this.carouselClick(t,r)}}},mounted:function(){var e=this,t=$(this.$el),i=1<e.length?1:0;t.find(".banner-bannerImg > a").hide(),t.find(".banner-bannerImg > a:first-child").show(),t.find(".carousel_i:eq(0)").addClass("isShowed"),e.timer=setTimeout(function(){e.toBanner(t,0,i)},1500)}})),/^advertising-1-\d+$/.test(t)&&(e[t]=new Vue({el:i})),/^floor-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{},methods:{}})),/^floor-2-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{nextHour:"00",nextMinute:"00",nextSecond:"00",EndHour:"00",EndMinute:"00",EndSecond:"00",activeType:null},methods:{},mounted:function(){function e(e){if(e){var t=new Date(e);return{year:t.getFullYear(),month:("0"+(t.getMonth()+1)).slice(-2),day:("0"+t.getDate()).slice(-2),hour:("0"+t.getHours()).slice(-2),minutes:("0"+t.getMinutes()).slice(-2),seconds:("0"+t.getSeconds()).slice(-2)}}}function t(t){var i=new Date($.ajax({async:!1}).getResponseHeader("Date")).getTime(),r=e(i),n=r.year+"/"+r.month+"/"+r.day,a=new Date(n+" 10:00:00").getTime(),o=1*a+864e5,s=o-i;t.activeType=s>0?0:null;var c=parseInt(s)/1e3,d=0,l=0;c>=60&&(d=parseInt(c/60),c=parseInt(c%60),d>=60&&(l=parseInt(d/60),d=parseInt(d%60))),parseInt(c)<10?t.EndSecond="0"+parseInt(c):t.EndSecond=parseInt(c),t.EndMinute=d<10?"0"+parseInt(d):parseInt(d),t.EndHour=l<10?"0"+parseInt(l):l>=24?"00":parseInt(l)}var i=this;t(i),setInterval(function(){t(i)},1e3)}})),/^footer-img-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^footer-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{mainHide:h,siteInfo:n.siteInfo,qqHref:"http://wpa.qq.com/msgrd?v=3&uin="+n.siteInfo.qq+"&=qq&menu=yes",miniImg:"https://static.cncoopbuy.com:8080/wechat/appletcode/"+(s||2)+"/"+(s||2)+".png"}}),$(i).on("click",".footer-1-content .myKf .top",function(){$("html").animate({scrollTop:0},600)})),/^sideFixed-1-\d+$/.test(t)&&($("[id^='floor-1-']").each(function(){var e="#"+$(this).attr("id"),t=$(this).find(".floor-title-left > ul > li:first").text();G.push({name:t,id:e})}),e[t]=new Vue({el:i,data:{list:G,active_offset:0,position_offset:108,isShow:!1},methods:{setElementCSS:function(e){var t=$("body").width(),i=window.innerHeight,r=e.height(),n=(t-1340)/2,a=(i-r)/2;a=a>150?a:150,this.active_offset=a,t>=1300?e.css({display:"block",position:"fixed",top:a+"px",left:n+"px"}):e.css({display:"none"})}},mounted:function(){var e=this,t=$(".floor-1-content"),i=$(".floor-1-content")[0],r=$(".floor-1-content")[t.length-1],n=$(i).innerHeight(),a=$(i).offset().top-100,o=$(r).offset().top+n-100;e.setElementCSS($(e.$el)),window.onresize=function(){e.setElementCSS($(e.$el))},$("body").scrollMonitor({active_offset:e.active_offset,position_offset:e.position_offset}),$(window).scroll(function(){var t=$(window).scrollTop();e.isShow=t>=a&&t<=o})}})),/^goodsDetail-1-\d+$/.test(t)){var J=e["header-1-1"],W=e["header-2-1"],K=e["message-1-1"],z=e["alertDefault-1-1"];a.send("GOODS_ID_QUERY_NODE",{goodsId:f}).done(function(o){e[t]=new Vue({el:i,data:{pathUrl:l,isFreePost:null,status:null,stock:0,quantity:1,minQuantity:0,maxQuantity:1/0,spcExciseTax:0,spcIncrementTax:0,spcCarton:"",spcPrice:"0.00",spcVipPrice:"0.00",spcRealPrice:"0.00",spcRealVipPrice:"0.00",itemContCode:"itemHide",nextHour:"00",nextMinute:"00",nextSecond:"00",quantityTimer:null,quantityDes:"",couponList:[],advertData:[],objArr:[],mdData:o&&o.cont||{}},computed:{},methods:{getItemObj:function(e){var t,i=this,r=0,n=[],a={},o=i.codeArr,s=i.itemCont,c=i.objArr=[],d=$.extend(!0,{},i.itemKey);return $.each(d||{},function(t){e[t]||(e[t]="[^;]*")}),$.each(e||{},function(e,t){var i=t;"[^;]*"!=i&&(i=t.replace(/\//g,"\\/").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\^/g,"\\^").replace(/\$/g,"\\$").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\?/g,"\\?").replace(/\,/g,"\\,").replace(/\./g,"\\.").replace(/\&/g,"\\&"));var r=$.inArray(e,o);-1!==r&&(n[r]=i)}),t=new RegExp("^"+n.join(";")+"$",""),$.each(s,function(n,d){t.test(n)&&(c.push(s[n]),i.itemContCode=n,i.itemContTagList=d.tagList,i.itemContTag={preSaleName:d.preSaleName,preSaleDesc:d.preSaleDesc},i.stock=d.stock>=0?d.stock:0,i.status=d.status,r++),$.each(e,function(t){var r,s=[],c=$.extend(!0,{},e);$.each(c||{},function(e,i){var r=i;if("[^;]*"!=i)var r=i.replace(/\//g,"\\/").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\^/g,"\\^").replace(/\$/g,"\\$").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\?/g,"\\?").replace(/\,/g,"\\,").replace(/\./g,"\\.").replace(/\&/g,"\\&");var n=$.inArray(e,o);t===e&&(s[n]="[^;]*"),t!==e&&-1!==n&&(s[n]=r)}),r=new RegExp("^"+s.join(";")+"$",""),r.test(n)&&$.each(n.split(";"),function(e,r){if(r){var n=i.codeArr[e];n===t&&(a[n]=a[n]||[],-1===$.inArray(r,a[n])&&a[n].push(r))}})})}),$.each(a,function(e,t){$.each(t,function(t,i){var r=$.inArray(i,d[e]);-1!==r&&d[e].splice(r,1)})}),1!==r?(i.stock=1/0,i.itemContTagList=[],i.itemContCode="itemHide",i.itemContTag=null):0===i.status?(i.itemContCode="downShelf",z.refresh({content:"该商品所选规格已下架, 请选择其他规格！"})):i.stock<=0&&(i.itemContCode="noStock"),i.setItemCont(),d},setItemCont:function(){var e=this,t=[],i=[],r=[],n=[],a=[],o=[],s=[],c=[];$.each(e.objArr,function(d,l){var u=e.quantity,p=e.getNumRegion(l.priceList),m=p.minQuantity,f=p.maxQuantity;a.push(m),o.push(f),e.minQuantity=m,e.maxQuantity=f,"itemHide"!==e.itemContCode&&(u=u>f?f:u,u=u<m?m:u,u=u>l.stock?l.stock:u,u=u>0?u:1,e.spcCarton=l.carton,e.quantity=u);var h=e.getPriceList(l.priceList,u);l.realVipPrice=h.realVipPrice,l.realPrice=h.realPrice,l.vipPrice=h.vipPrice,l.price=h.price,t.push(h.price),i.push(h.vipPrice),r.push(h.realPrice),n.push(h.realVipPrice),s.push(l.incrementTax),c.push(l.exciseTax),a.push(m),o.push(f)}),0===t.length&&(t[0]=null),0===i.length&&(t[0]=null),0===r.length&&(t[0]=null),0===n.length&&(t[0]=null),0===a.length&&(a[0]=0),0===o.length&&(o[0]=1/0),0===s.length&&(s[0]=0),0===c.length&&(c[0]=0);var d=Math.min.apply(Math,a),l=Math.max.apply(Math,o),u=100*Math.min.apply(Math,c),p=100*Math.max.apply(Math,c),m=100*Math.min.apply(Math,s),f=100*Math.max.apply(Math,s),h=Math.min.apply(Math,t),g=Math.max.apply(Math,t),y=Math.min.apply(Math,i),v=Math.max.apply(Math,i),b=Math.min.apply(Math,r),O=Math.max.apply(Math,r),w=Math.min.apply(Math,n),j=Math.max.apply(Math,n);h=(h!==1/0?h:0).toFixed(2),g=(g!==-1/0?g:0).toFixed(2),y=(y!==1/0?y:0).toFixed(2),v=(v!==-1/0?v:0).toFixed(2),b=(b!==1/0?b:0).toFixed(2),O=(O!==-1/0?O:0).toFixed(2),w=(w!==1/0?w:0).toFixed(2),j=(j!==-1/0?j:0).toFixed(2),e.spcPrice=h===g?h:h+"~"+g,e.spcVipPrice=y===v?y:y+"~"+v,e.spcRealPrice=b===O?b:b+"~"+O,e.spcRealVipPrice=w===j?w:w+"~"+j,e.spcExciseTax=u===p?u:u+"~"+p,e.spcIncrementTax=m===f?m:m+"~"+f,e.quantityDes=d&&l&&d!==-1/0&&l!==1/0?"当前允许购买量为: "+d+"~"+l:d&&d!==-1/0?"当前最小购买量为: "+d:l&&l!==1/0?"当前最大购买量为: "+l:""},getNumRegion:function(e){var t={},i=[],r=[],n=!1;return $.each(e,function(e,t){var a=1*t.min?1*t.min:0,o=1*t.max?1*t.max:1/0;i.push(o),r.push(a),n=!0}),n?(t.minQuantity=Math.min.apply(Math,r),t.maxQuantity=Math.max.apply(Math,i),t):{minQuantity:0,maxQuantity:1/0}},getPriceList:function(e,t){var i={},r={},n=[],a=[],o=[],s=[],c=[],d=[],l=[],u=!1;return $.each(e,function(e,t){var i=t.min?t.min:0,r=t.max?t.max:1/0,p=t.price||0===t.price?(1*t.price).toFixed(2):null,m=t.vipPrice||0===t.vipPrice?(1*t.vipPrice).toFixed(2):null,f=p?t.discount?(t.price*t.discount/10).toFixed(2):(1*t.price).toFixed(2):null,h=m?t.discount?(t.vipPrice*t.discount/10).toFixed(2):(1*t.vipPrice).toFixed(2):null;n.push({prices:{price:p,vipPrice:m,realPrice:f,realVipPrice:h},min:i,max:r}),o.push(i),a.push(r),s.push(p),c.push(m),d.push(f),l.push(h),u=!0}),u?(r.min=Math.min.apply(Math,o),r.max=Math.max.apply(Math,a),r.minPrice=Math.min.apply(Math,s),r.vipMinPrice=Math.min.apply(Math,c),r.realMinPrice=Math.min.apply(Math,d),r.realVipMinPrice=Math.min.apply(Math,l),r.maxPrice=Math.max.apply(Math,s),r.vipMaxPrice=Math.max.apply(Math,c),r.realMaxPrice=Math.max.apply(Math,d),r.realVipMaxPrice=Math.max.apply(Math,l),t<r.min?{price:r.maxPrice,vipPrice:r.vipMaxPrice,realPrice:r.realMaxPrice,realVipPrice:r.realVipMaxPrice}:t>r.max?{price:r.minPrice,vipPrice:r.vipMinPrice,realPrice:r.realMinPrice,realVipPrice:r.realVipMinPrice}:($.each(n,function(e,r){if(t>=r.min&&t<=r.max)return i={price:r.prices.price,vipPrice:r.prices.vipPrice,realPrice:r.prices.realPrice,realVipPrice:r.prices.realVipPrice},!1}),i)):{price:null,vipPrice:null,realPrice:null,realVipPrice:null}},returnMsg:function(e,t,i){var r="",n=this,a=this.mdData.freePost,o=this.mdData.freeTax,s=this.mdData.type;if("itemHide"!==this.itemContCode){if(0==s)if(0==o){var c=0,d=this.quantity*i;e/=100,t/=100,e&&0!=e&&(c+=(d+0)/(1-e)*e*.7),t&&0!=t&&(c+=(d+0+(d+0)/(1-e)*e)*t*.7),r+="(预计税费￥"+c.toFixed(2)+")"}else 1==o&&(r+="包税");else 2==s&&(r+="包税");switch(a){case 0:r+="";break;case 1:r+="包邮";break;case 2:r+=n.isFreePost?"包邮":"邮费到付"}}else r="请选择商品规格";return r},returnSupplierName:function(){var e="";switch(this.mdData.supplierName){case"天天仓":e="保税TT仓";break;case"粮油仓":e="保税LY仓";break;case"行云仓":e="保税XY仓";break;case"富邦仓":e="保税FB仓";break;default:e=this.mdData.supplierName}return e},returnPrice:function(e){return 1*e>0?(1*e).toFixed(2):"0.00"},imgSrc:function(e){var t="";switch(e){case 0:t="/images/platform/tag/icon_cross_big.png";break;case 2:t="/images/platform/tag/icon_normal_big.png"}return t},imgType:function(e){var t="";switch(e){case 0:t=!0;break;case 2:t=!1}return t},getTags:function(e){var t=[];return $.each(e||[],function(e,i){switch(i.tagName){case"必选":-1===$.inArray("icon_tag1",t)&&t.push("icon_tag1");break;case"爆款":-1===$.inArray("icon_tag2",t)&&t.push("icon_tag2");break;case"热销":-1===$.inArray("icon_tag3",t)&&t.push("icon_tag3");break;case"优选":-1===$.inArray("icon_tag4",t)&&t.push("icon_tag4")}}),t},imgGlassMousemove:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.parents(".goodsDetail-mainMsg-left"),n=i.find("#small")[0],a=r.find("#img_glass")[0],o=r.find("#mask")[0],s=r.find("#big")[0],c=s.children[0],d=a.offsetLeft,l=a.offsetTop,u=e.pageX,p=e.pageY,m=u-d-o.offsetWidth/2,f=p-l-o.offsetHeight/2;m<0&&(m=0),m>n.offsetWidth-o.offsetWidth&&(m=n.offsetWidth-o.offsetWidth),f<0&&(f=0),f>n.offsetHeight-o.offsetHeight&&(f=n.offsetHeight-o.offsetHeight),o.style.left=m+"px",o.style.top=f+"px";var h=o.offsetLeft,g=o.offsetTop;if(void 0!=c){var y=c.offsetWidth/n.offsetWidth,v=c.offsetHeight/n.offsetHeight;c.style.marginLeft=-h*y+"px",c.style.marginTop=-g*v+"px"}},glassListMouseover:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.find("img").attr("src"),n=i.parents(".goodsDetail-mainMsg-left").find("#big img"),a=i.parents(".goodsDetail-mainMsg-left").find("#small img:not(.corner_mark)");r&&a.attr("src",r),r&&n.attr("src",r)},smallMouseover:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.parents(".goodsDetail-mainMsg-left");"hide"!=i.find("img:not(.corner_mark)").attr("data-normal")&&(r.find("#mask").css("display","block"),r.find("#big").css("display","block"))},smallMouseout:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.parents(".goodsDetail-mainMsg-left");r.find("#mask").css("display","none"),r.find("#big").css("display","none")},discountBClick:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.parent(),n=i.find("span"),a=n.attr("data-class"),o=n.attr("class");"active"==r.attr("class")?r.removeClass("active"):r.addClass("active"),n.attr("class",a),n.attr("data-class",o)},discountAClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.attr("couponId"),o=r.attr("index");r.hasClass("lose")?d||K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/login.html?isBack=1"}}):a.send("COUPON_RECEIVE",{couponId:n}).done(function(e){e.success?(z.refresh({content:"领取成功！"}),t.couponList[o].receiveStatus="1"):z.refresh({content:e.errorMsg})})},classifyClick:function(e){var t=this,i={},n=e||window.event,a=$(n.currentTarget);if(!a.hasClass("lose")){var o=a.parents(".classifyGroup");a.toggleClass("active").siblings().removeClass("active"),o.find(".classify").removeClass("lose"),o.find(".classify.active").each(function(){var e=$(this).attr("data-name")||"",t=$(this).attr("data-val")||"";i[e]=t}),$.each(t.getItemObj(i),function(e,t){$.each(t,function(t,i){o.find("[data-name='"+e+"'][data-val='"+i+"']").addClass("lose")})})}if("itemHide"!==t.itemContCode){var s=this.objArr[0].itemId;s&&r.url.setParam({itemId:s},"cover"),s&&(t.pathUrl=r.path.setParam(t.pathUrl,{itemId:s}))}},inputInput:function(){var e=this,t=$(this.$el),i=t.find("[itemContCode]").attr("itemContCode"),r=e.stock||0,n=e.minQuantity,a=e.maxQuantity,o=/\D/.test(e.quantity)?e.quantity.replace(/\D/g,""):e.quantity;clearTimeout(e.quantityTimer),e.quantityTimer=setTimeout(function(){o=1*o>0?1*o:1,"itemHide"!==i&&(r<=0||o<=r&&n&&r<n?z.refresh({content:"当前商品库存不足！",evFunc:function(){o=(a||0===a)&&o>a?a:o,o=(n||0===n)&&o<n?n:o,o=o>r?r:o,e.quantity=1*o>0?1*o:1,e.setItemCont()}}):o>r?z.refresh({content:"当前数量大于库存可用量！",evFunc:function(){o=(a||0===a)&&o>a?a:o,o=(n||0===n)&&o<n?n:o,o=o>r?r:o,e.quantity=1*o>0?1*o:1,e.setItemCont()}}):a&&o>a?z.refresh({content:"当前数量已大于最大购买量！",evFunc:function(){o=(a||0===a)&&o>a?a:o,o=(n||0===n)&&o<n?n:o,o=o>r?r:o,e.quantity=1*o>0?1*o:1,e.setItemCont()}}):n&&o<n&&z.refresh({content:"当前数量已低于最小购买量！",evFunc:function(){o=(a||0===a)&&o>a?a:o,o=(n||0===n)&&o<n?n:o,o=o>r?r:o,e.quantity=1*o>0?1*o:1,e.setItemCont()}}))},650)},inputBlur:function(){var e=this,t=$(this.$el),i=t.find("[itemContCode]").attr("itemContCode"),r=e.stock||0,n=e.minQuantity,a=e.maxQuantity,o=/\D/.test(e.quantity)?e.quantity.replace(/\D/g,""):e.quantity;"itemHide"!==i&&(o=(a||0===a)&&o>a?a:o,o=(n||0===n)&&o<n?n:o,o=o>r?r:o),e.quantity=1*o>0?1*o:1,e.setItemCont()},quantityClick:function(e){var t=this,i=e||window.event,r=$(this.$el),n=$(i.currentTarget),a=r.find("[itemContCode]").attr("itemContCode"),o=t.stock||0,s=t.quantity,c=t.minQuantity,d=t.maxQuantity;n.hasClass("add")&&(s=1*s+1,s=1*s>0?1*s:1),n.hasClass("minus")&&(s=1*s-1,s=1*s>0?1*s:1),"itemHide"!==a&&(o<=0||s<=o&&c&&o<c?z.refresh({content:"当前商品库存不足！"}):s>o?z.refresh({content:"当前数量已达至商品库存量！"}):d&&s>d?z.refresh({content:"当前数量已是最大购买量！"}):c&&s<c&&z.refresh({content:"当前数量已是最小购买量！"}),s=(d||0===d)&&s>d?d:s,s=(c||0===c)&&s<c?c:s,s=s>o?o:s,t.quantity=1*s>0?1*s:1,t.quantity=1*s,t.setItemCont())},addShopCartClick:function(e){var t=this,i=e||window.event,r=$(this.$el),n=$(i.currentTarget).parent(),o=n.attr("itemContCode")||"",s=t.itemCont[o],c=t.stock||0,l=t.quantity,u=t.minQuantity,p=t.maxQuantity;if(!d)return void K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/login.html?isBack=1"}});if("itemHide"===o)return void z.refresh({content:"请选择完规格，再进行购买下单！"});if("downShelf"===o)return void z.refresh({content:"该商品所选规格已下架, 无法购买下单！"});if(c<=0||c<u)return void z.refresh({content:"当前商品库存不足, 无法购买下单！"});var m=function(e){var t="";t="block"===r.find(".header-2-content").css("display")?$(W.$el).find(".header-2-content .header-iconGroup .shopCart"):$(J.$el).find(".header-1-content .header-iconGroup .shopCart");var i=$(".goodsDetail-mainMsg-left #img_glass #small img"),n=i.clone();n.length&&(n.offset({top:i.offset().top+200,left:i.offset().left+350}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"99999999"}).appendTo($("body")).animate({top:t.offset().top+10,left:t.offset().left+10,width:50,height:50},1e3,"linear"),n.animate({width:0,height:0},function(){$(this).detach()})),a.send("ORDER_SHOPPINGCART_CREATE",{type:s.type,itemId:s.itemId,supplierId:s.supplierId,supplierName:s.supplierName,goodsName:s.goodsName,goodsImg:s.goodsImg,quantity:e}).done(function(){a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){J.cartCount=e&&e.obj||0,W.cartCount=e&&e.obj||0,z.refresh({content:"添加成功"})})})};a.send("ORDER_SHOPPINGCART_COUNT_ID",{itemId:s.itemId}).done(function(e){if(e&&e.success){var t=e.obj||0;if(t>=p)z.refresh({content:"该商品在购物车中数量已达最大量, 无法继续加入！"});else if(l+t>p){var i=p-t;K.refresh({title:"购物车数量上限",content:"最大量"+p+"件; 已添加:"+t+"件, 可添加"+i+"件! 是否继续？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){m(i)}})}else m(l)}else z.refresh({content:"查询购物车内该商品数量失败！"})}).fail(function(){z.refresh({content:"网络信号弱，请刷新重试"})})},toBuyClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget).parent(),a=n.platform.rule.crossOrder.maxPrice,o=(n.platform.rule.normalOrder.minPrice,r.attr("itemContCode")||""),s=t.itemCont[o]||{},c=t.stock||0,l=t.quantity,u=t.minQuantity,p=(t.maxQuantity,{}),m=s.type,f=s.supplierId,h=s.itemId;return d?"itemHide"===o?void z.refresh({content:"请选择完规格，再进行购买下单！"}):"downShelf"===o?void z.refresh({content:"该商品所选规格已下架, 无法购买下单！"}):c<=0||c<u?void z.refresh({content:"当前商品库存不足, 无法购买下单！"}):(p.orderCount=1,p.typeObj=p.typeObj||{},p.typeObj[m]=p.typeObj[m]||{},p.typeObj[m][f]=p.typeObj[m][f]||{},p.typeObj[m][f].type=m,p.typeObj[m][f].taxFee=0,p.typeObj[m][f].postFee=0,p.typeObj[m][f].exciseTaxFee=0,p.typeObj[m][f].incrementTaxFee=0,p.typeObj[m][f].supplierId=s.supplierId,p.typeObj[m][f].supplierName=s.supplierName,p.typeObj[m][f].supplierWeight=s.weight*l,p.typeObj[m][f].supplierPrice=s.price*l,p.typeObj[m][f].supplierVipPrice=s.vipPrice*l,p.typeObj[m][f].supplierRealPrice=s.realPrice*l,p.typeObj[m][f].supplierRealVipPrice=s.realVipPrice*l,p.typeObj[m][f].itemObj=p.typeObj[m][f].itemObj||{},p.typeObj[m][f].itemObj[h]={},p.typeObj[m][f].itemObj[h].quantity=l,p.typeObj[m][f].itemObj[h].status=s.status,p.typeObj[m][f].itemObj[h].itemId=s.itemId,p.typeObj[m][f].itemObj[h].itemCode=s.itemCode,p.typeObj[m][f].itemObj[h].supplierId=s.supplierId,p.typeObj[m][f].itemObj[h].supplierName=s.supplierName,p.typeObj[m][f].itemObj[h].itemImg=s.goodsImg,p.typeObj[m][f].itemObj[h].picPath=s.picPath||s.goodsImg,p.typeObj[m][f].itemObj[h].goodsId=s.goodsId,p.typeObj[m][f].itemObj[h].firstCategory=s.firstCategory,p.typeObj[m][f].itemObj[h].type=s.type,p.typeObj[m][f].itemObj[h].href=s.href,p.typeObj[m][f].itemObj[h].freePost=s.freePost,p.typeObj[m][f].itemObj[h].freeTax=s.freeTax,p.typeObj[m][f].itemObj[h].unit=s.unit,p.typeObj[m][f].itemObj[h].secondCategory=s.secondCategory,p.typeObj[m][f].itemObj[h].thirdCategory=s.thirdCategory,p.typeObj[m][f].itemObj[h].itemName=s.goodsName,p.typeObj[m][f].itemObj[h].exciseTax=s.exciseTax,p.typeObj[m][f].itemObj[h].priceList=s.priceList,p.typeObj[m][f].itemObj[h].tagList=s.tagList,p.typeObj[m][f].itemObj[h].tagFunId=s.tagFunId,p.typeObj[m][f].itemObj[h].preSaleName=s.preSaleName,p.typeObj[m][f].itemObj[h].preSaleDesc=s.preSaleDesc,p.typeObj[m][f].itemObj[h].incrementTax=s.incrementTax,p.typeObj[m][f].itemObj[h].sku=s.sku,p.typeObj[m][f].itemObj[h].info=s.info,p.typeObj[m][f].itemObj[h].stock=s.stock>=0?s.stock:0,p.typeObj[m][f].itemObj[h].weight=s.weight,p.typeObj[m][f].itemObj[h].price=s.price,p.typeObj[m][f].itemObj[h].vipPrice=s.vipPrice,p.typeObj[m][f].itemObj[h].realPrice=s.realPrice,p.typeObj[m][f].itemObj[h].realVipPrice=s.realVipPrice,
2===s.type?window.location.href=encodeURI("/orderSure.html?jumpUrl="+t.pathUrl):0===s.type&&(s.realPrice*l>a&&l>1?z.refresh({content:"跨境商品单笔订单价格不得超过"+a+"元！"}):window.location.href=encodeURI("/orderSure.html?jumpUrl="+t.pathUrl)),void window.localStorage.setItem("ordersInfo",JSON.stringify(p))):void K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/login.html?isBack=1"}})}},beforeCreate:function(){var e=this;a.send("GOODS_STOCK_QUERY",{goodsId:f}).done(function(t){t&&t.success&&t.obj&&($.each(e.itemCont,function(e,i){$.each(t.obj,function(e,t){i.itemId===t.itemId&&(i.stock=t.stock)})}),m?e.getItemObj(e.itemIdMap[m]||{}):e.getItemObj({}))}),a.send("GOODS_BASE_QUERY",{upShelves:1,priceMin:0,priceMax:1e8,currentPage:1,numPerPage:6},!0).done(function(t){var i=[];$.each(t&&t.goodsList||[],function(e,t){var r=t.href,n=t.customGoodsName,a=t.goodsFileList&&t.goodsFileList[0]||{},o=a.path||"/images/platform/default_img.jpg",s=t.realPrice;i.push({title:n,picPath:o,price:s,href:r})}),e.advertData=i})},beforeMount:function(){m?this.getItemObj(this.itemIdMap[m]||{}):this.getItemObj({})},created:function(){var e=this,t="",i="",r=0,n=[],a={},o={},s={};$.each(e.mdData.goodsSpecsList,function(t,i){var c={},d=[],l="";c.info=i.info,c.infoObj=JSON.parse(i.info||"{}"),c.type=e.mdData.type,c.href=e.mdData.href,c.freePost=e.mdData.freePost,c.freeTax=e.mdData.freeTax,c.unit=e.mdData.unit,c.goodsId=e.mdData.goodsId,c.goodsName=e.mdData.customGoodsName,c.firstCategory=e.mdData.firstCategory,c.secondCategory=e.mdData.secondCategory,c.thirdCategory=e.mdData.thirdCategory,c.supplierId=e.mdData.supplierId,c.supplierName=e.mdData.supplierName,c.itemId=i.itemId,c.carton=i.carton,c.itemCode=i.itemCode,c.status=i.status,c.discount=i.discount,c.minPrice=i.minPrice,c.maxPrice=i.maxPrice,c.vipMinPrice=i.vipMinPrice,c.vipMaxPrice=i.vipMaxPrice,c.realMinPrice=i.realMinPrice,c.realMaxPrice=i.realMaxPrice,c.realVipMinPrice=i.realVipMinPrice,c.realVipMaxPrice=i.realVipMaxPrice,c.incrementTax=e.mdData.incrementTax,c.exciseTax=i.exciseTax,c.priceList=i.priceList,c.weight=i.weight,c.stock=i.stock>0?i.stock:0,c.sku=i.sku,c.tagList=[],$.isArray(e.mdData.goodsFileList)&&(c.goodsImg=e.mdData.goodsFileList[0].path),$.each(i.tagList||[],function(t,i){"预售"===i.tagName&&(c.tagFunId=i.tagFunId,c.preSaleName=i.tagName,c.preSaleDesc=i.description),"一般贸易(包邮)"===i.tagName&&(e.isFreePost=!0),c.tagList.push(i)}),$.each(c.infoObj,function(e,t){-1===$.inArray(t,a[e])&&(a[e]=a[e]||[],l=t.replace(";",""),a[e].push(t.replace(";",""))),-1===$.inArray(e,n)&&n.push(e);var i=$.inArray(e,n);d[i]=t});var u=d.join(";");o[u]=c,s[c.itemId]=c.infoObj,r++}),e.length=r,e.codeArr=n,e.itemKey=a,e.itemCont=o,e.itemIdMap=s,$.each(e.mdData.couponList||[],function(r,n){t=n.name.split("/")[0],i=n.name.split("/")[1],i=void 0!==i?i.trim():"",e.couponList[r]={type:i,name:t,couponId:n.couponId,receiveStatus:n.receiveStatus}}),($.isEmptyObject(e.mdData)||0===e.mdData.status)&&K.refresh({type:"info",language:"zh",content:"该商品已下架，请重新选择商品！",title:"商品已下架",DOMClick:!1,cancelBtn:!1,confirmBtn:!0,confirmFun:function(){window.close()}})},mounted:function(){function e(e){if(e){var t=new Date(e);return{year:t.getFullYear(),month:("0"+(t.getMonth()+1)).slice(-2),day:("0"+t.getDate()).slice(-2),hour:("0"+t.getHours()).slice(-2),minutes:("0"+t.getMinutes()).slice(-2),seconds:("0"+t.getSeconds()).slice(-2)}}}function t(t){var i=$(".productinfo .productinfo-left").attr("data-type"),r=new Date($.ajax({async:!1}).getResponseHeader("Date")).getTime(),n=e(r),a=n.year+"/"+n.month+"/"+n.day,o=new Date(a+" 10:00:00").getTime()+864e5,s=0;i&&(s=o-r);var c=parseInt(s)/1e3,d=0,l=0;c>=60&&(d=parseInt(c/60),c=parseInt(c%60),d>=60&&(l=parseInt(d/60),d=parseInt(d%60))),parseInt(c)<10?t.nextSecond="0"+parseInt(c):t.nextSecond=parseInt(c),t.nextMinute=d<10?"0"+parseInt(d):parseInt(d),t.nextHour=l<10?"0"+parseInt(l):l>=24?"00":parseInt(l)}var i=this,a=n.location.redirect,o=n.siteInfo.domainName.replace(/http:\/\/|https:\/\//i,""),c=n.siteInfo.mDomainName.replace(/http:\/\/|https:\/\//i,""),d=a.replace(o,c),l=$(i.$el).find(".classifyGroup");/\.html$|\.htm$/i.test(i.mdData.detailPath)&&$(i.$el).find(".showMsgContent").load(i.mdData.detailPath),$(i.$el).find(".showErweima").qrcode({width:164,height:164,correctLevel:0,text:r.path.setParam(d,{shopId:s}),render:"canvas"}),$.each(m&&i.itemIdMap[m]||[],function(e,t){l.find("[data-name='"+e+"'][data-val='"+t+"']").addClass("active")}),$(".productinfo .productinfo-left").attr("data-type")&&setInterval(function(){t(i)},1e3)}})})}if(/^login-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{status:!0,isRegister:null,isBackEnter:!0,shopTimer:null,iShopId:"",iDomain:"",bShopId:"",bDomain:"",shopArr:[]},methods:{authLogin:function(){var t=this,i=t.iShopId||"",n=t.iDomain||"",o=window.location.host,s=e["alertDefault-1-1"],c=n.replace(/^(http:\/\/)?([^\/]+)(\/.+)?/i,"$2"),d=$(".login-list-enter .account").val(),l=$(".login-list-enter .password").val(),p=r.url.getParam("isBack"),m=d&&l;window.localStorage.removeItem("userId"),window.localStorage.removeItem("authId"),setTimeout(function(){m&&/^1(3|4|5|7|8)\d{9}$/gi.test(d)&&t.isRegister?a.send("AUTH_LOGIN",{phone:d,password:l,loginType:b,platUserType:v,reqHeader:{authentication:null}}).done(function(e){if(e&&e.success){var t=e.obj.userCenterId,a='"Bearer "'+e.obj.token,d={userId:t,shopId:i,authId:a};c&&c!==o?(r.url.setParam({domain:n},"cover"),r.url.setParam({domainData:JSON.stringify(d||{})},"cover"),window.localStorage.setItem("domainData",JSON.stringify(d||{})),window.localStorage.setItem("domain",n)):(window.localStorage.setItem("authId",a),window.localStorage.setItem("userId",t),i&&window.localStorage.setItem("shopId",i)),p?window.history.back(-1):u?r.url.jumpPage(u,-1):r.url.jumpPage("/index.html",-1)}else e.errorMsg?s.content=e.errorMsg:s.content="帐号密码错误!"}).fail(function(){s.content="帐号登陆失败!"}):d&&/^1(3|4|5|7|8)\d{9}$/gi.test(d)?l?t.isRegister||(s.content="该手机号尚未注册!"):s.content="请填写密码!":s.content="请正确填写手机号!"},100)},thirdPhone:function(t){var i=$(t.currentTarget),r=i.parents("ul"),n=r.find(".account").val(),o=e["alertDefault-1-1"],s=r.find(".account").hasClass("state_error");/^1(3|4|5|7|8)\d{9}$/gi.test(n)&&!s&&a.send("THIRD_PHONE",{phone:n}).done(function(e){if(e&&e.success){var t=60,n=function(){t>0?(t--,r.find(".doing .val").text(t),setTimeout(function(){n()},1e3)):i.addClass("getValidation")};i.removeClass("getValidation"),n()}else o.content="验证码发送过于频繁！"}).fail(function(){o.content="抱歉，手机验证码发送失败，请重试！"})},userRegister:function(){var t=this,i=t.bShopId||"",n=t.bDomain||"",o=window.location.host,s=e["alertDefault-1-1"],c=n.replace(/^(http:\/\/)?([^\/]+)(\/.+)?/i,"$2"),d=$(".login-list-sign .validation").val(),l=$(".login-list-sign .account").val(),p=$(".login-list-sign .password").val(),m=$(".login-list-sign .confirmPassword").val(),f=r.url.getParam("isBack"),h=l&&d&&p&&p===m;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),setTimeout(function(){h&&/^1(3|4|5|7|8)\d{9}$/gi.test(l)&&!t.isRegister?a.send("USER_REGISTRATION",{phone:l,pwd:p,code:d,loginType:b,userType:O}).done(function(e){if(e&&e.success){var t=e.obj;a.send("AUTH_REGISTER",{phone:l,password:p,userCenterId:t,loginType:b,platUserType:v}).done(function(e){if(e&&e.success){var a='"Bearer "'+e.obj.token,d={userId:t,shopId:i,authId:a};c&&c!==o?(r.url.setParam({domain:n},"cover"),r.url.setParam({domainData:JSON.stringify(d||{})},"cover"),window.localStorage.setItem("domainData",JSON.stringify(d||{})),window.localStorage.setItem("domain",n)):(window.localStorage.setItem("authId",a),window.localStorage.setItem("userId",t),i&&window.localStorage.setItem("shopId",i)),f?window.history.back(-1):u?r.url.jumpPage(u,-1):r.url.jumpPage("/index.html",-1)}else s.content=e.errorMsg}).fail(function(){s.content="认证注册失败"})}else e&&1===e.obj?s.content="验证码失效，请重试！":e.errorMsg?s.content=e.errorMsg:s.content="认证注册失败!"}).fail(function(){s.content="用户注册失败!"}):l&&/^1(3|4|5|7|8)\d{9}$/gi.test(l)?d?p&&p==m?t.isRegister&&(s.content="该手机号已被注册!"):s.content="请正确填写密码!":s.content="请填写验证码!":s.content="请正确填写手机号!"},100)},authCheckEnter:function(t){var i=this,r=$(t.currentTarget),n=r.val(),o=/^1(3|4|5|7|8)\d{9}$/gi.test(n),s=e["alertDefault-1-1"];o&&a.send("AUTH_CHECK",{userName:n,phone:n,loginType:b,platUserType:v}).done(function(e){e&&!0===e.success&&0==e.obj?(s.content="该手机号尚未注册！",i.isRegister=!1,r.addClass("state_error")):(i.isRegister=!0,r.removeClass("state_error"))}).fail(function(){i.isRegister=!0,s.refresh({content:"未能查询到该手机号是否已注册！"}),r.removeClass("state_error")})},authCheckSign:function(t){var i=this,r=$(t.currentTarget),n=r.val(),o=/^1(3|4|5|7|8)\d{9}$/gi.test(n),s=e["alertDefault-1-1"];o&&a.send("AUTH_CHECK",{userName:n,phone:n,loginType:b,platUserType:v}).done(function(e){e&&!0===e.success&&1==e.obj?(i.isRegister=!0,s.content="该手机号已被注册！",r.addClass("state_error")):(i.isRegister=!1,r.removeClass("state_error"))}).fail(function(){i.isRegister=!1,s.refresh({content:"未能查询到该手机号是否已注册！"}),r.removeClass("state_error")})},authCheckForget:function(t){var i=this,r=$(t.currentTarget),n=r.val(),o=/^1(3|4|5|7|8)\d{9}$/gi.test(n),s=e["alertDefault-1-1"];o&&a.send("AUTH_CHECK",{userName:n,phone:n,loginType:b,platUserType:v}).done(function(e){e&&!0===e.success&&0==e.obj?(i.isRegister=!1,s.content="该手机号尚未注册！",r.addClass("state_error")):(i.isRegister=!0,r.removeClass("state_error"))}).fail(function(){i.isRegister=!0,s.refresh({content:"未能查询到该手机号是否已注册！"}),r.removeClass("state_error")})},authPwdChange:function(){var t=this,i=e["alertDefault-1-1"],r=$(".login-list-forget .account").val(),n=$(".login-list-forget .password").val(),o=$(".login-list-forget .validation").val(),s=r&&o&&n;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),setTimeout(function(){s&&/^1(3|4|5|7|8)\d{9}$/gi.test(r)&&t.isRegister?a.send("AUTH_PWD_CHANGE",{userName:r,password:n,code:o,platUserType:v}).done(function(e){e&&e.success&&e.obj?(setTimeout(function(){$(".login-list-forget").hide(),$(".login-list-enter").slideDown(500),t.isBackEnter=!0,t.status=!0},1e3),i.content="修改密码成功!"):e.errorMsg?i.content=e.errorMsg:i.content="修改密码失败!"}).fail(function(){i.content="修改密码失败!"}):r&&/^1(3|4|5|7|8)\d{9}$/gi.test(r)?o?n?t.isRegister||(i.content="该手机号尚未注册!"):i.content="请填写密码!":i.content="请填写验证码!":i.content="请正确填写手机号!"},100)},shopQueryBlur:function(t){var i=this,r=t||window.event,n=$(r.currentTarget).val(),o=e["alertDefault-1-1"];n||(i.bShopId=""),n||(i.iShopId=""),n||(i.bDomain=""),n||(i.iDomain=""),clearTimeout(i.shopTimer),n&&(i.shopTimer=setTimeout(function(){a.send("USER_CHOOSESHOP_QUERY",{name:n}).done(function(e){e&&e.success?($.isEmptyObject(e.obj)&&(o.content="该店铺不存在！"),i.shopArr=e.obj||[]):e&&e.errorMsg?(o.content=e.errorMsg,i.shopArr=[]):(o.content="该店铺不存在！",i.shopArr=[])}).fail(function(e){e&&e.errorMsg?(o.content=e.errorMsg,i.shopArr=[]):(o.content="查询店铺失败！",i.shopArr=[])})},250))},chooseShopQuery:function(t){var i=this,r=t||window.event,n=$(r.currentTarget).val(),o=e["alertDefault-1-1"];$(i.$el).find(".shopShow").val(n),n&&$(t.currentTarget).parent().addClass("active"),n||$(t.currentTarget).parent().removeClass("active"),n||(i.bShopId=""),n||(i.iShopId=""),n||(i.bDomain=""),n||(i.iDomain=""),clearTimeout(i.shopTimer),n&&(i.shopTimer=setTimeout(function(){a.send("USER_CHOOSESHOP_QUERY",{name:n}).done(function(e){e&&e.success?i.shopArr=e.obj||[]:e&&e.errorMsg?(o.content=e.errorMsg,i.shopArr=[]):i.shopArr=[]}).fail(function(e){e&&e.errorMsg?(o.content=e.errorMsg,i.shopArr=[]):i.shopArr=[]})},250))},chooseShopClick:function(e){var t=this,i=$(e.currentTarget),r=i.attr("domain")||"",n=i.attr("shopId")||"",a=i.attr("shopName")||"";$(t.$el).find(".shopShow").val(a),i.parent().parent().removeClass("active"),t.iShopId=n||"",t.iDomain=r||"",t.bShopId=n||"",t.bDomain=r||""}},mounted:function(){var e=this;$(i).on("click",".login-list-header li:last-child",function(){var e=$(i),t=$(this).prev().html(),r=$(this).html();$(this).html(t),$(this).prev().html(r),"none"===e.find(".login-list-enter").css("display")?(e.find(".login-list-sign").hide(),e.find(".login-list-enter").stop(),e.find(".login-list-enter").slideDown(500)):(e.find(".login-list-enter").hide(),e.find(".login-list-sign").stop(),e.find(".login-list-sign").slideDown(500))}),$(i).on("click",".login-list-enter li:nth-child(5) b",function(){var t=$(i);t.find(".login-list-enter").hide(),t.find(".login-list-forget").slideDown(500),e.isBackEnter=!1}),$(i).on("click",".login-list-header p span",function(){var t=$(i);t.find(".login-list-forget").hide(),t.find(".login-list-enter").slideDown(500),e.isBackEnter=!0}),$(i).on("click",".login-1-content .chooseShop",function(){0==$(this).attr("type")?($(".chooseShopId").slideDown(300),$(this).attr("type",1),$(this).html("取消选择")):($(".chooseShopId").slideUp(300),$(this).attr("type",0),$(this).html("选择店铺"),window.localStorage.removeItem("shopId"))})}})),/^licence-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{},methods:{},mounted:function(){}})),/^orderDetail-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{orderInfo:{},infoArr:[],endTime:""},beforeCreate:function(){var e=this,t=r.url.getParam("orderId");a.send("ORDER_USER_QUERY",{orderId:t}).done(function(t){if(t&&t.success){e.orderInfo=t.obj.orderList[0]||{},e.returnTime(e.orderInfo.createTime,e.orderInfo.status);var i=setInterval(function(){e.returnTime(e.orderInfo.createTime,e.orderInfo.status)},1e3);0!=e.orderInfo.status&&clearInterval(i),$.each(t.obj.orderList[0].orderExpressList,function(t,i){i.expressName&&i.expressId&&a.send("THIRD_LOGISTICS",{carrierName:i.expressName,expressId:i.expressId}).done(function(t){t&&t.success&&e.infoArr.push(t.obj||{})})})}})},methods:{returnPayType:function(e){return 1===e?"微信支付":2===e?"支付宝":3===e?"银联支付":5===e?"易宝支付":""},ergodicInfoList:function(e){try{return JSON.parse(e)||[]}catch(e){return[]}},returnStatus:function(e){var t=e.status;return 0===t?"等待买家付款":1===t?"买家已付款":11===t?"买家已付款":12===t?"买家已付款":2===t?"支付单报关":3===t?"已发仓库":4===t?"已报海关":5===t?"单证放行":6===t?"商品已出库":7===t?"交易成功":8===t?"已退单":9===t?"交易关闭":21===t?"退款中":99===t?e.orderExpressList[0].status:void 0},returnTime:function(e,t){var i=e&&e.substring(0,19),r=i&&i.split(/\s|-|:/g),n=r&&r[0],a=r&&r[1]-1,o=r&&r[2],s=r&&r[3],c=r&&r[4],d=r&&r[5];if(0===t){var l=new Date(n,a,o,s,c,d),u=new Date,p=l.getTime()+36e5,m=u.getTime();if(p-m>0){var f=p-m,h=parseInt(f/864e5),g=parseInt((f-864e5*h)/36e5),y=parseInt((f-864e5*h-36e5*g)/6e4),v=parseInt((f-864e5*h-36e5*g-6e4*y)/1e3);h=h>9?h+"天":"0"+h+"天",g=g>9?g+"小时":"0"+g+"小时",y=y>9?y+"分":"0"+y+"分",v=v>9?v+"秒":"0"+v+"秒",this.endTime=h+g+y+v}else this.orderInfo.status=9}},toPayClick:function(t,i,r){var n="yl"===t,o="zfb"===t,s="yb"===t,c=e["message-1-1"],d=n?3:o?2:s?5:1,l=3===d?"07":1===d?"NATIVE":5===d?"":"scanCode",u={orderId:i,orderPrice:r},m=window.open("about:blank");a.send("PAY_ORDER",{payType:d,type:l,orderId:i,redirect:p}).done(function(e){if(e&&e.success)if(1===d){var t=e.obj.urlCode;c.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){window.location.reload()}}),u.url=t,u=JSON.stringify(u),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToYinLian"),window.localStorage.setItem("sendToPay",u),m.focus(),m.location="/pay.html"}else if(2===d){var i="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",i),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToPay"),c.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){window.location.reload()}}),m.focus(),m.location="/pay.html"}else if(3===d){var i="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",i),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),c.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){window.location.reload()}}),m.focus(),m.location="/pay.html"}else 5===d&&(window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),c.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){window.location.reload()}}),m.focus(),m.location=e.obj);else e&&e.errorMsg?(z.refresh({content:e.errorMsg}),m.focus(),m.close()):(z.refresh({content:"获取支付二维码失败！"}),m.focus(),m.close())}).fail(function(e){e&&e.errorMsg?(z.refresh({content:e.errorMsg}),m.focus(),m.close()):(z.refresh({content:"获取支付二维码失败！"}),m.focus(),m.close())})}},mounted:function(){}})),/^shopCart-1-\d+$/.test(t)){var J=e["header-1-1"],W=e["header-2-1"],K=e["message-1-1"],z=e["alertDefault-1-1"];a.send("ORDER_SHOPPINGCART_QUERY",{},!0).done(function(r){e[t]=new Vue({el:i,data:{selectedCount:0,orderTotalPrice:0,crossOrderMaxPrice:n.platform.rule.crossOrder.maxPrice,normalOrderMinPrice:n.platform.rule.normalOrder.minPrice,orderCrossTotalPrice:0,orderNormalTotalPrice:0,orders:function(){var e={};return e.typeObj={},e.quantity=0,e.selected=!1,e.oneSelected=!1,$.each(r,function(t,i){var r=i.type,n=i.itemId,a=i.goodsSpecs,o=i.supplierId,s=i.supplierName,c=a.status;e.quantity+=1,e.typeObj[r]=e.typeObj[r]||{},e.typeObj[r][o]=e.typeObj[r][o]||{},e.typeObj[r][o].type=r,e.typeObj[r][o].supplierId=o,e.typeObj[r][o].supplierName=s,e.typeObj[r][o].itemObj=e.typeObj[r][o].itemObj||{},e.typeObj[r][o].itemObj[n]={},e.typeObj[r][o].itemObj[n].price=0,e.typeObj[r][o].itemObj[n].vipPrice=0,e.typeObj[r][o].itemObj[n].realPrice=0,e.typeObj[r][o].itemObj[n].realVipPrice=0,e.typeObj[r][o].itemObj[n].ids=i.id,e.typeObj[r][o].itemObj[n].status=c,e.typeObj[r][o].itemObj[n].selected=a.stock>0&&0!==c,e.typeObj[r][o].itemObj[n].goodsId=a.goodsId,e.typeObj[r][o].itemObj[n].firstCategory=a.firstCategory,e.typeObj[r][o].itemObj[n].secondCategory=a.secondCategory,e.typeObj[r][o].itemObj[n].thirdCategory=a.thirdCategory,e.typeObj[r][o].itemObj[n].type=i.type,e.typeObj[r][o].itemObj[n].href=i.href,e.typeObj[r][o].itemObj[n].freeTax=i.freeTax,e.typeObj[r][o].itemObj[n].freePost=i.freePost,e.typeObj[r][o].itemObj[n].unit=i.goodsSpecs.unit,e.typeObj[r][o].itemObj[n].itemId=n,e.typeObj[r][o].itemObj[n].itemImg=i.picPath,e.typeObj[r][o].itemObj[n].quantity=i.quantity,e.typeObj[r][o].itemObj[n].itemName=i.goodsName,e.typeObj[r][o].itemObj[n].itemSpecs=a,e.typeObj[r][o].itemObj[n].stock=a.stock>0?a.stock:0,e.typeObj[r][o].itemObj[n].weight=a.weight,e.typeObj[r][o].itemObj[n].supplierId=o,e.typeObj[r][o].itemObj[n].supplierName=s,e.typeObj[r][o].itemObj[n].exciseTax=a.exciseTax,e.typeObj[r][o].itemObj[n].incrementTax=a.incrementTax,e.typeObj[r][o].itemObj[n].itemCode=a.itemCode,e.typeObj[r][o].itemObj[n].priceList=a.priceList,e.typeObj[r][o].itemObj[n].tagList=[],$.each(a.tagList,function(t,i){"预售"===i.tagName&&(e.typeObj[r][o].itemObj[n].tagFunId=i.tagFunId,e.typeObj[r][o].itemObj[n].preSaleName=i.tagName,e.typeObj[r][o].itemObj[n].preSaleDesc=i.description),e.typeObj[r][o].itemObj[n].tagList.push(i)})}),e}(),quantityTimer:null},computed:{},methods:{render:function(e){this.setInit(e),this.setNormalTotalPrice(e),this.setCrossTotalPrice(e),this.setOrderAllSelect(e),this.setOrderOneSelect(e),this.setOrderSelectedCount(e)},setInit:function(){var e=this,t=0,i=e.orders;$.each(i.typeObj,function(i,r){$.each(r,function(r,n){$.each(n.itemObj,function(){t+=1}),$.isEmptyObject(n.itemObj)&&(delete e.orders.typeObj[i][r].itemObj,delete e.orders.typeObj[i][r])}),$.isEmptyObject(r)&&delete e.orders.typeObj[i]}),e.orders.quantity=t},setNormalTotalPrice:function(e){var t=this,i=0,r=t.orders;$.each(r.typeObj,function(r,n){$.each(n,function(n,a){var o=0,s=0,c=0,d=0,l=0;$.each(a.itemObj,function(i,a){if(2==a.type){var u=t.getNumRegion(a.priceList),p=u.minQuantity,m=u.maxQuantity;a.quantity=a.quantity>m?m:a.quantity,a.quantity=a.quantity<p?p:a.quantity,a.quantity=a.quantity>a.stock?a.stock:a.quantity,a.quantity=a.quantity>0?a.quantity:1,t.orders.typeObj[r][n].itemObj[i].quantity=a.quantity,t.orders.typeObj[r][n].itemObj[i].minQuantity=u.minQuantity,t.orders.typeObj[r][n].itemObj[i].maxQuantity=u.maxQuantity;var f=t.getPriceList(a.priceList,a.quantity);t.orders.typeObj[r][n].itemObj[i].price=f.price,t.orders.typeObj[r][n].itemObj[i].vipPrice=f.vipPrice,t.orders.typeObj[r][n].itemObj[i].realPrice=f.realPrice,t.orders.typeObj[r][n].itemObj[i].realVipPrice=f.realVipPrice,t.orders.typeObj[r][n].itemObj[i].stock=a.stock>0?a.stock:0,e&&(t.orders.typeObj[r][n].itemObj[i].selected=0!==a.status&&a.stock>0&&a.stock>=p),a.selected&&0!==a.status&&a.stock>0&&(o+=a.weight*a.quantity,s+=f.price*a.quantity,c+=f.vipPrice*a.quantity,d+=f.realPrice*a.quantity,l+=f.realVipPrice*a.quantity),t.orders.typeObj[r][n].itemObj[i].quantityDes=p&&m&&p!==-1/0&&m!==1/0?"当前允许购买量为: "+p+"~"+m:p&&p!==-1/0?"当前最小购买量为: "+p:m&&m!==1/0?"当前最大购买量为: "+m:""}}),2==r&&(t.orders.typeObj[r][n].supplierWeight=1*o,t.orders.typeObj[r][n].supplierPrice=1*s,t.orders.typeObj[r][n].supplierVipPrice=1*c,t.orders.typeObj[r][n].supplierRealPrice=1*d,t.orders.typeObj[r][n].supplierRealVipPrice=1*l),i+=d})}),t.orderNormalTotalPrice=1*i},setCrossTotalPrice:function(e){var t=this,i=0,r=t.orders;$.each(r.typeObj,function(r,n){$.each(n,function(n,a){var o=0,s=0,c=0,d=0,l=0;$.each(a.itemObj,function(i,a){if(0==a.type){var u=t.getNumRegion(a.priceList),p=u.minQuantity,m=u.maxQuantity;a.quantity=a.quantity>m?m:a.quantity,a.quantity=a.quantity<p?p:a.quantity,a.quantity=a.quantity>a.stock?a.stock:a.quantity,a.quantity=a.quantity>0?a.quantity:1,t.orders.typeObj[r][n].itemObj[i].quantity=a.quantity,t.orders.typeObj[r][n].itemObj[i].minQuantity=u.minQuantity,t.orders.typeObj[r][n].itemObj[i].maxQuantity=u.maxQuantity;var f=t.getPriceList(a.priceList,a.quantity);t.orders.typeObj[r][n].itemObj[i].price=f.price,t.orders.typeObj[r][n].itemObj[i].vipPrice=f.vipPrice,t.orders.typeObj[r][n].itemObj[i].realPrice=f.realPrice,t.orders.typeObj[r][n].itemObj[i].realVipPrice=f.realVipPrice,t.orders.typeObj[r][n].itemObj[i].stock=a.stock>0?a.stock:0,e&&(t.orders.typeObj[r][n].itemObj[i].selected=0!==a.status&&a.stock>0&&a.stock>=p),a.selected&&0!==a.status&&a.stock>0&&(o+=a.weight*a.quantity,s+=f.price*a.quantity,c+=f.vipPrice*a.quantity,d+=f.realPrice*a.quantity,l+=f.realVipPrice*a.quantity),t.orders.typeObj[r][n].itemObj[i].quantityDes=p&&m&&p!==-1/0&&m!==1/0?"当前允许购买量为: "+p+"~"+m:p&&p!==-1/0?"当前最小购买量为: "+p:m&&m!==1/0?"当前最大购买量为: "+m:""}}),0==r&&(t.orders.typeObj[r][n].supplierWeight=1*o,t.orders.typeObj[r][n].supplierPrice=1*s,t.orders.typeObj[r][n].supplierVipPrice=1*c,t.orders.typeObj[r][n].supplierRealPrice=1*d,t.orders.typeObj[r][n].supplierRealVipPrice=1*l),i+=d})}),t.orderCrossTotalPrice=1*i},setOrderAllSelect:function(){var e=this,t=e.orders,i=t.quantity,r=!0;$.each(t.typeObj,function(t,n){$.each(n,function(e,t){$.each(t.itemObj,function(e,t){if(!t.selected&&0!==t.status&&t.stock>0&&t.stock>=t.minQuantity)return r=!1,!1;!t.selected&&(0===t.status||t.stock<=0||t.stock<t.minQuantity)&&(i-=1)})}),e.orders.selected=r&&!!i})},setOrderOneSelect:function(){var e=this,t=this.orders,i=t.quantity,r=!1;$.each(t.typeObj,function(t,n){$.each(n,function(i,n){$.each(n.itemObj,function(n,a){var o=e.orders.typeObj[t][i].itemObj[n].quantity;if(a.selected&&o)return r=!0,!1})}),e.orders.oneSelected=r&&!!i})},setOrderSelectedCount:function(){var e=this,t=this.orders,i=0;$.each(t.typeObj,function(t,r){$.each(r,function(e,t){$.each(t.itemObj,function(e,t){t.selected&&(i+=1)})}),e.selectedCount=i})},getNumRegion:function(e){var t={},i=[],r=[],n=!1;return $.each(e,function(e,t){var a=t.min?t.min:0,o=t.max?t.max:Number.POSITIVE_INFINITY;i.push(o),r.push(a),n=!0}),n?(t.minQuantity=Math.min.apply(Math,r),t.maxQuantity=Math.max.apply(Math,i),t):{minQuantity:0,maxQuantity:Number.POSITIVE_INFINITY}},getPriceList:function(e,t){var i={},r={},n=[],a=[],o=[],s=[],c=[],d=[],l=[],u=!1;return $.each(e,function(e,t){var i=t.min?t.min:0,r=t.max?t.max:Number.POSITIVE_INFINITY,p=t.price||0===t.price?(1*t.price).toFixed(2):null,m=t.vipPrice||0===t.vipPrice?(1*t.vipPrice).toFixed(2):null,f=p?t.discount?(t.price*t.discount/10).toFixed(2):(1*t.price).toFixed(2):null,h=m?t.discount?(t.vipPrice*t.discount/10).toFixed(2):(1*t.vipPrice).toFixed(2):null;n.push({prices:{price:p,vipPrice:m,realPrice:f,realVipPrice:h},min:i,max:r}),o.push(i),a.push(r),s.push(p),c.push(m),d.push(f),l.push(h),u=!0}),u?(r.min=Math.min.apply(Math,o),r.max=Math.max.apply(Math,a),r.minPrice=Math.min.apply(Math,s),r.vipMinPrice=Math.min.apply(Math,c),r.realMinPrice=Math.min.apply(Math,d),r.realVipMinPrice=Math.min.apply(Math,l),r.maxPrice=Math.max.apply(Math,s),r.vipMaxPrice=Math.max.apply(Math,c),r.realMaxPrice=Math.max.apply(Math,d),r.realVipMaxPrice=Math.max.apply(Math,l),t<r.min?{price:r.maxPrice,vipPrice:r.vipMaxPrice,realPrice:r.realMaxPrice,realVipPrice:r.realVipMaxPrice}:t>r.max?{price:r.minPrice,vipPrice:r.vipMinPrice,realPrice:r.realMinPrice,realVipPrice:r.realVipMinPrice}:($.each(n,function(e,r){if(t>=r.min&&t<=r.max)return i={price:r.prices.price,vipPrice:r.prices.vipPrice,realPrice:r.prices.realPrice,realVipPrice:r.prices.realVipPrice},!1}),i)):{price:null,vipPrice:null,realPrice:null,realVipPrice:null}},returnInfoList:function(e){try{return JSON.parse(e)||[]}catch(e){return[]}},returnSupplierName:function(e){var t="";switch(e){case"天天仓":t="保税TT仓";break;case"粮油仓":t="保税LY仓";break;case"行云仓":t="保税XY仓";break;case"富邦仓":t="保税FB仓";break;default:t=e}return t},selectAllClick:function(){var e=this,t=e.orders.selected;$.each(e.orders.typeObj,function(i,r){$.each(r,function(r,n){$.each(n.itemObj,function(n,a){"boolean"==typeof a.selected&&(0!==a.status&&a.stock>0&&a.stock>=a.minQuantity?e.orders.typeObj[i][r].itemObj[n].selected=!t:e.orders.typeObj[i][r].itemObj[n].selected=!1)})})}),this.render()},selectClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents(".list-body-item").attr("type")||"",a=r.parents(".list-body-item").attr("itemId")||"",o=r.parents(".list-body-item").attr("supplierId")||"";if((n||0===n)&&(o||0===o)&&(a||0===a)){var s=t.orders.typeObj[n][o].itemObj[a].selected,c=t.orders.typeObj[n][o].itemObj[a].status,d=t.orders.typeObj[n][o].itemObj[a].stock,l=t.orders.typeObj[n][o].itemObj[a].minQuantity,u=s?!s:0!==c&&d>0&&d>=l&&!s;t.orders.typeObj[n][o].itemObj[a].selected=u,t.render()}},quantityChange:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents(".list-body-item").attr("type")||"",a=r.parents(".list-body-item").attr("supplierId")||"",o=r.parents(".list-body-item").attr("itemId")||"",s=t.orders.typeObj[n][a].itemObj[o].stock||0,c=1*t.orders.typeObj[n][a].itemObj[o].quantity,d=t.orders.typeObj[n][a].itemObj[o].minQuantity,l=t.orders.typeObj[n][a].itemObj[o].maxQuantity;!n&&0!==n||!a&&0!==a||!o&&0!==o||(r.hasClass("add")&&(c=1*c+1,c=1*c>0?1*c:1),r.hasClass("minus")&&(c=1*c-1,c=1*c>0?1*c:1),s<=0||c<=s&&d&&s<d?z.refresh({content:"当前商品库存不足！"}):c>s?z.refresh({content:"当前数量已是库存可用量！"}):l&&c>=l?z.refresh({content:"当前数量已是最大购买量！"}):d&&c<=d&&z.refresh({content:"当前数量已是最小购买量！"}),c=(l||0===l)&&c>l?l:c,c=(d||0===d)&&c<d?d:c,c=c>s?s:c,c=c>0?c:1,r.val(1*c),t.orders.typeObj[n][a].itemObj[o].quantity=c,t.render())},quantityInput:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents(".list-body-item").attr("type")||"",a=r.parents(".list-body-item").attr("itemId")||"",o=r.parents(".list-body-item").attr("supplierId")||"",s=t.orders.typeObj[n][o].itemObj[a].stock||0,c=t.orders.typeObj[n][o].itemObj[a].minQuantity,d=t.orders.typeObj[n][o].itemObj[a].maxQuantity;if((n||0===n)&&(o||0===o)&&(a||0===a)){var l=r.val()?r.val().trim():0,u=/\D/.test(l)?l.replace(/\D/g,""):l;clearTimeout(t.quantityTimer),t.quantityTimer=setTimeout(function(){var e=1*u>0?1*u:1;s<=0||e<=s&&c&&s<c?z.refresh({content:"当前商品库存不足！",evFunc:function(){e=(d||0===d)&&e>d?d:e,e=(c||0===c)&&e<c?c:e,e=e>s?s:e,t.orders.typeObj[n][o].itemObj[a].quantity=1*e>0?1*e:1,t.render()}}):e>s?z.refresh({content:"当前数量大于库存可用量！",evFunc:function(){e=(d||0===d)&&e>d?d:e,e=(c||0===c)&&e<c?c:e,e=e>s?s:e,t.orders.typeObj[n][o].itemObj[a].quantity=1*e>0?1*e:1,t.render()}}):d&&e>d?z.refresh({content:"当前数量已大于最大购买量！",evFunc:function(){e=(d||0===d)&&e>d?d:e,e=(c||0===c)&&e<c?c:e,e=e>s?s:e,t.orders.typeObj[n][o].itemObj[a].quantity=1*e>0?1*e:1,t.render()}}):c&&e<c&&z.refresh({content:"当前数量已低于最小购买量！",evFunc:function(){e=(d||0===d)&&e>d?d:e,e=(c||0===c)&&e<c?c:e,e=e>s?s:e,t.orders.typeObj[n][o].itemObj[a].quantity=1*e>0?1*e:1,t.render()}})},650)}},quantityBlur:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents(".list-body-item").attr("type")||"",a=r.parents(".list-body-item").attr("itemId")||"",o=r.parents(".list-body-item").attr("supplierId")||"",s=t.orders.typeObj[n][o].itemObj[a].stock||0,c=t.orders.typeObj[n][o].itemObj[a].minQuantity,d=t.orders.typeObj[n][o].itemObj[a].maxQuantity;if((n||0===n)&&(o||0===o)&&(a||0===a)){var l=r.val()?r.val().trim():0;l=(d||0===d)&&l>d?d:l,l=(c||0===c)&&l<c?c:l,l=l>s?s:l,l=l>0?l:1,r.val(1*l),t.orders.typeObj[n][o].itemObj[a].quantity=l,t.render()}},selectDelClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget);K.refresh({title:"删除商品",content:"是否删除该商品？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){var e=r.parents(".list-body-item").attr("type")||"",i=r.parents(".list-body-item").attr("supplierId")||"",n=r.parents(".list-body-item").attr("itemId")||"",o=r.parents(".list-body-item").attr("shopCartId")||"";!e&&0!==e||!i&&0!==i||!n&&0!==n||a.send("ORDER_SHOPPINGCART_DELETE",{ids:o}).done(function(r){r&&r.success&&(delete t.orders.typeObj[e][i].itemObj[n],t.orders.quantity=t.orders.quantity-1,t.render(),a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){e&&e.success&&(J.cartCount=e.obj||0,W.cartCount=e.obj||0)}))})}})},selectMoreDelClick:function(e){var t=this;K.refresh({title:"删除商品",content:"是否删除所选中的商品？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){var e=[],i=$.extend(!0,{},t.orders);$.each(i.typeObj,function(t,r){$.each(r,function(t,r){$.each(r.itemObj,function(t,n){!0===n.selected&&0!==n.status&&n.stock>0&&n.stock>=n.minQuantity&&(e.push(n.ids),delete r.itemObj[t],i.quantity=i.quantity-1)})})}),e.length>0&&a.send("ORDER_SHOPPINGCART_DELETE",{ids:e.join(",")}).done(function(e){e&&e.success&&(t.orders=i,t.render(),a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){e&&e.success&&(J.cartCount=e.obj||0,W.cartCount=e.obj||0)}))})}})},loseDelClick:function(){var e=this;K.refresh({title:"清空失效商品",content:"是否清空失效商品？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){var t=[],i=$.extend(!0,{},e.orders);$.each(i.typeObj,function(e,r){$.each(r,function(e,r){$.each(r.itemObj,function(e,n){(0===n.status||n.stock<=0||n.stock<n.minQuantity)&&(t.push(n.ids),delete r.itemObj[e],i.quantity=i.quantity-1)})})}),t.length>0&&a.send("ORDER_SHOPPINGCART_DELETE",{ids:t.join(",")}).done(function(t){t&&t.success&&(e.orders=i,e.render(),a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){e&&e.success&&(J.cartCount=e.obj||0,W.cartCount=e.obj||0)}))})}})},settlementClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),a=n.platform.rule.crossOrder.maxPrice;n.platform.rule.normalOrder.minPrice;if(!r.hasClass("noSelect")){t.render();var o=0,s={};if($.each(t.orders.typeObj,function(e,t){$.each(t,function(t,i){var r=!1;$.each(i.itemObj,function(n,a){a.selected&&0!==a.status&&a.stock>0&&a.stock>=a.minQuantity&&a.quantity>0&&(r=!0,s.typeObj=s.typeObj||{},s.typeObj[e]=s.typeObj[e]||{},s.typeObj[e][t]=s.typeObj[e][t]||{},s.typeObj[e][t].type=e,s.typeObj[e][t].taxFee=0,s.typeObj[e][t].postFee=0,s.typeObj[e][t].exciseTaxFee=0,s.typeObj[e][t].incrementTaxFee=0,s.typeObj[e][t].supplierId=i.supplierId,s.typeObj[e][t].supplierName=i.supplierName,s.typeObj[e][t].supplierWeight=i.supplierWeight,s.typeObj[e][t].supplierPrice=i.supplierPrice,s.typeObj[e][t].supplierVipPrice=i.supplierVipPrice,s.typeObj[e][t].supplierRealPrice=i.supplierRealPrice,
s.typeObj[e][t].supplierRealVipPrice=i.supplierRealVipPrice,s.typeObj[e][t].itemObj=s.typeObj[e][t].itemObj||{},s.typeObj[e][t].itemObj[n]={},s.typeObj[e][t].itemObj[n].ids=a.ids,s.typeObj[e][t].itemObj[n].status=a.status,s.typeObj[e][t].itemObj[n].goodsId=a.goodsId,s.typeObj[e][t].itemObj[n].firstCategory=a.firstCategory,s.typeObj[e][t].itemObj[n].secondCategory=a.secondCategory,s.typeObj[e][t].itemObj[n].thirdCategory=a.thirdCategory,s.typeObj[e][t].itemObj[n].type=a.type,s.typeObj[e][t].itemObj[n].href=a.href,s.typeObj[e][t].itemObj[n].freeTax=a.freeTax,s.typeObj[e][t].itemObj[n].freePost=a.freePost,s.typeObj[e][t].itemObj[n].itemId=a.itemId,s.typeObj[e][t].itemObj[n].unit=a.unit,s.typeObj[e][t].itemObj[n].itemCode=a.itemCode,s.typeObj[e][t].itemObj[n].supplierId=a.supplierId,s.typeObj[e][t].itemObj[n].supplierName=a.supplierName,s.typeObj[e][t].itemObj[n].itemImg=a.itemImg,s.typeObj[e][t].itemObj[n].picPath=a.picPath,s.typeObj[e][t].itemObj[n].itemName=a.itemName,s.typeObj[e][t].itemObj[n].quantity=a.quantity,s.typeObj[e][t].itemObj[n].exciseTax=a.exciseTax,s.typeObj[e][t].itemObj[n].incrementTax=a.incrementTax,s.typeObj[e][t].itemObj[n].priceList=a.priceList,s.typeObj[e][t].itemObj[n].tagList=a.tagList,s.typeObj[e][t].itemObj[n].tagFunId=a.tagFunId,s.typeObj[e][t].itemObj[n].preSaleName=a.preSaleName,s.typeObj[e][t].itemObj[n].preSaleDesc=a.preSaleDesc,s.typeObj[e][t].itemObj[n].sku=a.itemSpecs.sku,s.typeObj[e][t].itemObj[n].info=a.itemSpecs.info,s.typeObj[e][t].itemObj[n].stock=a.itemSpecs.stock>0?a.itemSpecs.stock:0,s.typeObj[e][t].itemObj[n].weight=a.itemSpecs.weight,s.typeObj[e][t].itemObj[n].price=a.price,s.typeObj[e][t].itemObj[n].vipPrice=a.vipPrice,s.typeObj[e][t].itemObj[n].realPrice=a.realPrice,s.typeObj[e][t].itemObj[n].realVipPrice=a.realMinPrice)}),r&&o++})}),s.orderCount=o,!$.isEmptyObject(s)){var c=0,d=0,u=!0,p=!0;$.each(s.typeObj,function(e,t){if($.each(t,function(t,i){var r=0,n=0,o=i.supplierName;return $.each(i.itemObj,function(e,t){0===t.type?(r+=t.realPrice*t.quantity,c+=t.quantity):2===t.type&&(n+=t.realPrice*t.quantity,d+=t.quantity)}),"0"===e&&r>a&&c>1?(p=u=!1,z.refresh({content:o+"商品单笔订单价格超过"+a+"元，请调整！"}),!1):!!p&&void 0}),!p)return!1}),p&&u&&(window.localStorage.setItem("ordersInfo",JSON.stringify(s)),window.location.href=encodeURI("/orderSure.html?jumpUrl="+l))}}}},mounted:function(){this.render(!0)}})})}if(/^search-1-\d+$/.test(t)&&a.send(["GOODS_BASE_QUERY","GOODS_NAV_QUERY_NODE"],Q,!0).done(function(n){var o=n.GOODS_BASE_QUERY||{},s=n.GOODS_NAV_QUERY_NODE&&n.GOODS_NAV_QUERY_NODE.data||{},c=o.brand||o.origin||"show"===D;x||(window.localStorage.setItem("brands",JSON.stringify(o.brand||[])),window.localStorage.setItem("origins",JSON.stringify(o.origin||[])),window.localStorage.setItem("brandpys",JSON.stringify(o.brandpy||{}))),e[t]=new Vue({el:i,data:{type:U,typeName:"0"===U?"跨境商品":"2"===U?"一般贸易":"",isShow:c,filtrate:{brand:M||o.brand||[],origin:q||o.origin||[],brandpy:N||o.brandpy||{},category:function(){var e=[];return"show"===D&&$.each(s,function(t,i){e.push({name:i.industryName})}),e}()},filtrateObj:{brand:A?"品牌:"+A:"",origin:L?"产地:"+L:"",category:k?"分类:"+k:""},filtrateShow:{brandShow:M||o.brand||[]},selectedList:{brand:A&&A.split(",")||[],origin:L&&L.split(",")||[],category:k&&k.split(",")||[]},sortType:C,screenType:_,position:E||R||"所有分类",goodsList:o.goodsList||{},pagination:o.pagination||{},rootPath:"所有分类",locations:V,locationId:F,isLogin:d,jumpUrl:u,pathUrl:l,request:Q,priceAreaMin:T,priceAreaMax:I},computed:{paginationPageList:function(){var e=[],t=this.pagination||{},i=1*t.currentPage,r=1*t.totalPages;if(r<13)for(var n=0;n<r;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};else if(i<7){for(var n=0;n<8;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[8]={page:null,jumpBtn:null,ellipsis:!0};for(var n=9,a=1;a>-1;n++,a--)e[n]={page:r-a,jumpBtn:r-a,active:r-a==i?"active":null,ellipsis:!1}}else if(i>r-6){for(var n=0;n<2;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[2]={page:null,jumpBtn:null,ellipsis:!0};for(var n=3,a=r-8;a<r;n++,a++)e[n]={page:a+1,jumpBtn:a+1,active:a+1==i?"active":null,ellipsis:!1}}else{for(var n=0;n<2;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[2]={page:null,jumpBtn:null,ellipsis:!0};for(var n=3,a=i-3;a<i+2;n++,a++)e[n]={page:a+1,jumpBtn:a+1,active:a+1==i?"active":null,ellipsis:!1};e[8]={page:null,jumpBtn:null,ellipsis:!0};for(var n=9,a=1;a>-1;n++,a--)e[n]={page:r-a,jumpBtn:r-a,active:r-a==i?"active":null,ellipsis:!1}}return e}},methods:{firstCategory:function(e,t){return t[0]},categoryName:function(e,t){return t[0]},secondCategory:function(e,t){var i="";return e>=1&&(i=t[1]),i},dictName:function(e,t){var i="";return e>=1&&(i=t[1]),i},thirdCategory:function(e,t){var i="";return e>=2&&(i=t[2]),i},entryName:function(e,t){var i="";return e>=2&&(i=t[2]),i},getPath:function(e,t){return $.isArray(e)&&e[0]&&e[0].path||t},returnImgSrc:function(e){var t="";switch(e){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnPrice:function(e){return 1*e>0?(1*e).toFixed(2):"0.00"},returnOldPrice:function(e,t){return t&&e&&e<t?1*t>0?(1*t).toFixed(2):"0.00":""},typeLetter:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parent(),a=r.attr("keyId")||"";t.filtrateShow.brandShow="all"===a?t.filtrate.brand:t.filtrate.brandpy[a],n.find(">li").removeClass("selected"),r.addClass("selected")},brandStatus:function(e,t){return-1!==$.inArray(e,t)},returnSelected:function(e,t){return-1!==$.inArray(e,t)?"fa-check-square-o":"fa-square-o"},itemBodyLiClick:function(e){var t=this,i=null,n=!1,o=e||window.event,s=$(o.currentTarget),c=s.parents(".list-item"),d=s.parents(".list-item-body"),l=s.attr("itemName");d.hasClass("show")||(c.hasClass("origin")&&(n=!0,t.selectedList.origin=[l],t.filtrateObj.origin="产地:"+l,t.request.origin=l,B.origin=l),c.hasClass("brand")&&(n=!0,t.selectedList.brand=[l],t.filtrateObj.brand="品牌:"+l,t.request.brand=l,B.brand=l),n&&(B.currentPage=1,t.request.currentPage=1,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"}))),d.hasClass("show")&&(c.hasClass("origin")&&(i=$.inArray(l,t.selectedList.origin),-1===i?t.selectedList.origin.push(l):t.selectedList.origin.splice(i,1)),c.hasClass("brand")&&(i=$.inArray(l,t.selectedList.brand),-1===i?t.selectedList.brand.push(l):t.selectedList.brand.splice(i,1)))},liSpanClick:function(e){var t=this,i=e||window.event,n=$(i.currentTarget);n.hasClass("origin")&&(B.origin="",t.selectedList.origin=[],delete t.filtrateObj.origin,delete t.request.origin),n.hasClass("brand")&&(B.brand="",t.selectedList.brand=[],delete t.filtrateObj.brand,delete t.request.brand),B.currentPage=1,t.request.currentPage=1,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},cancelClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget);t.selectedList.brand=$.extend(!0,[],t.request.brand),t.selectedList.origin=$.extend(!0,[],t.request.origin),r.parents(".list-item").find(".list-item-header i").click(),r.parents(".list-item-body").find(".typeLetter").hide()},submitClick:function(e){var t,i,n=this,o=e||window.event,s=$(o.currentTarget),c=s.parents(".list-item"),d=s.parents(".searchFiltrate-list").find(".list-item");d.find(".list-item-header > i").html("多选"),d.find(".list-item-body .typeLetter").hide(),d.find(".list-item-body .typeList").css("overflow-y","hidden"),d.find("[data-status]").attr("data-status","hide"),d.find(".list-item-body").removeClass("active show"),c.hasClass("origin")&&(t=n.selectedList.origin.join(","),t?(B.origin=t,n.request.origin=t,n.filtrateObj.origin="产地:"+t):(B.origin="",delete n.request.origin,delete n.filtrateObj.origin)),c.hasClass("brand")&&(i=n.selectedList.brand.join(","),i?(B.brand=i,n.request.brand=i,n.filtrateObj.brand="品牌:"+i):(B.brand="",delete n.request.brand,delete n.filtrateObj.brand)),B.currentPage=1,n.request.currentPage=1,a.send("GOODS_BASE_QUERY",n.request).done(function(e){if(e&&e.success){var t=e.obj||{};n.goodsList=t&&t.goodsList||{},n.pagination=t&&t.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},selectFilter:function(e){var t=this,i=e||window.event,n=$(i.currentTarget),o=n.val();"1"===n.val()&&(t.sortType=o,B.sortType=o,delete t.request["sortList[0].sortField"],delete t.request["sortList[0].sortRule"]),"2"===n.val()&&(t.sortType=o,B.sortType=o,t.request["sortList[0].sortField"]="create_time",t.request["sortList[0].sortRule"]="desc"),"3"===n.val()&&(t.sortType=o,B.sortType=o,t.request["sortList[0].sortField"]="price",t.request["sortList[0].sortRule"]="desc"),"4"===n.val()&&(t.sortType=o,B.sortType=o,t.request["sortList[0].sortField"]="price",t.request["sortList[0].sortRule"]="asc"),B.currentPage=1,t.request.currentPage=1,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},selectScreen:function(e){var t=this,i=e||window.event,n=$(i.currentTarget),o=n.val();"1"===n.val()&&(B.tag="",t.screenType=o,B.screenType=o,delete t.request.tag),"2"===n.val()&&(t.screenType=o,B.screenType=o,t.request.tag="新品推荐",B.tag="新品推荐"),"3"===n.val()&&(t.screenType=o,B.screenType=o,t.request.tag="热销榜单",B.tag="热销榜单"),"4"===n.val()&&(t.screenType=o,B.screenType=o,t.request.tag="一般贸易(包邮)",B.tag="一般贸易(包邮)"),"5"===n.val()&&(t.screenType=o,B.screenType=o,t.request.tag="明星同款",B.tag="明星同款"),B.currentPage=1,t.request.currentPage=1,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},priceMinInput:function(e){var t=this,i=this.priceAreaMin;i=i.replace(/\D+/g,""),B.priceAreaMin=i||"",t.priceAreaMin=i||"",r.url.setParam(B,"",{code:"search"})},priceMaxInput:function(e){var t=this,i=this.priceAreaMax;i=i.replace(/\D+/g,""),B.priceAreaMax=i||"",t.priceAreaMax=i||"",r.url.setParam(B,"",{code:"search"})},priceAreaBlur:function(e){var t=this,i=t.priceAreaMin,n=t.priceAreaMax;if(i&&n){var a=1*i,o=1*n;i=a>o?""+o:""+a,n=o<a?""+a:""+o}t.priceAreaMin=i||"",t.priceAreaMax=n||"",B.priceAreaMin=i||"",B.priceAreaMax=n||"",r.url.setParam(B,"",{code:"search"})},priceAreaClear:function(e){var t=this;t.priceAreaMin="",t.priceAreaMax="",B.priceMin=0,B.priceMax=1e8,B.currentPage=1,B.priceAreaMin="",B.priceAreaMax="",t.request.priceMin=0,t.request.priceMax=1e8,t.request.currentPage=1,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},priceAreaSure:function(e){var t=this,i=t.priceAreaMin,n=t.priceAreaMax;B.currentPage=1,B.priceAreaMin=i,B.priceAreaMax=n,B.priceMin=i?1*i:0,B.priceMax=n?1*n:1e8,t.request.currentPage=1,t.request.priceMin=i?1*i:0,t.request.priceMax=n?1*n:1e8,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})},paginationInput:function(e){var t=this,i=/\D/g,r=e||window.event,n=$(r.currentTarget),a=n.val()&&n.val().trim()||1,o=1*t.pagination.totalPages;n.val(a.replace(i,"").trim()),1*n.val()>o&&n.val(o||1)},paginationBlur:function(e){var t=e||window.event,i=$(t.currentTarget);i.val().trim()||i.val(1)},paginationBtn:function(e){var t=this,i=e||window.event,n=$(i.currentTarget),o=1*t.pagination.totalPages,s=1*t.pagination.currentPage,c=n.parents(".pagination_ul");c.hasClass("lose")||c.hasClass("active")||(n.hasClass("searchBtn")?s=n.parent().prev().find("input").val():n.hasClass("prevBtn")?s=s>1?1*s-1:1:n.hasClass("nextBtn")?s=s<o?1*s+1:o:(s=n.text(),s=1*s>=1?1*s:1,s=1*s<=o?1*s:o),B.currentPage=s,t.request.currentPage=s,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}}),r.url.setParam(B,"",{code:"search"}))},pageImgClick:function(e){var t=this,i=e||window.event,n=$(i.currentTarget),o=1*t.pagination.currentPage,s=1*t.pagination.totalPages;n.hasClass("prev")&&1!==o&&(o=o>1?1*o-1:1,B.currentPage=o,t.request.currentPage=o,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"})),n.hasClass("next")&&o!==s&&(o=o<s?1*o+1:s,B.currentPage=o,t.request.currentPage=o,a.send("GOODS_BASE_QUERY",t.request).done(function(e){if(e&&e.success){var i=e.obj||{};t.goodsList=i&&i.goodsList||{},t.pagination=i&&i.pagination||{}}}),r.url.setParam(B,"",{code:"search"}))},toAddShopCart:function(t){var i=this,r=t||window.event,n=$(r.currentTarget),o=e["message-1-1"],s=e["alertDefault-1-1"],c=n.parents(".img_shrink"),l=c.attr("isSingleSpec"),u=c.attr("goodsId"),p=c.attr("toUrl");"yes"===l?$.each(i.goodsList,function(t,i){if(i.goodsId==u){var r=1,n=i.goodsFileList&&i.goodsFileList[0]||{},l=i.goodsSpecsList&&i.goodsSpecsList[0]||{},p=l.stock||0,m=l.priceList||[],f=function(e){var t={},i=[],r=[],n=!1;return $.each(e,function(e,t){var a=1*t.min?1*t.min:0,o=1*t.max?1*t.max:1/0;i.push(o),r.push(a),n=!0}),n?(t.minQuantity=Math.min.apply(Math,r),t.maxQuantity=Math.max.apply(Math,i),t):{minQuantity:0,maxQuantity:1/0}},h=f(m).minQuantity,g=f(m).maxQuantity;if(!d)return void o.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/login.html?isBack=1"}});if(r<h&&(r=h),p<=0)return void s.refresh({content:"当前商品库存不足, 无法加入购物车中！"});if(h>p)return void s.refresh({content:"当前数量已达至商品库存量, 无法加入购物车中！"});var y=function(t){var r=0,o=0,d=null,u=$("body").find("#header-2-1"),p="block"==u.css("display");p&&(d=$("body").find("#header-2-1 .header-iconGroup .shopCart"),r=d.offset().top+10,o=d.offset().left+10),p||(d=$("body").find("#header-1-1 .header-iconGroup .shopCart"),r=d.offset().top+10,o=d.offset().left+10);var m=c.find(".goodsImg"),f=m.clone();f.length&&(f.offset({top:m.offset().top,left:m.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"99999999"}).appendTo($("body")).animate({top:r,left:o,width:50,height:50},1e3,"linear"),f.animate({width:0,height:0},function(){$(this).detach()})),a.send("ORDER_SHOPPINGCART_CREATE",{type:i.type,itemId:l.itemId,supplierId:i.supplierId,supplierName:i.supplierName,goodsName:i.customGoodsName,goodsImg:n.path||"",quantity:t}).done(function(){a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(t){t&&t.success&&(e["header-1-1"].cartCount=t.obj||0,e["header-2-1"].cartCount=t.obj||0,s.refresh({content:"添加成功"}))})})};a.send("ORDER_SHOPPINGCART_COUNT_ID",{itemId:i.goodsSpecsList[0].itemId}).done(function(e){if(e&&e.success){var t=e.obj||0;if(null!=g&&0!=g)if(t>=g)s.refresh({content:"当前该商品在购物车中的数量已达到最大购买量, 无法继续加入购物车中！"});else if(r+t>g){var i=g-t;o.refresh({title:"购物车数量上限",content:"最大量"+g+"件; 已添加:"+t+"件, 可添加"+i+"件! 是否继续？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){y(i)}})}else y(r);else y(r)}else s.refresh({content:"查询购物车内该商品数量失败！"})}).fail(function(){s.refresh({content:"网络信号弱，请刷新重试"})})}}):p&&s.refresh({content:"该商品含有多个规格，正前往商品详情页面中！",evFunc:function(){window.location.href=p}})},getTags:function(e){var t=[],i=[];return $.each(e||[],function(e,t){$.each(t.tagList||[],function(e,t){i.push(t)})}),$.each(i||[],function(e,i){switch(i.tagName){case"必选":-1===$.inArray("icon_tag1",t)&&t.push("icon_tag1");break;case"爆款":-1===$.inArray("icon_tag2",t)&&t.push("icon_tag2");break;case"热销":-1===$.inArray("icon_tag3",t)&&t.push("icon_tag3");break;case"优选":-1===$.inArray("icon_tag4",t)&&t.push("icon_tag4")}}),t}},beforeCreate:function(){},created:function(){},mounted:function(){var e=this;B&&(B.useStorage="yes",r.url.setParam(B,"cover",{code:"search"}),r.history.redirectHandle("search",function(){var t=r.url.getParam("priceMin"),i=r.url.getParam("priceMax"),n=r.url.getParam("priceAreaMin"),o=r.url.getParam("priceAreaMax"),s=r.url.getParam("sortType")||"1",p=r.url.getParam("screenType")||"1",m=r.url.getParam("numPerPage")||"16",f=r.url.getParam("currentPage")||"1",h=r.url.getParam("filterCategory"),g=r.url.getParam("firstCategory"),y=r.url.getParam("secondCategory"),v=r.url.getParam("thirdCategory"),b=r.url.getParam("categoryName"),O=r.url.getParam("dictName"),w=r.url.getParam("entryName"),j=r.url.getParam("goodsName"),P=r.url.getParam("upShelves"),T=r.url.getParam("useStorage"),I=r.url.getParam("category"),S=r.url.getParam("origin"),C=r.url.getParam("brand"),_=r.url.getParam("type"),D=r.url.getParam("tag"),E="yes"===T&&(JSON.parse(window.localStorage.getItem("brandpys"))||{}),R="yes"===T&&(JSON.parse(window.localStorage.getItem("origins"))||[]),x="yes"===T&&(JSON.parse(window.localStorage.getItem("brands"))||[]),N=[],k=[],q={},M={},L="",A="";switch(b&&(k.push(b),N.push(g)),O&&(k.push(O),N.push(y)),w&&(k.push(w),N.push(v)),j&&k.push(j),g&&(M.firstCategory=g,q.firstCategory=g),y&&(M.secondCategory=y,q.secondCategory=y),v&&(M.thirdCategory=v,q.thirdCategory=v),j&&(M.goodsName=j,q.goodsName=j),D){case"新品推荐":p=2;break;case"热销榜单":p=3;break;case"一般贸易(包邮)":p=4;break;case"明星同款":p=5}switch(s){case"1":delete M["sortList[0].sortField"],delete M["sortList[0].sortRule"];break;case"2":M["sortList[0].sortField"]="create_time",M["sortList[0].sortRule"]="desc";break;case"3":M["sortList[0].sortField"]="price",M["sortList[0].sortRule"]="desc";break;case"4":M["sortList[0].sortField"]="price",M["sortList[0].sortRule"]="asc"}void 0!==D&&""!==D&&(M.tag=D,q.tag=D),void 0!==_&&""!==_&&(M.type=_,q.type=_),void 0!==S&&""!==S&&(M.origin=S,q.origin=S),void 0!==C&&""!==C&&(M.brand=C,q.brand=C),void 0!==s&&""!==s&&(q.sortType=s),void 0!==p&&""!==p&&(q.screenType=p),void 0!==P&&""!==P&&(M.upShelves=P,q.upShelves=P),void 0!==t&&""!==t&&(M.priceMin=t||0,q.priceMin=t||0),void 0!==i&&""!==i&&(M.priceMax=i||1e8,q.priceMax=i||1e8),void 0!==n&&""!==n&&(L=1*n,A=1*o,n=o&&L>A?""+A:""+L,q.priceAreaMin=n),void 0!==o&&""!==o&&(L=1*n,A=1*o,o=n&&A<L?""+L:""+A,q.priceAreaMax=o),void 0!==m&&""!==m&&(M.numPerPage=m,q.numPerPage=m),void 0!==f&&""!==f&&(M.currentPage=f,q.currentPage=f),e.type=_,e.typeName="0"===_?"跨境商品":"2"===_?"一般贸易":"",e.isShow=c,e.filtrate={brand:[],origin:[],brandpy:{},category:[]},e.filtrateObj={brand:"",origin:"",category:""},e.filtrateShow={brandShow:[]},e.selectedList={brand:[],origin:[],category:[]},e.sortType=s,e.screenType=p,e.position=w||j||"所有分类",e.goodsList={},e.pagination={},e.rootPath="所有分类",e.locations=k,e.locationId=N,e.isLogin=d,e.jumpUrl=u,e.pathUrl=l,e.request=M,e.priceAreaMin=n,e.priceAreaMax=o,a.send(["GOODS_BASE_QUERY","GOODS_NAV_QUERY_NODE"],M,!0).done(function(t){var i=t.GOODS_BASE_QUERY||{},r=t.GOODS_NAV_QUERY_NODE&&t.GOODS_NAV_QUERY_NODE.data||{},n=i.brand||i.origin||"show"===h;T||(window.localStorage.setItem("brands",JSON.stringify(i.brand||[])),window.localStorage.setItem("origins",JSON.stringify(i.origin||[])),window.localStorage.setItem("brandpys",JSON.stringify(i.brandpy||{}))),e.isShow=n,e.filtrate={brand:x||i.brand||[],origin:R||i.origin||[],brandpy:E||i.brandpy||{},category:function(){var e=[];return"show"===h&&$.each(r,function(t,i){e.push({name:i.industryName})}),e}()},e.filtrateObj={brand:C?"品牌:"+C:"",origin:S?"产地:"+S:"",category:I?"分类:"+I:""},e.filtrateShow={brandShow:x||i.brand||[]},e.selectedList={brand:C&&C.split(",")||[],origin:S&&S.split(",")||[],category:I&&I.split(",")||[]},e.goodsList=i.goodsList||{},e.pagination=i.pagination||{},$("html,body").animate({scrollTop:0},150)})})),$(i).on("click",".searchLocation-name [index]",function(e){var t=e||window.event,i=$(t.currentTarget),r=i.attr("index"),n=i.parent().find("span").length;if("0"===r&&1*r!=n-2){var a=i.attr("firstCategory"),o=i.attr("categoryName");window.location.href=encodeURI("/search.html?categoryName="+o+"&firstCategory="+a)}if("1"===r&&1*r!=n-2){var a=i.attr("firstCategory"),s=i.attr("secondCategory"),o=i.attr("categoryName"),c=i.attr("dictName");window.location.href=encodeURI("/search.html?categoryName="+o+"&dictName="+c+"&secondCategory="+s+"&firstCategory="+a)}if("2"===r&&1*r!=n-2){var a=i.attr("firstCategory"),s=i.attr("secondCategory"),d=i.attr("thirdCategory"),o=i.attr("categoryName"),c=i.attr("dictName"),l=i.attr("entryName");window.location.href=encodeURI("/search.html?categoryName="+o+"&dictName="+c+"&entryName="+l+"&thirdCategory="+d+"&secondCategory="+s+"&firstCategory="+a)}}),$(i).on("click",".list-item-header > span",function(t){var i=t||window.event,r=$(i.currentTarget),n=r.parent(),a=r.parents(".list-item"),o=e.request.brand&&e.request.brand.split(",")||[],s=e.request.origin&&e.request.origin.split(",")||[],c=r.parents(".searchFiltrate-list").find(".list-item").not(a);if(c.find(".list-item-header > i").html("多选"),c.find(".list-item-header > span > b").attr("class","fa fa-angle-down fa-fw"),c.find(".list-item-header > span > b").attr("data-class","fa fa-angle-up fa-fw"),c.find(".list-item-body").removeClass("active show").find(".typeLetter").hide(),c.find(".list-item-body .typeList").css("overflow-y","hidden"),c.find("[data-status]").attr("data-status","hide"),"hide"===r.next().attr("data-status")){n.next().hasClass("active")?(n.next().find(">.typeList").css("overflow-y","hidden"),n.next().find(">.typeLetter").hide(),n.next().removeClass("active"),r.attr("data-status","hide")):(n.next().find(">.typeList").css("overflow-y","auto"),n.next().find(">.typeLetter").show(),n.next().addClass("active"),r.attr("data-status","show"));var d=r.find(">*:last-child").attr("class"),l=r.find(">*:last-child").attr("data-class");r.find(">*:last-child").attr("class",l),r.find(">*:last-child").attr("data-class",d),e.selectedList.brand=$.extend(!0,[],o),e.selectedList.origin=$.extend(!0,[],s)}}),$(i).on("click",".list-item-header > i",function(t){var i=t||window.event,r=$(i.currentTarget),n=$(i.currentTarget).parent(),a=r.parents(".list-item"),o=r.parents(".searchFiltrate-list"),s=o.find(".list-item"),c=s.not(a),d=e.request.brand&&e.request.brand.split(",")||[],l=e.request.origin&&e.request.origin.split(",")||[];c.find(".list-item-header > i").html("多选"),c.find(".list-item-header > i[data-status]").attr("data-status","hide"),c.find(".list-item-body .typeLetter").hide(),c.find(".list-item-body").removeClass("active show"),c.find(".list-item-body .typeList").css("overflow-y","hidden"),s.find("span[data-status]").attr("data-status","hide"),s.find("span[data-status] > b").attr("class","fa fa-angle-down fa-fw"),s.find("span[data-status] > b").attr("data-class","fa fa-angle-up fa-fw"),"show"===r.attr("data-status")?(n.next().find(">.typeList").css("overflow-y","hidden"),n.next().find(">.typeLetter").hide(),n.next().removeClass("active show"),r.attr("data-status","hide"),r.html("多选")):"hide"===r.attr("data-status")&&(n.next().find(">.typeList").css("overflow-y","auto"),n.next().find(">.typeLetter").show(),n.next().addClass("active show"),r.attr("data-status","show"),r.html("收起")),e.selectedList.brand=$.extend(!0,[],d),e.selectedList.origin=$.extend(!0,[],l)})}})}),/^orderSure-1-\d+$/.test(t)){var K=e["message-1-1"],z=e["alertDefault-1-1"],X=JSON.parse(window.localStorage.getItem("ordersInfo")||"{}");e[t]=new Vue({el:i,data:{rootPath:"订单确认界面",locations:[],addressList:[],isClick:!1,alertInfo:null,orders:X,eShowDiscount:{unSuperposition:{},superposition:{}},select:"",setDefault:1},beforeCreate:function(){var e=this;a.send("USER_ADDRESS_QUERY",{alertInfo:null}).done(function(t){t&&t.success&&(e.addressList=t.obj,$.each(t.obj,function(t,i){1==i.setDefault&&(e.select=i)}),e.queryPostFee(),e.setTotalTax(),e.setTotalPostFee(),e.setTotalPrice())})},created:function(){var e=this.orders||{};$.each(e.typeObj||{},function(e,t){$.each(t||{},function(e,t){Vue.set(t,"submitState",null==t.submitState||t.submitState),Vue.set(t,"submitText",null==t.submitText?"提交订单":t.submitText)})})},methods:{addElementClass:function(e){return 1==this.addressList[e].setDefault?"active default":""},addClass:function(){return this.isClick?"active":""},returnSupplierName:function(e){var t="";switch(e){case"天天仓":t="保税TT仓";break;case"粮油仓":t="保税LY仓";break;case"行云仓":t="保税XY仓";break;case"富邦仓":t="保税FB仓";break;default:t=e}return t},returnTotalPrice:function(e,t,i){var r=parseFloat(void 0!=i?i:0),n=parseFloat(void 0!=e?e:0),a=parseFloat(void 0!=t?t:e);return((a<n?a:n)*r).toFixed(2)},returnPrice1:function(e){return parseFloat(void 0!=e?e:0).toFixed(2)},returnPrice2:function(e,t){var i=parseFloat(void 0!=e?e:0);return parseFloat(void 0!=t?t:e)<i?"￥"+i.toFixed(2):null},isHaveStyle:function(e,t){var i=parseFloat(void 0!=e?e:0);return parseFloat(void 0!=t?t:e)>=i?0:1},returnSelect:function(e,t){return e.choose==t?"selected":""},returnDisabled:function(e,t,i){var r="";return $.each(e.chooseArr,function(e,n){n==t&&n!=i&&(r="disabled")}),r},setTotalPrice:function(){var e=this,t=0,i=e.orders;$.each(i.typeObj,function(i,r){$.each(r,function(r,n){var a=1*n.taxFee+1*n.supplierRealPrice+1*n.postFee;a-=e.orders.typeObj[i][r].minusPrice||0,e.orders.typeObj[i][r].orderPrice=(1*a).toFixed(2),t+=1*n.taxFee+1*n.supplierRealPrice+1*n.postFee})})},setTotalPostFee:function(){var e=this,t=0,i=e.orders;$.each(i.typeObj,function(e,i){$.each(i,function(e,i){t+=i.postFee||0})})},setTotalTax:function(){var e=this,t=0,i=e.orders;$.each(i.typeObj,function(i,r){$.each(r,function(r,n){var a=0,o=0,s=n.postFee,c=n.supplierPrice;$.each(n.itemObj,function(e,t){if(0==t.freeTax&&0==n.type){var i=(t.quantity||0)*(t.price||0),r=i/c*s,d=(i+r)/(1-t.exciseTax)*t.exciseTax,l=(i+r+d)*t.incrementTax;a+=1*(.7*(d+l)).toFixed(3),o+=.7*(d+l)*1}}),e.orders.typeObj[i][r].taxFee=1*o.toFixed(2),t+=1*o})})},queryPostFee:function(){var e=this,t=[],i={},r=e.select,n=e.orders||{},o=r&&r.province;$.each(n.typeObj,function(e,r){$.each(r,function(r,n){var a=n.supplierPrice,s=n.supplierWeight;$.each(n.itemObj,function(n,d){0==d.freePost&&(i[r]=e,o&&a&&s&&t.push({centerId:c,supplierId:r,province:o,weight:s,price:a}))})})}),t&&t.length>0&&a.send("ORDER_USER_POSTFEE",{data:encodeURI(JSON.stringify(t))}).done(function(t){t&&t.success&&$.each(t.obj,function(t,r){var a=r.supplierId,o=i[a];n.typeObj[o][a].postFee=r.postFee||0,e.setTotalTax(),e.setTotalPostFee(),e.setTotalPrice()})})},showMore:function(){var e=!this.isClick;this.isClick=e},editAddress:function(e){var t=this,i=null,r=$(e.currentTarget),n=t.addressList,a=r.parents(".address-item").attr("addressId");$.each(n,function(e,t){t.id==a&&(i=t)}),i&&(t.alertInfo=i,t.$nextTick(function(){$(t.$el).find(".picker-country").picker()}),$("body").css({overflow:"hidden"}))},addNewAddress:function(){var e=this;e.alertInfo={address:"",area:"",city:"",province:"",receiveName:"",receivePhone:"",zipCode:"",setDefault:1},e.$nextTick(function(){$(e.$el).find(".picker-country").picker()}),$("body").css({overflow:"hidden"})},saveAddress:function(){var e=this,t=e.addressList,i=e.alertInfo,r=[],n=i.id,o=!0,s=$(".picker-province"),c=$(".picker-city"),d=$(".picker-area");"---- 所在省 ----"===s.attr("data-name")?(o=!1,s.addClass("state_error")):s.removeClass("state_error"),$(".picker-city").find("option").length>1&&"---- 所在市 ----"===c.attr("data-name")?(o=!1,c.addClass("state_error")):c.removeClass("state_error"),$(".picker-area").find("option").length>1&&"---- 所在区 ----"===d.attr("data-name")?(o=!1,d.addClass("state_error")):d.removeClass("state_error"),i.address&&""!=i.address?$(".address_state").removeClass("state_error"):(o=!1,$(".address_state").addClass("state_error")),""!=i.zipCode&&/[0-9]{1}(\d){5}/gi.test(i.zipCode)?$(".zipCode_state").removeClass("state_error"):(o=!1,$(".zipCode_state").addClass("state_error")),i.receiveName&&""!=i.receiveName?$(".receiveName_state").removeClass("state_error"):(o=!1,$(".receiveName_state").addClass("state_error")),""!=i.receivePhone&&/^1(3|4|5|7|8)\d{9}$/g.test(i.receivePhone)?$(".receivePhone_state").removeClass("state_error"):(o=!1,$(".receivePhone_state").addClass("state_error")),o&&($.each(G,function(e,t){r.push(t.id)}),n?("---- 所在市 ----"===i.city&&(i.city=""),"---- 所在区 ----"===i.area&&(i.area=""),a.send("USER_ADDRESS_UPDATE",i).done(function(){$("body").css({overflow:"visible"}),e.alertInfo=null,$.each(t,function(t,r){r.id==n&&(e.addressList[t]=i)})})):("---- 所在市 ----"===i.city&&(i.city=""),"---- 所在区 ----"===i.area&&(i.area=""),a.send("USER_ADDRESS_CREATE",i).done(function(){$("body").css({overflow:"visible"}),e.alertInfo=null,a.send("USER_ADDRESS_QUERY",{alertInfo:null}).done(function(t){t&&t.success&&(e.select=null,e.addressList=t.obj||[],$.each(e.addressList,function(t,i){1==i.setDefault&&(e.select=i)}),e.select=e.select||e.addressList[0]||{},e.queryPostFee(),e.setTotalTax(),e.setTotalPostFee(),e.setTotalPrice())})})))},closeAlertAddress:function(){this.alertInfo=null,$("body").css({overflow:"auto"})},submitOrder:function(e){var t=e||window.event,i=$(t.currentTarget),o=n.platform.rule.crossOrder.maxPrice;n.platform.rule.normalOrder.minPrice;if(!i.hasClass("error_state")){var s=this,c=s.orders,d=$(s.$el),p=i.attr("typeId"),m=i.attr("supplierId"),f=window.location.href.split("#")[0],h=c.typeObj[p][m],g=d.find(".component-orderSure-detail-leavingMessage input").val()||"",y=s.select,v=s.select,b=i.attr("typeId"),O=window.open("about:blank"),w=0,j={receiveName:v.receiveName,receivePhone:v.receivePhone,receiveProvince:v.province,receiveCity:v.city,receiveArea:v.area,receiveAddress:v.address,receiveZipCode:v.zipCode};c.typeObj[p][m].submitState=!1,c.typeObj[p][m].submitText="订单提交中",a.send("USER_DETAIL_QUERY").done(function(e){if(e&&e.success){if($.isPlainObject(e.obj))if(0!==b&&"0"!==b||$.isPlainObject(e.obj.userDetail))if(0!==b&&"0"!==b||e.obj.userDetail.idNum){var t=[],n=$.extend({},j),s=[],v=0,P=d.find("li[payType].active").attr("payType")||1,T=3==P?"07":1==P?"NATIVE":5==P?"":"scanCode",I=!1,S=!1;if(n.payType=P,n.taxFee=h.taxFee,n.postFee=h.postFee,n.payment=(1*h.postFee+1*h.taxFee+1*h.supplierRealPrice).toFixed(2),n.customerIdNum=e.obj.userDetail.idNum,n.customerName=e.obj.userDetail.name,n.customerPhone=e.obj.phone,$.each(h.itemObj,function(e,i){if(i.ids&&t.push(i.ids),s.push({itemId:i.itemId,goodsId:i.goodsId,itemCode:i.itemCode,itemName:i.itemName,itemImg:i.itemImg,itemInfo:i.info,itemQuantity:i.quantity,itemPrice:i.price,actualPrice:i.realPrice,sku:i.sku,unit:i.unit}),!i.stock||i.stock<=0)return I=!0,S=i.goodsName,!1;w=i.tagFunId||0,v++}),I)return void K.refresh({title:"库存不足",content:"该订单"+S+"商品库存不足，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="提交订单"},confirmFun:function(){r.url.jumpPage(u,null,!0)}});var C={type:T,payType:P,orderFlag:b,expressType:0,orderSource:0,supplierId:m,orderDetail:n,orderGoodsList:s,createType:1===w?4:0,redirect:f,tagFun:w,remark:g,tdq:v},_=i.parent().prev().find("option:selected").val(),D=i.parent().prev().find("option:selected").attr("deductiblevalue"),E=function(){a.send("ORDER_USER_CREATE",C).done(function(e){if(1==P)if(e&&e.success){c.orderCount--,c.typeObj[p][m].submitState=!1,c.typeObj[p][m].submitText="已提交订单",window.localStorage.setItem("ordersInfo",JSON.stringify(c));var i=e.obj.urlCode;if(t.join(","))a.send("ORDER_SHOPPINGCART_DELETE",{ids:t.join(",")}).done(function(){if(i){O.focus(),O.location.href="/pay.html";var t={},r="";t.orderPrice=h.orderPrice,t.orderId=e.errorMsg,t.info=y.province+","+y.city+","+y.area+","+y.address+","+y.receiveName+",手机号码："+y.receivePhone,$.each(h.itemObj,function(e,i){r+=i.itemName+" * "+i.quantity,t.supplierName=i.supplierName}),t.name=r,t.url=i,t=JSON.stringify(t),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToYinLian"),
window.localStorage.setItem("sendToPay",t),K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})}else e.errorMsg?(O.focus(),O.close(),K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}})):(O.focus(),O.close(),z.content="当前二维码获取失败！")});else if(i){var r={},n="";r.orderPrice=h.orderPrice,r.orderId=e.errorMsg,r.info=y.province+","+y.city+","+y.area+","+y.address+","+y.receiveName+",手机号码："+y.receivePhone,$.each(h.itemObj,function(e,t){n+=t.itemName+" * "+t.quantity,r.supplierName=t.supplierName}),r.name=n,r.url=i,r=JSON.stringify(r),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToYinLian"),window.localStorage.setItem("sendToPay",r),O.focus(),O.location.href="/pay.html",K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})}else e.errorMsg,O.focus(),O.close(),K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}})}else{O.focus(),O.close(),e.errorMsg?K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}}):z.content="当前二维码获取失败！";var o={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:C.orderGoodsList,orderId:"订单未生成"};a.send("SET_DATA_LOGS",o),c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"}else if(2==P)if(e&&e.success)if(c.orderCount--,c.typeObj[p][m].submitState=!1,c.typeObj[p][m].submitText="已提交订单",window.localStorage.setItem("ordersInfo",JSON.stringify(c)),t.join(","))a.send("ORDER_SHOPPINGCART_DELETE",{ids:t.join(",")}).done(function(){var t="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",t),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href="/pay.html",K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})});else{var s="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",s),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href="/pay.html",K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})}else{O.focus(),O.close(),e.errorMsg?K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}}):z.content="生成订单失败！";var o={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:C.orderGoodsList,orderId:"订单未生成"};a.send("SET_DATA_LOGS",o),c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"}else if(3==P)if(e&&e.success)if(c.orderCount--,c.typeObj[p][m].submitState=!1,c.typeObj[p][m].submitText="已提交订单",window.localStorage.setItem("ordersInfo",JSON.stringify(c)),t.join(","))a.send("ORDER_SHOPPINGCART_DELETE",{ids:t.join(",")}).done(function(){var t="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",t),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href="/pay.html",K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})});else{var s="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",s),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href="/pay.html",K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})}else{O.focus(),O.close(),e.errorMsg?K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}}):z.content="生成订单失败！";var o={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:C.orderGoodsList,orderId:"订单未生成"};a.send("SET_DATA_LOGS",o),c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"}else if(5==P)if(e&&e.success)c.orderCount--,c.typeObj[p][m].submitState=!1,c.typeObj[p][m].submitText="已提交订单",window.localStorage.setItem("ordersInfo",JSON.stringify(c)),t.join(",")?a.send("ORDER_SHOPPINGCART_DELETE",{ids:t.join(",")}).done(function(){window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href=e.obj.url,K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}})}):(window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),O.focus(),O.location.href=e.obj.url,K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){c.orderCount<=0?(Vue.delete(c,"orderCount"),window.location.replace("/personal.html?childType=order")):(Vue.delete(c.typeObj[p],m),$.isEmptyObject(c.typeObj[p])&&Vue.delete(c.typeObj,p),$.isEmptyObject(c.typeObj)&&Vue.delete(c,"typeObj"))}}));else{O.focus(),O.close(),e.errorMsg?K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}}):z.content="生成订单失败！";var o={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:C.orderGoodsList,orderId:"订单未生成"};a.send("SET_DATA_LOGS",o),c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"}}).fail(function(e){O.focus(),O.close(),e.errorMsg?K.refresh({title:"温馨提示",content:e.errorMsg,DOMClick:!1,confirmFun:function(){}}):z.content="生成订单失败！";var t={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:C.orderGoodsList,orderId:"订单未生成"};a.send("SET_DATA_LOGS",t),c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"})};-1!=_&&(C.couponIds=_,C.orderDetail.payment-=D),0==b&&(C.orderDetail.payment>o?1==C.orderGoodsList.length&&1==C.orderGoodsList[0].itemQuantity?E():(O.focus(),O.close(),K.refresh({title:"订单金额受限",content:"根据海关相关规定，单笔跨境订单金额不得超过"+o+"元，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){c.typeObj[p][m].submitState=!0,c.typeObj[p][m].submitText="重新提交"},confirmFun:function(){r.url.jumpPage(u,null,!0)}})):E()),2==b&&(O.focus(),E())}else O.focus(),O.close(),K.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/personal.html?childType=userInfo&&jumpUrl="+l}});else O.focus(),O.close(),K.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,confirmBtn:!0,confirmFun:function(){window.location.href="/personal.html?childType=userInfo&&jumpUrl="+l}})}else window.location.href="/personal.html?childType=userInfo&form=Upper"})}},validation_province:function(e){var t=this,i=$(e.currentTarget);"---- 所在省 ----"===i.val()?i.addClass("state_error"):i.removeClass("state_error"),t.alertInfo.province=i.val()},validation_city:function(e){var t=this,i=$(e.currentTarget);i.find("option").length>1&&"---- 所在市 ----"===i.val()?i.addClass("state_error"):i.removeClass("state_error"),t.alertInfo.city=i.val()},validation_area:function(e){var t=this,i=$(e.currentTarget);i.find("option").length>1&&"---- 所在区 ----"===i.val()?i.addClass("state_error"):i.removeClass("state_error"),t.alertInfo.area=i.val()},validation_address:function(e){var t=this.alertInfo;t.address&&""!=t.address?$(e.currentTarget).removeClass("state_error"):$(e.currentTarget).addClass("state_error")},validation_zipCode:function(e){var t=this.alertInfo;""!=t.zipCode&&/[0-9]{1}(\d){5}/gi.test(t.zipCode)?$(e.currentTarget).removeClass("state_error"):$(e.currentTarget).addClass("state_error")},validation_receiveName:function(e){var t=this.alertInfo;t.receiveName&&""!=t.receiveName?$(e.currentTarget).removeClass("state_error"):$(e.currentTarget).addClass("state_error")},validation_receivePhone:function(e){var t=this.alertInfo;""!=t.receivePhone&&/^1(3|4|5|7|8)\d{9}$/g.test(t.receivePhone)?$(e.currentTarget).removeClass("state_error"):$(e.currentTarget).addClass("state_error")},returnInfoList:function(e){try{return JSON.parse(e)||[]}catch(e){return[]}},returnPostFee:function(e,t){return"运输(普通配送快递): ￥<span>"+t.toFixed(2)+"</span>"}},mounted:function(){var e=this;e.queryPostFee(),e.setTotalTax(),e.setTotalPostFee(),e.setTotalPrice(),$(".component-orderSure-detail-payType").on("click","li[payType]:not(.active)",function(){$(this).parents(".component-orderSure-detail-payType").find("li[payType]").removeClass("active"),$(this).addClass("active")}),$(".component-orderSure-address-list").on("click",".address-item:not(.active)",function(){var t=$(this).index(),i=e.addressList;e.select=i[t],$(this).addClass("active default").siblings(".address-item").removeClass("active default"),e.queryPostFee(),e.setTotalTax(),e.setTotalPostFee(),e.setTotalPrice()}),$(".component-orderSure-address-list").on("click",".address-item i",function(){var t=null,i=1*$(this).parents(".address-item").attr("addressId"),r=e.addressList,n=null;return $.each(r,function(e,r){r.id==i&&(n=r,t=e,n.setDefault=1)}),!$(this).hasClass("default")&&(n&&a.send("USER_ADDRESS_UPDATE",n).done(function(){$.each(r,function(i,r){e.addressList[i].setDefault=t===i?1:0})}),!1)})}})}if(/^pay-1-\d+$/.test(t)){var Z=window.localStorage.getItem("sendToPay"),ee=window.localStorage.getItem("sendToAliPay"),te=window.localStorage.getItem("sendToYinLian");if(window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),!Z)return ee?(ee=JSON.parse(ee),void $("body").html(ee.htmlStr)):te?(te=JSON.parse(te),void $("body").html(te.htmlStr)):void window.history.go(-1);Z=JSON.parse(Z),e[t]=new Vue({el:i,data:{sendToPay:Z},beforeCreate:function(){},methods:{returnSupplierName:function(e){var t="";switch(e){case"天天仓":t="保税TT仓";break;case"粮油仓":t="保税LY仓";break;case"行云仓":t="保税XY仓";break;case"富邦仓":t="保税FB仓";break;default:t=e}return t},doOrderDetail:function(e){var t=$(e.currentTarget),i=t.attr("status");"hide"===i?($(".showDetail").stop(),$(".showDetail").slideDown(300),t.attr("status","show"),t.find("i").attr("class","fa fa-fw fa-angle-up")):"show"===i&&($(".showDetail").stop(),$(".showDetail").slideUp(300),t.attr("status","hide"),t.find("i").attr("class","fa fa-fw fa-angle-down"))}},mounted:function(){var e=this;if(!$.isEmptyObject(e.sendToPay)){var t=e.sendToPay.url;$(".qrcodeImg").qrcode({width:280,height:280,correctLevel:0,text:t,render:"canvas"})}}})}if(/^personal-1-\d+$/.test(t)){var ie=[],K=e["message-1-1"],z=e["alertDefault-1-1"];"order"===j?(H=d?["USER_DETAIL_QUERY","ORDER_USER_STATUS_COUNT","ORDER_USER_QUERY"]:[],ie=[{},{},{numPerPage:5,currentPage:1}]):"userInfo"===j?(H=d?["USER_DETAIL_QUERY","ORDER_USER_STATUS_COUNT","USER_DETAIL_QUERY"]:[],ie=[{},{},{}]):"address"===j?(H=d?["USER_DETAIL_QUERY","ORDER_USER_STATUS_COUNT","USER_ADDRESS_QUERY"]:[],ie=[{},{},{}]):"help"===j?(H=d?["USER_DETAIL_QUERY","ORDER_USER_STATUS_COUNT"]:[],ie=[{},{}]):"change"===j&&(H=d?["USER_DETAIL_QUERY","ORDER_USER_STATUS_COUNT"]:[],ie=[{},{}]),a.send(H,ie,!0).done(function(o){var s=0,c=0,m=0,f=0,h=o.USER_DETAIL_QUERY||{},g=o.ORDER_USER_STATUS_COUNT||[],y=o.USER_ADDRESS_QUERY||[],b=o.ORDER_USER_QUERY||{};$.each(g,function(e,t){0===t.status&&(s+=t.total),(t.status>0&&t.status<6||11===t.status||12===t.status)&&(c+=t.total),6===t.status&&(m+=t.total),7===t.status&&(f+=t.total)}),e[t]=new Vue({el:i,data:{isHide:!0,form:P,status:Y,isLogin:d,pathUrl:l,jumpUrl:u,redirect:p,childId:w,childType:j,siteInfo:n.siteInfo,needPayCount:s,needDeliverCount:c,needReceiptCount:m,finishedCount:f,showName:function(){return h.userDetail&&h.userDetail.nickName?h.userDetail.nickName:h.userDetail&&h.userDetail.name?h.userDetail.name:h.phone}(),account:h&&h.phone||"",request:{userInfo:$.extend(!0,{},h,{userDetail:{}}),address:{id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!1},change:{account:h.phone||"",password:"",validation:"",confirmPassword:""},order:{numPerPage:5,currentPage:1,statusArr:void 0,status:void 0,orderId:void 0}},changeAccountState:"",changeValidationState:"",changePasswordState:"",changeConfirmPasswordState:"",changeTimerVal:0,addressList:y,province_state:"",city_state:"",area_state:"",address_state:"",zipCode_state:"",receiveName_state:"",receivePhone_state:"",selectHeadImg:!1,detailExist:h.id&&h.userDetail,editing:!0,userInfoNickNameState:"",userInfoRealNameState:"",userInfoIdNumState:"",userInfoPhoneState:"",userInfoLocationState:"",pagination:b.pagination||{},orderCode:"",btnStatus:"0",orderList:b.orderList||[]},computed:{getFilterText:function(){return"4"===this.btnStatus?"已完成":"3"===this.btnStatus?"待收货":"2"===this.btnStatus?"待发货":"1"===this.btnStatus?"待付款":"全部"},paginationPageList:function(){var e=[],t=this.pagination||{},i=1*t.currentPage,r=1*t.totalPages;if(r<13)for(var n=0;n<r;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};else if(i<7){for(var n=0;n<8;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[8]={page:null,jumpBtn:null,ellipsis:!0};for(var n=9,a=1;a>-1;n++,a--)e[n]={page:r-a,jumpBtn:r-a,active:r-a==i?"active":null,ellipsis:!1}}else if(i>r-6){for(var n=0;n<2;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[2]={page:null,jumpBtn:null,ellipsis:!0};for(var n=3,a=r-8;a<r;n++,a++)e[n]={page:a+1,jumpBtn:a+1,active:a+1==i?"active":null,ellipsis:!1}}else{for(var n=0;n<2;n++)e[n]={page:n+1,jumpBtn:n+1,active:n+1==i?"active":null,ellipsis:!1};e[2]={page:null,jumpBtn:null,ellipsis:!0};for(var n=3,a=i-3;a<i+2;n++,a++)e[n]={page:a+1,jumpBtn:a+1,active:a+1==i?"active":null,ellipsis:!1};e[8]={page:null,jumpBtn:null,ellipsis:!0};for(var n=9,a=1;a>-1;n++,a--)e[n]={page:r-a,jumpBtn:r-a,active:r-a==i?"active":null,ellipsis:!1}}return e}},methods:{leftItemClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=$(t.$el);n.find(".index-content-msg").slideLeftHide(1e3),n.find(".personal-content-left-item ul li").removeClass("active"),r.addClass("active")},leftItemAClick:function(e){var t=this,i=e||window.event,n=$(i.currentTarget),o=$(window).scrollTop(),s=n.attr("childId")||"",c=n.attr("childType")||"";o&&$(window).scrollTop(-o),"help"!==c||s===t.childId&&c===t.childType||(t.childId=s,t.childType=c,r.url.setParam({childType:c,childId:s},"cover"),$("html,body").animate({scrollTop:0})),"change"===c&&c!==t.childType&&(d?(t.childId=s,t.childType=c,t.changeAccountState="",t.changeValidationState="",t.changePasswordState="",t.changeConfirmPasswordState="",t.request.change={password:"",validation:"",confirmPassword:"",account:t.account,platUserType:v,reqHeader:{authentication:null}},r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),$("html,body").animate({scrollTop:0})):K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,confirmFun:function(){r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),window.location.href="/login.html?isBack=1"}})),"address"===c&&c!==t.childType&&(d?(t.addressList=[],t.province_state="",t.city_state="",t.area_state="",t.address_state="",t.zipCode_state="",t.receiveName_state="",t.receivePhone_state="",t.request.address={id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!1},a.send(["USER_ADDRESS_QUERY"],{}).done(function(e){e&&e.success&&(t.childId=s,t.childType=c,t.addressList=e.obj||[],r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),$("html,body").animate({scrollTop:0}))})):K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,confirmFun:function(){r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),window.location.href="/login.html?isBack=1"}})),"userInfo"===c&&c!==t.childType&&(d?(t.childId=s,t.childType=c,r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),$("html,body").animate({scrollTop:0})):K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,confirmFun:function(){r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),window.location.href="/login.html?isBack=1"}})),"order"===c&&c!==t.childType&&(d?(t.pagination={},t.orderCode="",t.btnStatus="0",t.orderList=[],t.request.order={numPerPage:5,currentPage:1,statusArr:void 0,status:void 0,orderId:void 0},a.send(["ORDER_USER_QUERY"],t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.childId=s,t.childType=c,t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),$("html,body").animate({scrollTop:0})}})):K.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,confirmFun:function(){r.url.delParam(["childId"],"cover"),r.url.setParam({childType:c},"cover"),window.location.href="/login.html?isBack=1"}}))},changeTimer:function(e){var t=this;(t.changeTimerVal=e)&&setTimeout(function(){t.changeTimerVal--,t.changeTimer(t.changeTimerVal)},1e3)},checkChangeVal:function(e){var t=this,i=!0;return $.each(e,function(e,r){if("phone"===r&&(i=t.changeAccountState=!!t.request.change.account&&""!==(""+t.request.change.account).trim()&&/^1(3|4|5|7|8)\d{9}$/gi.test(t.request.change.account)),"validation"===r&&(i=t.changeValidationState=!!t.request.change.validation&&""!==(""+t.request.change.validation).trim()&&/^.{6,18}$/gi.test(t.request.change.validation)),"password"===r&&(i=t.changePasswordState=!!t.request.change.password&&""!==(""+t.request.change.password).trim()&&/^.{6,12}$/gi.test(t.request.change.password)),"confirmPassword"===r&&(i=t.changeConfirmPasswordState=!!t.request.change.confirmPassword&&t.request.change.password===t.request.change.confirmPassword&&""!==(""+t.request.change.confirmPassword).trim()&&/^.{6,12}$/gi.test(t.request.change.password)),!i)return!1}),i},changeFocus:function(e){"phone"===e&&(this.changeAccountState=""),"validation"===e&&(this.changeValidationState=""),"password"===e&&(this.changePasswordState=""),"confirmPassword"===e&&(this.changeConfirmPasswordState="")},changeBlur:function(e){this.checkChangeVal([e])},getValidationClick:function(){var e=this;/^1(3|4|5|7|8)\d{9}$/gi.test(e.request.change.account)&&a.send("THIRD_PHONE",{phone:e.request.change.account}).done(function(t){t&&t.success?e.changeTimer(60):z.refresh({content:"发送频繁，请稍后再试！"})}).fail(function(){z.refresh({content:"发送手机验证码失败！"})})},changeSubmitClick:function(){var e=this;if(e.checkChangeVal(["phone","validation","password","confirmPassword"])){window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId");var t=e.request.change.validation,i=e.request.change.account,r=e.request.change.password,n=n,o={authentication:null};a.send("AUTH_PWD_CHANGE",{userName:i,password:r,code:t,platUserType:n,reqHeader:o}).done(function(e){e&&e.success&&e.obj?(setTimeout(function(){window.location.href="/login.html"},1500),z.refresh({content:"修改密码成功!"})):z.refresh({content:e.errorMsg})}).fail(function(){z.refresh({content:"修改密码失败!"})})}},checkAddressVal:function(e){var t=this,i=!0;return $.each(e,function(e,r){if("province"===r&&(i=t.province_state=!!t.request.address.province&&""!==(""+t.request.address.province).trim()&&"---- 所在省 ----"!==t.request.address.province),"city"===r&&(i=t.city_state=1===$(t.$el).find(".picker-city option").length||!!t.request.address.city&&""!==(""+t.request.address.city).trim()&&"---- 所在市 ----"!==t.request.address.city),"area"===r&&(i=t.area_state=1===$(t.$el).find(".picker-area option").length||!!t.request.address.area&&""!==(""+t.request.address.area).trim()&&"---- 所在区 ----"!==t.request.address.area),"address"===r&&(i=t.address_state=!!t.request.address.address&&""!==(""+t.request.address.address).trim()),"zipCode"===r&&(i=t.zipCode_state=!!t.request.address.zipCode&&""!==(""+t.request.address.zipCode).trim()&&/^[0-9]{1}(\d){5}$/i.test(t.request.address.zipCode)),"receiveName"===r&&(i=t.receiveName_state=!!t.request.address.receiveName&&""!==(""+t.request.address.receiveName).trim()),"receivePhone"===r&&(i=t.receivePhone_state=!!t.request.address.receivePhone&&""!==(""+t.request.address.receivePhone).trim()&&/^1(3|4|5|7|8)\d{9}$/i.test(t.request.address.receivePhone)),!i)return!1}),i},addressFocus:function(e){"province"===e&&(this.province_state=""),"city"===e&&(this.city_state=""),"area"===e&&(this.area_state=""),"address"===e&&(this.address_state=""),"zipCode"===e&&(this.zipCode_state=""),"receiveName"===e&&(this.receiveName_state=""),"receivePhone"===e&&(this.receivePhone_state="")},addressBlur:function(e){this.checkAddressVal([e])},pickerChange:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=$(i.currentTarget).attr("type");t.request.address[n]=r.val(),this.checkAddressVal([n])},addressItemDel:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents("tr").attr("addressId");K.refresh({title:"删除收货地址",content:"是否删除该收货地址",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n&&a.send("USER_ADDRESS_DELETE",{id:n}).done(function(e){e&&e.success&&a.send("USER_ADDRESS_QUERY").done(function(e){e&&e.success&&(t.addressList=e.obj)})})}})},addressDefaultClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.parents("tr").attr("addressId");n&&a.send("USER_ADDRESS_UPDATE",{id:n,idsetDefault:1}).done(function(e){e&&e.success&&$.each(t.addressList,function(e,t){n==t.id?t.setDefault=1:t.setDefault=0})})},addressEditClick:function(e){var t=this,i={},r=e||window.event,n=$(r.currentTarget),a=n.parents("tr").attr("addressId");$.each(t.addressList,function(e,t){if(a==t.id)return i=t,!1}),this.request.address={id:i.id,province:i.province,city:i.city,area:i.area,address:i.address,zipCode:i.zipCode,receiveName:i.receiveName,receivePhone:i.receivePhone,setDefault:i.setDefault,show:!0},this.province_state="",this.city_state="",this.area_state="",this.address_state="",this.zipCode_state="",this.receiveName_state="",this.receivePhone_state="",this.$nextTick(function(){$(this.$el).find(".picker-country").picker({name_province:i.province,name_city:i.city,name_area:i.area}),$(this.$el).find(".address-show-info").css("display","none"),$(this.$el).find(".address-show-info").slideDown()})},addressAddClick:function(){this.request.address={id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!0},this.province_state="",this.city_state="",this.area_state="",this.address_state="",this.zipCode_state="",this.receiveName_state="",this.receivePhone_state="",this.$nextTick(function(){$(this.$el).find(".picker-country").picker({name_province:"---- 所在省 ----",name_city:"---- 所在市 ----",name_area:"---- 所在区 ----"}),$(this.$el).find(".address-show-info").css("display","none"),$(this.$el).find(".address-show-info").slideDown()})},addressSubmit:function(){var e=this;e.request.address.setDefault=e.request.address.setDefault?1:0,"---- 所在市 ----"===e.request.address.city&&(e.request.address.city=""),"---- 所在区 ----"===e.request.address.area&&(e.request.address.area=""),e.checkAddressVal(["province","city","area","address","zipCode","receiveName","receivePhone"])&&(e.request.address.id?a.send("USER_ADDRESS_UPDATE",e.request.address).done(function(t){t&&t.success?($(e.$el).find(".address-show-info").slideUp(function(){e.request.address={id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!1},this.province_state="",this.city_state="",this.area_state="",this.address_state="",this.zipCode_state="",this.receiveName_state="",this.receivePhone_state=""}),a.send(["USER_ADDRESS_QUERY"],{}).done(function(t){t&&t.success&&(e.addressList=t.obj||[],$("html,body").animate({scrollTop:90}))})):t&&(z.content=t&&t.errMsg||"提交失败")}):a.send("USER_ADDRESS_CREATE",e.request.address).done(function(t){t&&t.success?($(e.$el).find(".address-show-info").slideUp(function(){e.request.address={id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!1},this.province_state="",this.city_state="",this.area_state="",this.address_state="",this.zipCode_state="",this.receiveName_state="",this.receivePhone_state=""}),a.send(["USER_ADDRESS_QUERY"],{}).done(function(t){t&&t.success&&(e.addressList=t.obj||[],$("html,body").animate({scrollTop:90}))})):t&&(z.content=t&&t.errMsg||"提交失败")}))},addressCancel:function(){var e=this;$(e.$el).find(".address-show-info").slideUp(function(){e.request.address={id:null,province:"",city:"",area:"",address:"",zipCode:"",receiveName:"",receivePhone:"",setDefault:"",show:!1},this.province_state="",this.city_state="",this.area_state="",this.address_state="",this.zipCode_state="",this.receiveName_state="",this.receivePhone_state=""})},checkUserInfoVal:function(e){var t=this,i=!0;return $.each(e,function(e,n){if("nickName"===n&&(i=t.userInfoNickNameState=!!t.request.userInfo.userDetail.nickName&&""!==(""+t.request.userInfo.userDetail.nickName).trim()),"realname"===n&&(i=t.userInfoRealNameState=!!t.request.userInfo.userDetail.name&&""!==(""+t.request.userInfo.userDetail.name).trim()),"idNum"===n&&(i=t.userInfoIdNumState=!!t.request.userInfo.userDetail.idNum&&""!==(""+t.request.userInfo.userDetail.idNum).trim()&&r.check.identity(t.request.userInfo.userDetail.idNum)),"phone"===n&&(i=t.userInfoPhoneState=!!t.request.userInfo.phone&&""!==(""+t.request.userInfo.phone).trim()&&/^1(3|4|5|7|8)\d{9}$/i.test(t.request.userInfo.phone)),"location"===n&&(i=t.userInfoLocationState=!!t.request.userInfo.userDetail.location&&""!==(""+t.request.userInfo.userDetail.location).trim()),!i)return!1}),i},userInfoFocus:function(e){"nickName"===e&&(this.userInfoNickNameState=""),"realName"===e&&(this.userInfoRealNameState=""),"idNum"===e&&(this.userInfoIdNumState=""),"phone"===e&&(this.userInfoPhoneState=""),"location"===e&&(this.userInfoLocationState="")},userInfoBlur:function(e){this.checkUserInfoVal([e])},userInfoChange:function(e){this.request.userInfo.userDetail.sex=e||0},userInfoEdit:function(){this.editing=!this.editing},userInfoSubmit:function(){var e=this,t={id:e.request.userInfo.userDetail.id,idNum:e.request.userInfo.userDetail.idNum,location:e.request.userInfo.userDetail.location,name:e.request.userInfo.userDetail.name,nickName:e.request.userInfo.userDetail.nickName,phone:e.request.userInfo.phone,sex:e.request.userInfo.userDetail.sex};e.checkUserInfoVal(["nickName","realname","idNum","phone","location"])&&(e.detailExist?a.send("USER_DETAIL_UPDATE",t).done(function(e){e&&e.success&&(z.refresh({content:"保存成功"}),""!==u&&r.url.jumpPage(u,null,!0))}):a.send("USER_DETAIL_CREATE",t).done(function(e){e&&e.success&&(z.refresh({content:"保存成功"}),""!==u&&r.url.jumpPage(u,null,!0))}))},getStatusClass:function(e){return 0===e?"need_pay":1===e?"need_deliver":2===e?"need_deliver":3===e?"need_deliver":4===e?"need_deliver":5===e?"need_deliver":11===e?"need_deliver":12===e?"need_deliver":99===e?"need_deliver":6===e?"need_take":7===e?"need_finish":8===e?"":9===e?"":21===e?"":void 0},getStatusDes:function(e,t){return 0===t?4!==e?"订单付款成功后，我们将在两个工作日之内尽快给您发货！":"预售产品我们会在付款成功后给您安排发货，请您耐心等待！":1===t||11===t||12===t||2===t||3===t||4===t||5===t?4!==e?"付款成功，我们将在两个工作日之内尽快给您发货！":"付款成功, 预售产品我们会尽快给您安排发货，请您耐心等待！":void 0},getLiBackground:function(e,t){return e?"background: url('"+e+"') 8px 5px / calc(100% - 16px) calc(100% - 10px) no-repeat":"background: url('"+t+"') 8px 5px / calc(100% - 16px) calc(100% - 10px) no-repeat"},getImgBackground:function(e){var t="";switch(e){case 0:t="background: url('/images/platform/tag/icon_cross.png') 0% 0% / 60px 60px no-repeat";break;case 2:t="background: url('/images/platform/tag/icon_normal.png') 0% 0% / 60px 60px no-repeat"}return t},getStatusText:function(e,t,i){return 0===e?"待付款":1===e?"已支付":11===e?"已支付":12===e?"已支付":2===e?"支付单报关":3===e?"已发仓库":4===e?"已报海关":5===e?"单证放行":6===e?"发货中":7===e?"交易完成":8===e?"已退单":9===e?"交易关闭":21===e?"退款中":99===e?(t||[{}])[0].status:void 0},orderSearchEnter:function(){var e=this;e.request.order.numPerPage=5,e.request.order.currentPage=1,a.send("ORDER_USER_QUERY",e.request.order).done(function(t){if(t&&t.success){var i=t.obj||{};e.orderList=i&&i.orderList||{},e.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}})},filterStateShow:function(e){var t=e||window.event,i=$(t.currentTarget);i.hasClass("active")?(i.removeClass("active"),i.next().slideUp(400)):(i.addClass("active"),i.next().slideDown(400))},filterStateSelect:function(e){var t=e||window.event,i=$(t.currentTarget),r=i.attr("status")||"";i.parent().prev().removeClass("active"),i.parent().slideUp(400),this.btnStatus=r},ergodicInfoList:function(e){try{return JSON.parse(e)||[]}catch(e){return[]}},toPayClick:function(e,t,i){var r=this,n="yl"===e,o="zfb"===e,s="yb"===e,c=n?3:o?2:s?5:1,d=3===c?"07":1===c?"NATIVE":5===c?"":"scanCode",l={orderId:t,orderPrice:i},u=window.open("about:blank");a.send("PAY_ORDER",{payType:c,type:d,orderId:t,redirect:p}).done(function(e){if(e&&e.success)if(1===c){var t=e.obj.urlCode;K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){r.request.order.numPerPage=5,r.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],r.request.order).done(function(e){if(e&&e.success){var t=e.obj||{};r.orderList=t&&t.orderList||{},r.pagination=t&&t.pagination||{},$("html,body").animate({scrollTop:0})}})}}),l.url=t,l=JSON.stringify(l),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToYinLian"),window.localStorage.setItem("sendToPay",l),u.focus(),u.location="/pay.html"}else if(2===c){var i="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",i),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToPay"),K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){r.request.order.numPerPage=5,r.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],r.request.order).done(function(e){if(e&&e.success){var t=e.obj||{};r.orderList=t&&t.orderList||{},r.pagination=t&&t.pagination||{},$("html,body").animate({scrollTop:0})}})}}),u.focus(),u.location="/pay.html"}else if(3===c){var i="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",i),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){r.request.order.numPerPage=5,r.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],r.request.order).done(function(e){if(e&&e.success){
var t=e.obj||{};r.orderList=t&&t.orderList||{},r.pagination=t&&t.pagination||{},$("html,body").animate({scrollTop:0})}})}}),u.focus(),u.location="/pay.html"}else 5===c&&(window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay"),window.localStorage.removeItem("sendToPay"),K.refresh({title:"温馨提示",content:"支付申请已提交，请确认！",DOMClick:!1,confirmFun:function(){r.request.order.numPerPage=5,r.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],r.request.order).done(function(e){if(e&&e.success){var t=e.obj||{};r.orderList=t&&t.orderList||{},r.pagination=t&&t.pagination||{},$("html,body").animate({scrollTop:0})}})}}),u.focus(),u.location=e.obj);else e&&e.errorMsg?(z.refresh({content:e.errorMsg}),u.focus(),u.close()):(z.refresh({content:"获取支付二维码失败！"}),u.focus(),u.close())}).fail(function(e){e&&e.errorMsg?(z.refresh({content:e.errorMsg}),u.focus(),u.close()):(z.refresh({content:"获取支付二维码失败！"}),u.focus(),u.close())})},refundClick:function(e){var t=this;t.siteInfo.qq?window.open("http://wpa.qq.com/msgrd?v=3&uin="+t.siteInfo.qq+"&site=qq&menu=yes"):z.refresh({content:"暂时无法联系客服!"})},delOrderClick:function(e){var t=this;K.refresh({title:"删除订单",content:"确认是否删除该订单",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){a.send("ORDER_USER_DELETE",{orderId:e}).done(function(e){e&&e.success&&(t.request.order.numPerPage=5,t.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}}))})}})},closeOrderClick:function(e){var t=this;K.refresh({title:"关闭订单",content:"确认是否关闭该订单",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){a.send("ORDER_USER_CLOSE",{orderId:e}).done(function(e){e&&e.success&&(t.request.order.numPerPage=5,t.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}}))})}})},confirmDeliveryClick:function(e){var t=this;K.refresh({title:"确认收货",content:"请确认，是否已收货？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){a.send("ORDER_USER_CONFIRM",{orderId:e}).done(function(e){e&&e.success&&(t.request.order.numPerPage=5,t.request.order.currentPage=1,a.send(["ORDER_USER_QUERY"],t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}}))})}})},paginationInput:function(e){var t=this,i=/\D/g,r=e||window.event,n=$(r.currentTarget),a=n.val()&&n.val().trim()||1,o=1*t.pagination.totalPages;n.val(a.replace(i,"").trim()),1*n.val()>o&&n.val(o||1)},paginationBlur:function(e){var t=e||window.event,i=$(t.currentTarget);i.val().trim()||i.val(1)},paginationBtn:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=1*t.pagination.totalPages,o=1*t.pagination.currentPage,s=r.parents(".pagination_ul");s.hasClass("lose")||s.hasClass("active")||(r.hasClass("searchBtn")?o=r.parent().prev().find("input").val():r.hasClass("prevBtn")?o=o>1?1*o-1:1:r.hasClass("nextBtn")?o=o<n?1*o+1:n:(o=r.text(),o=1*o>=1?1*o:1,o=1*o<=n?1*o:n),t.request.order.numPerPage=5,t.request.order.currentPage=o,a.send("ORDER_USER_QUERY",t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}}))}},watch:{btnStatus:function(e){var t=this;"0"===e&&(t.request.order.status=void 0,t.request.order.statusArr=void 0),"1"===e&&(t.request.order.status=0,t.request.order.statusArr=void 0),"2"===e&&(t.request.order.status=0,t.request.order.statusArr="1,2,3,4,5,11,12"),"3"===e&&(t.request.order.status=6,t.request.order.statusArr=void 0),"4"===e&&(t.request.order.status=7,t.request.order.statusArr=void 0),t.request.order.numPerPage=5,t.request.order.currentPage=1,a.send("ORDER_USER_QUERY",t.request.order).done(function(e){if(e&&e.success){var i=e.obj||{};t.orderList=i&&i.orderList||{},t.pagination=i&&i.pagination||{},$("html,body").animate({scrollTop:0})}})},orderCode:function(e){this.request.order.orderId=e&&e.trim()?e.trim():void 0}},beforeCreate:function(){},mounted:function(){var e=this;$(document).on("click",function(t){var i=$(e.$el),r=t||window.event,n=$(r.target||r.srcElement),a=n.parents(".filterState");i.find("p.filterState.active").not(n).not(a).click()}),$.fn.slideLeftHide=function(e,t){this.animate({width:"hide",paddingLeft:"hide",paddingRight:"hide",marginLeft:"hide",marginRight:"hide"},e,t)},$.fn.slideLeftShow=function(e,t){this.animate({width:"show",paddingLeft:"show",paddingRight:"show",marginLeft:"show",marginRight:"show"},e,t)}}})})}if(/^shop-show-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{showType:0},methods:{chooseTypeClick:function(e){var t=this,i=e||window.event,r=$(i.currentTarget),n=r.attr("data-type");t.showType=n,$(".item-content").removeClass("active"),0==n?$(".area-content").addClass("active"):1==n?$(".partner-content").addClass("active"):2==n&&$(".shop-content").addClass("active")}}})),/^amount-access-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^advertising-header-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^bargainRule-1-\d+$/.test(t)){var z=e["alertDefault-1-1"],re="https://static.cncoopbuy.com:8080/wechat/appletcode/"+(s||2)+"/"+(s||2)+".png";e[t]=new Vue({el:i,data:{miniPath:re},methods:{},created:function(){},mounted:function(){}})}/^activity-2-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^activity-3-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^themeBanner-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{},mounted:function(){$("#body-center").css("background","#f6f6f6"),$("#body-center").css("margin-bottom","0"),$("#body-center").css("padding-bottom","30px")}})),/^themeNavInlet-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^themeNavInlet-2-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^themeFloor-1-\d+$/.test(t)&&(e[t]=new Vue({el:i,data:{}})),/^themeSideFixed-1-\d+$/.test(t)&&($("[id^='themeFloor-1-']").each(function(){var e="#"+$(this).attr("id"),t=$(this).find(".themeFloor-title").text();G.push({name:t,id:e})}),e[t]=new Vue({el:i,data:{list:G,active_offset:0,position_offset:108,isShow:!1},methods:{setElementCSS:function(e){var t=$("body").width(),i=window.innerHeight,r=e.height(),n=(t-1340)/2,a=(i-r)/2;a=a>150?a:150,this.active_offset=a,t>=1300?e.css({display:"block",position:"fixed",top:a+"px",left:n+"px"}):e.css({display:"none"})}},mounted:function(){var e=this,t=$(".themeFloor-1-content"),i=$(".themeFloor-1-content")[0],r=$(".themeFloor-1-content")[t.length-1],n=$(i).innerHeight(),a=$(i).offset().top-100,o=$(r).offset().top+n-100;e.setElementCSS($(e.$el)),window.onresize=function(){e.setElementCSS($(e.$el))},$("body").scrollMonitor({active_offset:e.active_offset,position_offset:e.position_offset}),$(window).scroll(function(){var t=$(window).scrollTop();e.isShow=t>=a&&t<=o})}}))},window.app.getModule=function(t){return"string"==typeof t&&t.trim()?e[t]:e}}();