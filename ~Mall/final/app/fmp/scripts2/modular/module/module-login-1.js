define(["config.page.render"],function(e){"use strict";var o=window.capi.get();return e.extend({tags:{global:"<component-login-1></component-login-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",password:""}},response:{global:{}},sendArr:[],reload:!1,".component-login-account #account blur":function(e){var o=this,n=$(e),r=o.modules.message,t=o.renderData.global.request.attr();o.jsUtil.check.phone(t.account)&&o.jsUtil.weChat.browser()&&o.sendRequest("AUTH_CHECK",{userName:t.account,phone:t.account}).done(function(e){e&&!0===e.success&&0==e.obj?(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号尚未注册！"}),n.addClass("state_error")):n.removeClass("state_error")}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),n.removeClass("state_error")})},".component-login-loginBtn:not(.state_error) touchend":function(){var e=this,n=e.modules.message,r=o.jsData.userInfo.shopId||"",t=e.renderData.global.request.attr(),a=e.renderData.global.config.jumpUrl;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("welfareVip"),e.jsUtil.weChat.browser()?e.sendRequest("AUTH_LOGIN",{phone:t.account,password:t.password}).done(function(t){if(t&&t.success){var c=o.jsData.location.hostUrl,s=c+"/wechat-transfer.html",l='"Bearer "'+t.obj.token,i=t.obj.userCenterId,d=!1+"，，"+a+"，"+r+"，"+i+"，"+l+"，";e.sendRequest("THIRD_WECHAT",{snsapiBase:!1,redirectUrl:s+"?info="+d}).done(function(e){"string"==typeof e&&(window.location.href=e)})}else t.errorMsg?n.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):n.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})}).fail(function(){n.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})}):n.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-login-third .img_weChat touchend":function(){var e=this,n=e.modules.message,r=e.config.global.jumpUrl,t=o.jsData.location.hostUrl,a=t+"/wechat-transfer.html",c=!0+"，，"+r;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("welfareVip"),e.jsUtil.weChat.browser()?e.sendRequest("THIRD_WECHAT",{snsapiBase:!0,redirectUrl:a+"?info="+c}).done(function(e){"string"==typeof e&&(window.location.href=e)}):n.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})});