define(["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-apply-1></component-apply-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{userName:"",account:"",validation:"",promotion:"",password:"",confirmPassword:"",inviter:"暂无邀请人"}},sendArr:[],reload:!1,".component-apply-validation .getValidation touchend":function(e){var n=this,t=$(e),o=n.element,r=n.modules.message,a=t.parents(".component-apply-validation");o.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.config.attr();!o.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.phone)&&n.sendRequest("THIRD_PHONE",{phone:e.phone}).done(function(e){if(e&&e.success){var n=60,o=function(e){n>0?(n--,a.find(".doing .val").text(n),setTimeout(function(){o(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),o(t)}else r.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-apply-submitBtn:not(.state_error) touchend":function(e){var n=this,t=n.element,o=n.modules.message,r=n.renderData.global.config.attr(),a=n.renderData.global.request.attr(),i=!t.find("#account").hasClass("state_error");n.jsUtil.weChat.browser()?setTimeout(function(){var e=r.shopId&&r.shopId.trim(),t=a.validation&&a.validation.trim();i&&e&&t&&n.jsUtil.check(r.phone)&&n.sendRequest("USER_PUSHUSER_CREATE",{phone:r.phone,name:a.userName,specialtyChannel:a.promotion,inviter:a.inviter,code:a.validation,gradeId:r.shopId,type:0}).done(function(e){e&&e.success?window.location.href="/personal-center.html":e&&1==e.obj?o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"验证码失效，请重试！"}):e.errorMsg?o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e.errorMsg}):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"推手申请失败！"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"推手申请失败！"})})},200):o.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})});