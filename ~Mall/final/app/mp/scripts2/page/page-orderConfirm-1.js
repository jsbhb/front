define("config.page.event",[],function(){"use strict";var e=window.capi.get(),n=e.jsData.location.redirect,t=e.jsData.userInfo.centerId;$(document).on("touchend","[href*='void(0)'],[href='#'],[href='']",function(){$(this).removeAttr("href")}),t&&e.jsUtil.weChat.browser()&&$.when(e.jsModel.send("THIRD_WECHAT_CONFIG",{url:n})).done(function(e){wx.config({debug:!1,appId:e.obj.appid,nonceStr:e.obj.nonceStr,timestamp:e.obj.timestamp,signature:e.obj.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","scanQRCode","hideMenuItems"]}),wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:qq","menuItem:share:QZone","menuItem:share:weiboApp","menuItem:share:facebook"]})})}),function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0f46df470fc4b1325e2c2d6c57dc8604";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()}),define("text!modular/template/template-header-1.mustache",[],function(){return'<div class="component-header-content">\r\n    <span class="component-header-left">\r\n        {{#region.config.text_login}}\r\n            <a href="javascript:void(0)" class="btn text text_login">返回登录</a>\r\n        {{/region.config.text_login}}\r\n\r\n        {{#region.config.icon_back}}\r\n            <a href="javascript:void(0)" class="btn icon icon_back"></a>\r\n        {{/region.config.icon_back}}\r\n\r\n        {{#region.config.icon_home}}\r\n            <a href="javascript:void(0)" class="btn icon icon_home"></a>\r\n        {{/region.config.icon_home}}\r\n\r\n        {{#region.config.icon_scan}}\r\n            <a href="javascript:void(0)" class="btn icon icon_scan"></a>\r\n        {{/region.config.icon_scan}}\r\n    </span>\r\n\r\n\r\n    {{#if region.config.title_shop}}\r\n        <div class="component-header-title title_shop">\r\n            <div class="shopImg">\r\n                <img src="{{{region.config.shopInfo.headImg}}}" alt="{{region.config.shopInfo.name}}">\r\n            </div>\r\n            <div class="shopText">\r\n                <span>{{region.config.shopInfo.name}}</span>\r\n                <span>{{region.config.shopInfo.description}}</span>\r\n            </div>\r\n        </div>\r\n    {{else}}\r\n        {{#if region.config.title_text}}\r\n            <span class="component-header-title title_text">{{region.config.title_text}}</span>\r\n        {{/if}}\r\n    {{/if}}\r\n\r\n    {{#region.config.input}}\r\n        <span class="component-header-input">\r\n            <form action="javascript:void(0)" >\r\n                <i class="i_search"></i>\r\n                <input type="search" placeholder="{{region.config.placeholder}}" can-value="region.request.searchCont">\r\n                <i class="i_clear"></i>\r\n            </form>\r\n        </span>\r\n    {{/region.config.input}}\r\n\r\n\r\n    <span class="component-header-right">\r\n        {{#region.config.icon_search}}\r\n            <a href="javascript:void(0)" class="btn icon icon_search"></a>\r\n        {{/region.config.icon_search}}\r\n\r\n        {{#region.config.icon_shopCart}}\r\n            <a href="javascript:void(0)" class="icon icon_shopCart">\r\n                {{#region.response.shopCartCount}}\r\n                    <span class="shopCartCount">{{region.response.shopCartCount}}</span>\r\n                {{/region.response.shopCartCount}}\r\n            </a>\r\n        {{/region.config.icon_shopCart}}\r\n\r\n        {{#region.config.icon_AddressManage}}\r\n            <a href="javascript:void(0)" class="btn icon icon_AddressManage"></a>\r\n        {{/region.config.icon_AddressManage}}\r\n\r\n        {{#region.config.icon_AddressSure}}\r\n            <a href="javascript:void(0)" class="btn icon icon_AddressSure"></a>\r\n        {{/region.config.icon_AddressSure}}\r\n\r\n        {{#region.config.icon_shopCartEdit}}\r\n            <a href="javascript:void(0)" class="btn icon icon_shopCartEdit"></a>\r\n        {{/region.config.icon_shopCartEdit}}\r\n\r\n        {{#region.config.icon_shopCartSave}}\r\n            <a href="javascript:void(0)" class="btn icon icon_shopCartSave"></a>\r\n        {{/region.config.icon_shopCartSave}}\r\n\r\n        {{#region.config.icon_orderList}}\r\n            <a href="javascript:void(0)" class="btn icon icon_orderList"></a>\r\n        {{/region.config.icon_orderList}}\r\n\r\n        {{#region.config.icon_choose}}\r\n            <a href="javascript:void(0)" class="btn icon icon_choose"></a>\r\n        {{/region.config.icon_choose}}\r\n\r\n        {{#region.config.icon_close}}\r\n            <a href="javascript:void(0)" class="btn icon icon_close"></a>\r\n        {{/region.config.icon_close}}\r\n\r\n        {{#region.config.icon_news}}\r\n            <a href="javascript:void(0)" class="btn icon icon_news"></a>\r\n        {{/region.config.icon_news}}\r\n\r\n        {{#region.config.input_cancel}}\r\n            <a href="javascript:void(0)" class="btn text input_cancel">取消</a>\r\n        {{/region.config.input_cancel}}\r\n\r\n        {{#region.config.info_shop}}\r\n            <div class="info_shop">\r\n                <div class="shopImg">\r\n                    <img src="{{{region.config.shopInfo.headImg}}}" alt="{{region.config.shopInfo.name}}">\r\n                </div>\r\n                <div class="shopText">\r\n                    <span>{{region.config.shopInfo.name}}</span>\r\n                    <span>{{region.config.shopInfo.description}}</span>\r\n                </div>\r\n            </div>\r\n        {{/region.config.info_shop}}\r\n    </span>\r\n</div>'}),define("modular/component/component-header-1",["text!modular/template/template-header-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-header-1",template:e,helpers:{},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-footer-1.mustache",[],function(){return'<div class="component-footer-content">\r\n    {{#region.config.home}}\r\n        <div class="component-footer-shortcutIcon icon_4">\r\n            <a href="/index.html" class="icon icon_home {{region.config.home}}"></a>\r\n        </div>\r\n    {{/region.config.home}}\r\n\r\n    {{#region.config.nav}}\r\n        <div class="component-footer-shortcutIcon icon_4">\r\n            <a href="/nav.html" class="icon icon_nav {{region.config.nav}}"></a>\r\n        </div>\r\n    {{/region.config.nav}}\r\n\r\n    {{#region.config.shoppingCart}}\r\n        <div class="component-footer-shortcutIcon icon_4">\r\n            <a href="/shoppingCart.html" class="icon icon_shoppingCart {{region.config.shoppingCart}}">\r\n               {{#if region.config.isLogin}}\r\n                   {{#if region.response.count}}\r\n                       <span class="number">{{region.response.count}}</span>\r\n                   {{/if}}\r\n               {{/if}}\r\n            </a>\r\n        </div>\r\n    {{/region.config.shoppingCart}}\r\n\r\n    {{#region.config.personalCenter}}\r\n        <div class="component-footer-shortcutIcon icon_4">\r\n            <a href="/personal-center.html" class="icon icon_personal {{region.config.personalCenter}}"></a>\r\n        </div>\r\n    {{/region.config.personalCenter}}\r\n\r\n    {{#region.config.goodsDetail}}\r\n        <div class="component-footer-goodsDetail">\r\n            <div class="btnBox">\r\n                <a href="javascript:void(0)" class="btn icon_top small"></a>\r\n                <a href="javascript:void(0)" class="btn icon_back small"></a>\r\n                <a href="javascript:void(0)" class="btn text_toBuy large">立即购买</a>\r\n                <a href="javascript:void(0)" class="btn text_addShopCart large">加入购物车</a>\r\n            </div>\r\n        </div>\r\n    {{/region.config.goodsDetail}}\r\n\r\n</div>'}),define("modular/component/component-footer-1",["text!modular/template/template-footer-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-footer-1",template:e,helpers:{scopeConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object");var t=this.spcConfig.attr();if(t.price){var r=t.realPrice||0===t.realPrice,o=r&&t.price>t.realPrice?t.realPrice:t.price;this.attr("spcPrice",(1*o).toFixed(2))}else this.attr("spcPrice","")},retrunTotal:function(e,t){return(n.jsUtil.mustache.getContent(e,"number")*n.jsUtil.mustache.getContent(t,"number")).toFixed(2)},returnTotalPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)}},scope:{spcPrice:""},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-nav-1.mustache",[],function(){return'<div class="component-nav-content">\r\n    <div class="component-nav-list">\r\n        <div class="classify-list-left">\r\n            <ul>\r\n                {{#each region.response}}\r\n                    <li index={{@index}} class="{{addElementClass @index showIndex \'active\'}}">{{{industryName}}}</li>\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n        <div class="classify-list-right">\r\n            {{#each region.response}}\r\n                {{#returnCont @index showIndex}}\r\n                    {{#each dictList}}\r\n                        <div class="classify-list-right-item">\r\n                            <h1>{{{dictName}}}</h1>\r\n                            <ul>\r\n                                {{#each entryList}}\r\n                                    <li thirdId="{{id}}">\r\n                                        <span>{{{entryName}}}</span>\r\n                                    </li>\r\n                                {{/each}}\r\n                            </ul>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/returnCont}}\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n</div>'}),define("modular/component/component-nav-1",["text!modular/template/template-nav-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-nav-1",template:e,helpers:{returnCont:function(e,t,r){return n.jsUtil.mustache.getContent(e,"number")===n.jsUtil.mustache.getContent(t,"number")?r.fn(this):r.inverse(this)}},scope:{showIndex:0},events:{inserted:function(e){},".component-nav-content .classify-list-left li[index] touchend":function(e){var t=$(e),r=t.attr("index");n.jsEvent.touch.touchIsMoved||(this.scope.attr("showIndex",r),$("html,body,.classify-list-right").animate({scrollTop:0},350))}}})}),define("text!modular/template/template-searchHistory-1.mustache",[],function(){return'<div class="component-searchHistory-content">\r\n\r\n    {{#returnHistory region.config.historyCache}}\r\n        <div class="component-searchHistory-cache">\r\n            <h1>历史记录</h1>\r\n            <span class="icon_delete">\r\n               <img src="/images/platform/header/i_delete.png" alt="中国供销海外购">\r\n            </span>\r\n            <ul>\r\n                {{#each region.config.historyCache}}\r\n                    {{#setRenderRange @index 0 9}}\r\n                        <li firstId="{{firstId}}" secondId="{{secondId}}" thirdId="{{thirdId}}">{{goodsName}}</li>\r\n                    {{/setRenderRange}}\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    {{/returnHistory}}\r\n\r\n    {{#returnHotSearch region.config.hotSearchList}}\r\n        <div class="component-searchHistory-hot">\r\n            <h1>热门搜索</h1>\r\n            <ul>\r\n                {{#each region.response.hotSearchList}}\r\n                    {{#setRenderRange @index 0 6}}\r\n                        <li firstId="{{firstId}}">{{industryName}}</li>\r\n                    {{/setRenderRange}}\r\n                {{/each}}\r\n            </ul>\r\n        </div>\r\n    {{/returnHotSearch}}\r\n</div>'}),define("modular/component/component-searchHistory-1",["text!modular/template/template-searchHistory-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-searchhistory-1",template:e,helpers:{returnHistory:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");return $.isArray(r)&&r.length>0?t.fn(this.context):t.inverse(this.context)},returnHotSearch:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");return $.isArray(r)&&r.length>0?t.fn(this.context):t.inverse(this.context)}},scope:{},events:{}})}),define("text!modular/template/template-message-1.mustache",[],function(){return'{{scopeModule module}}\r\n{{scopeFunction "cancel" region.config}}\r\n{{scopeFunction "confirm" region.config}}\r\n{{scopeFunction "timeOutFun" region.config}}\r\n{{scopeDOMClick region.config.DOMClick}}\r\n\r\n{{#if region.config.content}}\r\n    {{#returnConfirmBtn region.config.confirmBtn}}\r\n        <div class="component-message-content completed">\r\n            <div class="component-message-header">\r\n            <span class="message-text">\r\n                {{returnHeaderText region.config.type region.config.language}}\r\n            </span>\r\n                <span class="message-icon icon_{{returnHeaderIcon region.config.type}}"></span>\r\n            </div>\r\n            <div class="component-message-body">\r\n                <table class="message-content">\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <span>{{region.config.content}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div class="component-message-footer">\r\n            <span class="message-btnGroup">\r\n                {{#returnConfirmBtn region.config.confirmBtn}}\r\n                    <a class="btn btn_confirm">\r\n                        {{returnFooterText "confirm" region.config.language}}\r\n                    </a>\r\n                {{/returnConfirmBtn}}\r\n\r\n                {{#returnCancelBtn region.config.cancelBtn}}\r\n                    <a class="btn btn_cancel">\r\n                        {{returnFooterText "cancel" region.config.language}}\r\n                    </a>\r\n                {{/returnCancelBtn}}\r\n            </span>\r\n            </div>\r\n        </div>\r\n    {{/returnConfirmBtn}}\r\n    {{^returnConfirmBtn region.config.confirmBtn}}\r\n        <div class="component-message-content unCompleted">\r\n            <div class="component-message-body">\r\n                <table class="message-content">\r\n                    <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <span>{{region.config.content}}</span>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    {{/returnConfirmBtn}}\r\n{{/if}}'}),define("modular/component/component-message-1",["text!modular/template/template-message-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-message-1",template:e,helpers:{scopeModule:function(e){this.spcModule=n.jsUtil.mustache.getContent(e,"object")},returnHeaderText:function(e,t){var r=null,o=n.jsUtil.mustache.getContent(e,"string");if("en"===n.jsUtil.mustache.getContent(t,"string"))switch(o){case"success":r="Success";break;case"error":r="Error";break;case"warning":r="Warning";break;default:r="Information"}else switch(o){case"success":r="成功";break;case"error":r="失败";break;case"warning":r="警告";break;default:r="提示"}return can.mustache.safeString(r)},returnHeaderIcon:function(e){var t=null;switch(n.jsUtil.mustache.getContent(e,"string")){case"success":t="success";break;case"error":t="error";break;case"warning":t="warning";break;default:t="info"}return can.mustache.safeString(t)},returnConfirmBtn:function(e,t){return!1===n.jsUtil.mustache.getContent(e)?t.inverse(t.context||this):t.fn(t.context||this)},returnCancelBtn:function(e,t){return!0===n.jsUtil.mustache.getContent(e)?t.fn(t.context||this):t.inverse(t.context||this)},returnFooterText:function(e,t){var r=null,o=n.jsUtil.mustache.getContent(e,"string"),a=n.jsUtil.mustache.getContent(t,"string");return"confirm"===o?r="en"===a?"confirm":"确定":"cancel"===o&&(r="en"===a?"cancel":"取消"),can.mustache.safeString(r)},scopeFunction:function(e,t){var r=n.jsUtil.mustache.getContent(t,"object"),o=n.jsUtil.mustache.getContent(e,"string");"cancel"===o&&(this.cancelFun=r.cancelFun),"confirm"===o&&(this.confirmFun=r.confirmFun),"timeOutFun"===o&&(this.timeOutFun=r.timeOutFun)},scopeDOMClick:function(e){!1===("function"==typeof e?e():e)&&(this.DOMClick=!1)}},scope:{spcModule:null,DOMClick:!0,triggerMode:null,cancelFun:null,confirmFun:null},events:{inserted:function(){var e=this,n=e.element,t=e.scope.spcModule,r=t&&t.config||{},o=n.find(".component-message-content");r.global.content&&!1!==r.global.confirmBtn?(r.global.isShowing=!0,o.css({opacity:0}),o.animate({opacity:1},600,"linear",function(){r.global.isShowing=!1})):r.global.content&&(r.global.isShowing=!0,o.css({opacity:0}),o.finish().animate({opacity:1},360,function(){setTimeout(function(){o.finish().animate({opacity:0},600,function(){r.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},r.global.isShowing=!1,$.isFunction(e.scope.timeOutFun)&&e.scope.timeOutFun(),t.refresh()})},r.global.time||2e3)}))},removed:function(){var e=this,n=e.scope.attr("triggerMode"),t=!1!==e.scope.confirmBtn;t&&"document"===n?!0===e.scope.cancelBtn&&$.isFunction(e.scope.cancelFun)?e.scope.cancelFun():!1!==e.scope.confirmBtn&&$.isFunction(e.scope.confirmFun)&&e.scope.confirmFun():t&&"cancel"===n?$.isFunction(e.scope.cancelFun)&&e.scope.cancelFun():t&&"confirm"===n&&$.isFunction(e.scope.confirmFun)&&e.scope.confirmFun()},"{document} touchend":function(e,n){var t=this,r=n||window.event,o=$(r.target||r.srcElement),a=o.parents(".component-message-content").length>0,s=!1!==t.scope.confirmBtn,i=!1!==t.scope.DOMClick;!a&&s&&i&&t.scope.attr("triggerMode","document")},".component-message-footer .btn_cancel touchend":function(){this.scope.attr("triggerMode","cancel")},".component-message-footer .btn_confirm touchend":function(){this.scope.attr("triggerMode","confirm")}}})}),define("text!modular/template/template-searchProduct-1.mustache",[],function(){return'<div class="component-searchProduct-content">\r\n    <div class="searchProduct-header">\r\n        <ul class="content">\r\n            <li class="choose_general {{addElementClass region.config.sortType 1 "active"}}">综合</li>\r\n            <li class="choose_new {{addElementClass region.config.sortType 2 "active"}}">最新</li>\r\n            <li class="choose_price\r\n                     {{addElementClass region.config.sortType 3 "sortType3"}}\r\n                     {{addElementClass region.config.sortType 4 "sortType4"}}">\r\n                价格\r\n                {{#returnImg region.config.sortType}}\r\n                       <img src="/images/platform/product/{{path}}.png" class="sort" alt="中国供销海外购">\r\n                {{/returnImg}}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    {{#if region.response.goodsList}}\r\n        {{#if region.response.goodsList.length}}\r\n            <div class="searchProduct-body">\r\n                <ul class="searchProduct-body-item" style="min-height: {{region.config.minHeight}}px">\r\n                    {{#each region.response.goodsList}}\r\n                        <li class="item-content" currentPage="{{currentPage}}" isSingleSpec="{{returnIsSingleSpec goodsSpecsList}}" toUrl=\'{{{href}}}\'goodsId="{{goodsId}}">\r\n                            <a href="{{{href}}}">\r\n                                <div class="imgBox">\r\n                                    <div>\r\n                                        {{#if goodsFileList}}\r\n                                            {{#each goodsFileList}}\r\n                                                {{#setRenderRange @index 0 1}}\r\n                                                    <img src="{{{path}}}" alt="{{{customGoodsName}}}">\r\n                                                {{/setRenderRange}}\r\n                                            {{/each}}\r\n                                        {{else}}\r\n                                            <img src="/images/platform/account/default_img.jpg" alt="{{{customGoodsName}}}">\r\n                                        {{/if}}\r\n                                        {{#returnIsShow type}}\r\n                                            <img class="corner_mark" src="{{returnImgSrc type}}" alt="中国供销海外购">\r\n                                        {{/returnIsShow}}\r\n                                    </div>\r\n                                </div>\r\n                                <div class="description">\r\n                                    <span class="text">\r\n                                        {{#if description}}\r\n                                            {{description}}\r\n                                        {{else}}\r\n                                            中国供销海外购\r\n                                        {{/if}}\r\n                                    </span>\r\n                                    {{#if goodsSpecsList}}\r\n                                        <span class="tagBox">\r\n                                            {{#returnTags goodsSpecsList}}\r\n                                                {{#each .}}\r\n                                                    <span class="icon {{.}}"></span>\r\n                                                {{/each}}\r\n                                            {{/returnTags}}\r\n                                        </span>\r\n                                    {{/if}}\r\n                                </div>\r\n                            </a>\r\n                            <ul class="textGroup">\r\n                                <li class="name">\r\n                                    <a href="javascript:void(0)">\r\n                                        {{{customGoodsName}}}\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <span class="price">￥{{returnPrice realPrice}}</span>\r\n                                    <span class="imgBox search_addShoppingCart">\r\n                                        <img src="/images/platform/search/icon_shoppingCart.png" alt="中国供销海外购">\r\n                                    </span>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                    {{/each}}\r\n                </ul>\r\n                <div class="isLoading">\r\n                    <div class="component-load-text">\r\n                        <span>请下拉加载...</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        {{/if}}\r\n    {{/if}}\r\n    {{#if region.response.goodsList}}\r\n        {{^if region.response.goodsList.length}}\r\n            <div class="empty_search">\r\n                <img src="/images/platform/product/search.png" alt="中国供销海外购">\r\n                <span class="text">您寻找的商品还未上架！</span>\r\n            </div>\r\n        {{/if}}\r\n    {{else}}\r\n        <div class="empty_search">\r\n            <img src="/images/platform/product/search.png" alt="中国供销海外购">\r\n            <span class="text">您寻找的商品还未上架！</span>\r\n        </div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-searchProduct-1",["text!modular/template/template-searchProduct-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-searchproduct-1",template:e,helpers:{returnTags:function(e,t){var r=[],o=[],a=n.jsUtil.mustache.getDepContent(e,"object");return $.each(a||[],function(e,n){$.each(n.tagList||[],function(e,n){o.push(n)})}),$.each(o||[],function(e,n){switch(n.tagName){case"必选":-1===$.inArray("icon_tag1",r)&&r.push("icon_tag1");break;case"爆款":-1===$.inArray("icon_tag2",r)&&r.push("icon_tag2");break;case"热销":-1===$.inArray("icon_tag3",r)&&r.push("icon_tag3");break;case"优选":-1===$.inArray("icon_tag4",r)&&r.push("icon_tag4")}}),t.fn(r)},returnImg:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 3===r?t.fn({path:"down"}):4===r?t.fn({path:"up"}):t.fn({path:"none"})},returnPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsSingleSpec:function(e){var t=n.jsUtil.mustache.getDepContent(e,"object");return $.isArray(t)&&t.length>1?"no":"yes"}},scope:{},events:{inserted:function(){},"{document} click":function(e,n){var t=this,r=t.element,o=n||window.event,a=$(o.target||o.srcElement);a.hasClass("searchProduct-header-right")||a.parents(".searchProduct-header-right").length||r.find(".searchProduct-header .searchProduct-header-right.active").click()},".searchProduct-header .searchProduct-header-right touchend":function(e){$(e).toggleClass("active")}}})}),define("text!modular/template/template-personal-center-1.mustache",[],function(){
return'<div class="component-personal-center-content">\r\n    <div class="component-personal-center-header">\r\n        <div class="content">\r\n            <span class="defaultHeadPortrait">\r\n                <span class="imgBox">\r\n                    <span class="img" style="background-image:\r\n                            url(\'{{region.config.shopInfo.headImg}}\');"></span>\r\n                </span>\r\n            </span>\r\n            <span class="userName">\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.userInfo.userDetail}}\r\n                        {{#if region.response.userInfo.userDetail.nickName}}\r\n                            <span class="text">{{region.response.userInfo.userDetail.nickName}}(普通用户)</span>\r\n                        {{else}}\r\n                            {{#if region.response.userInfo.userDetail.name}}\r\n                                <span class="text">{{region.response.userInfo.userDetail.name}}(普通用户)</span>\r\n                            {{else}}\r\n                                {{#if region.response.userInfo.phone}}\r\n                                    <span class="text">{{region.response.userInfo.phone}}(普通用户)</span>\r\n                                {{else}}\r\n                                    <span class="text">游客</span>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                        {{/if}}\r\n                    {{else}}\r\n                        {{#if region.response.userInfo.phone}}\r\n                            <span class="text">{{region.response.userInfo.phone}}(普通用户)</span>\r\n                        {{else}}\r\n                            <span class="text">游客</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                {{else}}\r\n                    <span class="text">游客</span>\r\n                {{/if}}\r\n            </span>\r\n            <span class="aboutus">\r\n               <span class="text">微店简介：{{region.config.shopInfo.aboutus}}</span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="component-personal-center-order">\r\n        <div class="body">\r\n            <a href="/orderList.html" class="order order_all">\r\n                <span class="icon icon_order_all"></span>\r\n            </a>\r\n            <a href="/orderList.html?queryType=needPay" class="order order_needPay">\r\n                <span class="icon icon_order_needPay">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needPay}}\r\n                            <span class="number">{{region.response.orderStatus.needPay}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a href="/orderList.html?queryType=needDeliver" class="order order_needDeliver">\r\n                <span class="icon icon_order_needDeliver">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needDeliver}}\r\n                            <span class="number">{{region.response.orderStatus.needDeliver}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a  href="/orderList.html?queryType=needReceived" class="order order_needReceived">\r\n                <span class="icon icon_order_needReceived">\r\n                    {{#if region.config.isLogin}}\r\n                        {{#if region.response.orderStatus.needReceived}}\r\n                            <span class="number">{{region.response.orderStatus.needReceived}}</span>\r\n                        {{/if}}\r\n                    {{/if}}\r\n                </span>\r\n            </a>\r\n            <a  href="/orderList.html?queryType=finished" class="order order_finish">\r\n                <span class="icon icon_order_finished">\r\n                </span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="component-personal-center-function">\r\n        <a href="/address-manage.html?jumpUrl={{region.config.pathUrl}}" class="function needSign editDeliveryAddress">\r\n            <span class="icon icon_deliveryAddress"></span>\r\n            <span class="text">收货地址</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        <a href="/personal-information.html?jumpUrl={{region.config.pathUrl}}" class="function needSign information">\r\n            <span class="icon icon_information"></span>\r\n            <span class="text">个人信息</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        <a href="/customerService.html?jumpUrl={{region.config.pathUrl}}" class="function customerService">\r\n            <span class="icon icon_customerService"></span>\r\n            <span class="text">客服信息</span>\r\n            <span class="icon icon_right icon_href"></span>\r\n        </a>\r\n        {{#if region.config.showWelfare}}\r\n            <a href="javascript:void(0)" class="function fmpMall">\r\n                <span class="icon icon_welfare"></span>\r\n                <span class="text">福利网站</span>\r\n                <span class="icon icon_right icon_href"></span>\r\n            </a>\r\n        {{/if}}\r\n        {{#notShow}}\r\n            <a href="/discount.html?jumpUrl={{region.config.pathUrl}}?type=personalCenter" class="function discount">\r\n                <img src="/images/platform/personal/icon_discount.png" alt="中国供销海外购">\r\n                <span class="text">我的优惠券</span>\r\n                <span class="icon icon_right icon_href"></span>\r\n            </a>\r\n        {{/notShow}}\r\n        {{#notShow}}\r\n            <a href="/share.html?jumpUrl={{region.config.pathUrl}}?type=personalCenter" class="function share">\r\n                <img src="/images/platform/personal/share.png" alt="中国供销海外购">\r\n                <span class="text">推手公众号</span>\r\n                <span class="icon icon_right icon_href"></span>\r\n            </a>\r\n        {{/notShow}}\r\n        {{#notShow}}\r\n            <a href="javascript:void(0)" class="function apply">\r\n                <img src="/images/platform/personal/share.png" alt="中国供销海外购">\r\n                <span class="text">申请成为推手</span>\r\n                <span class="icon icon_right icon_href"></span>\r\n            </a>\r\n        {{/notShow}}\r\n    </div>\r\n    {{#if region.config.isLogin}}\r\n        <div class="component-personal-center-logout">\r\n            <span class="text">退出当前账号</span>\r\n        </div>\r\n    {{else}}\r\n        <a class="component-personal-center-login">\r\n            <span class="text">登 录</span>\r\n        </a>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-personal-center-1",["text!modular/template/template-personal-center-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-personal-center-1",template:e,helpers:{},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-login-1.mustache",[],function(){return'<div class="component-login-content">\r\n    <div class="component-login-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-login-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    {{#notSow}}\r\n        {{^region.config.shopId}}\r\n            <div class="component-login-shopInfo {{#if region.config.isOpen}}isOpen{{/if}}">\r\n                <span class="iconLeft"></span>\r\n                <input type="text" id="shopInfo" name="shopInfo" shopId="{{region.config.iShopId}}" domain="{{region.config.iDomain}}" can-value="region.config.iShopName"\r\n                       {{^region.config.isOpen}}readonly="readonly"{{/region.config.isOpen}}\r\n                       placeholder="{{#if region.config.isOpen}}请输入店铺名称/店铺ID...{{else}}店铺选项未开启...{{/if}}"/>\r\n                <span class="textRight btn_change">\r\n                    <span>{{#if region.config.isOpen}}关闭{{else}}启用{{/if}}</span>\r\n                </span>\r\n                {{#returnShow region.config.isOpen region.config.isFocus}}\r\n                    <ul class="choose">\r\n                        {{#region.config.iShopArr}}\r\n                            <li centerId="{{centerId}}" shopId="{{id}}" level="{{level}}" shopName="{{name}}" domain="{{{mobileUrl}}}">{{name}}</li>\r\n                        {{/region.config.iShopArr}}\r\n                    </ul>\r\n                {{/returnShow}}\r\n            </div>\r\n        {{/region.config.shopId}}\r\n    {{/notSow}}\r\n    <a href="javascript:void(0)" class="btn component-login-loginBtn {{loginBtn_state}}">登录</a>\r\n    <div class="component-login-prompt">\r\n        <a href="/register.html?jumpUrl={{region.config.jumpUrl}}" target="_self">账号注册</a>\r\n        <a href="/forgetPassword.html?jumpUrl={{region.config.jumpUrl}}" target="_self">忘记密码</a>\r\n    </div>\r\n    <div class="component-login-third">\r\n        <div class="header">\r\n            使用其他方式登录\r\n        </div>\r\n        <div class="body">\r\n            <a href="javascript:void(0)" class="img_weChat">\r\n                <img src="/images/platform/account/weixin.png" alt="中国供销海外购">\r\n            </a>\r\n        </div>\r\n    </div>\r\n    {{#if region.config.bombBox}}\r\n        <div class="component-login-bombBox">\r\n            <div class="content">\r\n                <div class="header">\r\n                    <input type="text" id="bShopInfo" name="bShopInfo" placeholder="请从如下列表中选择店铺..."\r\n                           shopId="{{region.config.bShopId}}" domain="{{region.config.bDomain}}"\r\n                           can-value="region.config.bShopName" readonly="readonly"/>\r\n                    <a href="javascript:void(0)" class="btn btn_ignore">跳过</a>\r\n                    <a href="javascript:void(0)" class="btn btn_sure">确认</a>\r\n                </div>\r\n                <ul class="body">\r\n                    {{#returnArray region.config.bShopArr}}\r\n                        {{#each .}}\r\n                            <li shopId="{{id}}" level="{{level}}" shopName="{{name}}" domain="{{{mobileUrl}}}">{{name}}</li>\r\n                        {{/each}}\r\n                    {{/returnArray}}\r\n                    {{^returnArray region.config.bShopArr}}\r\n                        <li class="lose">暂无店铺信息，请选择跳过！</li>\r\n                    {{/returnArray}}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-login-1",["text!modular/template/template-login-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-login-1",template:e,helpers:{returnShow:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"boolean"),a=n.jsUtil.mustache.getContent(t,"boolean");return o&&a?r.fn(this):r.inverse(this)},returnArray:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");if($.isEmptyObject(r))return t.inverse(r);for(var o=r.length;o<10;o++)r.push({});return t.fn(r)}},scope:{account_state:"",password_state:"",loginBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-login-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-login-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},".component-login-loginBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("password_state");t&&r?e.scope.attr("loginBtn_state",""):e.scope.attr("loginBtn_state","state_error")}}})}),define("text!modular/template/template-register-1.mustache",[],function(){return'<div class="component-register-content">\r\n    <div class="component-register-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-register-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <div class="component-register-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <div class="component-register-confirmPassword  {{confirmPassword_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="请再次确认密码..." can-value="region.request.confirmPassword"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    {{#notSow}}\r\n        {{^region.config.shopId}}\r\n            <div class="component-register-shopInfo {{#if region.config.isOpen}}isOpen{{/if}}">\r\n                <span class="iconLeft"></span>\r\n                <input type="text" id="shopInfo" name="shopInfo" shopId="{{region.config.iShopId}}" domain="{{region.config.iDomain}}" can-value="region.config.iShopName"\r\n                       {{^region.config.isOpen}}readonly="readonly"{{/region.config.isOpen}}\r\n                       placeholder="{{#if region.config.isOpen}}请输入店铺名称/店铺ID...{{else}}店铺选项未开启...{{/if}}"/>\r\n                <span class="textRight btn_change">\r\n                <span>{{#if region.config.isOpen}}关闭{{else}}启用{{/if}}</span>\r\n            </span>\r\n                {{#returnShow region.config.isOpen region.config.isFocus}}\r\n                    <ul class="choose">\r\n                        {{#region.config.iShopArr}}\r\n                            <li centerId="{{centerId}}" shopId="{{id}}" level="{{level}}" shopName="{{name}}" domain="{{{mobileUrl}}}">{{name}}</li>\r\n                        {{/region.config.iShopArr}}\r\n                    </ul>\r\n                {{/returnShow}}\r\n            </div>\r\n        {{/region.config.shopId}}\r\n    {{/notSow}}\r\n    <a href="javascript:void(0)" class="btn component-register-registerBtn {{registerBtn_state}}">确认注册</a>\r\n</div>'}),define("modular/component/component-register-1",["text!modular/template/template-register-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-register-1",template:e,helpers:{returnShow:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"boolean"),a=n.jsUtil.mustache.getContent(t,"boolean");return o&&a?r.fn(this):r.inverse(this)}},scope:{account_state:"",validation_state:"",password_state:"",confirmPassword_state:"",registerBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)},validateConfirmPassword:function(e,n){return""!==n.trim()&&e===n&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-register-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-register-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},"#confirmPassword blur":function(e){var n=this,t=$(e),r=n.element,o=r.find("#password");n.scope.validateConfirmPassword(o.val(),t.val())?n.scope.attr("confirmPassword_state",""):n.scope.attr("confirmPassword_state","state_error")},".component-register-registerBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur"),n.find("#validation").trigger("blur"),n.find("#confirmPassword").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state"),o="state_error"!==e.scope.attr("password_state"),a="state_error"!==e.scope.attr("confirmPassword_state");t&&r&&o&&a?e.scope.attr("registerBtn_state",""):e.scope.attr("registerBtn_state","state_error")}}})}),define("text!modular/template/template-bindInvitation-1.mustache",[],function(){return'<div class="component-bindInvitation-content">\r\n    <div class="component-bindInvitation-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="未获取到手机号..." can-value="region.request.account" {{#if region.config.account}}readonly="readonly"{{/if}}/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-bindInvitation-invitationCode {{invitationCode_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="invitationCode" name="invitationCode" placeholder="请输入邀请码..." can-value="region.request.invitationCode"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-bindInvitation-bingBtn {{bingBtn_state}}">绑定邀请码</a>\r\n</div>'}),define("modular/component/component-bindInvitation-1",["text!modular/template/template-bindInvitation-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-bindinvitation-1",template:e,helpers:{},scope:{bingBtn_state:"",account_state:"",invitationCode:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateInvitation:function(e){return""!==e.trim()}},events:{inserted:function(){},removed:function(){},".component-bindInvitation-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-bindInvitation-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#invitationCode blur":function(e){var n=this,t=$(e);n.scope.validateInvitation(t.val())?n.scope.attr("invitationCode_state",""):n.scope.attr("invitationCode_state","state_error")},".component-bindInvitation-bingBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#invitationCode").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("invitationCode_state");t&&r?e.scope.attr("bingBtn_state",""):e.scope.attr("bingBtn_state","state_error")}}})}),define("text!modular/template/template-bindMobile-1.mustache",[],function(){return'<div class="component-bindMobile-content">\r\n    <div class="component-bindMobile-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-bindMobile-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-bindMobile-bingBtn {{bingBtn_state}}">完成绑定</a>\r\n</div>'}),define("modular/component/component-bindMobile-1",["text!modular/template/template-bindMobile-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-bindmobile-1",template:e,helpers:{},scope:{bingBtn_state:"",account_state:"",validation_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-bindMobile-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-bindMobile-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},".component-bindMobile-bingBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#validation").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state");t&&r?e.scope.attr("bingBtn_state",""):e.scope.attr("bingBtn_state","state_error")}}})}),define("text!modular/template/template-personal-information-1.mustache",[],function(){return'<div class="component-personal-information-content">\r\n\r\n    <div class="component-personal-information-prompt">\r\n        <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n        <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n    </div>\r\n\r\n    <div class="component-personal-information-main">\r\n        <div class="mainCont headPortrait big">\r\n            <span class="name">头像</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="icon headPortrait">\r\n                    <img src="/images/platform/personal/headPortrait.jpg" alt="中国供销海外购">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont nickname">\r\n            <span class="name">昵称</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont nickname">\r\n                    <input type="text" id="nickname" name="nickname" value="{{region.response.userDetail.nickName}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont realname">\r\n            <span class="name important">真实姓名</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont realname">\r\n                    <input type="text" id="realname" name="realname" value="{{region.response.userDetail.name}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont gender">\r\n            <span class="name important">性别</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont gender">\r\n                    <select id="gender" name="gender">\r\n                        <option value ="1"\r\n                            {{#returnSelected region.response.userDetail.sex 1}}\r\n                                selected="selected"\r\n                            {{/returnSelected}}>女性</option>\r\n                        <option value ="0"\r\n                            {{#returnSelected region.response.userDetail.sex 0}}\r\n                                selected="selected"\r\n                            {{/returnSelected}}>男性</option>\r\n                    </select>\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont location">\r\n            <span class="name">所在地</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont location">\r\n                    <input type="text" id="location" name="location" value="{{region.response.userDetail.location}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n        <div class="mainCont identification">\r\n            <span class="name important">身份证</span>\r\n            <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont identification">\r\n                    <input type="text" id="identification" name="identification" value="{{region.response.userDetail.idNum}}">\r\n                </span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#notShow}}\r\n        <div class="component-personal-information-other">\r\n            <div class="otherCont">\r\n                <span class="name">其他</span>\r\n                <span class="content">\r\n                <span class="icon"></span>\r\n                <span class="cont">\r\n                    <input type="text" id="" name="" value="其他内容">\r\n                </span>\r\n            </span>\r\n            </div>\r\n        </div>\r\n    {{/notShow}}\r\n\r\n    {{#if region.config.detailExist}}\r\n        <div class = "edit component-personal-information-commit">保存个人信息</div>\r\n    {{else}}\r\n        <div class = "add component-personal-information-commit">创建个人信息</div>\r\n    {{/if}}>\r\n\r\n</div>'}),define("modular/component/component-personal-information-1",["text!modular/template/template-personal-information-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-personal-information-1",template:e,helpers:{returnSelected:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"string"),a=n.jsUtil.mustache.getContent(t,"string");if("1"!==o&&(o="0"),o===a)return r.fn(this)},returnSex:function(e){return"0"===n.jsUtil.mustache.getContent(e,"string")?"男性":"女性"}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-address-manage-1.mustache",[],function(){return'<div class="component-address-manage-content">\r\n    {{#returnList region.response}}\r\n        <ul class="component-address-manage-list">\r\n            {{#each .}}\r\n                <li class="item {{#region.config.isFormOrder}}select{{/region.config.isFormOrder}}" id="{{id}}">\r\n                    <div class="info">\r\n                <span class="name">\r\n                    {{receiveName}}\r\n                </span>\r\n                        <span class="mobilePhone">\r\n                            {{receivePhone}}\r\n                        </span>\r\n                        <span class="address">\r\n                    {{province}}{{city}}{{area}}{{address}}\r\n                </span>\r\n                    </div>\r\n                    <div class="setting">\r\n                        <div class="btnBox_left {{#if setDefault}}active{{/if}}">\r\n                            <span class="icon btn"></span>\r\n                            <span class="text"></span>\r\n                        </div>\r\n                        {{^region.config.isFormOrder}}\r\n                            <div class="btnBox_right">\r\n                                <a href="javascript:void(0)" class="btn btn_remove">删除</a>\r\n                                <a href="/address-edit.html?edit={{id}}" class="btn btn_edit">编辑</a>\r\n                            </div>\r\n                        {{/region.config.isFormOrder}}\r\n                    </div>\r\n                </li>\r\n            {{/each}}\r\n        </ul>\r\n    {{/returnList}}\r\n    {{^returnList region.response}}\r\n        <ul class="component-address-manage-empty">\r\n            <img src="/images/platform/address/empty.png" alt="中国供销海外购">\r\n            <span>暂无收货地址信息</span>\r\n        </ul>\r\n    {{/returnList}}\r\n    <div class="component-address-manage-create">\r\n        <div class="box">\r\n            <a href="/address-edit.html" class="btn content">添加新地址</a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("modular/component/component-address-manage-1",["text!modular/template/template-address-manage-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-address-manage-1",template:e,helpers:{returnList:function(e,t){var r=n.jsUtil.mustache.getDepContent(e);return $.isArray(r)&&r.length>0?t.fn(r):t.inverse(r)}},scope:{},events:{inserted:function(){},removed:function(){},".address-manage-list .btnBox_left touchend":function(e){var n=this,t=$(e);n.element.find(".btnBox_left").removeClass("active"),t.addClass("active")}}})}),define("text!modular/template/template-address-edit-1.mustache",[],function(){
return'<div class="component-address-edit-content">\r\n    <div class="component-address-edit-prompt">\r\n        <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n        <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n    </div>\r\n    <div class="component-address-edit-info picker-country" id="{{region.response.id}}">\r\n        <div class="consignee">\r\n            <span class="name">收货人</span>\r\n            <span class="text">\r\n                <input type="text" id="consignee" name="consignee" class="receiveName_state" can-value="region.response.receiveName">\r\n            </span>\r\n        </div>\r\n        <div class="telephone">\r\n            <span class="name">联系电话</span>\r\n            <span class="text">\r\n                <input type="tel" pattern="[0-9]*" id="telephone" name="telephone" class="receivePhone_state" can-value="region.response.receivePhone">\r\n            </span>\r\n        </div>\r\n        <div class="province obvious">\r\n            <span class="name">选择省份</span>\r\n            <span class="text">\r\n                <select id="province" name="province" class="picker-province province_state" data-name="{{region.response.province}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="city obvious">\r\n            <span class="name">选择城市</span>\r\n            <span class="text">\r\n                <select id="city" name="city" class="picker-city city_state"  data-name="{{region.response.city}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="city obvious">\r\n            <span class="name">选择市区</span>\r\n            <span class="text">\r\n                <select id="area" name="area" class="picker-area area_state" data-name="{{region.response.area}}">\r\n                </select>\r\n            </span>\r\n        </div>\r\n        <div class="address">\r\n            <span class="name">详细地址</span>\r\n            <span class="text">\r\n                <input type="text" id="address" name="address" class="address_state" can-value="region.response.address">\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class="component-address-edit-defaultSetting">\r\n        <div class="text">\r\n            设置为默认收货地址\r\n        </div>\r\n        <div class="btnBox {{#region.response.setDefault}}active{{/region.response.setDefault}}">\r\n            <span class="btnSet">\r\n                <span class="btn"></span>\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#if region.response.id}}\r\n        <div class="component-address-edit-commit">保存收货地址</div>\r\n    {{else}}\r\n        <div class="component-address-edit-commit">创建收货地址</div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-address-edit-1",["text!modular/template/template-address-edit-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-address-edit-1",template:e,helpers:{},scope:{check_province:function(e){return e&&"---- 所在省 ----"!==e},check_city:function(e,n){return 1===n||e&&"---- 所在市 ----"!==e},check_area:function(e,n){return 1===n||e&&"---- 所在区 ----"!==e},check_address:function(e){return!(!e||!e.trim())},check_zipCode:function(e){return n.jsUtil.check.zipCode(e)},check_receiveName:function(e){return!(!e||!e.trim())},check_receivePhone:function(e){return n.jsUtil.check.phone(e)}},events:{inserted:function(){this.element.find(".picker-country").picker()},removed:function(){},".component-address-edit-info .receiveName_state blur":function(e){var n=this,t=$(e),r=(n.element,t.val()&&t.val().trim());n.scope.check_receiveName(r)?t.removeClass("state_error"):t.addClass("state_error"),t.text(r)},".component-address-edit-info .receivePhone_state blur":function(e){var n=this,t=$(e),r=(n.element,t.val()&&t.val().trim());n.scope.check_receivePhone(r)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .province_state change":function(e){var n=this,t=$(e),r=t.val();n.element,n.scope.check_province(r)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .city_state change":function(e){var n=this,t=$(e),r=t.val(),o=(n.element,t.find("option").length);n.scope.check_city(r,o)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .area_state change":function(e){var n=this,t=$(e),r=t.val(),o=(n.element,t.find("option").length);n.scope.check_area(r,o)?t.removeClass("state_error"):t.addClass("state_error")},".component-address-edit-info .address_state blur":function(e){var n=this,t=$(e),r=t.val()&&t.val().trim();n.scope.check_address(r)?t.removeClass("state_error"):t.addClass("state_error"),t.text(r)}}})}),define("text!modular/template/template-shoppingCart-1.mustache",[],function(){return'<div class="component-shoppingCart-content">\r\n    {{scopeConfig region.config}}\r\n    {{spoceOrder region.response.orders region.config}}\r\n\r\n    {{#if region.response.orders.quantity}}\r\n        {{#region.response.orders}}\r\n            <div class="component-shoppingCart-ordersDetails" style="min-height: {{region.config.minHeight}}px">\r\n                {{#each typeObj}}\r\n                    {{#each .}}\r\n                        {{#each itemObj}}\r\n                            <div class="goodsList" type="{{type}}" supplierId="{{supplierId}}" goodsId="{{goodsId}}" ids="{{ids}}">\r\n                                <div class="body">\r\n                                    <div class="itemList" itemId="{{itemId}}">\r\n                                        <div class="commodity-group">\r\n                                            <span goodsId="{{goodsId}}" itemId="{{itemId}}" class="commodity-select {{#returnItemSelect selected status region.config.optionsOpen}}active{{/returnItemSelect}}">\r\n                                                {{#if region.config.optionsOpen}}\r\n                                                    <span class="icon icon_logo"></span>\r\n                                                {{else}}\r\n                                                    {{#returnStatus status}}\r\n                                                        {{#returnStock stock minQuantity}}\r\n                                                            <span class="icon icon_logo"></span>\r\n                                                        {{/returnStock}}\r\n                                                        {{^returnStock stock minQuantity}}\r\n                                                            <span class="text text_lose">库存不足</span>\r\n                                                        {{/returnStock}}\r\n                                                    {{/returnStatus}}\r\n                                                    {{^returnStatus status}}<span class="text text_lose">已下架</span>{{/returnStatus}}\r\n                                                {{/if}}\r\n                                            </span>\r\n                                            <a class="commodity-img" href="{{{href}}}">\r\n                                                {{#if itemImg}}\r\n                                                    <img src="{{{itemImg}}}" alt="{{goodsName}}">\r\n                                                {{else}}\r\n                                                    <img src="/images/platform/account/default_img.jpg" alt="{{goodsName}}">\r\n                                                {{/if}}\r\n                                                {{#returnIsShow type}}\r\n                                                    <img class="corner_mark" src="{{returnImgSrc type}}" alt="中国供销海外购">\r\n                                                {{/returnIsShow}}\r\n                                            </a>\r\n                                            <span class="commodity-info">\r\n                                                <span class="commodity-name">\r\n                                                    <a href="{{{href}}}">\r\n                                                        <span class="text">{{#if supplierName}}[{{supplierName}}]{{/if}}{{goodsName}}</span>\r\n                                                    </a>\r\n                                                </span>\r\n                                                {{#returnSpec itemSpecs.info}}\r\n                                                    <span class="commodity-itemId">\r\n                                                        <span class="text">规格：{{#each .}} {{.}}、 {{/each}}</span>\r\n                                                    </span>\r\n                                                {{/returnSpec}}\r\n                                                {{#itemSpecs.carton}}\r\n                                                    <span class="commodity-gauge">\r\n                                                        <span class="text">箱规：{{itemSpecs.carton}}</span>\r\n                                                    </span>\r\n                                                {{/itemSpecs.carton}}\r\n                                                <span class="commodity-price">\r\n                                                    <span class="text">￥{{returnPrice price realPrice}}</span>\r\n                                                </span>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div class="commodity-quantity">\r\n                                        <span class="inputGroup">\r\n                                            <span class="btn btn_plus"></span>\r\n                                            <input type="number" pattern="[0-9]*" class="btn btn_input" can-value="quantity">\r\n                                            <span class="btn btn_minus"></span>\r\n                                        </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="controlGroup">\r\n                                    <span class="control control_delete" ids="{{ids}}">删除</span>\r\n                                </div>\r\n                            </div>\r\n                        {{/each}}\r\n                    {{/each}}\r\n                {{/each}}\r\n            </div>\r\n        {{/region.response.orders}}\r\n    {{/if}}\r\n\r\n    {{#if region.response.orders.quantity}}\r\n        <div class="component-shoppingCart-optionsGroup">\r\n            <div class="content">\r\n                <span class="control control_selectAll {{#region.response.orders.allSelected}}active{{/region.response.orders.allSelected}}">\r\n                    <span class="icon icon_selectAll"></span>\r\n                    <span class="text text_count">已选({{region.response.orders.selectedCount}})</span>\r\n                </span>\r\n                {{#if region.config.optionsOpen}}\r\n                    <span class="btnGroup">\r\n                        <span class="btn btn_deleteMore {{^if region.response.orders.oneSelected}}lose{{/if}}">删除</span>\r\n                    </span>\r\n                {{else}}\r\n                    <span class="btnGroup">\r\n                        <span class="btn btn_commitOrder {{^if region.response.orders.oneSelected}}lose{{/if}}">下单</span>\r\n                        <span class="text text_price">\r\n                            \x3c!--&lt;!&ndash;￥{{returnOrderPrice region.response.orders}}&ndash;&gt;--\x3e\r\n                            \x3c!--<p>一般：￥{{returnOrderNormalPrice}}</p>--\x3e\r\n                            \x3c!--<p>跨境：￥{{returnOrderCrossPrice}}</p>--\x3e\r\n                            {{#returnNormalShow}}\r\n                                {{#returnCrossShow}}\r\n                                    <p>一般：￥{{returnOrderNormalPrice}}</p>\r\n                                {{/returnCrossShow}}\r\n                            {{/returnNormalShow}}\r\n                            {{^returnNormalShow}}\r\n                                {{#returnCrossShow}}\r\n                                    跨境：￥{{returnOrderCrossPrice}}\r\n                                {{/returnCrossShow}}\r\n                            {{/returnNormalShow}}\r\n                            {{#returnCrossShow}}\r\n                                {{#returnNormalShow}}\r\n                                    <p>跨境：￥{{returnOrderCrossPrice}}</p>\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                            {{^returnCrossShow}}\r\n                                {{#returnNormalShow}}\r\n                                    一般：￥{{returnOrderNormalPrice}}\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                            {{^returnCrossShow}}\r\n                                {{^returnNormalShow}}\r\n                                    总价：￥0.00\r\n                                {{/returnNormalShow}}\r\n                            {{/returnCrossShow}}\r\n                        </span>\r\n                    </span>\r\n                {{/if}}\r\n            </div>\r\n        </div>\r\n    {{else}}\r\n        <div class="component-shoppingCart-empty">\r\n            <img src="/images/platform/shopCart/empty.png" class="img" alt="中国供销海外购">\r\n            <span class="text">购物车空了，去买点什么吧！</span>\r\n            {{^region.config.isLogin}}\r\n                <a class="btn" href="/login.html?jumpUrl={{region.config.pathUrl}}">登录</a>\r\n            {{/region.config.isLogin}}\r\n        </div>\r\n    {{/if}}\r\n</div>'}),define("modular/component/component-shoppingCart-1",["text!modular/template/template-shoppingCart-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-shoppingcart-1",template:e,helpers:{returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)},scopeConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object")},spoceOrder:function(e,t){this.orders=n.jsUtil.mustache.getContent(e,"object"),this.config=n.jsUtil.mustache.getContent(t,"object"),this.setInit(),this.setNormalTotalPrice(),this.setCrossTotalPrice(),this.setOrderAllSelect(),this.setOrderOneSelect(),this.setOrderSelectedCount()},returnPrice:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getContent(t,"number");return(o<r?o:r).toFixed(2)},returnOrderNormalPrice:function(){return this.orders.attr("orderNormalTotalPrice").toFixed(2)},returnOrderCrossPrice:function(){return this.orders.attr("orderCrossTotalPrice").toFixed(2)},returnOrderPrice:function(e){var t=n.jsUtil.mustache.getDepContent(e,"object");return t&&t.orderTotalPrice&&t.orderTotalPrice.toFixed(2)||"0.00"},returnItemSelect:function(e,t,r,o){var a=n.jsUtil.mustache.getContent(e,"boolean"),s=n.jsUtil.mustache.getContent(t,"number"),i=n.jsUtil.mustache.getContent(r,"boolean");return a&&(0!==s||i)?o.fn(this):o.inverse(this)},returnStatus:function(e,t){return 0!==n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnStock:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),a=n.jsUtil.mustache.getContent(t,"number");return o>0&&o>=a?r.fn(this):r.inverse(this)},returnNormalShow:function(e){return this.orders.attr("orderNormalTotalPrice").toFixed(2)>0?e.fn(this):e.inverse(this)},returnCrossShow:function(e){return this.orders.attr("orderCrossTotalPrice").toFixed(2)>0?e.fn(this):e.inverse(this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t}},scope:{isFirst:!0,goodsTotalPrice:{},orderTotalPrice:0,setInit:function(){var e=this,n=e.orders.attr(),t=0;$.each(n.typeObj,function(n,r){$.each(r,function(r,o){$.each(o.itemObj,function(){t+=1}),$.isEmptyObject(o.itemObj)&&(e.orders.typeObj[n][r].removeAttr("itemObj"),e.orders.typeObj[n].removeAttr(r))}),$.isEmptyObject(r)&&e.orders.typeObj.removeAttr(n)}),e.orders.attr("quantity",t)},setNormalTotalPrice:function(){var e=this,n=0,t=e.orders.attr();$.each(t.typeObj,function(t,r){$.each(r,function(r,o){var a=0,s=0,i=0,c=0,l=0;$.each(o.itemObj,function(n,d){if(2==o.type){var p=e.getNumRegion(d.priceList),u=p.minQuantity,m=p.maxQuantity;d.quantity=d.quantity>m?m:d.quantity,d.quantity=d.quantity<u?u:d.quantity,d.quantity=d.quantity>d.stock?d.stock:d.quantity,d.quantity=d.quantity>0?d.quantity:1,e.orders.typeObj[t][r].itemObj[n].attr("quantity",d.quantity),e.orders.typeObj[t][r].itemObj[n].attr("minQuantity",p.minQuantity),e.orders.typeObj[t][r].itemObj[n].attr("maxQuantity",p.maxQuantity);var f=e.getPriceList(d.priceList,d.quantity);e.orders.typeObj[t][r].itemObj[n].attr("price",f.price),e.orders.typeObj[t][r].itemObj[n].attr("vipPrice",f.vipPrice),e.orders.typeObj[t][r].itemObj[n].attr("realPrice",f.realPrice),e.orders.typeObj[t][r].itemObj[n].attr("realVipPrice",f.realVipPrice),e.orders.typeObj[t][r].itemObj[n].attr("stock",d.stock>0?d.stock:0),e.isFirst&&(e.isFirst=!1,e.orders.typeObj[t][r].itemObj[n].attr("selected",0!==d.status&&d.stock>0&&d.stock>=u)),d.selected&&0!==d.status&&d.stock>0&&(a+=d.weight*d.quantity,s+=f.price*d.quantity,i+=f.vipPrice*d.quantity,c+=f.realPrice*d.quantity,l+=f.realVipPrice*d.quantity),u&&m&&u!==-1/0&&m!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前允许购买量为: "+u+"~"+m):u&&u!==-1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最小购买量为: "+u):m&&m!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最大购买量为: "+m):e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","")}}),2==t&&(e.orders.typeObj[t][r].attr("supplierWeight",1*a),e.orders.typeObj[t][r].attr("supplierPrice",1*s),e.orders.typeObj[t][r].attr("supplierVipPrice",1*i),e.orders.typeObj[t][r].attr("supplierRealPrice",1*c),e.orders.typeObj[t][r].attr("supplierRealVipPrice",1*l)),n+=c<s?c:s})}),e.orders.attr("orderNormalTotalPrice",n)},setCrossTotalPrice:function(){var e=this,n=0,t=e.orders.attr();$.each(t.typeObj,function(t,r){$.each(r,function(r,o){var a=0,s=0,i=0,c=0,l=0;$.each(o.itemObj,function(n,d){if(0==o.type){var p=e.getNumRegion(d.priceList),u=p.minQuantity,m=p.maxQuantity;d.quantity=d.quantity>m?m:d.quantity,d.quantity=d.quantity<u?u:d.quantity,d.quantity=d.quantity>d.stock?d.stock:d.quantity,d.quantity=d.quantity>0?d.quantity:1,e.orders.typeObj[t][r].itemObj[n].attr("quantity",d.quantity),e.orders.typeObj[t][r].itemObj[n].attr("minQuantity",p.minQuantity),e.orders.typeObj[t][r].itemObj[n].attr("maxQuantity",p.maxQuantity);var f=e.getPriceList(d.priceList,d.quantity);e.orders.typeObj[t][r].itemObj[n].attr("price",f.price),e.orders.typeObj[t][r].itemObj[n].attr("vipPrice",f.vipPrice),e.orders.typeObj[t][r].itemObj[n].attr("realPrice",f.realPrice),e.orders.typeObj[t][r].itemObj[n].attr("realVipPrice",f.realVipPrice),e.orders.typeObj[t][r].itemObj[n].attr("stock",d.stock>0?d.stock:0),e.isFirst&&(e.isFirst=!1,e.orders.typeObj[t][r].itemObj[n].attr("selected",0!==d.status&&d.stock>0&&d.stock>=u)),d.selected&&0!==d.status&&d.stock>0&&(a+=d.weight*d.quantity,s+=f.price*d.quantity,i+=f.vipPrice*d.quantity,c+=f.realPrice*d.quantity,l+=f.realVipPrice*d.quantity),u&&m&&u!==-1/0&&m!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前允许购买量为: "+u+"~"+m):u&&u!==-1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最小购买量为: "+u):m&&m!==1/0?e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","当前最大购买量为: "+m):e.orders.typeObj[t][r].itemObj[n].attr("quantityDes","")}}),0==t&&(e.orders.typeObj[t][r].attr("supplierWeight",1*a),e.orders.typeObj[t][r].attr("supplierPrice",1*s),e.orders.typeObj[t][r].attr("supplierVipPrice",1*i),e.orders.typeObj[t][r].attr("supplierRealPrice",1*c),e.orders.typeObj[t][r].attr("supplierRealVipPrice",1*l)),n+=c<s?c:s})}),e.orders.attr("orderCrossTotalPrice",n)},setOrderAllSelect:function(){var e=this,n=e.orders.attr(),t=this.config.attr("optionsOpen"),r=n.quantity,o=!0;$.each(n.typeObj,function(n,a){$.each(a,function(e,n){$.each(n.itemObj,function(e,n){if(!n.selected&&(0!==n.status&&n.stock>0&&n.stock>=n.minQuantity||t))return o=!1,!1;n.selected||!(0===n.status||n.stock<=0||n.stock<n.minQuantity)||t||(r-=1)})}),e.orders.attr("allSelected",o&&!!r)})},setOrderOneSelect:function(){var e=this,n=this.orders.attr(),t=n.quantity,r=!1;$.each(n.typeObj,function(n,o){$.each(o,function(t,o){$.each(o.itemObj,function(o,a){var s=e.orders.typeObj[n][t].itemObj[o].attr("quantity");if(a.selected&&s)return r=!0,!1})}),e.orders.attr("oneSelected",r&&!!t)})},setOrderSelectedCount:function(){var e=this.orders.attr(),n=0;$.each(e.typeObj,function(e,t){$.each(t,function(e,t){$.each(t.itemObj,function(e,t){t.selected&&(n+=1)})})}),this.orders.attr("selectedCount",n)},getNumRegion:function(e){var n={},t=[],r=[],o=!1;return $.each(e,function(e,n){var a=n.min?n.min:0,s=n.max?n.max:Number.POSITIVE_INFINITY;t.push(s),r.push(a),o=!0}),o?(n.minQuantity=Math.min.apply(Math,r),n.maxQuantity=Math.max.apply(Math,t),n):{minQuantity:0,maxQuantity:Number.POSITIVE_INFINITY}},getPriceList:function(e,n){var t={},r={},o=[],a=[],s=[],i=[],c=[],l=[],d=[],p=!1;return $.each(e,function(e,n){var t=n.min?n.min:0,r=n.max?n.max:Number.POSITIVE_INFINITY,u=n.price||0===n.price?(1*n.price).toFixed(2):null,m=n.vipPrice||0===n.vipPrice?(1*n.vipPrice).toFixed(2):null,f=u?n.discount?(n.price*n.discount/10).toFixed(2):(1*n.price).toFixed(2):null,g=m?n.discount?(n.vipPrice*n.discount/10).toFixed(2):(1*n.vipPrice).toFixed(2):null;o.push({prices:{price:u,vipPrice:m,realPrice:f,realVipPrice:g},min:t,max:r}),s.push(t),a.push(r),i.push(u),c.push(m),l.push(f),d.push(g),p=!0}),p?(r.min=Math.min.apply(Math,s),r.max=Math.max.apply(Math,a),r.minPrice=Math.min.apply(Math,i),r.vipMinPrice=Math.min.apply(Math,c),r.realMinPrice=Math.min.apply(Math,l),r.realVipMinPrice=Math.min.apply(Math,d),r.maxPrice=Math.max.apply(Math,i),r.vipMaxPrice=Math.max.apply(Math,c),r.realMaxPrice=Math.max.apply(Math,l),r.realVipMaxPrice=Math.max.apply(Math,d),n<r.min?{price:r.maxPrice,vipPrice:r.vipMaxPrice,realPrice:r.realMaxPrice,realVipPrice:r.realVipMaxPrice}:n>r.max?{price:r.minPrice,vipPrice:r.vipMinPrice,realPrice:r.realMinPrice,realVipPrice:r.realVipMinPrice}:($.each(o,function(e,r){if(n>=r.min&&n<=r.max)return t={price:r.prices.price,vipPrice:r.prices.vipPrice,realPrice:r.prices.realPrice,realVipPrice:r.prices.realVipPrice},!1}),t)):{price:null,vipPrice:null,realPrice:null,realVipPrice:null}}},events:{inserted:function(){this.element.find(".component-shoppingCart-ordersDetails    .goodsList ").find(".controlGroup").css("transform","translate3d(748px, 0, 0)")},removed:function(){}}})}),define("text!modular/template/template-orderConfirm-1.mustache",[],function(){return'<div class="component-orderConfirm-content">\r\n    {{#notShow}}\r\n        <div class="component-orderConfirm-prompt">\r\n            <span class="prompt-text" style="width: 118px">温馨提示<span class="fa fa-volume-up fa-fw"></span>:</span>\r\n            <span class="prompt-text" style="width: calc(100% - 125px);">如果您购买跨境保税商品，则须提交身份证且与订单支付人、收货人保持一致，以确保订单顺利清关，尽快到达您的身边！</span>\r\n        </div>\r\n    {{/notShow}}\r\n    {{#region.config.address}}\r\n        <a href="/address-manage.html?formOrder=1&jumpUrl={{region.config.pathUrl}}" target="_self" class="component-orderConfirm-deliveryInfo">\r\n        <span class="textGroup">\r\n            <span class="text delivery-name">\r\n                <span class="name" style="letter-spacing:9px;">收货人</span>\r\n                <span class="value">{{receiveName}}</span>\r\n            </span>\r\n            <span class="text delivery-iphone">\r\n                <span class="name">联系电话</span>\r\n                <span class="value">{{receivePhone}}</span>\r\n            </span>\r\n            <span class="text delivery-address">\r\n                <span class="name">收货地址</span>\r\n                <span class="value">{{province}}{{city}}{{area}}{{address}}</span>\r\n            </span>\r\n        </span>\r\n        </a>\r\n    {{/region.config.address}}\r\n    {{spoceOrder region.response.ordersInfo}}\r\n    {{#region.response.ordersInfo}}\r\n        <div class="component-orderConfirm-orderDetails">\r\n            {{#each typeObj}}\r\n                {{#each .}}\r\n                    <div class="goodsList" type="{{type}}" supplierId="{{supplierId}}">\r\n                        <div class="header">\r\n                            <span class="circle"></span>\r\n                            <span class="text">仓库: {{returnSupplierName supplierName}}{{#if typeName}} ---- {{typeName}}{{/if}}</span>\r\n                            <span class="icon"></span>\r\n                        </div>\r\n                        <div class="body">\r\n                            {{#each itemObj}}\r\n                                <div class="itemList" itemId="{{itemId}}" goodsId="{{goodsId}}">\r\n                                    <span class="commodity-info">\r\n                                        <span class="commodity-img">\r\n                                            {{#if itemImg}}\r\n                                                <img src="{{{itemImg}}}" alt="{{goodsName}}">\r\n                                            {{else}}\r\n                                                <img src="/images/platform/account/default_img.jpg" alt="{{goodsName}}">\r\n                                            {{/if}}\r\n                                            {{#returnIsShow type}}\r\n                                                <img class="corner_mark" src="{{returnImgSrc type}}" alt="中国供销海外购">\r\n                                            {{/returnIsShow}}\r\n                                        </span>\r\n                                        <span class="commodity-description">\r\n                                            <span class="commodity-name">\r\n                                                <span class="text">{{goodsName}}</span>\r\n                                            </span>\r\n                                            {{#info}}\r\n                                                <span class="commodity-specifications">\r\n                                                    {{#returnSpec info}}\r\n                                                       <span class="name">规格</span>\r\n                                                       <span class="value">{{#each .}}{{.}}、 {{/each}}</span>\r\n                                                    {{/returnSpec}}\r\n                                                </span>\r\n                                            {{/info}}\r\n                                            {{#carton}}\r\n                                                <span class="commodity-gauge">\r\n                                                    <span class="text">箱规: {{carton}}</span>\r\n                                                </span>\r\n                                            {{/carton}}\r\n                                            {{#notShow}}\r\n                                                <span class="commodity-itemId">\r\n                                                    <span class="text">商品编号: {{itemId}}</span>\r\n                                                </span>\r\n                                            {{/notShow}}\r\n                                        </span>\r\n                                        <span class="commodity-number">\r\n                                           <span class="commodity-price">{{returnPrice realPrice}}</span>\r\n                                           <span class="commodity-quantity">{{quantity}}</span>\r\n                                        </span>\r\n                                    </span>\r\n                                </div>\r\n                            {{/each}}\r\n                            <span class="commodity-priceInfo">\r\n                                <span class="commodity-taxFee">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{returnTaxFee taxFee type}}</span>\r\n                                        <span class="text">税费</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-postFee">\r\n                                    <span class="commodity-price">\r\n                                        {{{returnPostFee type postFee}}}\r\n                                        <span class="text">运费</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-totalPrice">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{totalPrice}}</span>\r\n                                        <span class="symbol">￥</span>\r\n                                        <span class="text">商品总价</span>\r\n                                    </span>\r\n                                </span>\r\n                            </span>\r\n                            <a class="commodity-coupon">\r\n                                <span class="text">优惠券<b>(优惠金额：<i>￥{{returnPrice discountPrice}})</i></b></span>\r\n                                <span class="icon icon_right icon_href"></span>\r\n                            </a>\r\n                            <span class="commodity-remark">\r\n                                <input type="text" placeholder="买家留言：选填，填写内容已和客服确认">\r\n                            </span>\r\n                            <span class="commodity-payInfo">\r\n                                <span class="commodity-actualPrice">\r\n                                    <span class="commodity-price">\r\n                                        <span class="money">{{orderDiscountPrice}}</span>\r\n                                        <span class="symbol">￥</span>\r\n                                        <span class="text">实际价格</span>\r\n                                    </span>\r\n                                </span>\r\n                                <span class="commodity-payBtn">\r\n                                    {{#if committed}}\r\n                                        <span>{{commitText}}</span>\r\n                                    {{else}}\r\n                                        {{#if commitText}}\r\n                                            <span class="btn btn_commit">{{commitText}}</span>\r\n                                        {{else}}\r\n                                            <span class="btn btn_commit">提交订单</span>\r\n                                        {{/if}}\r\n                                    {{/if}}\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                {{/each}}\r\n            {{/each}}\r\n        </div>\r\n    {{/region.response.ordersInfo}}\r\n    <div region="payChoose"></div>\r\n</div>'}),define("modular/component/component-orderConfirm-1",["text!modular/template/template-orderConfirm-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderconfirm-1",template:e,helpers:{spoceOrder:function(e){this.orders=n.jsUtil.mustache.getContent(e),this.setTaxFee(),this.setOrderPrice()},returnSpec:function(e,t){
var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)},returnPrice:function(e){return n.jsUtil.mustache.getContent(e,"number").toFixed(2)},returnSupplierName:function(e){var t="",r=n.jsUtil.mustache.getDepContent(e,"string");switch(r){case"天天仓":t="保税TT仓";break;case"粮油仓":t="保税LY仓";break;case"行云仓":t="保税XY仓";break;case"富邦仓":t="保税FB仓";break;default:t=r}return t},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnPostFee:function(e,t){return n.jsUtil.mustache.getContent(e,"string"),'<span class="money">'+n.jsUtil.mustache.getContent(t,"number").toFixed(2)+'</span><span class="symbol">￥</span>'},returnTaxFee:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 2==n.jsUtil.mustache.getContent(t,"number")?"总价已含税费":"￥"+r}},scope:{setTaxFee:function(){var e=this,n=e.orders.attr();$.each(n.typeObj,function(n,t){$.each(t,function(t,r){var o=0,a=0,s=0,i=r.postFee,c=r.supplierPrice;$.each(r.itemObj,function(l,d){if(0==d.freeTax&&0==r.type){var p=(d.quantity||0)*(d.price||0),u=p/c*i,m=(p+u)/(1-d.exciseTax)*d.exciseTax,f=(p+u+m)*d.incrementTax,g=.7*(m+f);e.orders.typeObj[n][t].itemObj[l].attr("taxFee",g),e.orders.typeObj[n][t].itemObj[l].attr("postFee",u),o+=g,a+=m,s+=f}}),e.orders.typeObj[n][t].attr("taxFee",1*o.toFixed(2)),e.orders.typeObj[n][t].attr("exciseTaxFee",1*a.toFixed(2)),e.orders.typeObj[n][t].attr("incrementTaxFee",1*s.toFixed(2))})})},setOrderPrice:function(){var e=this,n=this.orders.attr();$.each(n.typeObj,function(n,t){$.each(t,function(t,r){var o=1*r.supplierRealPrice,a=r.discountPrice||0,s=1*r.taxFee+1*r.supplierRealPrice+1*r.postFee;e.orders.typeObj[n][t].attr("totalPrice",(1*o).toFixed(2)),e.orders.typeObj[n][t].attr("orderPrice",(1*s).toFixed(2)),e.orders.typeObj[n][t].attr("orderDiscountPrice",(1*s-1*a).toFixed(2))})})}},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-orderList-1.mustache",[],function(){return'<div class="component-orderList-content">\r\n    <div class="component-orderList-stateGroup">\r\n        <div class = "stateGroup-content">\r\n            <span class="state state_all {{region.config.orderAll}}">\r\n                所有订单\r\n            </span>\r\n            <span class="state state_needPay {{region.config.orderNeedPay}}">\r\n            待付款\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needPay}}\r\n                        <span class="number">{{region.response.orderStatus.needPay}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_needDeliver {{region.config.orderNeedDeliver}}">\r\n            待发货\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needDeliver}}\r\n                        <span class="number">{{region.response.orderStatus.needDeliver}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_needReceive {{region.config.orderNeedReceive}}">\r\n            待收货\r\n                {{#if region.config.isLogin}}\r\n                    {{#if region.response.orderStatus.needReceived}}\r\n                        <span class="number">{{region.response.orderStatus.needReceived}}</span>\r\n                    {{/if}}\r\n                {{/if}}\r\n        </span>\r\n            <span class="state state_finished {{region.config.orderFinished}}">已完成</span>\r\n        </div>\r\n    </div>\r\n\r\n    {{#returnList region.response.orderInfo.orderList}}\r\n        <div class="component-orderList-orderDetails" style="min-height:{{region.config.minHeight}}px">\r\n            {{#each .}}\r\n                <div class="orderItem">\r\n                    <div class="header">\r\n                        <span class="circle"></span>\r\n                        <span class="text">\r\n                        <span>订单号: {{orderId}}</span>\r\n                        <span>({{returnNewTime createTime}})</span>\r\n                    </span>\r\n                        <span class="state {{returnStatusClass status}}">\r\n                            {{returnStatusText status orderExpressList orderDetail.payType}}\r\n                        </span>\r\n                    </div>\r\n                    <div class="body">\r\n                        {{#each orderGoodsList}}\r\n                            <span class="order-commodity">\r\n                                <span class="commodity-img">\r\n                                    <a href="{{{href}}}" itemId="{{itemId}}">\r\n                                        {{#if itemImg}}\r\n                                            <img src="{{{itemImg}}}" alt="{{itemName}}">\r\n                                        {{else}}\r\n                                            <img src="/images/platform/account/default_img.jpg" alt="{{itemName}}">\r\n                                        {{/if}}\r\n                                        {{#returnIsShow orderFlag}}\r\n                                            <img class="corner_mark" src="{{returnImgSrc orderFlag}}" alt="中国供销海外购">\r\n                                        {{/returnIsShow}}\r\n                                    </a>\r\n                                </span>\r\n                                <span class="commodity-info">\r\n                                    <span class="commodity-name">\r\n                                        <a href="{{{href}}}">\r\n                                            <span class="text">{{itemName}}</span>\r\n                                        </a>\r\n                                    </span>\r\n                                    {{#returnSpec itemInfo}}\r\n                                        <span class="commodity-itemId">\r\n                                            <span class="text">规格：{{#each .}}{{.}}、 {{/each}}</span>\r\n                                        </span>\r\n                                    {{/returnSpec}}\r\n                                </span>\r\n                                <span class="commodity-number">\r\n                                    <span class="commodity-price">{{returnPrice actualPrice}}</span>\r\n                                    <span class="commodity-quantity">{{itemQuantity}}</span>\r\n                                </span>\r\n                            </span>\r\n                        {{/each}}\r\n                        {{#orderDetail}}\r\n                        <span class="commodity-totalPrice">\r\n                            <span class="commodity-totalAmount {{^returnDeliverCls ../status}}isMiddle{{/returnDeliverCls}}">\r\n                                <span class="logistics">配送费:￥{{returnPrice postFee}}</span>\r\n                                <span class="taxFee">综合税:￥{{returnPrice taxFee}}</span>\r\n                                <span class="money">{{returnPrice payment}}</span>\r\n                                <span class="symbol">￥</span>\r\n                                <span class="text">总金额</span>\r\n                            </span>\r\n                            <span class="commodity-deliverDes">\r\n                                {{returnDeliverDes ../createType ../status orderFlag}}\r\n                            </span>\r\n                        </span>\r\n                        {{/orderDetail}}\r\n                        <span class="order-btnControl">\r\n                        <span class="btnBox">\r\n                            {{#returnBtnDelivery status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_confirmDelivery">确认收货</a>\r\n                            {{/returnBtnDelivery}}\r\n                            {{#returnBtnToPay status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" orderFlag="{{orderFlag}}" class="btn btn_toPay">立即付款</a>\r\n                            {{/returnBtnToPay}}\r\n                            {{#returnBtnRefund status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_refund">申请退款</a>\r\n                            {{/returnBtnRefund}}\r\n                            {{#returnBtnDel status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_delOrder">删除订单</a>\r\n                            {{/returnBtnDel}}\r\n                            {{#returnBtnCancelOrder status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_cancelOrder">取消订单</a>\r\n                            {{/returnBtnCancelOrder}}\r\n                            {{#returnBtnCloseOrder status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_closeOrder">关闭订单</a>\r\n                            {{/returnBtnCloseOrder}}\r\n                            {{#returnBtnLogistics status}}\r\n                                <a href="javascript:void(0)" orderId="{{orderId}}" class="btn btn_viewLogistics">查看物流</a>\r\n                            {{/returnBtnLogistics}}\r\n                            <a href="/orderDetail.html?orderId={{orderId}}" target="_self" class="btn btn_viewDetail">查看详情</a>\r\n                        </span>\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="isLoading">\r\n            <div class="component-load-text">\r\n                <span>请下拉加载...</span>\r\n            </div>\r\n        </div>\r\n        <div region="payChoose"></div>\r\n    {{/returnList}}\r\n\r\n    {{^returnList region.response.orderInfo.orderList}}\r\n        <div class="order-empty">\r\n            <img src="/images/platform/order/empty.png" alt="中国供销海外购">\r\n            <span class="text">还没有这类订单呢！</span>\r\n        </div>\r\n    {{/returnList}}\r\n\r\n</div>'}),define("modular/component/component-orderList-1",["text!modular/template/template-orderList-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderlist-1",template:e,helpers:{returnList:function(e,t){var r=n.jsUtil.mustache.getDepContent(e);return $.isArray(r)&&r.length>0?t.fn(r):t.inverse(r)},returnNewTime:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,10):""},returnDeliverCls:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return 0===r||1===r||11===r||12===r||2===r||3===r||4===r||5===r?t.fn(this):t.inverse(this)},returnDeliverDes:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),a=n.jsUtil.mustache.getContent(t,"number"),s=n.jsUtil.mustache.getContent(r,"number");if(0==s){if(0===a)return 4!==o?"订单付款成功后，我们将在两个工作日之内尽快给您发货！":"预售产品我们会在付款成功后给您安排发货，请您耐心等待！";if(1===a||11===a||12===a||2===a||3===a||4===a||5===a)return 4!==o?"付款成功，我们将在两个工作日之内尽快给您发货！":"付款成功, 预售产品我们会尽快给您安排发货，请您耐心等待！"}else if(2==s){if(0===a)return 4!==o?"订单付款成功后，我们将在72小时之内尽快给您发货！":"预售产品我们会在付款成功后给您安排发货，请您耐心等待！";if(1===a||11===a||12===a||2===a||3===a||4===a||5===a)return 4!==o?"付款成功，我们会在72小时内将货物发出，24小时后反馈物流单号!":"付款成功, 预售产品我们会尽快给您安排发货，请您耐心等待！"}},returnStatusClass:function(e){if(6===n.jsUtil.mustache.getContent(e,"number"))return"state_finished"},returnStatusText:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),a=n.jsUtil.mustache.getDepContent(t,"object");return n.jsUtil.mustache.getDepContent(r,"number"),0===o?"待付款":1===o||11===o||12===o?"已支付":2===o||3===o||4===o||5===o?"待发货":6===o?"待收货":7===o?"交易完成":8===o?"已退款":9===o?"交易关闭":21===o?"退款中":99===o?a[0].status:void 0},returnItemInfo:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string");return r=r?JSON.parse(r):null,"object"==typeof r?t.fn(r):t.inverse(r)},returnPrice:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t>=0?t.toFixed(2):null},returnBtnDelivery:function(e,t){if(6===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnBtnRefund:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(0!==r&&7!==r&&8!==r&&9!==r&&21!==r)return t.fn(t.context||this)},returnBtnDel:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(7===r||8===r||9===r)return t.fn(t.context||this)},returnBtnCancelOrder:function(e,t){n.jsUtil.mustache.getContent(e,"number")},returnBtnCloseOrder:function(e,t){if(0===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnBtnLogistics:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(6===r||7===r)return t.fn(t.context||this)},returnBtnToPay:function(e,t){if(0===n.jsUtil.mustache.getContent(e,"number"))return t.fn(t.context||this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-orderDetail-1.mustache",[],function(){return'{{#region.response.orderInfo}}\r\n    <div class="component-orderDetail-content">\r\n        <div class="component-orderDetail-thanks">\r\n            <span class="icon icon_ok"></span>\r\n            <span class="text">\r\n                    感谢您的使用，期待再次为您服务！\r\n                </span>\r\n        </div>\r\n        <div class="component-orderDetail-deliveryInfo">\r\n            <span class="icon icon_address"></span>\r\n            <span class="textGroup">\r\n                    <span class="text delivery-title">\r\n                        <span class="name delivery-name font_blod">{{orderDetail.receiveName}}</span>\r\n                        <span class="value delivery-iphone font_blod">{{orderDetail.receivePhone}}</span>\r\n                    </span>\r\n                    <span class="text delivery-address">\r\n                        <span class="name">收货地址</span>\r\n                        <span class="value">\r\n                            {{orderDetail.receiveProvince}}{{orderDetail.receiveCity}}{{orderDetail.receiveArea}}{{orderDetail.receiveAddress}}\r\n                        </span>\r\n                    </span>\r\n                </span>\r\n        </div>\r\n        <div class="component-orderDetail-log">\r\n            <span class="text order-code">\r\n                <span class="name">订单编码</span>\r\n                <span class="value">{{orderId}}</span>\r\n            </span>\r\n            <span class="text logisticsFee">\r\n                <span class="name">订单时间</span>\r\n                <span class="value">{{returnNewTime2 createTime}}</span>\r\n            </span>\r\n            <span class="text order-state">\r\n                <span class="name">订单状态</span>\r\n                <span class="value">{{returnOrderState status orderExpressList}}</span>\r\n                {{#returnPay status}}\r\n                    <span class="btnBox">\r\n                       <span class="btn btn_toPay" orderId="{{orderId}}" orderFlag="{{orderFlag}}">去支付</span>\r\n                    </span>\r\n                {{/returnPay}}\r\n            </span>\r\n        </div>\r\n        {{#returnPaymentMethod status orderDetail.payType}}\r\n            <div class="component-orderDetail-paymentMethod">\r\n                <span class="name">支付方式</span>\r\n                <span class="value">{{paymentMethod}}</span>\r\n            </div>\r\n        {{/returnPaymentMethod}}\r\n        <div class="component-orderDetail-show">\r\n            <div class="orderItem">\r\n                <div class="header">\r\n                    <span class="circle"></span>\r\n                    <span class="text">\r\n                        <span>订单号: {{orderId}}</span>\r\n                        <span>({{returnNewTime createTime}})</span>\r\n                    </span>\r\n                    <span class="btnBox">\r\n                        {{#returnLogistics status}}\r\n                            <span class="btn btn_viewLogistics" orderId="{{orderId}}">看物流</span>\r\n                        {{/returnLogistics}}\r\n                    </span>\r\n                </div>\r\n                <div class="body">\r\n                    {{#each orderGoodsList}}\r\n                        <span class="commodity-info">\r\n                            <span class="commodity-img">\r\n                                <a href="{{{href}}}" itemId="{{itemId}}">\r\n                                  {{#if itemImg}}\r\n                                      <img src="{{{itemImg}}}" alt="{{itemName}}">\r\n                                  {{else}}\r\n                                      <img src="/images/platform/account/default_img.jpg" alt="{{itemName}}">\r\n                                  {{/if}}\r\n                                  {{#returnIsShow orderFlag}}\r\n                                      <img class="corner_mark" src="{{returnImgSrc orderFlag}}" alt="中国供销海外购">\r\n                                  {{/returnIsShow}}\r\n                                </a>\r\n                            </span>\r\n                            <span class="commodity-info">\r\n                                    <span class="commodity-name">\r\n                                        <span class="text">{{itemName}}</span>\r\n                                    </span>\r\n                                    {{#returnSpec itemInfo}}\r\n                                        <span class="commodity-itemId">\r\n                                            <span class="text">规格：{{#each .}}{{.}}、 {{/each}}</span>\r\n                                        </span>\r\n                                    {{/returnSpec}}\r\n                                </span>\r\n                            <span class="commodity-number">\r\n                                <span class="commodity-price">{{returnPrice actualPrice}}</span>\r\n                                <span class="commodity-quantity">{{itemQuantity}}</span>\r\n                            </span>\r\n                        </span>\r\n                    {{/each}}\r\n                    <span class="commodity-priceList">\r\n                        <span class="text shopTotalPrice">\r\n                            <span class="value">￥{{returnShopPrice orderGoodsList}}</span>\r\n                            <span class="name">商品总额</span>\r\n                        </span>\r\n                        <span class="text shopTotalPrice">\r\n                            <span class="value">￥{{returnTaxFee orderDetail.taxFee}}</span>\r\n                            <span class="name">税费总额</span>\r\n                        </span>\r\n                        <span class="text logisticsFee">\r\n                            <span class="value">￥{{returnPostFee orderDetail.postFee}}</span>\r\n                            <span class="name" style="letter-spacing:9px;">物流费</span>\r\n                        </span>\r\n                    </span>\r\n                    <span class="commodity-totalPrice">\r\n                        <span class="commodity-attention"></span>\r\n                        <span class="commodity-totalAmount">\r\n                            <span class="money">{{orderDetail.payment}}</span>\r\n                            <span class="symbol">￥</span>\r\n                            <span class="text">金额</span>\r\n                        </span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div region="payChoose"></div>\r\n{{/region.response.orderInfo}}'}),define("modular/component/component-orderDetail-1",["text!modular/template/template-orderDetail-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-orderdetail-1",template:e,helpers:{returnNewTime:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,10):""},returnNewTime2:function(e){var t=n.jsUtil.mustache.getContent(e,"string");return t?t.substring(0,19):""},returnItemInfo:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string");return r=r?JSON.parse(r):null,"object"==typeof r?t.fn(r):t.inverse(r)},returnPrice:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t?JSON.parse(t):null,t>=0?t.toFixed(2):null},returnShopPrice:function(e){var t=0,r=n.jsUtil.mustache.getDepContent(e,"object");return $.each(r,function(e,n){t+=n.actualPrice*n.itemQuantity}),t.toFixed(2)},returnTaxFee:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t>0?t:0,t.toFixed(2)},returnPostFee:function(e){var t=n.jsUtil.mustache.getContent(e,"number");return t=t>0?t:0,t.toFixed(2)},returnOrderState:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getDepContent(t,"object");return 0===r?"待付款":1===r||11===r||12===r?"已付款":2===r||3===r||4===r||5===r||6===r?"待收货":7===r?"交易完成":8===r?"已退款":9===r?"交易关闭":21===r?"退款中":99===r?o[0].status:void 0},returnPaymentMethod:function(e,t,r){var o=n.jsUtil.mustache.getContent(e,"number"),a=n.jsUtil.mustache.getContent(t,"number"),s=1===a?"微信支付":2===a?"支付宝":3===a?"银联支付":5===a?"易宝支付":"";return 0!==o&&8!==o?r.fn({paymentMethod:s}):r.inverse({paymentMethod:s})},returnPay:function(e,t){return 0===n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnLogistics:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");if(6===r||7===r)return t.fn(t.context||this)},returnImgSrc:function(e){var t="";switch(n.jsUtil.mustache.getContent(e,"number")){case 0:t="/images/platform/tag/icon_cross.png";break;case 2:t="/images/platform/tag/icon_normal.png"}return t},returnIsShow:function(e,t){return void 0!=n.jsUtil.mustache.getContent(e,"number")?t.fn(this):t.inverse(this)},returnSpec:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=r&&JSON.parse(r);return r&&t.fn(o)}},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-logistics-1.mustache",[],function(){return'<div class="component-logistics-content">\r\n    {{#each region.response.orderInfo.orderExpressList}}\r\n        <div class="component-logistics-item">\r\n            <div class="component-logistics-basic {{#if region.config.isMore}}isMore{{/if}}">\r\n                <div class="commodityDescription">\r\n                    {{#if region.config.isMore}}\r\n                        <div class="text shop">\r\n                            <div class="name">商品名称</div>\r\n                            <div class="value">{{itemName}}</div>\r\n                        </div>\r\n                    {{/if}}\r\n                    <div class="text code">\r\n                        <div class="name">运单编号</div>\r\n                        <div class="value">{{#if expressId}}{{expressId}}{{else}}暂无{{/if}}</div>\r\n                    </div>\r\n                    <div class="text carrier">\r\n                        <div class="name">承运信息</div>\r\n                        <div class="value">{{#if expressName}}{{expressName}}{{else}}暂无{{/if}}</div>\r\n                    </div>\r\n                </div>\r\n                {{#returnLength region.config.length}}\r\n                    <span class="commodityBtnBox">\r\n                        <span class="btn btn_open" index="{{@index}}">展开详情</span>\r\n                    </span>\r\n                {{/returnLength}}\r\n            </div>\r\n            {{#if infoArr}}\r\n                <div class="component-logistics-details" {{#returnLength region.config.length}}style="display:none;"{{/returnLength}}>\r\n                    {{#each infoArr}}\r\n                        <span class="logisticsItem newest">\r\n                            <span class="text">\r\n                                <span class="description">\r\n                                    {{AcceptStation}}\r\n                                </span>\r\n                                <span class="time">\r\n                                    {{AcceptTime}}\r\n                                </span>\r\n                            </span>\r\n                        </span>\r\n                    {{/each}}\r\n                </div>\r\n            {{/if}}\r\n        </div>\r\n    {{/each}}\r\n</div>'}),define("modular/component/component-logistics-1",["text!modular/template/template-logistics-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-logistics-1",template:e,helpers:{returnLength:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return r>1?t.fn(this):t.inverse(r)}},scope:{},events:{inserted:function(){},removed:function(){},".component-logistics-item .component-logistics-basic .btn_open touchend":function(e){var n=this,t=$(e),r=n.element,o=t.attr("index"),a=t.parents(".component-logistics-item"),s=$(window).scrollTop(),i=155*o;r.find(".component-logistics-basic .btn").text("展开详情"),r.find(".component-logistics-basic .btn").addClass("btn_open"),r.find(".component-logistics-basic .btn").removeClass("btn_close"),r.find(".component-logistics-details").css({display:"none"}),a.find(".component-logistics-details").css({display:"block"}),s>i&&$("html,body").animate({scrollTop:i-10}),t.removeClass("btn_open"),t.addClass("btn_close"),t.text("关闭详情")},".component-logistics-item .component-logistics-basic .btn_close touchend":function(e){var n=this,t=$(e),r=n.element,o=t.attr("index"),a=$(window).scrollTop(),s=155*o;r.find(".component-logistics-basic .btn").text("展开详情"),r.find(".component-logistics-basic .btn").addClass("btn_open"),r.find(".component-logistics-basic .btn").removeClass("btn_close"),r.find(".component-logistics-details").css({display:"none"}),a>s&&$("html,body").animate({scrollTop:s-10})}}})}),define("text!modular/template/template-alert-discount-1.mustache",[],function(){return'{{#region.config.isShow}}\r\n<div class="component-alert-discount-content">\r\n    <div class="component-alert-discount-alert">\r\n        <div class="msg-btn"></div>\r\n        <div class="cancel-btn"></div>\r\n    </div>\r\n</div>\r\n{{/region.config.isShow}}'}),define("modular/component/component-alert-discount-1",["text!modular/template/template-alert-discount-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-alert-discount-1",template:e,helpers:{},scope:{},events:{inserted:function(){}}})}),define("text!modular/template/template-discount-1.mustache",[],function(){
return'<div class="component-discount-content">\r\n\r\n    {{#retrunStatus region.config.type "personalCenter"}}\r\n        <div class="component-discount-type">\r\n            <ul>\r\n                <li class="{{addElementClass region.config.status 0 "active"}}" type="0">可使用</li>\r\n                <li class="{{addElementClass region.config.status 1 "active"}}" type="1">已使用</li>\r\n            </ul>\r\n        </div>\r\n        {{#returnObject region.response}}\r\n            <div class="component-discount-list personalCenter">\r\n                {{#each region.response}}\r\n                    <div class="list-item {{returnType type region.config.status}}">\r\n                        <ul>\r\n                            <li>{{returnPrice rule.deductibleValue rule.valueType}}</li>\r\n                            <li>{{name}}</li>\r\n                            <li>{{returnRegion rule.range}}</li>\r\n                            <li>{{returnTime startTime endTime}}</li>\r\n                        </ul>\r\n                        {{#retrunRule rule.range 0}}\r\n                            <div class="availableAll">\r\n                                <b>前去购买</b>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 1}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 2}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 3}}\r\n                            <div class="classification" index="{{@index}}">\r\n                                <b>查看分类</b>\r\n                                <i><span>注:</span><span>跳转至可使用该优惠券的商品分类界面</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                        {{#retrunRule rule.range 4}}\r\n                            <div class="lookGoodsDetail" index="{{@index}}">\r\n                                <b>查看商品</b>\r\n                                <i><span>注:</span><span>随机跳转至可使用该优惠券的某商品详情</span></i>\r\n                            </div>\r\n                        {{/retrunRule}}\r\n                    </div>\r\n                {{/each}}\r\n            </div>\r\n        {{/returnObject}}\r\n        {{^returnObject region.response}}\r\n            <div class="component-discount-list nothing">\r\n                <span class="text">{{returnText region.config.status}}</span>\r\n            </div>\r\n        {{/returnObject}}\r\n    {{/retrunStatus}}\r\n\r\n    {{#retrunStatus region.config.type "orderConfirm"}}\r\n        {{#returnOrder region.response.orderDiscount}}\r\n            <div class="component-discount-list orderConfirm">\r\n                {{#returnInfo region.response.orderDiscount.info region.config.showDiscount}}\r\n                    {{#each .}}\r\n                        {{#each .}}\r\n                            <div discountType="{{../@key}}" couponId="{{couponId}}" class="list-item\r\n                                {{returnType type}}\r\n                                {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}\r\n                                {{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">\r\n                                <ul>\r\n                                    <li>{{returnPrice rule.deductibleValue rule.valueType}}</li>\r\n                                    <li>{{name}}</li>\r\n                                    <li>{{returnRegion rule.range}}</li>\r\n                                    <li>{{returnTime startTime endTime}}</li>\r\n                                </ul>\r\n                                {{#retrunRule rule.superposition 1}}\r\n                                    <div class="superposition">\r\n                                        <b class="{{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}">正在使用</b>\r\n                                        <b class="{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">已被使用</b>\r\n                                        <b class="\r\n                                             {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}\r\n                                         ">可叠加使用</b>\r\n                                    </div>\r\n                                {{/retrunRule}}\r\n                                {{#retrunRule rule.superposition 0}}\r\n                                    <div class="unSuperposition">\r\n                                        <b class="{{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}">正在使用</b>\r\n                                        <b class="{{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}">已被使用</b>\r\n                                        <b class="\r\n                                             {{returnSelect ../@key couponId region.config.chooseArr region.config.choose}}\r\n                                             {{returnLose ../@key couponId region.config.chooseArr region.config.choose region.config.showDiscount}}\r\n                                         ">不可叠加使用</b>\r\n                                    </div>\r\n                                {{/retrunRule}}\r\n                            </div>\r\n                        {{/each}}\r\n                    {{/each}}\r\n                {{/returnInfo}}\r\n            </div>\r\n        {{/returnOrder}}\r\n    {{/retrunStatus}}\r\n\r\n</div>'}),define("modular/component/component-discount-1",["text!modular/template/template-discount-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-discount-1",template:e,helpers:{retrunStatus:function(e,t,r){return n.jsUtil.mustache.getContent(e,"string")===n.jsUtil.mustache.getContent(t,"string")?r.fn(this):r.inverse(this)},returnOrder:function(e,t){var r=n.jsUtil.mustache.getDepContent(e,"object");return $.isEmptyObject(r)?t.inverse(this):t.fn(this)},returnType:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=n.jsUtil.mustache.getContent(t,"number"),a="discount_1_normal";return"新人券"===r?(0===o&&(a="discount_2_normal normal"),1===o&&(a="discount_2_lose lose")):(0===o&&(a="discount_1_normal normal"),1===o&&(a="discount_1_lose lose")),a},returnPrice:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number");return"1"===n.jsUtil.mustache.getContent(t,"string")?"￥"+r.toFixed(2):r+"折"},returnRegion:function(e){var t=n.jsUtil.mustache.getDepContent(e,"string");return"0"===t?"适用范围：全场通用":"1"===t||"2"===t||"3"===t?"适用范围：部分商品":"适用范围：特定商品"},returnTime:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string"),o=n.jsUtil.mustache.getContent(t,"number");return r&&o?"使用时间："+r+"-"+o:r?"开始时间："+r:o?"截至时间："+o:"使用时间：无期限"},retrunRule:function(e,t,r){return n.jsUtil.mustache.getDepContent(e,"string")===n.jsUtil.mustache.getDepContent(t,"string")?r.fn(this):r.inverse(this)},returnText:function(e){var t=n.jsUtil.mustache.getDepContent(e,"string");return"0"===t?"你好！目前暂无可使用的优惠券！":"1"===t?"你好！目前暂无已使用的优惠券！":void 0},returnInfo:function(e,t,r){var o={},a=n.jsUtil.mustache.getDepContent(e,"object"),s=n.jsUtil.mustache.getDepContent(t,"object");return $.each(a,function(e,n){$.each(n.pool,function(n,t){o[e]=o[e]||[],o[e].push(s[e].pool[t])})}),r.fn(o)},returnSelect:function(e,t,r,o){var a=n.jsUtil.mustache.getDepContent(e,"string"),s=n.jsUtil.mustache.getDepContent(t,"string"),i=n.jsUtil.mustache.getDepContent(r,"object"),c=n.jsUtil.mustache.getDepContent(o,"string");return"superposition"===a?-1!==$.inArray(s,i)?"select":"":"unSuperposition"===a?s===c?"select":"":void 0},returnLose:function(e,t,r,o,a){var s=n.jsUtil.mustache.getDepContent(e,"string"),i=n.jsUtil.mustache.getDepContent(t,"string"),c=n.jsUtil.mustache.getDepContent(r,"object"),l=n.jsUtil.mustache.getDepContent(o,"string"),d=n.jsUtil.mustache.getDepContent(a,"object");if("superposition"===s){if(-1!==$.inArray(i,c))return"";if(-1!==$.inArray(i,Object.keys(d[s].chooseObj)))return"lose"}if("unSuperposition"===s){if(i===l)return"";if(-1!==$.inArray(i,Object.keys(d[s].chooseObj)))return"used";if(l&&"-1"!==l)return"lose"}}},scope:{},events:{inserted:function(e){},removed:function(){}}})}),define("text!modular/template/template-forgetPassword-1.mustache",[],function(){return'<div class="component-forgetPassword-content">\r\n    <div class="component-forgetPassword-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="tel" pattern="[0-9]*" id="account" name="account" placeholder="请输入手机号码..." can-value="region.request.account"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-forgetPassword-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n            <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n            <span class="control">获取验证码</span>\r\n        </span>\r\n    </div>\r\n    <div class="component-forgetPassword-password {{password_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="password" name="password" placeholder="请输入6-12位密码..." can-value="region.request.password"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <div class="component-forgetPassword-confirmPassword  {{confirmPassword_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="请再次确认密码..." can-value="region.request.confirmPassword"/>\r\n        <span class="iconRight icon_eye"></span>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-forgetPassword-forgetPasswordBtn {{forgetPasswordBtn_state}}">提交密码</a>\r\n</div>'}),define("modular/component/component-forgetPassword-1",["text!modular/template/template-forgetPassword-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-forgetpassword-1",template:e,helpers:{},scope:{account_state:"",validation_state:"",password_state:"",confirmPassword_state:"",forgetPasswordBtn_state:"",validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)},validateConfirmPassword:function(e,n){return""!==n.trim()&&e===n&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-forgetPassword-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-forgetPassword-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},"#confirmPassword blur":function(e){var n=this,t=$(e),r=n.element,o=r.find("#password");n.scope.validateConfirmPassword(o.val(),t.val())?n.scope.attr("confirmPassword_state",""):n.scope.attr("confirmPassword_state","state_error")},".component-forgetPassword-forgetPasswordBtn touchend":function(){var e=this,n=e.element;n.find("#account").trigger("blur"),n.find("#password").trigger("blur"),n.find("#validation").trigger("blur"),n.find("#confirmPassword").trigger("blur");var t="state_error"!==e.scope.attr("account_state"),r="state_error"!==e.scope.attr("validation_state"),o="state_error"!==e.scope.attr("password_state"),a="state_error"!==e.scope.attr("confirmPassword_state");t&&r&&o&&a?e.scope.attr("forgetPasswordBtn_state",""):e.scope.attr("forgetPasswordBtn_state","state_error")}}})}),define("text!modular/template/template-pagination-1.mustache",[],function(){return'\r\n{{spcRegion region}}\r\n{{spcModule module}}\r\n{{#if region.response.pagination}}\r\n    {{#if region.response.pagination.totalRows}}\r\n        <div class="component-pagination-content">\r\n            <ul class ="pagination_ul">\r\n                <li class="pagination_page {{returnLose region.response.pagination.currentPage 1}}">\r\n                    <a class="pagination_btn prevBtn">上一页</a>\r\n                </li>\r\n                {{#regionProcessing region.response.pagination}}\r\n                    <li class="pagination_page">\r\n                        <select class="pagination_select">\r\n                            {{#pageList}}\r\n                                <option value ="{{index}}">第 {{index}} 页</option>\r\n                            {{/pageList}}\r\n                        </select>\r\n                    </li>\r\n                {{/regionProcessing}}\r\n                <li class="pagination_page {{returnLose region.response.pagination.currentPage region.response.pagination.totalPages}}">\r\n                    <a class="pagination_btn nextBtn">下一页</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    {{/if}}\r\n{{/if}}'}),define("modular/component/component-pagination-1",["text!modular/template/template-pagination-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-pagination-1",template:e,helpers:{spcRegion:function(e){this.region=n.jsUtil.mustache.getContent(e,"object")},spcModule:function(e){this.module=n.jsUtil.mustache.getContent(e,"object")},returnLose:function(e,t){var r=n.jsUtil.mustache.getContent(e,"number"),o=n.jsUtil.mustache.getContent(t,"number");return r&&r===o?"lose":""},regionProcessing:function(e,t){for(var r=[],o=n.jsUtil.mustache.getContent(e,"object"),a=(o.attr("currentPage"),1*o.attr("totalPages")),s=0;s<a;s++)r.push({index:s+1});return o.attr("pageList",r),t.fn(o)}},scope:{},events:{inserted:function(e){var n=this,t=$(e),r=n.scope.region||{},o=(r.response||{}).pagination,a=o&&o.attr("currentPage"),s=t.find(".pagination_select > option")[a-1];s&&(s.selected=!0)},".pagination_ul li:not(.lose):not(.active) > a.pagination_btn touchend":function(e){var n=this,t=$(e),r=n.scope.region,o=n.scope.module,a=r.response.pagination,s=1*a.attr("currentPage"),i=1*a.attr("totalPages");t.hasClass("prevBtn")?(s=s>1?1*s-1:1,a.attr("currentPage",1*s)):t.hasClass("nextBtn")&&(s=s<i?1*s+1:i,a.attr("currentPage",1*s)),r.config&&"object"==typeof r.config&&"function"==typeof r.config.eventFunc&&r.config.eventFunc(o,s)},".pagination_ul li > .pagination_select change":function(e){var n=this,t=$(e),r=n.scope.region,o=n.scope.module,a=1*t.find("option:selected").val();r.config&&"object"==typeof r.config&&"function"==typeof r.config.eventFunc&&r.config.eventFunc(o,a>0?a:1)}}})}),define("text!modular/template/template-share-1.mustache",[],function(){return'<div class="component-share-content">\r\n    <p>请长按图片识别以下二维码<br>进入推手公众平台！</p>\r\n    <img src="/images/platform/qr_share.png" alt="中国供销海外购-推手平台">\r\n</div>'}),define("modular/component/component-share-1",["text!modular/template/template-share-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-share-1",template:e,helpers:{},scope:{},events:{inserted:function(){},removed:function(){}}})}),define("text!modular/template/template-apply-1.mustache",[],function(){return'<div class="component-apply-content">\r\n    <div class="component-apply-userName {{userName_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="userName" name="userName" placeholder="请输入您的姓名..." can-value="region.request.userName"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-apply-account {{account_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="account" name="account" readonly="readonly" placeholder="未获取到您的账号..." can-value="region.config.phone"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-apply-validation {{validation_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="validation" name="validation" placeholder="请输入验证码..." can-value="region.request.validation"/>\r\n        <span class="textRight getValidation">\r\n                <span class="doing">发送中<span class="val" style="color:red;padding:0 3px;"></span>s</span>\r\n                <span class="control">获取验证码</span>\r\n           </span>\r\n    </div>\r\n    <div class="component-apply-promotion {{promotion_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="promotion" name="promotion" placeholder="请输入您所擅长的渠道" can-value="region.request.promotion"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-apply-inviter {{inviter_state}}">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" id="inviter" name="inviter" readonly="readonly" placeholder="暂无邀请人..." can-value="region.request.inviter"/>\r\n        <span class="iconRight icon_clear"></span>\r\n    </div>\r\n    <div class="component-apply-shopName">\r\n        <span class="iconLeft"></span>\r\n        <input type="text" gradeId="{{region.config.shopId}}" id="shopName" name="shopName" placeholder="所属微店名称..." can-value="region.config.shopName" readonly="readonly"/>\r\n    </div>\r\n    <a href="javascript:void(0)" class="btn component-apply-submitBtn {{submitBtn_state}}">提交申请</a>\r\n</div>'}),define("modular/component/component-apply-1",["text!modular/template/template-apply-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-apply-1",template:e,helpers:{},scope:{userName_state:"",account_state:"",validation_state:"",password_state:"",confirmPassword_state:"",promotion_state:"",inviter_state:"",submitBtn_state:"",validateExist:function(e){return e&&""!==e.trim()},validateIphone:function(e){return n.jsUtil.check.phone(e)},validateValidation:function(e){return""!==e.trim()&&/^.{6,18}$/gi.test(e)},validatePassword:function(e){return""!==e.trim()&&/^.{6,12}$/gi.test(e)},validateConfirmPassword:function(e,n){return""!==n.trim()&&e===n&&/^.{6,12}$/gi.test(e)}},events:{inserted:function(){},removed:function(){},".component-apply-content>div>.iconRight touchstart":function(e){var n=$(e),t=n.prev();n.addClass("active"),n.hasClass("icon_clear")?t.val(""):n.hasClass("icon_eye")&&t.attr("type","text")},".component-apply-content>div>.iconRight touchend":function(e){var n=$(e),t=n.prev();n.removeClass("active"),n.hasClass("icon_eye")&&t.attr("type","password")},"#userName blur":function(e){var n=this,t=$(e);n.scope.validateExist(t.val())?n.scope.attr("userName_state",""):n.scope.attr("userName_state","state_error")},"#account blur":function(e){var n=this,t=$(e);n.scope.validateIphone(t.val())?n.scope.attr("account_state",""):n.scope.attr("account_state","state_error")},"#inviter blur":function(e){var n=this,t=$(e);n.scope.validateExist(t.val())?n.scope.attr("inviter_state",""):n.scope.attr("inviter_state","state_error")},"#promotion blur":function(e){var n=this,t=$(e);n.scope.validateExist(t.val())?n.scope.attr("promotion_state",""):n.scope.attr("promotion_state","state_error")},"#validation blur":function(e){var n=this,t=$(e);n.scope.validateValidation(t.val())?n.scope.attr("validation_state",""):n.scope.attr("validation_state","state_error")},"#password blur":function(e){var n=this,t=$(e);n.scope.validatePassword(t.val())?n.scope.attr("password_state",""):n.scope.attr("password_state","state_error")},"#confirmPassword blur":function(e){var n=this,t=$(e),r=n.element,o=r.find("#password");n.scope.validateConfirmPassword(o.val(),t.val())?n.scope.attr("confirmPassword_state",""):n.scope.attr("confirmPassword_state","state_error")},".component-apply-submitBtn touchend":function(){var e=this,n=e.element;n.find("#userName").trigger("blur"),n.find("#account").trigger("blur"),n.find("#validation").trigger("blur"),n.find("#promotion").trigger("blur"),n.find("#inviter").trigger("blur");var t="state_error"!==e.scope.attr("userName_state"),r="state_error"!==e.scope.attr("account_state"),o="state_error"!==e.scope.attr("validation_state"),a="state_error"!==e.scope.attr("promotion_state"),s="state_error"!==e.scope.attr("inviter_state");t&&r&&o&&a&&s?e.scope.attr("submitBtn_state",""):e.scope.attr("submitBtn_state","state_error")}}})}),define("text!modular/template/template-pay-choose-1.mustache",[],function(){return'{{spoceConfig region.config}}\r\n<div class="component-pay-choose-content" style="display:{{#if region.config.payChooseShow}}block{{else}}none{{/if}}">\r\n    <div class="component-pay-choose-btnGroup">\r\n        <ul>\r\n            {{#returnShow "btn_wx"}}<li class="btn_wx">微信支付</li>{{/returnShow}}\r\n            {{#returnShow "btn_zfb"}}<li class="btn_zfb">支付宝支付</li>{{/returnShow}}\r\n            {{#returnShowYb region.config.orderFlag}}<li class="btn_yb">易宝支付</li>{{/returnShow}}\r\n            {{#notShow}}\r\n                {{#returnShow "btn_yl"}}<li class="btn_yl">银联支付</li>{{/returnShow}}\r\n            {{/notShow}}\r\n            <li class="btn_cancel">取消</li>\r\n        </ul>\r\n    </div>\r\n</div>'}),define("modular/component/component-pay-choose-1",["text!modular/template/template-pay-choose-1.mustache"],function(e){"use strict";var n=window.capi.get();return can.Component.extend({tag:"component-pay-choose-1",template:e,helpers:{spoceConfig:function(e){this.spcConfig=n.jsUtil.mustache.getContent(e,"object")},returnShow:function(e,t){var r=n.jsUtil.weChat.browser(),o=n.jsUtil.mustache.getContent(e,"string");return"btn_wx"===o?r?t.fn(this):t.inverse(this):"btn_zfb"===o?r?t.inverse(this):t.fn(this):"btn_yl"===o?t.fn(this):void 0},returnShowYb:function(e,t){var r=n.jsUtil.mustache.getContent(e,"string");return 0==r?t.inverse(this):2==r?t.fn(this):void 0}},scope:{},events:{inserted:function(){},removed:function(){},".component-pay-choose-btnGroup ul li touchend":function(){var e=this;if(n.jsEvent.touch.touchIsMoved)return null;e.scope.spcConfig.attr("payChooseShow",!1)},".component-pay-choose-btnGroup .btn_cancel touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.reject(),!1)},".component-pay-choose-btnGroup .btn_wx touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("weChatPay"),!1)},".component-pay-choose-btnGroup .btn_zfb touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("aliPay"),!1)},".component-pay-choose-btnGroup .btn_yl touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("unionPay"),!1)},".component-pay-choose-btnGroup .btn_yb touchend":function(){var e=this;return n.jsEvent.touch.touchIsMoved?null:(e.scope.spcConfig.attr().payState.resolve("ybPay"),!1)}}})}),define("text!modular/template/template-site-introduce-1.mustache",[],function(){return'<div class="component-site-introduce-content">\r\n   <ul class="component-site-introduce-group">\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>跨境电商央企品牌</li>\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>供应链正关渠道直采</li>\r\n       <li><span class="fa fa-check-circle-o fa-fw"></span>品牌商品正品信赖</li>\r\n   </ul>\r\n</div>'}),define("modular/component/component-site-introduce-1",["text!modular/template/template-site-introduce-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-site-introduce-1",template:e,helpers:{},scope:{},events:{inserted:function(e){},removed:function(){}}})}),define("text!modular/template/template-scroll-top-1.mustache",[],function(){return'<div class="component-scroll-top-content">\r\n    <div class="scrollTop">\r\n        <img src="/images/platform/scroll/top.png" alt="中国供销海外购">\r\n    </div>\r\n</div>'}),define("modular/component/component-scroll-top-1",["text!modular/template/template-scroll-top-1.mustache"],function(e){"use strict";return window.capi.get(),can.Component.extend({tag:"component-scroll-top-1",template:e,helpers:{},scope:{},events:{inserted:function(){$(window).scrollTop()>=1500?$(this.element).find(".scrollTop").css("display","block"):$(this.element).find(".scrollTop").css("display","none")},"{window} scroll":function(){$(window).scrollTop()>=1500?$(this.element).find(".scrollTop").css("display","block"):$(this.element).find(".scrollTop").css("display","none")},".component-scroll-top-content .scrollTop touchend":function(){$("html,body").animate({scrollTop:0},500)}}})}),define("config.page.render",[],function(){"use strict";var e=window.capi.get(),n=$.each,t=$.when,r=$.extend,o=$.Deferred,a=$.isEmptyObject,s=$.isPlainObject,i=$.isFunction,c=$.isArray,l=$.inArray;return can.Control.extend({tags:{},region:{},config:{},request:{},response:{},renderData:{},sendArr:[],reload:!1,sendRequest:function(e,n,t){var a=this;return void 0===e?o().resolve():s(a.jsModel.path[e])?a.jsModel.send(e,r(!0,{},a.request[e],n||{}),t):o().reject()},setRenderData:function(e,n,t,r){var o=this,a=null,l=e.split("/"),d=l.shift()||"",p=l.shift()||"";o.renderData[d]||(o.renderData[d]={}),o.renderData[d][n]||(o.renderData[d][n]={});var u=o.renderData[d][n],m=i(u.attr),f=i(u),g=m?u.attr():f?u():u;p?s(g)&&(g[p]=t):g=t,a=r&&c(g)?new can.List(g):a,a=r&&s(g)?new can.Map(g):a,a=r&&!a?can.compute(g):a,o.renderData[d][n]=r?a:g,a=null,g=null},renderTemplate:function(e){var r=this,o=null,a=c(e),s=-1!==l("global",e);a&&s&&(e=[],e.unshift("global"),o=document.createDocumentFragment(),n(Object.keys(this.tags),function(n,t){"global"!==t&&e.push(t)})),t.apply(null,[].concat(r.queue)).done(function(){n(a?e:[],function(e,n){var t=r.tags[n],a="[region='"+n+"']",i=s?o.querySelector(a):r.element.find(a),c={module:r,root:r.renderData,region:r.renderData[n]},l="global"===n?o:i;null!==t&&void 0!==t&&n&&l&&(s?l.appendChild(can.mustache(t)(c)):l.html(can.mustache(t)(c)))}),a&&s&&r.element.html(o),"pending"===r.state.state()&&r.state.resolve()})},init:function(){this.jsUtil=e.jsUtil,this.jsModel=e.jsModel,this.jsEvent=e.jsEvent,this.modules=e.jsModular.modules,this.queue=e.jsEvent.page.state,this.state=e.jsEvent.page.state=o(),this.tags=r(!0,{global:{}},this.tags,this.options.tags),this.region=r(!0,{global:{}},this.region,this.options.region),this.config=r(!0,{global:{}},this.config,this.options.config),this.request=r(!0,{global:{}},this.request,this.options.request),this.response=r(!0,{global:{}},this.response,this.options.response),this.renderData=r(!0,{global:{}},this.renderData,this.options.renderData),this.sendArr=r(!0,[],this.sendArr,this.options.sendArr),this.reload=!0===this.reload||!0===this.options.reload,this.toRender(this.sendArr,[],Object.keys(this.tags),this.reload)},toRender:function(e,i,c,l){var d=this,p=!0,u=[],m=-1,f=o(),g=[].concat(e),h=[].concat(i),b=[].concat(c);return n(g,function(e,n){if("string"==typeof n&&n){var t=n.split("/"),r="string"==typeof t[0]&&t.shift()||"",i="string"==typeof t[0]&&t.shift()||"global",c="string"==typeof t[0]&&t.shift()||"",f=s(h[e])&&h[e]||{},g=a(d.response[i]);r&&(!1!==l||g)&&(u[++m]=o(),function(e){d.sendRequest(r,f,!0).done(function(n){var t=d.response[i];!s(t)&&(d.response[i]={}),!c&&(d.response[i]=n),c&&(d.response[i][c]=n),u[e].resolve()}).fail(function(){p=!1,u[e].resolve()})}(m))}}),t.apply(null,u).always(function(){var e={},n={},t={},o={config:d.config},a={request:d.request},s={response:d.response};r(!0,e,o,a,s),r(!0,n,o,a,s),r(!0,t,o,a,s),d.beforeFunc(b,e,p),d.renderFunc(b,n,p),d.afterFunc(b,t,p)}),d.renderState=f},beforeFunc:function(e,t,r){var o=this,a=o.region,d=c(e),p=l("global",e);d&&-1!==p&&(e.splice(p,1),e.unshift("global")),n(d?e:[],function(e,n){var r="object"==typeof n&&n,c=r?Object.keys(n)[0]:n;"string"==typeof c&&c&&o.tags[c]&&s(a[c])&&i(a[c].beforeFunc)&&a[c].beforeFunc(o,t)})},renderFunc:function(e,t,r){var o=this,a=[],i=c(e);$(function(){n(i?e.sort():[],function(e,n){var t="string"==typeof n&&n,r="object"==typeof n&&n,i=r?Object.keys(n)[0]:n,c=i.split("/")[0],d=o.region[c];if((t||r)&&a.push(c),s(d)||(o.region[c]={}),t||r){var p=o.config[c]||null,u=o.request[c]||null,m=o.response[c]||null,f=!0===o.region[c].cfgDynamic,g=!0===o.region[c].reqDynamic,h=!0===o.region[c].resDynamic,b=r&&-1!==l("config",[].concat(n[i])),v=r&&-1!==l("request",[].concat(n[i])),y=r&&-1!==l("response",[].concat(n[i]));(t||b)&&o.setRenderData(i,"config",p,f),(t||v)&&o.setRenderData(i,"request",u,g),(t||y)&&o.setRenderData(i,"response",m,h)}}),o.renderTemplate(a)})},afterFunc:function(e,r,o){var a=this,d=[],p=a.region,u=c(e),m=l("global",e);u&&-1!==m&&(e.splice(m,1),e.push("global")),$(function(){t.apply(null,[].concat(a.queue)).done(function(){n(u?e:[],function(e,n){var t="object"==typeof n&&n,o=t?Object.keys(n)[0]:n;"string"==typeof o&&o&&a.tags[o]&&s(p[o])&&i(p[o].afterFunc)&&(d[d.length]=p[o].afterFunc(a,r))}),t.apply(null,d).done(function(){o?a.renderState.resolve():a.renderState.reject()}).fail(function(){a.renderState.reject()})})})}})}),define("modular/module/module-header-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=n.jsData.userInfo.shopId,o=[];return t&&o.push("ORDER_SHOPPINGCART_COUNT/global/shopCartCount"),r&&o.push("USER_SHOPINFO_QUERY/global/shopInfo"),e.extend({tags:{global:"<component-header-1></component-header-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){var t=e.config.global.shopName,r=e.config.global.shopAbout,o=e.config.global.shopHeadImg,a=e.config.global.shopDescribe;e.config.global.shopInfo=n.response.global&&n.response.global.shopInfo||{},e.config.global.shopInfo.headImg=e.config.global.shopInfo.headImg||o,e.config.global.shopInfo.aboutus=e.config.global.shopInfo.aboutus||r,e.config.global.shopInfo.name=e.config.global.shopInfo.name?e.config.global.shopInfo.name:t,e.config.global.shopInfo.description=a},afterFunc:function(e,t){n.jsModel.send("PAGE_HEADER1_QUERY_NODE",{}).done(function(n){var t=n&&n.cont&&n.cont[0]&&n.cont[0].title||"";e.renderData.global.config.attr("placeholder",t)})}}},config:{global:{historyCache:[],shopName:n.jsData.siteInfo.shopName,shopAbout:n.jsData.siteInfo.shopAbout,shopHeadImg:n.jsData.siteInfo.shopHeadImg,shopDescribe:n.jsData.siteInfo.shopDescribe}},request:{},response:{global:{}},sendArr:o,reload:!1,timer:null,".component-header-left   .icon_scan           touchend":function(){var e=this,n=e.modules.message;e.jsUtil.weChat.browser()?wx?wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){e&&e.resultStr&&(window.location.href=e.resultStr)}})}):n.refresh({
confirmBtn:!1,content:"暂且无法使用扫一扫功能，敬请谅解！"}):n.refresh({confirmBtn:!1,content:"请在微信端进行操作！"})},".component-header-left   .text_login          touchend":function(){var e=this,n=e.renderData.global.config.jumpUrl;window.location.href=n?"/login.html?jumpUrl="+n:"/login.html"},".component-header-left   .icon_back           touchend":function(){var e=this,n=e.renderData.global.config.backUrl;e.jsUtil.url.jumpPage(n,-1,!0)},".component-header-left   .icon_home           touchend":function(){window.location.href="/index.html"},".component-header-input   input               focus":function(e){var n=this,t=[],r=$(e),o=n.modules,a=r.parents(".component-header-input"),s=JSON.parse(window.localStorage.getItem("historyCache"))||[];a.addClass("isFocus"),$("html,body").animate({scrollTop:0}),$(document).find("component-footer-1").css("display","none"),$(o.searchHistory.element).css({display:"block"}),$(o.searchHistory.element).animate({left:"0"},500),n.renderData.global.config.attr("icon_scan",!1),n.renderData.global.config.attr("icon_news",!1),n.renderData.global.config.attr("info_shop",!1),n.renderData.global.config.attr("icon_back",!1),n.renderData.global.config.attr("icon_home",!1),n.renderData.global.config.attr("text_edit",!1),n.renderData.global.config.attr("text_save",!1),n.renderData.global.config.attr("icon_close",!1),n.renderData.global.config.attr("title_shop",!1),n.renderData.global.config.attr("title_text",!1),n.renderData.global.config.attr("text_login",!1),n.renderData.global.config.attr("text_manage",!1),n.renderData.global.config.attr("text_choose",!1),n.renderData.global.config.attr("icon_search",!1),n.renderData.global.config.attr("icon_shopCart",!1),n.renderData.global.config.attr("text_orderList",!1),n.renderData.global.config.attr("input",!0),n.renderData.global.config.attr("input_search",!0),n.renderData.global.config.attr("input_cancel",!0),$.each(s,function(e,n){t.push(n)}),o.searchHistory.renderData.global.config.attr("historyCache",t)},".component-header-input   input               keyup":function(){var e=this,t=$(e.element),r=t.find(".component-header-input input").val(),o=t.find(".component-header-input input").attr("placeholder");if(!r&&o&&(r=o),13===n.jsEvent.keyboard.keyboardCode)if(r.trim()){var a=[],s=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(s,function(e,n){a.push(n.goodsName)});var i=$.inArray(r,a);-1!==i&&s.splice(i,1),s.unshift({goodsName:r}),s.splice(9,s.length-9),t.find(".component-header-input > input").blur(),window.localStorage.setItem("historyCache",JSON.stringify(s)),window.location.href=encodeURI("/searchProduct.html?goodsName="+r)}else window.location.href="/searchProduct.html?upShelves=1"},".component-header-input  .i_clear             touchend":function(e){$(e).parent().find("input").val("")},".component-header-right  .input_cancel        touchend":function(){var e=this,n=e.modules,t=e.element;e.renderData.global.config.attr("input",!1),e.renderData.global.config.attr("input_search",!1),e.renderData.global.config.attr("input_cancel",!1),$(n.searchHistory.element).animate({left:"101%"},500,function(){$(n.searchHistory.element).css({display:"none"})}),$.each(e.config.initList,function(n,t){e.renderData.global.config.attr(n,t)}),t.find(".component-header-input input").blur(),t.find(".component-header-input").removeClass("isFocus"),$(document).find("component-footer-1").css("display","block"),$("body").css({position:"static",overflow:"visible"})},".component-header-right  .icon_search         touchend":function(){var e=this,n=e.element;e.renderData.global.config.attr("input",!0),n.find(".component-header-input input").focus()},".component-header-right  .icon_close          touchend":function(){var e=this,n=e.renderData.global.config.backUrl;e.jsUtil.url.jumpPage(n,-1,!0)},".component-header-right  .info_shop           touchend":function(){var e=this,n=e.renderData.global.config.jumpUrl;window.location.href=n?"/index.html?jumpUrl="+n:"/index.html"},".component-header-right  .icon_shopCart       touchend":function(){window.location.href="/shoppingCart.html"},".component-header-right  .icon_orderList      touchend":function(){var e=this,n=e.renderData.global.config.pathUrl;window.location.href="/orderList.html?jumpUrl="+n},".component-header-right  .icon_choose         touchend":function(){var e=this,n=e.modules.discount,t=e.renderData.global.config.jumpUrl,r=n.renderData.global.response.attr(),o=n.renderData.global.config.showDiscount.attr(),a=n.renderData.global.response.attr("type"),s=n.renderData.global.response.attr("supplierId"),i=JSON.stringify(o||{}),c=localStorage.getItem("ordersInfo"),l=JSON.parse(c);l&&a&&s&&(l.typeObj[a][s]=r,c=JSON.stringify(l||{}),window.localStorage.removeItem("orderInfo"),window.localStorage.setItem("ordersInfo",c),window.localStorage.setItem("showDiscount",i),e.jsUtil.url.jumpPage(t,-1,!0))},".component-header-right  .icon_news           touchend":function(){this.modules.message.refresh({confirmBtn:!1,content:"咨询功能暂未开放，敬请谅解！"})}})}),define("modular/module/module-footer-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=t?["ORDER_SHOPPINGCART_COUNT/global/count"]:[];return e.extend({tags:{global:"<component-footer-1></component-footer-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0}},config:{},request:{},response:{},sendArr:r,reload:!1})}),define("modular/module/module-nav-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-nav-1></component-nav-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!1,resDynamic:!1}},config:{global:{showIndex:0}},request:{},response:{},sendArr:["PAGE_NAVIGATION"],reload:!1,"li[thirdId] touchend":function(e){var t=$(e),r=t.attr("thirdId"),o=t.text()&&t.text().trim()||"";if(!n.jsEvent.touch.touchIsMoved&&r&&o){var a=[],s=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(s,function(e,n){a.push(n.goodsName)});var i=$.inArray(o,a);-1!==i&&s.splice(i,1),s.unshift({goodsName:o,thirdId:r}),s.splice(9,s.length-9),window.localStorage.setItem("historyCache",JSON.stringify(s)),window.location.href=encodeURI("/searchProduct.html?goodsName="+o+"&thirdCategory="+r)}}})}),define("modular/module/module-searchHistory-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-searchhistory-1></component-searchhistory-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!1,resDynamic:!1,beforeFunc:function(e,n){var t=[];$.each(n.response.global,function(e,n){t.push({firstId:n.id,industryName:n.industryName})}),e.response.global.hotSearchList=t}}},config:{global:{showIndex:0}},request:{},response:{},sendArr:["PAGE_NAVIGATION"],reload:!1,".component-searchHistory-content li touchend":function(e){var t=$(e),r=t.text()&&t.text().trim()||"",o=t.attr("firstId")&&t.attr("firstId").trim()||"",a=t.attr("secondId")&&t.attr("secondId").trim()||"",s=t.attr("thirdId")&&t.attr("thirdId").trim()||"";if(!n.jsEvent.touch.touchIsMoved){var i=[],c=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(c,function(e,n){i.push(n.goodsName)});var l=$.inArray(r,i);-1!==l&&c.splice(l,1),c.unshift({goodsName:r,firstId:o,secondId:a,thirdId:s}),c.splice(9,c.length-9),window.localStorage.setItem("historyCache",JSON.stringify(c)),window.location.href=encodeURI("/searchProduct.html?goodsName="+r+"&firstCategory="+o+"&secondCategory="+a+"&thirdCategory="+s)}},".component-searchHistory-content .icon_delete touchend":function(){var e=this;e.modules.message.refresh({content:"是否清除所有搜索内容？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.localStorage.setItem("historyCache",JSON.stringify([])),e.renderData.global.config.attr("historyCache",[])}})}})}),define("modular/module/module-message-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-message-1></component-message-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{},response:{},sendArr:[],reload:!1,refresh:function(e){var n=this;"object"==typeof e&&$.each(e,function(t){n.config.global[t]=e[t]}),n.config.global.isShowing||n.renderFunc(["global"])},"{document} touchend":function(e,n){var t=this,r=n||window.event,o=$(r.target||r.srcElement),a=t.element,s=a.find(".component-message-content"),i=o.parents(".component-message-content").length>0,c=!1!==t.config.global.confirmBtn,l=!1!==t.config.global.DOMClick;!i&&c&&l&&s.animate({opacity:0},600,function(){t.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},t.refresh()})},".component-message-footer .btn_confirm touchend":function(){var e=this;e.element.find(".component-message-content").animate({opacity:0},600,function(){e.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},e.refresh()})},".component-message-footer .btn_cancel touchend":function(){var e=this;e.element.find(".component-message-content").animate({opacity:0},600,function(){e.config.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},e.refresh()})}})}),define("modular/module/module-site-introduce-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-site-introduce-1></component-site-introduce-1>"},region:{},config:{},request:{},response:{},sendArr:[],reload:!1})}),define("modular/module/module-searchProduct-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=parseFloat(n.jsUtil.url.getParam("currentPage")||1);return e.extend({tags:{global:"<component-searchproduct-1></component-searchproduct-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!1,resDynamic:!0,beforeFunc:function(e,n){1!=t&&e.jsUtil.url.delParam(["currentPage"],"cover"),t>1?(e.config.global.maxCurrentPage=t+1,e.config.global.minCurrentPage=t-1):(e.config.global.maxCurrentPage=1,e.config.global.minCurrentPage=1),e.config.global.totalPages=(n.response.global.pagination||{}).totalPages,$.each(e.response.global.goodsList,function(e,n){n.currentPage=t})},afterFunc:function(e,r){var o=r.response.global.pagination.totalPages,a=e.config.global.minCurrentPage,s=e.config.global.maxCurrentPage,i=$.extend(!0,{},e.request.GOODS_BASE_QUERY,{currentPage:a}),c=$.extend(!0,{},e.request.GOODS_BASE_QUERY,{currentPage:s}),l=[],d=parseFloat(localStorage.getItem("toTop"));if(localStorage.removeItem("toTop"),e.config.global.currentPage===e.config.global.totalPages?$(e.element).find(".isLoading span").text("没有更多数据了..."):$(e.element).find(".isLoading span").text("请下拉加载..."),t>1){e.config.global.isMinComm=!1;var p=n.jsModel.send("GOODS_BASE_QUERY",i).done(function(n){if(n&&n.success){var t=n.obj;$.each(t.goodsList.reverse(),function(n,t){t.currentPage=a,e.renderData.global.response.goodsList.unshift(t)}),e.config.global.minCurrentPage=t.pagination.currentPage,e.config.global.totalPages=t.pagination.totalPages,e.config.global.isMinComm=!0}}).fail(function(){e.config.global.isMinComm=!0});l.push(p)}if(1!=s&&s<=o){e.config.global.isMaxComm=!1;var u=n.jsModel.send("GOODS_BASE_QUERY",c).done(function(n){if(n&&n.success){var t=n.obj;$.each(t.goodsList,function(n,t){t.currentPage=s,e.renderData.global.response.goodsList.push(t)}),t.pagination.currentPage===t.pagination.totalPages&&$(".isLoading span").text("没有更多数据了..."),e.config.global.maxCurrentPage=t.pagination.currentPage,e.config.global.totalPages=t.pagination.totalPages,e.config.global.isMaxComm=!0}}).fail(function(){e.config.global.isMaxComm=!0});l.push(u)}$.when.apply(null,l).done(function(){$(window).scrollTop(d),d=void 0})}}},config:{global:{isMaxComm:!0,isMinComm:!0}},request:{GOODS_BASE_QUERY:{upShelves:n.jsUtil.url.getParam("upShelves")?1:null,numPerPage:10,currentPage:t}},response:{global:{}},sendArr:["GOODS_BASE_QUERY"],reload:!1,".searchProduct-header li touchend":function(e){var n=this,t=$(e),r=n.config.global.popState;t.hasClass("active")&&!t.hasClass("choose_price")||(t.hasClass("choose_general")?(r.sortType=1,r.currentPage=1,n.config.global.sortType=1,delete n.request.GOODS_BASE_QUERY["sortList[0].sortField"],delete n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]):t.hasClass("choose_new")?(r.sortType=2,r.currentPage=1,n.config.global.sortType=2,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="create_time",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="desc"):t.hasClass("sortType3")?(r.sortType=4,r.currentPage=1,n.config.global.sortType=4,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="price",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="asc"):(r.sortType=3,r.currentPage=1,n.config.global.sortType=3,n.request.GOODS_BASE_QUERY["sortList[0].sortField"]="price",n.request.GOODS_BASE_QUERY["sortList[0].sortRule"]="desc"),n.config.global.currentPage=1,n.request.GOODS_BASE_QUERY.currentPage=1,n.toRender("GOODS_BASE_QUERY",{currentPage:1},["global"]).done(function(){$("html,body").animate({scrollTop:0},300),n.config.global.maxCurrentPage=1,n.config.global.minCurrentPage=1}),n.jsUtil.url.setParam(r,"cover",{code:"searchProduct"}))},"{window} scroll":function(){var e=this,n=$(document),t=e.config.global.totalPages,r=e.config.global.maxCurrentPage,o=e.config.global.minCurrentPage,a=r===t,s=e.config.global.isMaxComm,i=e.config.global.isMinComm,c=$(window).scrollTop()+$(window).height()+350>$(document).height(),l=5*$(".component-searchProduct-content li.item-content").outerHeight(!0);a?n.find(".isLoading span").text("没有更多数据了..."):n.find(".isLoading span").text("请下拉加载..."),0==$(window).scrollTop()&&o>1&&i&&(e.config.global.isMinComm=!1,e.sendRequest("GOODS_BASE_QUERY",{currentPage:o-1}).done(function(n){if(n&&n.success){var t=n.obj;$.each(t.goodsList.reverse(),function(n,t){t.currentPage=o-1,e.renderData.global.response.goodsList.unshift(t)}),e.config.global.minCurrentPage=t.pagination.currentPage,e.config.global.totalPages=t.pagination.totalPages,e.config.global.isMinComm=!0,$(window).scrollTop(l)}}).fail(function(){e.config.global.isMinComm=!0})),c&&r<t&&s&&(e.config.global.isMaxComm=!1,e.sendRequest("GOODS_BASE_QUERY",{currentPage:r+1}).done(function(t){if(t&&t.success){var o=t.obj;$.each(o.goodsList,function(n,t){t.currentPage=r+1,e.renderData.global.response.goodsList.push(t)}),o.pagination.currentPage===o.pagination.totalPages&&n.find(".isLoading span").text("没有更多数据了..."),e.config.global.maxCurrentPage=o.pagination.currentPage,e.config.global.totalPages=o.pagination.totalPages,e.config.global.isMaxComm=!0}}).fail(function(){e.config.global.isMaxComm=!0}))},".component-searchProduct-content .search_addShoppingCart touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.parents(".item-content"),a=t.parents(".item-content").attr("toUrl"),s=t.parents(".item-content").attr("goodsId"),i=n.renderData.global.response.goodsList;"yes"===o.attr("isSingleSpec")?$.each(i,function(e,t){if(t.goodsId==s){var a=1,i=t.goodsFileList&&t.goodsFileList[0]||{},c=t.goodsSpecsList&&t.goodsSpecsList[0]||{},l=c.stock||0,d=c.priceList||[],p=function(e){var n={},t=[],r=[],o=!1;return $.each(e,function(e,n){var a=1*n.min?1*n.min:0,s=1*n.max?1*n.max:1/0;t.push(s),r.push(a),o=!0}),o?(n.minQuantity=Math.min.apply(Math,r),n.maxQuantity=Math.max.apply(Math,t),n):{minQuantity:0,maxQuantity:1/0}},u=p(d).minQuantity,m=p(d).maxQuantity;if(!n.renderData.global.config.isLogin)return void r.refresh({title:"温馨提示",content:"您尚未登录，请先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?isBack=1"}});if(a<u&&(a=u),l<=0)return void r.refresh({content:"当前商品库存不足, 无法加入购物车中！",confirmBtn:!1});if(u>l)return void r.refresh({content:"当前数量已达至商品库存量, 无法加入购物车中！",confirmBtn:!1});var f=function(e){var a=o.find("img"),s=a.clone(),l=n.modules.footer.element,d=l.find("component-footer-1 .icon_shoppingCart");s.length&&(s.offset({top:a.offset().top,left:a.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"99999999"}).appendTo($("body")).animate({top:d.offset().top+20,left:d.offset().left+70,width:50,height:50},1e3,"linear"),s.animate({width:0,height:0},function(){$(this).detach()})),n.sendRequest("ORDER_SHOPPINGCART_CREATE",{type:t.type,itemId:c.itemId,supplierId:t.supplierId,supplierName:t.supplierName,goodsName:t.customGoodsName,goodsImg:i.path||"",quantity:e}).done(function(){n.modules.header.sendRequest("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){n.modules.footer.renderData.global.response.attr("count",e.obj),r.refresh({content:"添加成功",confirmBtn:!1})})})};n.sendRequest("ORDER_SHOPPINGCART_COUNT_ID",{itemId:t.goodsSpecsList[0].itemId}).done(function(e){if(e&&e.success){var n=e.obj||0;if(null!=m&&0!=m)if(n>=m)r.refresh({content:"当前该商品在购物车中的数量已达到最大购买量, 无法继续加入购物车中！",confirmBtn:!1});else if(a+n>m){var t=m-n;r.refresh({title:"购物车数量上限",content:"最大量"+m+"件; 已添加:"+n+"件, 可添加"+t+"件! 是否继续？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){f(t)}})}else f(a);else f(a)}else r.refresh({content:"查询购物车内该商品数量失败！",confirmBtn:!1})}).fail(function(){r.refresh({content:"网络信号弱，请刷新重试",confirmBtn:!1})})}}):a&&r.refresh({title:"温馨提示",content:"该商品含有多个规格，正前往商品详情页面中！",DOMClick:!1,confirmBtn:!1,timeOutFun:function(){var e,r=t.parents(".item-content"),o=r.attr("tourl"),a=r.attr("currentPage"),s=5*r.outerHeight(!0),i=$(window).scrollTop(),c=a-1;if(a>1){var l=$("li[currentPage="+c+"]");e=$(l[l.length-1]).offset().top-i-196>-s/5?i%s:i%s+s}else e=i%s;localStorage.setItem("toTop",e),n.jsUtil.url.setParam({currentPage:a},"cover"),location.href=o+"?currentPage="+a}})},".component-searchProduct-content .item-content a click":function(e){var n,t=this,r=$(e).parents(".item-content"),o=r.attr("tourl"),a=r.attr("currentPage"),s=5*r.outerHeight(!0),i=$(window).scrollTop(),c=a-1;if(a>1){var l=$("li[currentPage="+c+"]");n=$(l[l.length-1]).offset().top-i-196>-s/5?i%s:i%s+s}else n=i%s;localStorage.setItem("toTop",n),t.jsUtil.url.setParam({currentPage:a},"cover"),location.href=o+"?currentPage="+a}})}),define("modular/module/module-bindInvitation-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.userId,r=n.jsData.userInfo.shopId,o=n.jsData.userInfo.gradeId;return e.extend({tags:{global:"<component-bindinvitation-1></component-bindinvitation-1>"},region:{global:{reqDynamic:!0,resDynamic:!1,beforeFunc:function(e,n){e.response.global.userInfo&&(e.config.global.account=e.response.global.userInfo.phone||"",e.request.global.account=e.response.global.userInfo.phone||"")}}},config:{global:{}},request:{global:{account:"",invitationCode:""},USER_INVITERCODE_BIND:{id:t,shopId:r||o}},response:{global:{}},sendArr:["USER_DETAIL_QUERY/global/userInfo"],reload:!1,".component-bindInvitation-bingBtn:not(.state_error) touchend":function(){var e=this,t=e.modules.message,r=e.renderData.global.config.toDomain,o=e.renderData.global.request.attr();e.jsUtil.weChat.browser()?e.sendRequest("USER_INVITERCODE_BIND",{phone:o.account,invitationCode:o.invitationCode}).done(function(o){if(o&&o.success)if(o&&o.obj)if("fDomainName"===r){var a=n.jsData.userInfo.shopId,s=n.jsData.userInfo.userId,i=n.jsData.userInfo.authId,c=n.jsData.userInfo.openId,l=n.jsData.siteInfo.fDomainName,d="v:"+a+"-"+s;e.jsUtil.url.jumpPage(n.jsUtil.path.setParam(l,{shopId:a,userId:s,authId:i,openId:c,welfareVip:d}),null)}else window.history.go(-1);else o&&o.errorMsg?t.refresh({type:"error",content:o.errorMsg,cancelBtn:!1,confirmBtn:!1}):t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1});else o&&o.errorMsg?t.refresh({type:"error",content:o.errorMsg,cancelBtn:!1,confirmBtn:!1}):t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1})}).fail(function(){t.refresh({type:"error",content:"绑定邀请码失败！",cancelBtn:!1,confirmBtn:!1})}):t.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-personal-center-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.userId,r=n.jsData.userInfo.shopId,o=n.jsData.userInfo.gradeId,a=(n.jsData.userInfo.authId,n.jsData.userInfo.openId,n.jsData.userInfo.isLogin),s=["GRADE_GRADEBO_QUERY_REDIS/global/gradeInfo"];return r&&(s=s.concat(["USER_SHOPINFO_QUERY/global/shopInfo"])),a&&(s=s.concat(["USER_DETAIL_QUERY/global/userInfo","ORDER_USER_STATUS_COUNT/global/orderStatus","USER_INVITERINFO_CHECK/global/getInvitation"])),e.extend({tags:{global:"<component-personal-center-1></component-personal-center-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,t){var r=0,o=0,a=0,s=0,i=e.config.global.shopName,c=e.config.global.shopAbout,l=e.config.global.shopHeadImg,d=e.config.global.shopDescribe;$.each(t.response.global.orderStatus,function(e,n){var t=n.status,i=n.total;0===t?r+=i:1===t||2===t||3===t||4===t||5===t||11===t||12===t?o+=i:6===t?a+=i:7===t&&(s+=i)}),e.config.global.shopInfo=t.response.global&&t.response.global.shopInfo||{},e.config.global.shopInfo.headImg=e.config.global.shopInfo.headImg||l,e.config.global.shopInfo.aboutus=e.config.global.shopInfo.aboutus||c,e.config.global.shopInfo.name=e.config.global.shopInfo.name||i,e.config.global.shopInfo.description=d,e.response.global.orderStatus={},e.response.global.orderStatus.needPay=r,e.response.global.orderStatus.needDeliver=o,e.response.global.orderStatus.needReceived=a,e.response.global.orderStatus.finish=s,e.response.global.gradeInfo&&1===e.response.global.gradeInfo.welfareType&&(!1===e.response.global.getInvitation&&(n.jsData.userInfo.welfareVip=!1,e.config.global.needInvitation=!0),!0===e.response.global.getInvitation&&(n.jsData.userInfo.welfareVip=!0,e.config.global.needInvitation=!1),e.config.global.showWelfare=!0)}}},config:{global:{shopName:n.jsData.siteInfo.shopName,shopAbout:n.jsData.siteInfo.shopAbout,shopHeadImg:n.jsData.siteInfo.shopHeadImg,shopDescribe:n.jsData.siteInfo.shopDescribe,needInvitation:!0,showWelfare:!1}},request:{global:{},USER_INVITERINFO_CHECK:{shopId:r||o,id:t}},response:{global:{}},sendArr:s,reload:!1,".component-personal-center-order a touchend":function(){var e=this,t=e.modules.message,r=e.config.global.pathUrl;return!n.jsEvent.touch.touchIsMoved&&(e.renderData.global.config.isLogin?void 0:(t.refresh({content:"您尚未登录，是否登录？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?jumpUrl="+r}}),!1))},".component-personal-center-function a.apply touchend":function(e){var t=this,r=$(e),o=t.modules.message,a=t.renderData.global.config,s=t.renderData.global.response,i=t.config.global.pathUrl,c=s.userInfo&&s.userInfo.phone,l=a.attr("shopId")||s.userInfo.shopId,d=a.attr("centerId"),p=a.attr("shopName"),u=r.hasClass("needSign");return!n.jsEvent.touch.touchIsMoved&&(u&&!t.renderData.global.config.isLogin?(o.refresh({content:"您尚未登录，是否登录？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){location.href="/login.html?jumpUrl="+i}}),!1):void t.sendRequest("USER_PUSHUSER_CHECK",{phone:c,gradeId:l}).done(function(e){e&&e.success?window.location.href="/apply.html?phone="+c+"&shopName="+p+"&centerId="+d+"&shopId="+l:o.refresh({cancelBtn:!1,confirmBtn:!1,content:"已在该店铺申请成为推手！"})}))},".component-personal-center-function a:not(.apply) touchend":function(e){var t=this,r=$(e),o=t.modules.message,a=t.config.global.pathUrl,s=r.hasClass("needSign");return!n.jsEvent.touch.touchIsMoved&&(s&&!t.renderData.global.config.isLogin?(o.refresh({content:"您尚未登录，是否登录？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/login.html?jumpUrl="+a}}),!1):void 0)},".component-personal-center-function a.fmpMall touchend":function(e){var t=this,r=n.jsData.userInfo,o=t.renderData.global.config.attr(),a=n.jsData.userInfo.userId,s=n.jsData.userInfo.shopId,i=n.jsData.userInfo.authId,c=n.jsData.userInfo.openId,l=n.jsData.siteInfo.fDomainName,d="";if(n.jsEvent.touch.touchIsMoved)return!1;r.isLogin||(d="v:",window.location.href=n.jsUtil.path.setParam(l.replace(/\/$/,"")+"/login.html",{shopId:s,openId:c,welfareVip:d})),r.isLogin&&(!0===o.needInvitation&&(d="v:",window.location.href=n.jsUtil.path.setParam(l.replace(/\/$/,"")+"/bindInvitation.html",{userId:a,shopId:s,authId:i,openId:c,welfareVip:d})),!1===o.needInvitation&&(d="v:"+s+"-"+a,window.location.href=n.jsUtil.path.setParam(l,{userId:a,shopId:s,authId:i,openId:c,welfareVip:d})))},".component-personal-center-logout touchend":function(){var e=this,t=e.modules.footer,r=e.modules.message,o=n.jsData.userInfo;if(n.jsEvent.touch.touchIsMoved)return!1;r.refresh({content:"是否退出当前账号？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){o.isLogin=!1,e.config.global.isLogin=!1,t.config.global.isLogin=!1,e.response.global.userInfo={},e.response.global.orderStatus={},window.localStorage.removeItem("userId"),window.localStorage.removeItem("authId"),e.renderData.global.config.attr("isLogin",!1),t.renderData.global.config.attr("isLogin",!1),document.querySelector("title").innerHTML=e.config.global.shopInfo.name||"中国供销海外购",e.toRender(["USER_SHOPINFO_QUERY/global/shopInfo"],[{shopId:null,userId:null}],["global"])}})},".component-personal-center-login touchend":function(){var e=this,t=e.config.global.pathUrl;if(n.jsEvent.touch.touchIsMoved)return!1;window.location.href="/login.html?jumpUrl="+t}})}),define("modular/module/module-login-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-login-1></component-login-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1,beforeFunc:function(e,n){e.config.global.bShopArr=n.response.global||[]}}},config:{global:{isOpen:!1,isFocus:!1,iShopTimer:null,bombBox:!1,state:null}},request:{global:{account:"",password:""},USER_CHOOSESHOP_QUERY:{name:""}},response:{global:{}},sendArr:["USER_CHOOSESHOP_QUERY"],reload:!1,".component-login-shopInfo #shopInfo input":function(e){var n=this,t=$(e),r=t.val(),o=n.renderData.global.config.attr("iShopTimer");clearTimeout(o),r?(o=setTimeout(function(){n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success&&n.renderData.global.config.attr("iShopArr",e.obj||[])}).fail(function(){n.renderData.global.config.attr("iShopArr",[])})},250),n.renderData.global.config.attr("iShopTimer",o)):(n.renderData.global.config.attr("iShopArr",[]),n.renderData.global.config.attr("iShopTimer",null)),n.renderData.global.config.attr("iShopId",""),n.renderData.global.config.attr("iDomain",""),n.renderData.global.config.attr("isFocus",!0)},".component-login-shopInfo #shopInfo blur":function(e){var n=this,t=$(e),r=t.val(),o=n.modules.message;r?n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success?(n.renderData.global.config.attr("iShopArr",e.obj||[]),$.isEmptyObject(e.obj)&&o.refresh({type:"info",confirmBtn:!1,content:"暂未查询到与之相匹配的店铺！"})):e&&e.errorMsg?(n.renderData.global.config.attr("iShopArr",[]),o.refresh({type:"error",confirmBtn:!1,content:e.errorMsg})):(n.renderData.global.config.attr("iShopArr",[]),o.refresh({type:"info",confirmBtn:!1,content:"暂未查询到与之相匹配的店铺！"}))}).fail(function(e){e&&e.errorMsg?(n.renderData.global.config.attr("iShopArr",[]),o.refresh({type:"error",confirmBtn:!1,content:e.errorMsg})):(n.renderData.global.config.attr("iShopArr",[]),o.refresh({type:"error",confirmBtn:!1,content:"查询店铺失败！"}))}):n.renderData.global.config.attr("iShopArr",[]),n.renderData.global.config.attr("isFocus",!1)},".component-login-shopInfo #shopInfo touchend":function(e){var n=this,t=$(e),r=t.val();r&&n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success&&n.renderData.global.config.attr("iShopArr",e.obj||[])}),t.focus(),n.renderData.global.config.attr("isFocus",!0)},".component-login-shopInfo ul.choose li touchend":function(e){var t=this,r=$(e),o=r.attr("domain")||"",a=r.attr("shopId")||"",s=r.attr("shopName")||"",i=r.parents(".component-login-shopInfo");return n.jsEvent.touch.touchIsMoved||(i.find("#shopInfo").blur(),t.renderData.global.config.attr("isFocus",!1),t.renderData.global.config.attr("iShopId",a),t.renderData.global.config.attr("iDomain",o),t.renderData.global.config.attr("iShopName",s)),!1},".component-login-shopInfo .btn_change touchend":function(){var e=this,n=e.renderData.global.config.attr("isOpen");e.renderData.global.config.attr("isOpen",!n),e.renderData.global.config.attr("iShopName",""),e.renderData.global.config.attr("iShopArr",[]),e.renderData.global.config.attr("iShopId",""),e.renderData.global.config.attr("iDomain","")},".component-login-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&0==e.obj?(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号尚未注册！"}),t.addClass("state_error")):t.removeClass("state_error")}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.removeClass("state_error")})},".component-login-loginBtn:not(.state_error) touchend":function(){var e=this,t=e.element,r=e.modules.message,o=e.renderData.global.config.jumpUrl,a=e.renderData.global.request.attr(),s=t.find("#shopInfo").attr("domain")||"",i=t.find("#shopInfo").attr("shopId")||"";window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),e.sendRequest("AUTH_LOGIN",{phone:a.account,password:a.password}).done(function(t){if(t&&t.success){var a=n.jsData.location.hostUrl,c=a+"/wechat-transfer.html",l='"Bearer "'+t.obj.token,d=t.obj.userCenterId,p=!1+"，，"+o+"，"+i+"，"+d+"，"+l+"，"+s;e.jsUtil.weChat.browser()?(e.sendRequest("THIRD_WECHAT",{snsapiBase:!1,redirectUrl:c+"?info="+p}).done(function(e){"string"==typeof e&&(window.location.href=e)}),e.jsUtil.url.setParam({domain:s||""},"cover")):(localStorage.setItem("authId",'"Bearer "'+t.obj.token),localStorage.setItem("userId",t.obj.userCenterId),e.jsUtil.url.jumpPage(o,null,!0))}else t.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户登录失败！"})})},".component-login-third .img_weChat touchend":function(){var e=this,t=(e.element,e.modules.message),r=e.config.global.jumpUrl,o=n.jsData.location.hostUrl,a=o+"/wechat-transfer.html",s=!0+"，，"+r;window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),e.jsUtil.weChat.browser()?(e.renderData.global.config.attr("shopId"),e.sendRequest("THIRD_WECHAT",{snsapiBase:!0,redirectUrl:a+"?info="+s}).done(function(e){"string"==typeof e&&(window.location.href=e)})):t.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-login-bombBox .body li:not(.lose) touchend":function(e){var t=this,r=$(e),o=r.attr("domain"),a=r.attr("shopId"),s=r.attr("shopName");return n.jsEvent.touch.touchIsMoved||(t.renderData.global.config.attr("bShopName",s?"店铺："+s:""),t.renderData.global.config.attr("bShopId",a||""),t.renderData.global.config.attr("bDomain",o||"")),!1},".component-login-bombBox .header .btn touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,a=r.find("#bShopInfo"),s=a.attr("shopId")||"",i=a.attr("domain")||"";return t.hasClass("btn_ignore")?(r.find("input").removeAttr("disabled"),n.renderData.global.config.attr("bombBox",!1),n.renderData.global.config.attr("state").resolve("","")):t.hasClass("btn_sure")&&(s?(r.find("input").removeAttr("disabled"),n.renderData.global.config.attr("bombBox",!1),
n.renderData.global.config.attr("state").resolve(i||"",s||"")):o.refresh({type:"info",confirmBtn:!1,content:"尚未选择店铺！"})),!1}})}),define("modular/module/module-register-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-register-1></component-register-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{isOpen:!1,isFocus:!1,iShopTimer:null}},request:{global:{account:"",validation:"",password:"",confirmPassword:""}},sendArr:[],reload:!1,".component-register-shopInfo #shopInfo input":function(e){var n=this,t=$(e),r=t.val(),o=n.renderData.global.config.attr("iShopTimer");clearTimeout(o),r?(o=setTimeout(function(){n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success&&n.renderData.global.config.attr("iShopArr",e.obj||[])})},250),n.renderData.global.config.attr("iShopTimer",o)):n.renderData.global.config.attr("iShopArr",[]),n.renderData.global.config.attr("iShopId",""),n.renderData.global.config.attr("iDomain",""),n.renderData.global.config.attr("isFocus",!0)},".component-register-shopInfo #shopInfo blur":function(e){var n=this,t=$(e),r=t.val(),o=n.modules.message;r?n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success?(n.renderData.global.config.attr("iShopArr",e.obj||[]),$.isEmptyObject(e.obj)&&o.refresh({type:"info",confirmBtn:!1,content:"暂未查询到与之相匹配的店铺！"})):e&&e.errorMsg?o.refresh({type:"error",confirmBtn:!1,content:e.errorMsg}):o.refresh({type:"info",confirmBtn:!1,content:"暂未查询到与之相匹配的店铺！"})}).fail(function(e){e&&e.errorMsg?o.refresh({type:"error",confirmBtn:!1,content:e.errorMsg}):o.refresh({type:"error",confirmBtn:!1,content:"查询店铺失败！"})}):n.renderData.global.config.attr("iShopArr",[]),n.renderData.global.config.attr("isFocus",!1)},".component-register-shopInfo #shopInfo touchend":function(e){var n=this,t=$(e),r=t.val();r?n.sendRequest("USER_CHOOSESHOP_QUERY",{name:r}).done(function(e){e&&e.success&&n.renderData.global.config.attr("iShopArr",e.obj||[])}):n.renderData.global.config.attr("iShopArr",[]),t.focus(),n.renderData.global.config.attr("isFocus",!0)},".component-register-shopInfo ul.choose li touchend":function(e){var t=this,r=$(e),o=r.attr("domain")||"",a=r.attr("shopId")||"",s=r.attr("shopName")||"",i=r.parents(".component-register-shopInfo");return n.jsEvent.touch.touchIsMoved||(i.find("#shopInfo").blur(),t.renderData.global.config.attr("isFocus",!1),t.renderData.global.config.attr("iShopId",a),t.renderData.global.config.attr("iDomain",o),t.renderData.global.config.attr("iShopName",s)),!1},".component-register-shopInfo .btn_change touchend":function(){var e=this,n=e.element,t=e.renderData.global.config.attr("isOpen");n.find("#shopInfo").blur(),e.renderData.global.config.attr("isOpen",!t),e.renderData.global.config.attr("iShopName",""),e.renderData.global.config.attr("iShopArr",[]),e.renderData.global.config.attr("iShopId",""),e.renderData.global.config.attr("iDomain","")},".component-register-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&1==e.obj?(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号已被注册！"}),t.addClass("state_error")):t.removeClass("state_error")}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.removeClass("state_error")})},".component-register-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,a=t.parents(".component-register-validation");r.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.request.attr();!r.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.account)&&n.sendRequest("THIRD_PHONE",{phone:e.account}).done(function(e){if(e&&e.success){var n=60,r=function(e){n>0?(n--,a.find(".doing .val").text(n),setTimeout(function(){r(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),r(t)}else o.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-register-registerBtn:not(.state_error) touchend":function(){var e=this,t=e.element,r=e.modules.message,o=e.renderData.global.config.jumpUrl,a=t.find("#shopInfo").attr("domain")||"",s=t.find("#shopInfo").attr("shopId")||"";window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),e.jsUtil.weChat.browser()?setTimeout(function(){var i=e.renderData.global.request.attr();!t.find("#account").hasClass("state_error")&&e.jsUtil.check.phone(i.account)&&e.sendRequest("USER_REGISTRATION",{phone:i.account,pwd:i.password,code:i.validation}).done(function(t){if(t&&t.success){var c=t.obj;e.sendRequest("AUTH_REGISTER",{phone:i.account,password:i.password,userCenterId:c}).done(function(t){if(t&&t.success){var i=n.jsData.location.hostUrl,c=i+"/wechat-transfer.html",l='"Bearer "'+t.obj.token,d=t.obj.userCenterId,p=!1+"，true，"+o+"，"+s+"，"+d+"，"+l+"，"+a;e.sendRequest("THIRD_WECHAT",{snsapiBase:!1,redirectUrl:c+"?info="+p}).done(function(e){"string"==typeof e&&(window.location.href=e)}),e.jsUtil.url.setParam({domain:a||""},"cover")}else t.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})})}else t&&1==t.obj?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"验证码失效，请重试！"}):t.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:t.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"用户注册失败！"})})},200):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-bindMobile-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-bindmobile-1></component-bindmobile-1>"},region:{global:{reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",validation:""}},response:{global:{}},sendArr:[],reload:!1,".component-bindMobile-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr(),a=t.parents(".component-bindMobile-validation");n.jsUtil.weChat.browser()?n.jsUtil.check.phone(o.account)&&n.sendRequest("THIRD_PHONE",{phone:o.account}).done(function(e){if(e&&e.success){var n=60,o=function(e){n>0?(n--,a.find(".doing .val").text(n),setTimeout(function(){o(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),o(t)}else r.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})}):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-bindMobile-bingBtn:not(.state_error) touchend":function(){var e=this,t=e.element,r=e.modules.message,o=e.renderData.global.config.jumpUrl,a=n.jsData.userInfo.shopId,s=n.jsData.userInfo.openId;window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),window.localStorage.removeItem("authId"),e.jsUtil.weChat.browser()?setTimeout(function(){var n=e.renderData.global.request.attr();!t.find("#account").hasClass("state_error")&&e.jsUtil.check.phone(n.account)&&e.sendRequest("USER_REGISTRATION",{phone:n.account,code:n.validation}).done(function(n){if(n&&n.success){var t=n.obj;e.sendRequest("AUTH_LOGIN",{userCenterId:t}).done(function(n){if(n&&n.success){var i='"Bearer "'+n.obj.token;window.localStorage.setItem("userId",t),window.localStorage.setItem("authId",i),window.localStorage.setItem("openId",s),window.localStorage.setItem("alertDiscount",!0),a&&window.localStorage.setItem("shopId",a),e.jsUtil.url.jumpPage(o,"/index.html")}else n.errorMsg?r.refresh({type:"error",content:n.errorMsg}):r.refresh({type:"error",content:"绑定手机失败！"})}).fail(function(){r.refresh({type:"error",content:"绑定手机失败！"})})}else n&&1==n.obj?r.refresh({type:"error",content:"验证码失效，请重试！"}):n.errorMsg?r.refresh({type:"error",content:n.errorMsg}):r.refresh({type:"error",content:"绑定手机失败！"})}).fail(function(){r.refresh({type:"error",content:"绑定手机失败！"})})},200):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-personal-information-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-personal-information-1></component-personal-information-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,afterFunc:function(e,n){var t=n.response.global&&n.response.global.userDetail||{};t&&t.id?e.renderData.global.config.attr("detailExist",!0):e.renderData.global.config.attr("detailExist",!1),e.response.global=n.response.global||{},e.response.global.userDetail=e.response.global.userDetail||{}}}},config:{global:{detailExist:null}},request:{global:{}},response:{global:{}},sendArr:["USER_DETAIL_QUERY"],reload:!1,".component-personal-information-commit  touchend":function(e){var t=this,r=$(e),o=t.element,a=t.modules.message,s=t.config.global.jumpUrl,i=r.hasClass("edit")?"edit":r.hasClass("add")?"add":"",c=o.find("#identification").val().trim(),l=o.find(".headPortrait img").attr("src"),d=o.find("#nickname").val().trim(),p=o.find("#realname").val().trim(),u=o.find("#location").val().trim(),m=o.find("#gender").val().trim();p&&m&&c&&p.trim()&&m.trim()&&c.trim()?n.jsUtil.check.chinaName(p)?n.jsUtil.check.identity(c)?"edit"===i?t.sendRequest("USER_DETAIL_UPDATE",{headImg:l,nickName:d,name:p,sex:m,location:u,idNum:c}).done(function(){t.jsUtil.url.jumpPage(s,"/personal-center.html",!0)}):"add"===i&&t.sendRequest("USER_DETAIL_CREATE",{headImg:l,nickName:d,name:p,sex:m,location:u,idNum:c}).done(function(){t.jsUtil.url.jumpPage(s,"/personal-center.html",!0)}):a.refresh({content:"身份证填写有误！"}):a.refresh({content:"请正确填写您的中文姓名！"}):a.refresh({content:"请完善好个人信息！"})}})}),define("modular/module/module-address-manage-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-address-manage-1></component-address-manage-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,afterFunc:function(e,n){var t=e.modules.header,r=n.response.global;e.config.global.isFormOrder&&$.isArray(r)&&r.length>0?(t.renderData.global.config.attr("icon_AddressSure",!1),t.renderData.global.config.attr("icon_AddressManage",!0)):(t.renderData.global.config.attr("icon_AddressSure",!1),t.renderData.global.config.attr("icon_AddressManage",!1))}}},config:{},request:{global:{},USER_ADDRESS_QUERY:{numPerPage:5,currentPage:1}},response:{global:{},pagination:{}},sendArr:["USER_ADDRESS_QUERY"],reload:!1,".component-address-manage-list>.item:not(.select) .btn_remove  touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.parents("li").attr("id");o&&r.refresh({title:"温馨提示",content:"是否删除该条收货信息？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("USER_ADDRESS_DELETE",{id:o}).done(function(){n.toRender("USER_ADDRESS_QUERY",{},[{global:"response"}])})}})},".component-address-manage-list>.item:not(.select) .btnBox_left touchend":function(e){var n=this,t=$(e),r=t.parents("li").attr("id");n.sendRequest("USER_ADDRESS_UPDATE",{id:r,setDefault:1}).done(function(){n.toRender("USER_ADDRESS_QUERY",{},[{global:"response"}])})},".component-address-manage-list>.item.select                    touchend":function(e){var n=this,t=$(e),r=t.attr("id"),o=n.config.global.jumpUrl,a=n.jsUtil.path.delParam(o,["addressId"]);a=n.jsUtil.path.setParam(a,{addressId:r}),n.jsUtil.url.jumpPage(a,null,!0)},"{document} .component-header-right    .icon_AddressManage      touchend":function(){var e=this,n=e.modules.header;n.renderData.global.config.attr("icon_AddressSure",!0),n.renderData.global.config.attr("icon_AddressManage",!1),n.renderData.global.config.attr("title_text","管理收货地址"),e.renderData.global.config.attr("isFormOrder",!1)},"{document} .component-header-right    .icon_AddressSure        touchend":function(){var e=this,n=e.modules.header;n.renderData.global.config.attr("icon_AddressSure",!1),n.renderData.global.config.attr("icon_AddressManage",!0),n.renderData.global.config.attr("title_text","选择收货地址"),e.renderData.global.config.attr("isFormOrder",!0)}})}),define("modular/module/module-address-edit-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-address-edit-1></component-address-edit-1>"},region:{global:{reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){e.config.global.id&&$.each(n.response.global,function(n,t){t.id==e.config.global.id&&(e.response.global=t)})}}},config:{},request:{},response:{},sendArr:[],reload:!1,".component-address-edit-defaultSetting .btnSet   touchend":function(){var e=this,n=e.renderData.global.response.attr().setDefault;e.renderData.global.response.attr("setDefault",n?0:1)},".component-address-edit-commit                   touchend":function(){var e=this,n=e.element,t=e.renderData.global.config.jumpUrl,r=e.renderData.global.response.attr(),o=e.modules.message;n.find(".receiveName_state").trigger("blur"),n.find(".receivePhone_state").trigger("blur"),n.find(".province_state").trigger("change"),n.find(".city_state").trigger("change"),n.find(".area_state").trigger("change"),n.find(".address_state").trigger("blur"),n.find(".state_error").length>0?o.refresh({content:"请正确填写地址信息！"}):(r.receiveName=n.find("#consignee").val(),r.receivePhone=n.find("#telephone").val(),r.province=n.find("#province").val(),r.city="---- 所在市 ----"===n.find("#city").val()?"":n.find("#city").val(),r.area="---- 所在区 ----"===n.find("#area").val()?"":n.find("#area").val(),r.address=n.find("#address").val(),r.setDefault=r.setDefault?1:0,r.id?e.sendRequest("USER_ADDRESS_UPDATE",r).done(function(n){n.success?e.jsUtil.url.jumpPage(t,-1,!0):n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):o.refresh({content:"修改收货地址失败！",confirmBtn:!1})}):e.sendRequest("USER_ADDRESS_CREATE",r).done(function(n){n.success?e.jsUtil.url.jumpPage(t,-1,!0):n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):o.refresh({content:"创建收货地址失败！",confirmBtn:!1})}).fail(function(e){e.errorMsg?o.refresh({content:e.errorMsg,confirmBtn:!1}):o.refresh({content:"创建收货地址失败！",confirmBtn:!1})}))}})}),define("modular/module/module-shoppingCart-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=n.jsData.platform.rule.crossOrder.maxPrice;return n.jsData.platform.rule.normalOrder.minPrice,e.extend({tags:{global:"<component-shoppingcart-1></component-shoppingcart-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){var t={};t.typeObj={},t.quantity=0,t.allSelected=!1,t.oneSelected=!1,$.each(n.response.global,function(e,n){if(n.goodsSpecs){var r=n.type,o=n.itemId,a=n.goodsSpecs.status,s=n.supplierId,i=n.supplierName,c=0===r?"跨境":2===r?"一般":1===r?"大贸":"";t.quantity+=1,t.typeObj[r]=t.typeObj[r]||{},t.typeObj[r][s]=t.typeObj[r][s]||{},t.typeObj[r][s].type=r,t.typeObj[r][s].typeName=c,t.typeObj[r][s].supplierId=s,t.typeObj[r][s].supplierName=i,t.typeObj[r][s].itemObj=t.typeObj[r][s].itemObj||{},t.typeObj[r][s].itemObj[o]={},t.typeObj[r][s].itemObj[o].ids=n.id,t.typeObj[r][s].itemObj[o].status=a,t.typeObj[r][s].itemObj[o].selected=n.goodsSpecs.stock>0&&0!==a,t.typeObj[r][s].itemObj[o].goodsId=n.goodsSpecs.goodsId,t.typeObj[r][s].itemObj[o].firstCategory=n.goodsSpecs.firstCategory,t.typeObj[r][s].itemObj[o].secondCategory=n.goodsSpecs.secondCategory,t.typeObj[r][s].itemObj[o].thirdCategory=n.goodsSpecs.thirdCategory,t.typeObj[r][s].itemObj[o].type=r,t.typeObj[r][s].itemObj[o].href=n.href,t.typeObj[r][s].itemObj[o].itemId=n.itemId,t.typeObj[r][s].itemObj[o].freePost=n.freePost,t.typeObj[r][s].itemObj[o].freeTax=n.freeTax,t.typeObj[r][s].itemObj[o].unit=n.goodsSpecs.unit,t.typeObj[r][s].itemObj[o].itemImg=n.picPath,t.typeObj[r][s].itemObj[o].quantity=n.quantity,t.typeObj[r][s].itemObj[o].itemName=n.goodsName,t.typeObj[r][s].itemObj[o].goodsName=n.goodsName,t.typeObj[r][s].itemObj[o].itemSpecs=n.goodsSpecs,t.typeObj[r][s].itemObj[o].itemCode=n.goodsSpecs.itemCode,t.typeObj[r][s].itemObj[o].stock=n.goodsSpecs.stock>0?n.goodsSpecs.stock:0,t.typeObj[r][s].itemObj[o].weight=n.goodsSpecs.weight,t.typeObj[r][s].itemObj[o].exciseTax=n.goodsSpecs.exciseTax,t.typeObj[r][s].itemObj[o].incrementTax=n.goodsSpecs.incrementTax,t.typeObj[r][s].itemObj[o].priceList=n.goodsSpecs.priceList,t.typeObj[r][s].itemObj[o].carton=n.goodsSpecs.carton,t.typeObj[r][s].itemObj[o].tagList=[],$.each(n.goodsSpecs.tagList,function(e,n){"预售"===n.tagName&&(t.typeObj[r][s].itemObj[o].tagFunId=n.tagFunId,t.typeObj[r][s].itemObj[o].preSaleName=n.tagName,t.typeObj[r][s].itemObj[o].preSaleDesc=n.description),t.typeObj[r][s].itemObj[o].tagList.push(n)})}}),e.response.global={},e.response.global.orders=t}}},config:{quantityTimer:null},request:{},response:{},sendArr:t?["ORDER_SHOPPINGCART_QUERY"]:[],reload:!1,".component-shoppingCart-ordersDetails    .goodsList                    touchmove":function(e,t){var r=$(e),o=t||window.event,a=Math.abs(n.jsEvent.touch.touchSX),s=Math.abs(n.jsEvent.touch.touchSY),i=r.parent().find(".goodsList").not(r),c=a<=280?a:280;s<a-80&&(n.jsEvent.touch.touchSX>0&&(r.parent().find(".goodsList .controlGroup").css("display","block"),r.hasClass("inControl")&&r.find(".body").css("transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-o-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-ms-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-moz-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body").css("-webkit-transform","translate3d("+(c-80-200)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-o-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-ms-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-moz-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".controlGroup").css("-webkit-transform","translate3d("+(c-80+550)+"px, 0, 0)"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-o-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-ms-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-moz-transition","none"),r.hasClass("inControl")&&r.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".body,.controlGroup").css("transition","none"),i.find(".body,.controlGroup").css("-o-transition","none"),i.find(".body,.controlGroup").css("-ms-transition","none"),i.find(".body,.controlGroup").css("-moz-transition","none"),i.find(".body,.controlGroup").css("-webkit-transition","none")),n.jsEvent.touch.touchSX<0&&(r.hasClass("inControl")||(r.find(".controlGroup").css("transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),r.find(".body").css("transform","translate3d("+(0-(a-80))+"px, 0, 0)"),r.find(".body").css("-o-transform","translate3d("+(0-(a-80))+"px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d("+(0-(a-80))+"px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d("+(0-(a-80))+"px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d("+(0-(a-80))+"px, 0, 0)")),r.hasClass("inControl")&&(r.find(".body").css("transform","translate3d("+(-200-(a-80))+"px, 0, 0)"),r.find(".body").css("-o-transform","translate3d("+(-200-(a-80))+"px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d("+(-200-(a-80))+"px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d("+(-200-(a-80))+"px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d("+(-200-(a-80))+"px, 0, 0)")),r.find(".body,.controlGroup").css("transition","none"),r.find(".body,.controlGroup").css("-o-transition","none"),r.find(".body,.controlGroup").css("-ms-transition","none"),r.find(".body,.controlGroup").css("-moz-transition","none"),r.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)"),i.find(".body,.controlGroup").css("transition","200ms linear"),i.find(".body,.controlGroup").css("-o-transition","200ms linear"),i.find(".body,.controlGroup").css("-ms-transition","200ms linear"),i.find(".body,.controlGroup").css("-moz-transition","200ms linear"),i.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),i.find(".body").css("transform","translate3d(0, 0, 0)"),i.find(".body").css("-o-transform","translate3d(0, 0, 0)"),i.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),i.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),i.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.parent().find(".goodsList .controlGroup").css("display","block"),i.removeClass("inControl")),o.preventDefault(),o.stopPropagation())},".component-shoppingCart-ordersDetails    .goodsList                    touchend":function(e,t){var r=$(e),o=r.parent().find(".goodsList").not(r);n.jsEvent.touch.touchIsMoved&&(r.hasClass("inControl")&&n.jsEvent.touch.touchSX>=30&&(r.removeClass("inControl"),o.removeClass("inControl"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")),r.hasClass("inControl")&&n.jsEvent.touch.touchSX<30&&(r.addClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!r.hasClass("inControl")&&n.jsEvent.touch.touchSX<=-80&&(r.addClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!r.hasClass("inControl")&&n.jsEvent.touch.touchSX>-80&&(r.removeClass("inControl"),o.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".body,.controlGroup").css("transition","200ms linear"),r.find(".body,.controlGroup").css("-o-transition","200ms linear"),r.find(".body,.controlGroup").css("-ms-transition","200ms linear"),r.find(".body,.controlGroup").css("-moz-transition","200ms linear"),r.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")))},".component-shoppingCart-ordersDetails    .btn_plus                     touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,a=t.parents("[goodsId]").attr("type"),s=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=1*t.parent().find("input").val(),l=o.typeObj[a][s].itemObj[i].attr("stock"),d=o.typeObj[a][s].itemObj[i].attr("minQuantity"),p=o.typeObj[a][s].itemObj[i].attr("maxQuantity");!a&&0!==a||!s&&0!==s||!i&&0!==i||(t.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),t.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),l<=0||c<=l&&d&&l<d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):p&&c>p?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):d&&c<d&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(p||0===p)&&c>p?p:c,c=(d||0===d)&&c<d?d:c,c=c>l?l:c,c=c>0?c:1,t.val(1*c),o.typeObj[a][s].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_minus                    touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,a=t.parents("[goodsId]").attr("type"),s=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=1*t.parent().find("input").val(),l=o.typeObj[a][s].itemObj[i].attr("stock"),d=o.typeObj[a][s].itemObj[i].attr("minQuantity"),p=o.typeObj[a][s].itemObj[i].attr("maxQuantity");!a&&0!==a||!s&&0!==s||!i&&0!==i||(t.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),t.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),l<=0||c<=l&&d&&l<d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):p&&c>p?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):d&&c<d&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(p||0===p)&&c>p?p:c,c=(d||0===d)&&c<d?d:c,c=c>l?l:c,c=c>0?c:1,t.val(1*c),o.typeObj[a][s].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_input                    input":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orders,a=t.parents("[goodsId]").attr("type"),s=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId"),c=o.typeObj[a][s].itemObj[i].attr("stock"),l=o.typeObj[a][s].itemObj[i].attr("minQuantity"),d=o.typeObj[a][s].itemObj[i].attr("maxQuantity");if((a||0===a)&&(s||0===s)&&(i||0===i)){var p=t.val()?t.val().trim():0,u=/\D/.test(p)?p.replace(/\D/g,""):p;clearTimeout(n.config.quantityTimer),n.config.quantityTimer=setTimeout(function(){var e=1*u>0?1*u:1;c<=0||e<=c&&l&&c<l?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[a][s].itemObj[i].attr("quantity",1*e)}}):e>c?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量大于库存可用量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[a][s].itemObj[i].attr("quantity",1*e)}}):d&&e>d?r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已大于最大购买量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[a][s].itemObj[i].attr("quantity",1*e)}}):l&&e<l&&r.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已低于最小购买量！",timeOutFun:function(){e=(d||0===d)&&e>d?d:e,e=(l||0===l)&&e<l?l:e,e=e>c?c:e,e=1*e>0?1*e:1,t.val(1*e),o.typeObj[a][s].itemObj[i].attr("quantity",1*e)}})},650)}},".component-shoppingCart-ordersDetails    .btn_input                    blur":function(e){var n=this,t=$(e),r=n.renderData.global.response.orders,o=t.parents("[goodsId]").attr("type"),a=t.parents("[goodsId]").attr("supplierId"),s=t.parents("[itemId]").attr("itemId"),i=r.typeObj[o][a].itemObj[s].attr("stock"),c=r.typeObj[o][a].itemObj[s].attr("minQuantity"),l=r.typeObj[o][a].itemObj[s].attr("maxQuantity");if((o||0===o)&&(a||0===a)&&(s||0===s)){var d=t.val()?t.val().trim():0;d=(l||0===l)&&d>l?l:d,d=(c||0===c)&&d<c?c:d,d=d>i?i:d,d=d>0?d:1,t.val(1*d),r.typeObj[o][a].itemObj[s].attr("quantity",1*d)}},".component-shoppingCart-ordersDetails    .commodity-select             touchend":function(e){var n=this,t=$(e),r=n.renderData.global.config.attr("optionsOpen"),o=n.renderData.global.response.orders,a=t.parents("[goodsId]").attr("type"),s=t.parents("[goodsId]").attr("supplierId"),i=t.parents("[itemId]").attr("itemId");if(a&&s&&i){var c=o.typeObj[a][s].itemObj[i].attr("selected"),l=o.typeObj[a][s].itemObj[i].attr("status"),d=o.typeObj[a][s].itemObj[i].attr("stock"),p=o.typeObj[a][s].itemObj[i].attr("minQuantity"),u=c?!c:!!(0!==l&&d>0&&d>=p||r)&&!c;o.typeObj[a][s].itemObj[i].attr("selected",u)}},".component-shoppingCart-ordersDetails    .control_delete               touchend":function(e){var n=this,t=$(e),r=n.modules.footer,o=n.modules.header,a=n.modules.message,s=n.renderData.global.response,i=t.attr("ids"),c=s.orders;a.refresh({content:"是否删除该商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){
n.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:i}).done(function(e){e&&e.success&&($.each(c.attr().typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){""+r.ids===i&&c.typeObj[e][n].itemObj.removeAttr(t)})})}),n.sendRequest("ORDER_SHOPPINGCART_COUNT").done(function(e){e&&e.success&&(r.renderData.global.response.attr("count",e.obj),o.renderData.global.response.attr("shopCartCount",e.obj),e.obj||(o.renderData.global.config.attr("icon_search",!0),o.renderData.global.config.attr("icon_shopCartEdit",!1),o.renderData.global.config.attr("icon_shopCartSave",!1)))}))}),t.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})},".component-shoppingCart-optionsGroup     .control_selectAll            touchend":function(e){var n=this,t=n.renderData.global.response.orders,r=n.renderData.global.config.attr("optionsOpen"),o=!t.attr("allSelected"),a=t.attr();$.each(a.typeObj,function(e,n){$.each(n,function(n,a){$.each(a.itemObj,function(a,s){"boolean"==typeof s.selected&&(0!==s.status&&s.stock>0&&s.stock>=s.minQuantity||r?t.typeObj[e][n].itemObj[a].attr("selected",o):t.typeObj[e][n].itemObj[a].attr("selected",!1))})})})},".component-shoppingCart-optionsGroup     .btn_deleteMore:not(.lose)    touchend":function(e){var n=this,t=$(e),r=n.modules.footer,o=n.modules.header,a=n.modules.message,s=n.renderData.global.response.orders,i=s.attr(),c=[];$.each(i.typeObj,function(e,n){$.each(n,function(e,n){$.each(n.itemObj,function(e,n){!0===n.selected&&c.push(n.ids)})})});var l=c.join(",");l?a.refresh({content:"是否删除选中商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:l}).done(function(e){e&&e.success&&($.each(s.attr().typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){-1!==$.inArray(r.ids,c)&&s.typeObj[e][n].itemObj.removeAttr(t)})})}),n.sendRequest("ORDER_SHOPPINGCART_COUNT").done(function(e){e&&e.success&&(r.renderData.global.response.attr("count",e.obj),o.renderData.global.response.attr("shopCartCount",e.obj),e.obj||(o.renderData.global.config.attr("icon_search",!0),o.renderData.global.config.attr("icon_shopCartEdit",!1),o.renderData.global.config.attr("icon_shopCartSave",!1)))})),t.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),t.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")})}}):a.refresh({cancelBtn:!1,confirmBtn:!1,content:"请选择所要删除的商品！"})},".component-shoppingCart-optionsGroup     .btn_commitOrder:not(.lose)   click":function(){var e=this,n=e.renderData.global.response.orders.attr(),t=e.config.global.pathUrl,o={},a=0,s=e.modules.message;if($.each(n.typeObj,function(e,n){$.each(n,function(n,t){var r=!1,s=0,i=0,c=0,l=0,d=0;$.each(t.itemObj,function(p,u){0!==u.status&&u.stock>0&&u.stock>=u.minQuantity&&u.selected&&u.quantity>0&&(r=!0,s+=u.weight*u.quantity,i+=u.price*u.quantity,c+=u.vipPrice*u.quantity,l+=u.realPrice*u.quantity,d+=u.realVipPrice*u.quantity,o.typeObj=o.typeObj||{},o.typeObj[e]=o.typeObj[e]||{},o.typeObj[e][n]=o.typeObj[e][n]||{},o.typeObj[e][n].taxFee=0,o.typeObj[e][n].postFee=0,o.typeObj[e][n].exciseTaxFee=0,o.typeObj[e][n].incrementTaxFee=0,o.typeObj[e][n].type=t.type,o.typeObj[e][n].typeName=t.typeName,o.typeObj[e][n].supplierId=t.supplierId,o.typeObj[e][n].supplierName=t.supplierName,o.typeObj[e][n].supplierWeight=1*s,o.typeObj[e][n].supplierPrice=1*i,o.typeObj[e][n].supplierVipPrice=1*c,o.typeObj[e][n].supplierRealPrice=1*l,o.typeObj[e][n].supplierRealVipPrice=1*d,o.typeObj[e][n].itemObj=o.typeObj[e][n].itemObj||{},o.typeObj[e][n].itemObj[p]={},o.typeObj[e][n].itemObj[p].ids=u.ids,o.typeObj[e][n].itemObj[p].type=t.type,o.typeObj[e][n].itemObj[p].href=u.href,o.typeObj[e][n].itemObj[p].status=u.status,o.typeObj[e][n].itemObj[p].itemId=u.itemId,o.typeObj[e][n].itemObj[p].freePost=u.freePost,o.typeObj[e][n].itemObj[p].freeTax=u.freeTax,o.typeObj[e][n].itemObj[p].unit=u.unit,o.typeObj[e][n].itemObj[p].goodsId=u.goodsId,o.typeObj[e][n].itemObj[p].firstCategory=u.firstCategory,o.typeObj[e][n].itemObj[p].secondCategory=u.secondCategory,o.typeObj[e][n].itemObj[p].thirdCategory=u.thirdCategory,o.typeObj[e][n].itemObj[p].itemImg=u.itemImg,o.typeObj[e][n].itemObj[p].picPath=u.picPath,o.typeObj[e][n].itemObj[p].goodsName=u.itemName,o.typeObj[e][n].itemObj[p].quantity=u.quantity,o.typeObj[e][n].itemObj[p].exciseTax=u.exciseTax,o.typeObj[e][n].itemObj[p].incrementTax=u.incrementTax,o.typeObj[e][n].itemObj[p].priceList=u.priceList,o.typeObj[e][n].itemObj[p].tagList=u.tagList,o.typeObj[e][n].itemObj[p].tagFunId=u.tagFunId,o.typeObj[e][n].itemObj[p].preSaleName=u.preSaleName,o.typeObj[e][n].itemObj[p].preSaleDesc=u.preSaleDesc,o.typeObj[e][n].itemObj[p].sku=u.itemSpecs.sku,o.typeObj[e][n].itemObj[p].info=u.itemSpecs.info,o.typeObj[e][n].itemObj[p].stock=u.itemSpecs.stock>0?u.itemSpecs.stock:0,o.typeObj[e][n].itemObj[p].weight=u.itemSpecs.weight,o.typeObj[e][n].itemObj[p].itemCode=u.itemSpecs.itemCode,o.typeObj[e][n].itemObj[p].price=u.price,o.typeObj[e][n].itemObj[p].vipPrice=u.vipPrice,o.typeObj[e][n].itemObj[p].realPrice=u.realPrice,o.typeObj[e][n].itemObj[p].realVipPrice=u.realVipPrice,o.typeObj[e][n].itemObj[p].minPrice=u.itemSpecs.minPrice,o.typeObj[e][n].itemObj[p].maxPrice=u.itemSpecs.maxPrice,o.typeObj[e][n].itemObj[p].vipMinPrice=u.itemSpecs.vipMinPrice,o.typeObj[e][n].itemObj[p].vipMaxPrice=u.itemSpecs.vipMaxPrice,o.typeObj[e][n].itemObj[p].realMinPrice=u.itemSpecs.realMinPrice,o.typeObj[e][n].itemObj[p].realMaxPrice=u.itemSpecs.realMaxPrice,o.typeObj[e][n].itemObj[p].realVipMinPrice=u.itemSpecs.realVipMinPrice,o.typeObj[e][n].itemObj[p].realVipMaxPrice=u.itemSpecs.realVipMaxPrice,o.typeObj[e][n].itemObj[p].carton=u.itemSpecs.carton,a++)}),r&&a++})}),o.orderCount=a,!$.isEmptyObject(o)){var i=0,c=0,l=!0,d=!0;$.each(o.typeObj,function(e,n){if($.each(n,function(n,t){var o=0,a=0,p=t.supplierName;return $.each(t.itemObj,function(e,n){0===n.type?(o+=n.realPrice*n.quantity,i+=n.quantity):2===n.type&&(a+=n.realPrice*n.quantity,c+=n.quantity)}),"0"===e&&o>r&&i>1?(d=l=!1,s.refresh({cancelBtn:!1,confirmBtn:!1,content:p+"商品单笔订单价格超过"+r+"元，请调整！"}),!1):!!d&&void 0}),!d)return!1}),d&&(window.localStorage.setItem("showDiscount","{}"),window.localStorage.setItem("ordersInfo",JSON.stringify(o)),window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+t))}},"{document} .component-header-right       .icon_shopCartEdit            touchend":function(e){var n=this,t=n.element,r=t.find(".goodsList"),o=n.renderData.global.response.orders,a=n.modules.header,s=o.attr();$.each(s.typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){o.typeObj[e][n].itemObj[t].attr("selected",!1)})})}),n.renderData.global.config.attr("optionsOpen",!0),a.renderData.global.config.attr("icon_shopCartSave",!0),a.renderData.global.config.attr("icon_shopCartEdit",!1),r.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")},"{document} .component-header-right       .icon_shopCartSave            touchend":function(e){var n=this,t=n.element,r=t.find(".goodsList"),o=n.renderData.global.response.orders,a=n.modules.header,s=o.attr();$.each(s.typeObj,function(e,n){$.each(n,function(n,t){$.each(t.itemObj,function(t,r){o.typeObj[e][n].itemObj[t].attr("selected",!1)})})}),n.renderData.global.config.attr("optionsOpen",!1),a.renderData.global.config.attr("icon_shopCartSave",!1),a.renderData.global.config.attr("icon_shopCartEdit",!0),r.removeClass("inControl"),r.find(".body").css("transform","translate3d(0, 0, 0)"),r.find(".body").css("-o-transform","translate3d(0, 0, 0)"),r.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),r.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),r.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),r.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),r.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})}),define("modular/module/module-orderConfirm-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.platform.rule.crossOrder.maxPrice;return n.jsData.platform.rule.normalOrder.minPrice,e.extend({tags:{global:"<component-orderconfirm-1></component-orderconfirm-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){if($.isEmptyObject(e.config.global.showDiscount)){var t=0,r=n.response.global.ordersInfo,o=n.response.discount||[],a={},s={superposition:{pool:{},chooseObj:{}},unSuperposition:{pool:{},chooseObj:{}}};a[0]={},a[1]={},a[2]={},a[3]={},a[4]={},$.each(o,function(e,n){var t=n.name;n.name=t.split("/")[0],n.type=t.split("/")[1]||"",a[n.rule.range][n.couponId]=n}),$.each(r.typeObj,function(n,r){$.each(r,function(r,o){var i={type:o.type,info:{superposition:{pool:[],chooseArr:[]},unSuperposition:{pool:[],choose:"-1"}},supplierId:o.supplierId},c={};t++,c[0]={price:o.supplierPrice},c[1]={},c[2]={},c[3]={},c[4]={},$.each(o.itemObj,function(e,n){c[1][n.firstCategory]=c[1][n.firstCategory]||{},c[2][n.secondCategory]=c[2][n.secondCategory]||{},c[3][n.thirdCategory]=c[3][n.thirdCategory]||{},c[4][n.goodsId]=c[4][n.goodsId]||{};var t=c[1][n.firstCategory].price||0,r=c[2][n.secondCategory].price||0,o=c[3][n.thirdCategory].price||0;c[1][n.firstCategory].price=t+n.quantity*n.realPrice,c[2][n.secondCategory].price=r+n.quantity*n.realPrice,c[3][n.thirdCategory].price=o+n.quantity*n.realPrice,c[4][n.goodsId].price=n.quantity*n.realPrice}),$.each(c,function(e,n){$.each(n,function(n,t){var r="1"===e||"2"===e||"3"===e;"0"===e?$.each(a[e],function(e,n){1*t>=n.rule.condition&&(0!==n.rule.superposition?i.info.superposition.pool.push(n.couponId):i.info.unSuperposition.pool.push(n.couponId),0!==n.rule.superposition?s.superposition.pool[n.couponId]=n:s.unSuperposition.pool[n.couponId]=n)}):"4"===e?$.each(a[e],function(e,r){$.each(r.rule.bindingList,function(e,o){n==o.goodsId&&1*t.price>=r.rule.condition&&(0!==r.rule.superposition?i.info.superposition.pool.push(r.couponId):i.info.unSuperposition.pool.push(r.couponId),0!==r.rule.superposition?s.superposition.pool[r.couponId]=r:s.unSuperposition.pool[r.couponId]=r,t.couponId=r.couponId)})}):r&&$.each(a[e],function(e,r){n==r.rule.category&&1*t.price>=r.rule.condition&&(0!==r.rule.superposition?i.info.superposition.pool.push(r.couponId):i.info.unSuperposition.pool.push(r.couponId),0!==r.rule.superposition?s.superposition.pool[r.couponId]=r:s.unSuperposition.pool[r.couponId]=r,t.couponId=r.couponId)})})}),e.response.global.ordersInfo.orderCount=t,e.response.global.ordersInfo.typeObj[n][r].goodsTypeObj=c,e.response.global.ordersInfo.typeObj[n][r].discountPrice=0,e.response.global.ordersInfo.typeObj[n][r].orderDiscount=i})}),e.config.global.showDiscount=s,window.localStorage.setItem("showDiscount",JSON.stringify(s||{})),window.localStorage.setItem("ordersInfo",JSON.stringify(e.response.global.ordersInfo||{}))}},afterFunc:function(e,n){var t=[],r={},o=e.renderData.global.config.centerId,a=n.response.global.ordersInfo||{},s=n.config.global.address.province;$.each(a.typeObj,function(e,n){$.each(n,function(n,a){var i=a.supplierPrice,c=a.supplierWeight;$.each(a.itemObj,function(a,l){0==l.freePost&&(r[n]=e,s&&i&&c&&t.push({centerId:o,supplierId:n,province:s,weight:c,price:i}))})})}),t&&t.length>0&&e.sendRequest("ORDER_USER_POSTFEE",{data:encodeURI(JSON.stringify(t))}).done(function(n){n&&n.success&&$.each(n.obj,function(n,t){var o=t.supplierId,a=r[o];e.renderData.global.response.ordersInfo.typeObj[a][o].attr("postFee",t.postFee||0)})})}},payChoose:{cfgDynamic:!0}},config:{global:{},payChoose:{payChooseShow:!1,payState:null}},request:{COUPON_USERLIST_QUERY:{status:0}},response:{global:{}},sendArr:["COUPON_USERLIST_QUERY/discount"],reload:!0,".component-orderConfirm-orderDetails .commodity-coupon touchend":function(e){var n=this,t=$(e),r=!0,o=!1,a=n.modules.message,s=t.parents(".goodsList"),i=n.config.global.pathUrl,c=n.renderData.global.response.ordersInfo.attr(),l=n.renderData.global.config.showDiscount.attr(),d=s.attr("type"),p=s.attr("supplierId"),u=c.typeObj[d][p],m=u.orderDiscount,f=m.info.superposition.chooseArr.join(",")||"",g=m.info.unSuperposition.choose||"-1";if(f||g&&"-1"!==g?o=!0:$.each(m.info,function(e,n){$.each(n.pool,function(e,n){if(!r)return!1;r=!1,o=!0})}),o){var h=JSON.stringify(u||{}),b=JSON.stringify(c||{}),v=JSON.stringify(l||{});window.localStorage.setItem("orderInfo",h),window.localStorage.setItem("ordersInfo",b),window.localStorage.setItem("showDiscount",v),window.location.href="/discount.html?type=orderConfirm&jumpUrl="+i+"&choose1="+f+"&choose2="+g}else a.refresh({content:"该订单暂无可使用的优惠券！",cancelBtn:!1,confirmBtn:!1})},".component-orderConfirm-content .commodity-payBtn .btn_commit touchend":function(e){var r=this,o=$(e),a={},s=[],i=[],c=r.element,l=r.modules.message,d=r.config.global.jumpUrl,p=r.config.global.pathUrl,u=r.config.global.redirect,m=o.parents(".goodsList");if(n.jsEvent.touch.focusTime<=500)return null;var f=m.attr("type"),g=m.attr("supplierId"),h=r.config.global.address,b=r.renderData.global.response.ordersInfo,v=b.typeObj[f][g].attr(),y=v.orderDiscount.info.superposition.chooseArr,j=v.orderDiscount.info.unSuperposition.choose,_=b.attr("orderCount"),w=window.localStorage.getItem("openId"),I=window.localStorage.getItem("pushUserId"),C=0,O=c.find(".commodity-remark input").val()||"",D=!1,S=!1;r.renderData.payChoose.config.attr("payChooseShow",!0),r.renderData.payChoose.config.attr("orderFlag",f),r.renderData.payChoose.config.attr("payState",$.Deferred());var x=0,P={},U=[];if(P.receiveName=h.receiveName,P.receivePhone=h.receivePhone,P.receiveProvince=h.province,P.receiveCity=h.city,P.receiveArea=h.area,P.receiveAddress=h.address,P.payment=1*v.orderPrice-1*v.discountPrice,P.postFee=v.postFee,P.taxFee=v.taxFee,$.each(v.itemObj,function(e,n){if(n.ids&&s.push(n.ids),U.push({sku:n.sku,itemId:n.itemId,goodsId:n.goodsId,itemCode:n.itemCode,itemName:n.goodsName,itemImg:n.itemImg,itemInfo:n.info,itemQuantity:n.quantity,itemPrice:n.price,actualPrice:n.realPrice,unit:n.unit}),!n.stock||n.stock<=0)return D=!0,S=n.goodsName,!1;C=n.tagFunId||0,x++}),D)return void l.refresh({title:"库存不足",content:"该订单"+S+"商品库存不足，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){r.jsUtil.url.jumpPage(d,null,!0)}});a={tdq:x,openId:w,supplierId:g,orderDetail:P,orderGoodsList:U,createType:1===C?4:0,expressType:0,orderSource:1,orderFlag:f,pushUserId:I,redirect:u,tagFun:C,remark:O},j&&"-1"!==j&&i.push(j),$.each(y,function(e,n){i.push(n)}),i.length>0&&(a.couponIds=i.join(",")),$.when(r.renderData.payChoose.config.attr().payState).done(function(e){var n=function(){},o=function(){b.attr("orderCount",_),b.typeObj[f][g].attr("commitText","提交成功"),window.localStorage.setItem("ordersInfo",JSON.stringify(b.attr())),window.localStorage.removeItem("pushUserId")},i=function(){b.typeObj[f].removeAttr(g),_<=0&&b.removeAttr("orderCount"),$.isEmptyObject(b.typeObj[f].attr())&&b.typeObj.removeAttr(f),$.isEmptyObject(b.typeObj.attr())&&b.removeAttr("typeObj"),window.localStorage.setItem("ordersInfo",JSON.stringify(b.attr())),_<=0&&window.location.replace("/orderList.html")},c=function(){var e=b.attr();delete e.typeObj[f][g],_<=0&&delete e.orderCount,$.isEmptyObject(e.typeObj[f])&&delete e.typeObj[f],$.isEmptyObject(e.typeObj)&&delete e.typeObj,window.localStorage.setItem("ordersInfo",JSON.stringify(e)),window.localStorage.removeItem("sendToYinLian"),window.localStorage.removeItem("sendToAliPay")};b.typeObj[f][g].attr("committed",!0),b.typeObj[f][g].attr("commitText","正在提交.."),"weChatPay"===e&&(a.type="JSAPI",a.payType=a.orderDetail.payType=1,n=function(e){r.jsUtil.weChat.toPay("JSAPI",e.obj,{success:i,cancel:i})}),"aliPay"===e&&(a.type="scanCode",a.payType=a.orderDetail.payType=2,n=function(e){if(e.obj){c();var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"ybPay"===e&&(a.type="",a.payType=a.orderDetail.payType=5,n=function(e){e.obj&&(window.location.href=e.obj.url)}),"unionPay"===e&&(a.type="08",a.payType=a.orderDetail.payType=3,n=function(e){if(e.obj){c();var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),r.sendRequest("USER_DETAIL_QUERY").done(function(e){if(e&&e.success){if($.isPlainObject(e.obj))if($.isPlainObject(e.obj.userDetail)&&e.obj.userDetail.idNum){var i=0;0==f&&a.orderDetail.payment>t&&(1===a.orderGoodsList.length&&1===a.orderGoodsList[0].itemQuantity||(i=1)),0==i?(a.orderDetail.customerIdNum=e.obj.userDetail.idNum,a.orderDetail.customerName=e.obj.userDetail.name,a.orderDetail.customerPhone=e.obj.phone,r.sendRequest("ORDER_USER_CREATE",a).done(function(e){if(e&&e.success)_--,s.join(",")?r.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:s.join(",")}).done(function(){o(),n(e)}):(o(),n(e));else{l.refresh({type:"error",content:(e||{}).errorMsg||"提交订单失败！",cancelBtn:!1,confirmBtn:!1});var t={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:a.orderGoodsList,orderId:"订单未生成"};r.sendRequest("SET_DATA_LOGS",t),b.typeObj[f][g].attr("committed",!1),b.typeObj[f][g].attr("commitText","重新提交"),window.localStorage.setItem("ordersInfo",JSON.stringify(b.attr()))}}).fail(function(e){l.refresh({type:"error",content:(e||{}).errorMsg||"提交订单失败！",cancelBtn:!1,confirmBtn:!1});var n={logsName:"orderSure",errorCode:"createOrder",errorMsg:e.errorMsg,detail:a.orderGoodsList,orderId:"订单未生成"};r.sendRequest("SET_DATA_LOGS",n),b.typeObj[f][g].attr("committed",!1),b.typeObj[f][g].attr("commitText","重新提交"),window.localStorage.setItem("ordersInfo",JSON.stringify(b.attr()))})):1==i&&l.refresh({title:"温馨提示",content:"根据海关相关规定，单笔跨境订单金额不得超过"+t+"元，是否返回上页调整？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){b.typeObj[f][g].attr("committed",!1),b.typeObj[f][g].attr("commitText","重新提交")},confirmFun:function(){r.jsUtil.url.jumpPage(d,null,!0)}})}else l.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/personal-information.html?jumpUrl="+p}})}else l.refresh({title:"实名认证",content:"跨境订单需填写身份证信息, 请完善!",DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/personal-information.html?jumpUrl="+p}})})})}})}),define("modular/module/module-orderList-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-orderlist-1></component-orderlist-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!1,resDynamic:!0,beforeFunc:function(e,n){var t=0,r=0,o=0,a=0,s=n.response.global.orderInfo||{};$.each(n.response.global.orderStatus,function(e,n){var s=n.status,i=n.total;0===s?t+=i:1===s||2===s||3===s||4===s||5===s||11===s||12===s?r+=i:6===s?o+=i:7===s&&(a+=i)}),e.config.global.currentPage=(s.pagination||{}).currentPage,e.config.global.totalPages=(s.pagination||{}).totalPages,e.response.global.orderStatus={needPay:t,needDeliver:r,needReceived:o,finish:a}},afterFunc:function(e,n){e.config.global.currentPage===e.config.global.totalPages?$(e.element).find(".isLoading span").text("没有更多数据了..."):$(e.element).find(".isLoading span").text("请下拉加载...")}},payChoose:{cfgDynamic:!0}},config:{global:{siteInfo:n.jsData.siteInfo},payChoose:{payChooseShow:!1,payState:null}},request:{global:{},ORDER_USER_QUERY:{numPerPage:5,currentPage:1}},response:{global:{}},sendArr:["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],reload:!1,".component-orderList-content       span.state touchend":function(e){var n=this,t=$(e),r=n.modules.message;t.hasClass("active")||(t.hasClass("state_all")?(delete n.request.ORDER_USER_QUERY.status,delete n.request.ORDER_USER_QUERY.statusArr,n.request.ORDER_USER_QUERY.currentPage=1,n.renderData.global.config.attr("orderAll","active"),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.delParam(["queryType"],"cover")):t.hasClass("state_needPay")?(n.request.ORDER_USER_QUERY.status=0,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay","active"),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needPay"},"cover")):t.hasClass("state_needDeliver")?(delete n.request.ORDER_USER_QUERY.status,n.request.ORDER_USER_QUERY.currentPage=1,n.request.ORDER_USER_QUERY.statusArr="1,2,3,4,5,11,12",n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver","active"),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needDeliver"},"cover")):t.hasClass("state_needReceive")?(n.request.ORDER_USER_QUERY.status=6,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive","active"),n.renderData.global.config.attr("orderFinished",null),n.jsUtil.url.setParam({queryType:"needReceived"},"cover")):t.hasClass("state_finished")&&(n.request.ORDER_USER_QUERY.status=7,n.request.ORDER_USER_QUERY.currentPage=1,delete n.request.ORDER_USER_QUERY.statusArr,n.renderData.global.config.attr("orderAll",null),n.renderData.global.config.attr("orderNeedPay",null),n.renderData.global.config.attr("orderNeedDeliver",null),n.renderData.global.config.attr("orderNeedReceive",null),n.renderData.global.config.attr("orderFinished","active"),n.jsUtil.url.setParam({queryType:"finished"},"cover")),n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]).done(function(){$("html,body").animate({scrollTop:0},300)}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"获取失败，请重试！"})}))},".component-orderList-orderDetails .btn_confirmDelivery touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_CONFIRM.orderId=r,o.refresh({type:"info",language:"zh",content:"该订单是否确认收货？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_CONFIRM").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"确认收货失败！"})}).fail(function(e){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"确认收货失败！"})})}})},".component-orderList-orderDetails .btn_closeOrder touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_CLOSE.orderId=r,o.refresh({type:"info",language:"zh",content:"是否关闭该订单？请确认！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_CLOSE").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"关闭订单失败！"})}).fail(function(e){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e&&e.errorMsg||"关闭订单失败！"})})}})},".component-orderList-orderDetails .btn_delOrder touchend":function(e){var n=this,t=$(e),r=t.attr("orderId"),o=n.modules.message;n.request.ORDER_USER_DELETE.orderId=r,o.refresh({type:"info",language:"zh",content:"是否删除该订单？请确认！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){n.sendRequest("ORDER_USER_DELETE").done(function(e){e&&e.success?n.toRender(["ORDER_USER_QUERY/global/orderInfo","ORDER_USER_STATUS_COUNT/global/orderStatus"],[{},{}],[{global:["response"]},"pagination"]):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"订单确认失败！"})}).fail(function(e){e&&e.errorMsg&&o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e.errorMsg||"订单确认失败！"})})}})},".component-orderList-orderDetails .btn_refund touchend":function(){var e=this,n=e.modules.message,t=e.renderData.global.config.siteInfo.attr()||{};t.qq?window.open("http://wpa.qq.com/msgrd?v=3&uin="+t.qq+"&site=qq&menu=yes"):n.refresh({content:"暂时无法联系客服!",confirmBtn:!1})},".component-orderList-orderDetails .btn_toPay touchend":function(e){var t=this,r=$(e),o=t.modules.message,a=t.config.global.redirect,s=r.attr("orderId"),i=r.attr("orderFlag"),c=localStorage.getItem("openId");if(n.jsEvent.touch.focusTime<=300)return null;t.renderData.payChoose.config.attr("payChooseShow",!0),t.renderData.payChoose.config.attr("orderFlag",i),t.renderData.payChoose.config.attr("payState",$.Deferred()),$.when(t.renderData.payChoose.config.attr().payState).done(function(e){var n="",r="",i=function(){},l=function(){setTimeout(function(){window.location.replace(window.location.href)},200)};"weChatPay"===e&&(n="JSAPI",r=1,i=function(e){t.jsUtil.weChat.toPay("JSAPI",e.obj,{success:l})}),"aliPay"===e&&(n="scanCode",r=2,i=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"ybPay"===e&&(n="",r=5,i=function(e){e.obj&&(window.location.href=e.obj)}),"unionPay"===e&&(n="08",r=3,i=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),t.sendRequest("PAY_ORDER",{orderId:s,payType:r,type:n,openId:c,redirect:a}).done(function(n){n&&n.success?i(n):n&&n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):"weChatPay"===e&&o.refresh({content:"该订单已被微信关闭，请手动关闭该订单！",confirmBtn:!1})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"支付失败！"})})})},".component-orderList-orderDetails .btn_viewLogistics touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.response.orderInfo.orderList.attr(),a=t.attr("orderId"),s=null;if($.each(o||{},function(e,n){if(a===n.orderId)return s=n,!1}),s){var i=!1,c=s.orderExpressList||[];$.each(c,function(e,n){if(n.expressId&&n.expressName)return i=!0,!1}),i?window.location.href="/logistics.html?orderId="+a:r.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！"})}else r.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！"})},"{window}   scroll":function(){var e=this,n=$(document),t=e.config.global.totalPages,r=e.config.global.currentPage,o=e.request.ORDER_USER_QUERY.currentPage,a=r===t,s=r<o,i=$(window).scrollTop()+$(window).height()+350>$(document).height();a?n.find(".isLoading span").text("没有更多数据了..."):n.find(".isLoading span").text("请下拉加载..."),!i||a||s||(e.request.ORDER_USER_QUERY.currentPage++,e.sendRequest("ORDER_USER_QUERY",{currentPage:r+1}).done(function(t){if(t&&t.success){var r=t.obj;$.each(r.orderList,function(n,t){e.renderData.global.response.orderInfo.orderList.push(t)}),r.pagination.currentPage===r.pagination.totalPages&&n.find(".isLoading span").text("没有更多数据了..."),e.config.global.currentPage=r.pagination.currentPage,e.config.global.totalPages=r.pagination.totalPages}}))}})}),define("modular/module/module-orderDetail-1",["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-orderdetail-1></component-orderdetail-1>",payChoose:"<component-pay-choose-1></component-pay-choose-1>"},region:{global:{resDynamic:!0,beforeFunc:function(e,n){e.response.global.orderInfo=n.response.global.orderInfo.orderList[0]||{}}},payChoose:{cfgDynamic:!0}},config:{payChoose:{payChooseShow:!1,payState:null}},request:{},response:{},sendArr:["ORDER_USER_QUERY/global/orderInfo"],reload:!1,".component-orderDetail-content .orderItem .btn_viewLogistics touchend":function(e){var n=this,t=$(e),r=n.modules.message,o=t.attr("orderId"),a=n.renderData.global.response.orderInfo.attr();if(a){var s=!1,i=a.orderExpressList||[];$.each(i,function(e,n){if(n.expressId&&n.expressName)return s=!0,!1}),s?window.location.href="/logistics.html?orderId="+o:r.refresh({content:"暂无物流信息！"})}else r.refresh({content:"暂无物流信息！"})},".component-orderDetail-content .component-orderDetail-log .btn_toPay touchend":function(e){var t=this,r=$(e),o=t.modules.message,a=t.config.global.redirect,s=r.attr("orderId"),i=r.attr("orderFlag"),c=localStorage.getItem("openId");if(n.jsEvent.touch.focusTime<=300)return null;t.renderData.payChoose.config.attr("payChooseShow",!0),t.renderData.payChoose.config.attr("orderFlag",i),t.renderData.payChoose.config.attr("payState",$.Deferred()),$.when(t.renderData.payChoose.config.attr().payState).done(function(e){var n="",r="",i=function(){},l=function(){setTimeout(function(){window.location.replace(window.location.href)},200)};"weChatPay"===e&&(n="JSAPI",r=1,i=function(e){t.jsUtil.weChat.toPay("JSAPI",e.obj,{success:l})}),"aliPay"===e&&(n="scanCode",r=2,i=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj)
;window.localStorage.setItem("sendToAliPay",n),window.location.href="/pay-transfer.html"}}),"ybPay"===e&&(n="",r=5,i=function(e){e.obj&&(window.location.href=e.obj)}),"unionPay"===e&&(n="08",r=3,i=function(e){if(e.obj){var n="string"==typeof e.obj?e.obj:JSON.stringify(e.obj);window.localStorage.setItem("sendToYinLian",n),window.location.href="/pay-transfer.html"}}),t.sendRequest("PAY_ORDER",{orderId:s,payType:r,type:n,openId:c,redirect:a}).done(function(n){n&&n.success?i(n):n&&n.errorMsg?o.refresh({content:n.errorMsg,confirmBtn:!1}):"weChatPay"===e&&o.refresh({content:"该订单已被微信关闭，请手动关闭该订单！",confirmBtn:!1})}).fail(function(){o.refresh({type:"error",content:"支付失败！"})})})}})}),define("modular/module/module-logistics-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-logistics-1></component-logistics-1>"},region:{global:{beforeFunc:function(e,n){delete e.response.global.pagination,e.response.global.orderInfo=n.response.global.orderList[0]||{}},afterFunc:function(e){var n=$.Deferred(),t=e.modules.message,r=e.response.global.orderInfo,o=r?r.orderExpressList:[];if(o.length>0){var a=[];return $.each(o,function(n,r){if(!r.expressId||!r.expressName)return!0;var s={expressId:r.expressId,carrierName:r.expressName},i=function(e,n,s,c){c&&(a[e]=$.Deferred()),n.sendRequest("THIRD_LOGISTICS",s).done(function(n){n&&n.success&&$.isArray((n.obj||{}).Traces)?(o[e].infoArr=n.obj.Traces.reverse(),a[e].resolve()):(t.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+r.expressId+"’的物流信息！"}),a[e].resolve())}).fail(function(){c?i(e,n,s,!1):(t.refresh({confirmBtn:!1,content:"暂未查到运单号为‘"+r.expressId+"’的物流信息！"}),a[e].resolve())})};i(n,e,s,!0)}),$.when.apply(e,a).done(function(){e.config.global.isMore=o.length>1,e.config.global.length=o.length,e.renderFunc(["global"]),n.resolve()}),n}t.refresh({cancelBtn:!1,confirmBtn:!1,content:"暂无物流信息！",timeOutFun:function(){window.history.go(-1)}})}}},config:{global:{}},request:{global:{}},response:{global:{}},sendArr:["ORDER_USER_QUERY"],reload:!1})}),define("modular/module/module-alert-discount-1",["config.page.render"],function(e){"use strict";var n=window.capi.get(),t=n.jsData.userInfo.isLogin,r=t?["COUPON_NODE_QUERY/global"]:[];return e.extend({tags:{global:"<component-alert-discount-1></component-alert-discount-1>"},region:{global:{reqDynamic:!0,resDynamic:!1,beforeFunc:function(e,n){$.isArray(n.response.global)&&0!==n.response.global.length||(e.config.global.isShow=!1)}}},config:{global:{isShow:window.localStorage.getItem("alertDiscount")}},request:{COUPON_NODE_QUERY:{node:1}},sendArr:r,reload:!1,refresh:function(e){var n=this,t=n.renderData.global.response,r=$.isArray(t)&&$.isPlainObject(t[0]);"object"==typeof e&&$.each(e,function(t){n.config.global[t]=e[t]}),r&&-1!==!t[0].receiveStatus||(n.config.global.isShow=!1),n.renderFunc(["global"])},".component-alert-discount-alert .msg-btn touchend":function(){var e=this,n=e.modules.message,t=e.renderData.global.response[0].couponId;e.sendRequest("COUPON_RECEIVE",{couponId:t}).done(function(t){t.success?(n.refresh({content:"领取成功！是否跳转到我的优惠券？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href=".discount.html?jumpUrl=/personal-center.html"}}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()):(n.refresh({cancelBtn:!1,confirmBtn:!1,content:t.errorMsg||"领取失败！"}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh())}).fail(function(){n.refresh({cancelBtn:!1,confirmBtn:!1,content:"领取失败！"}),window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()})},".component-alert-discount-alert .cancel-btn touchend":function(){var e=this;window.localStorage.removeItem("alertDiscount"),e.config.global={isShow:!1},e.refresh()}})}),define("modular/module/module-discount-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-discount-1></component-discount-1>"},region:{global:{cfgDynamic:!0,resDynamic:!0,beforeFunc:function(e,n){null===n.response.global&&(e.response.global={}),"personalCenter"===e.config.global.type&&$.each(e.response.global,function(e,n){n.type=n.name.split("/")[1]||"",n.name=n.name.split("/")[0]||""})}}},config:{global:{status:0}},request:{COUPON_USERLIST_QUERY:{status:0}},response:{global:{}},sendArr:["COUPON_USERLIST_QUERY/global"],reload:!1,".component-discount-type li:not(.active) touchend":function(e){var n=this,t=$(e),r=t.attr("type");n.config.global.status=r,t.addClass("active").siblings(".active").removeClass("active"),n.toRender("COUPON_USERLIST_QUERY/global",{status:r},["global"])},".component-discount-list.personalCenter .list-item.normal .availableAll touchend":function(e){window.location.href="/index.html"},".component-discount-list.personalCenter .list-item.normal .classification touchend":function(e){var n=this,t=$(e),r=t.attr("index"),o=n.response.global[r].rule.range,a=n.response.global[r].rule.category;1===o&&(window.location.href="/searchProduct.html?firstCategory="+a),2===o&&(window.location.href="/searchProduct.html?secondCategory="+a),3===o&&(window.location.href="/searchProduct.html?thirdCategory="+a)},".component-discount-list.personalCenter .list-item.normal .lookGoodsDetail touchend":function(e){var n=this,t=$(e),r=t.attr("index"),o=n.response.global[r].rule.range,a=n.response.global[r].rule.bindingList||[],s=a.length;if(4===o&&a&&s>0){var i=Math.floor(Math.random()*s),c=a[i].goodsId;window.location.href="/goodsDetail.html?goodsId="+c}},".component-discount-list.orderConfirm .list-item:not(.lose):not(.used) touchend":function(e){var n=this,t=$(e),r=t.attr("couponId"),o=t.attr("discountType"),a=t.hasClass("select"),s=n.renderData.global.config,i=n.renderData.global.response,c=n.renderData.global.config.showDiscount,l=c.attr(),d=i.goodsTypeObj.attr(),p=i.attr("discountPrice"),u=i.orderDiscount.attr(),m=u.type,f=u.supplierId,g=l[o].pool[r],h=g.rule.range,b=g.rule.category,v=g.rule.valueType,y=g.rule.bindingList,j=g.rule.deductibleValue,_=0,w=-1,I=-1,C="",O="",D="";if(0===h)_=d[h].price,0===v&&(p=a?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=a?1*p-j:1*p+j,i.attr("discountPrice",p));else if(4===h){var S=[];$.each(y,function(e,n){void 0!==d[h][n]&&S.push(d[h][n].price)}),_=Math.max.apply(Math,S),0===v&&(p=a?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=a?1*p-j:1*p+j,i.attr("discountPrice",p))}else _=d[h][b].price,0===v&&(p=a?1*p-_*j:1*p+_*j,i.attr("discountPrice",p)),1===v&&(p=a?1*p-j:1*p+j,i.attr("discountPrice",p));"unSuperposition"===o&&(a?(C=l[o].chooseObj[r],O=C.split("_")[0]===m.toString(),D=C.split("_")[1]===f.toString(),O&&D&&(s.attr("choose","-1"),i.orderDiscount.info[o].attr("choose","-1"),c[o].chooseObj.removeAttr(r))):(s.attr("choose",r),i.orderDiscount.info[o].attr("choose",r),c[o].chooseObj.attr(r,m+"_"+f))),"superposition"===o&&(a?(C=l[o].chooseObj[r],O=C.split("_")[0]===m.toString(),D=C.split("_")[1]===f.toString(),O&&D&&(w=$.inArray(r,s.chooseArr),I=$.inArray(r,u.info[o].chooseArr),-1!==w&&s.chooseArr.splice(w,1),-1!==I&&i.orderDiscount.info[o].chooseArr.splice(I,1),c[o].chooseObj.removeAttr(r))):(w=$.inArray(r,s.chooseArr),I=$.inArray(r,u.info[o].chooseArr),-1===w&&s.chooseArr.push(r),-1===I&&i.orderDiscount.info[o].chooseArr.push(r),c[o].chooseObj.attr(r,m+"_"+f)))}})}),define("modular/module/module-forgetPassword-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-forgetpassword-1></component-forgetpassword-1>"},region:{global:{reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{account:"",validation:"",password:"",confirmPassword:""}},sendArr:[],reload:!1,".component-forgetPassword-account #account blur":function(e){var n=this,t=$(e),r=n.modules.message,o=n.renderData.global.request.attr();n.jsUtil.check.phone(o.account)&&n.jsUtil.weChat.browser()&&n.sendRequest("AUTH_CHECK",{userName:o.account,phone:o.account}).done(function(e){e&&!0===e.success&&1==e.obj?t.removeClass("state_error"):(r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"该手机号尚未注册！"}),t.addClass("state_error"))}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"未能查询到该手机号是否已注册！"}),t.addClass("state_error")})},".component-forgetPassword-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,a=t.parents(".component-forgetPassword-validation");r.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.request.attr();!r.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.account)&&n.sendRequest("THIRD_PHONE",{phone:e.account}).done(function(e){if(e&&e.success){var n=60,r=function(e){n>0?(n--,a.find(".doing .val").text(n),setTimeout(function(){r(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),r(t)}else o.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-forgetPassword-forgetPasswordBtn:not(.state_error) touchend":function(){var e=this,n=e.element,t=e.modules.message,r=e.renderData.global.config.jumpUrl;e.jsUtil.weChat.browser()?setTimeout(function(){var o=e.renderData.global.request.attr();!n.find("#account").hasClass("state_error")&&e.jsUtil.check.phone(o.account)&&(window.localStorage.removeItem("authId"),window.localStorage.removeItem("userId"),window.localStorage.removeItem("openId"),e.sendRequest("AUTH_PWD_CHANGE",{userName:o.account,password:o.password,code:o.validation}).done(function(n){n&&n.success?t.refresh({content:"修改密码成功!",cancelBtn:!1,confirmBtn:!1,timeOutFun:function(){e.jsUtil.url.jumpPage("/login.html?jumpUrl="+r,null)}}):t.refresh({cancelBtn:!1,confirmBtn:!1,content:n.errorMsg})}).fail(function(){t.refresh({content:"修改密码失败!",confirmBtn:!1})}))},200):t.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-share-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-share-1></component-share-1>"},region:{global:{}},config:{global:{}},request:{global:{}},response:{global:{}},sendArr:[],reload:!1})}),define("modular/module/module-apply-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-apply-1></component-apply-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!1}},config:{global:{}},request:{global:{userName:"",account:"",validation:"",promotion:"",password:"",confirmPassword:"",inviter:"暂无邀请人"}},sendArr:[],reload:!1,".component-apply-validation .getValidation touchend":function(e){var n=this,t=$(e),r=n.element,o=n.modules.message,a=t.parents(".component-apply-validation");r.find("#account").blur(),n.jsUtil.weChat.browser()?setTimeout(function(){var e=n.renderData.global.config.attr();!r.find("#account").hasClass("state_error")&&n.jsUtil.check.phone(e.phone)&&n.sendRequest("THIRD_PHONE",{phone:e.phone}).done(function(e){if(e&&e.success){var n=60,r=function(e){n>0?(n--,a.find(".doing .val").text(n),setTimeout(function(){r(e)},1e3)):e.addClass("getValidation")};t.removeClass("getValidation"),r(t)}else o.refresh({type:"warring",cancelBtn:!1,confirmBtn:!1,content:"验证码发送过于频繁"})}).fail(function(){o.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"抱歉，手机验证码发送失败，请重试！"})})},200):o.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})},".component-apply-submitBtn:not(.state_error) touchend":function(e){var n=this,t=n.element,r=n.modules.message,o=n.renderData.global.config.attr(),a=n.renderData.global.request.attr(),s=!t.find("#account").hasClass("state_error");n.jsUtil.weChat.browser()?setTimeout(function(){var e=o.shopId&&o.shopId.trim(),t=a.validation&&a.validation.trim();s&&e&&t&&n.jsUtil.check(o.phone)&&n.sendRequest("USER_PUSHUSER_CREATE",{phone:o.phone,name:a.userName,specialtyChannel:a.promotion,inviter:a.inviter,code:a.validation,gradeId:o.shopId,type:0}).done(function(e){e&&e.success?window.location.href="/personal-center.html":e&&1==e.obj?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"验证码失效，请重试！"}):e.errorMsg?r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:e.errorMsg}):r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"推手申请失败！"})}).fail(function(){r.refresh({type:"error",cancelBtn:!1,confirmBtn:!1,content:"推手申请失败！"})})},200):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请在微信端进行操作！"})}})}),define("modular/module/module-scroll-top-1",["config.page.render"],function(e){"use strict";return window.capi.get(),e.extend({tags:{global:"<component-scroll-top-1></component-scroll-top-1>"},region:{global:{cfgDynamic:!1,reqDynamic:!1,resDynamic:!1}},config:{},request:{},response:{},sendArr:[],reload:!1})}),define("modular/frames/fn",["fn.roller","fn.picker","fn.timeout"],function(){}),define("modular/component",["modular/frames/fn","modular/component/component-header-1","modular/component/component-footer-1","modular/component/component-nav-1","modular/component/component-searchHistory-1","modular/component/component-message-1","modular/component/component-searchProduct-1","modular/component/component-personal-center-1","modular/component/component-login-1","modular/component/component-register-1","modular/component/component-bindInvitation-1","modular/component/component-bindMobile-1","modular/component/component-personal-information-1","modular/component/component-address-manage-1","modular/component/component-address-edit-1","modular/component/component-shoppingCart-1","modular/component/component-orderConfirm-1","modular/component/component-orderList-1","modular/component/component-orderDetail-1","modular/component/component-logistics-1","modular/component/component-alert-discount-1","modular/component/component-discount-1","modular/component/component-forgetPassword-1","modular/component/component-pagination-1","modular/component/component-share-1","modular/component/component-apply-1","modular/component/component-pay-choose-1","modular/component/component-site-introduce-1","modular/component/component-scroll-top-1"],function(){}),define("config.page.modular",["modular/component","modular/module/module-header-1","modular/module/module-footer-1","modular/module/module-nav-1","modular/module/module-searchHistory-1","modular/module/module-message-1","modular/module/module-site-introduce-1","modular/module/module-searchProduct-1","modular/module/module-bindInvitation-1","modular/module/module-personal-center-1","modular/module/module-login-1","modular/module/module-register-1","modular/module/module-bindMobile-1","modular/module/module-personal-information-1","modular/module/module-address-manage-1","modular/module/module-address-edit-1","modular/module/module-shoppingCart-1","modular/module/module-orderConfirm-1","modular/module/module-orderList-1","modular/module/module-orderDetail-1","modular/module/module-logistics-1","modular/module/module-alert-discount-1","modular/module/module-discount-1","modular/module/module-forgetPassword-1","modular/module/module-share-1","modular/module/module-apply-1","modular/module/module-scroll-top-1"],function(e,n,t,r,o,a,s,i,c,l,d,p,u,m,f,g,h,b,v,y,j,_,w,I,C,O,D){"use strict";var S=window.capi.get();S.jsModular||Object.defineProperty(S,"jsModular",{configurable:!1,writable:!1,value:{}}),S.jsModular.codes||Object.defineProperty(S.jsModular,"codes",{configurable:!1,writable:!1,value:{module_00001:{md:n,cls:"module-header-1"},module_00002:{md:t,cls:"module-footer-1"},module_00004:{md:r,cls:"module-nav-1"},module_00005:{md:o,cls:"module-searchHistory-1"},module_00006:{md:a,cls:"module-message-1"},module_00007:{md:s,cls:"module-site-introduce-1"},module_00010:{md:i,cls:"module-searchProduct-1"},module_00011:{md:c,cls:"module-bindInvitation-1"},module_00012:{md:l,cls:"module-personal-center-1"},module_00013:{md:d,cls:"module-login-1"},module_00014:{md:p,cls:"module-register-1"},module_00015:{md:u,cls:"module-bindMobile-1"},module_00016:{md:m,cls:"module-personal-information-1"},module_00017:{md:f,cls:"module-address-manage-1"},module_00018:{md:g,cls:"module-address-edit-1"},module_00019:{md:h,cls:"module-shoppingCart-1"},module_00020:{md:b,cls:"module-orderConfirm-1"},module_00021:{md:v,cls:"module-orderList-1"},module_00022:{md:y,cls:"module-orderDetail-1"},module_00023:{md:j,cls:"module-logistics-1"},module_00024:{md:_,cls:"module-alert-discount-1"},module_00025:{md:w,cls:"module-discount-1"},module_00026:{md:I,cls:"module-forgetPassword-1"},module_00027:{md:C,cls:"module-share-1"},module_00028:{md:O,cls:"module-apply-1"},module_00029:{md:D,cls:"module-scroll-top-1"}}}),S.jsModular.modules||Object.defineProperty(S.jsModular,"modules",{configurable:!1,writable:!1,value:{message:"module_00006",alertDiscount:"module_00024"}})}),define("config.page.mustache",[],function(){"use strict";var e=window.capi.get();can.mustache.registerHelper("look",function(n){var t=e.jsUtil.mustache.getContent(n),r=e.jsUtil.mustache.getDepContent(n);console.dir(t),console.dir(r)}),can.mustache.registerHelper("isExist",function(n,t){var r=e.jsUtil.mustache.getDepContent(n,"object");return can.isEmptyObject(r)?t.inverse(r||this):t.fn(r||this)}),can.mustache.registerHelper("setRenderRange",function(n,t,r,o){var a=e.jsUtil.mustache.getContent(n,"number"),s=e.jsUtil.mustache.getContent(t,"number"),i=e.jsUtil.mustache.getContent(r,"number");return s>=0&&a>=s&&(-1===i||a<s+r)?o.fn(o.context||this):o.inverse(o.context||this)}),can.mustache.registerHelper("addElementClass",function(n,t,r){var o=e.jsUtil.mustache.getContent(n),a=e.jsUtil.mustache.getContent(t),s=e.jsUtil.mustache.getContent(r);if("number"==typeof o&&(o=o.toString()),"number"==typeof a&&(a=a.toString()),o&&a&&s)return o===a?s:""}),can.mustache.registerHelper("zIndexDesc",function(n,t){var r=e.jsUtil.mustache.getContent(n,"number"),o=e.jsUtil.mustache.getContent(t,"number");if(r>=0&&o>0)return o-1*r}),can.mustache.registerHelper("zIndexAsc",function(n,t){var r=e.jsUtil.mustache.getContent(n,"number"),o=e.jsUtil.mustache.getContent(t,"number");if(r>=0&&o>0)return o+1*r})}),require(["config.page.event","config.page.modular","config.page.mustache"],function(){"use strict";var e=window.capi.get(!0),n=(e.jsData.userInfo.openId,e.jsData.userInfo.shopId),t=(e.jsData.userInfo.userId,e.jsData.userInfo.gradeId,e.jsData.userInfo.isLogin),r=e.jsData.userInfo.centerId,o=(e.jsData.userInfo.welfareVip,e.jsData.location.redirect),a=e.jsData.location.pathUrl,s=e.jsUtil.url.getParam("jumpUrl",1),i=e.jsUtil.url.getParam("addressId"),c=JSON.parse(localStorage.getItem("allDiscount")||"{}"),l=JSON.parse(localStorage.getItem("showDiscount")||"{}"),d=JSON.parse(localStorage.getItem("ordersInfo")||"{}");return t?$.isEmptyObject(d)?void setTimeout(function(){window.location.replace("/orderList.html")},300):$.isEmptyObject(d)||d.orderCount&&!(d.orderCount<=0)?($.when(e.jsModel.send("USER_ADDRESS_QUERY",{})).always(function(n){var p="";if(!n||!n.success||0===n.obj.length)return void(window.location.href="/address-edit.html?jumpUrl="+a);var u=!1;$.each(n.obj,function(e,n){return i&&n.id==i?(p=n,u=!0,!1):i||1!=n.setDefault?void 0:(p=n,u=!0,!1)}),u||(p=n.obj[0]),$.each(e.jsModular.modules,function(n,r){e.jsEvent.page.mdArr.push({role:n,code:r,area:"",tags:{},region:{},config:{global:{isLogin:t,jumpUrl:s,pathUrl:a}},request:{},response:{},floorCode:{0:10}})}),e.jsEvent.page.mdArr.push({role:"header",code:"module_00001",area:"#body-header",tags:{},region:{},config:{global:{isLogin:t,pathUrl:a,backUrl:"",jumpUrl:s,icon_back:!0,title_text:"确认订单",icon_orderList:!0}},request:{},response:{},floorCode:{1:1}}),e.jsEvent.page.mdArr.push({role:"orderConfirm",code:"module_00020",area:"#body-center",tags:{},region:{},config:{global:{centerId:r,isLogin:t,jumpUrl:s,pathUrl:a,redirect:o,address:p,allDiscount:c,showDiscount:l}},request:{},response:{global:{ordersInfo:d}},floorCode:{2:1}}),e.jsUtil.modular.floorQueue(e.jsEvent.page,"mdArr"),e.jsUtil.modular.showModules(e.jsEvent.page.mdArr),$.when(e.jsModular.modules.header.state).done(function(){document.querySelector("title").innerHTML=e.jsModular.modules.header.config.global.shopInfo.name||"中国供销海外购"})}),void wx.ready(function(){n=localStorage.getItem("shopId")||2;var t={title:"中国供销海外购 - 订单确认"};-1==window.location.href.indexOf("?")?t.link=window.location.href+"?shopId="+n:t.link=window.location.href+"&shopId="+n,287==n?(t.imgUrl="https://"+window.location.host+"/images/platform/weixinShare/esutong.jpg",t.desc="优质的产品、完善的服务，俄速通全球购诚邀您的加盟！"):(t.imgUrl="https://"+window.location.host+"/images/platform/weixinShare/ico_mp.jpg",t.desc="中国供销海外购是供销系统中唯一专业从事跨境电商行业的企业"),$.when(e.jsModel.send("USER_SHOPINFO_QUERY")).done(function(e){e&&e.success&&e.obj&&(287==n?(t.imgUrl="https://"+window.location.host+"/images/platform/weixinShare/esutong.jpg",t.desc="优质的产品、完善的服务，"+e.obj.name+"诚邀您的加盟！"):(t.imgUrl="https://"+window.location.host+"/images/platform/weixinShare/ico_mp.jpg",t.desc="中国供销海外购是供销系统中唯一专业从事跨境电商行业的企业"),t.title=e.obj.name+" - 订单确认"),wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.imgUrl,success:function(e){}}),wx.onMenuShareTimeline({title:t.title,link:t.link,imgUrl:t.imgUrl,success:function(e){}})})})):void setTimeout(function(){window.location.replace("/orderList.html")},300):void setTimeout(function(){window.location.href="/login.html?jumpUrl="+($.isEmptyObject(d)?"/index.html":a)},300)}),define("page.orderConfirm.1",function(){});