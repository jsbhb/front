define(["config.page.render"],function(t){"use strict";var e=window.capi.get(),o=e.jsData.userInfo.isLogin,n=e.jsData.platform.rule.crossOrder.maxPrice,s=e.jsData.platform.rule.normalOrder.minPrice;return t.extend({tags:{global:"<component-shoppingcart-1></component-shoppingcart-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(t,e){var o={};o.typeObj={},o.quantity=0,o.allSelected=!1,o.oneSelected=!1,$.each(e.response.global,function(t,e){if(e.goodsSpecs){var n=e.type,s=e.itemId,r=e.goodsSpecs.status,a=e.supplierId,i=e.supplierName,c=0===n?"跨境":2===n?"一般":1===n?"大贸":"";o.quantity+=1,o.typeObj[n]=o.typeObj[n]||{},o.typeObj[n][a]=o.typeObj[n][a]||{},o.typeObj[n][a].type=n,o.typeObj[n][a].typeName=c,o.typeObj[n][a].supplierId=a,o.typeObj[n][a].supplierName=i,o.typeObj[n][a].itemObj=o.typeObj[n][a].itemObj||{},o.typeObj[n][a].itemObj[s]={},o.typeObj[n][a].itemObj[s].ids=e.id,o.typeObj[n][a].itemObj[s].status=r,o.typeObj[n][a].itemObj[s].selected=e.goodsSpecs.stock>0&&0!==r,o.typeObj[n][a].itemObj[s].goodsId=e.goodsSpecs.goodsId,o.typeObj[n][a].itemObj[s].firstCategory=e.goodsSpecs.firstCategory,o.typeObj[n][a].itemObj[s].secondCategory=e.goodsSpecs.secondCategory,o.typeObj[n][a].itemObj[s].thirdCategory=e.goodsSpecs.thirdCategory,o.typeObj[n][a].itemObj[s].type=n,o.typeObj[n][a].itemObj[s].href=e.href,o.typeObj[n][a].itemObj[s].itemId=e.itemId,o.typeObj[n][a].itemObj[s].freePost=e.freePost,o.typeObj[n][a].itemObj[s].freeTax=e.freeTax,o.typeObj[n][a].itemObj[s].itemImg=e.picPath,o.typeObj[n][a].itemObj[s].quantity=e.quantity,o.typeObj[n][a].itemObj[s].itemName=e.goodsName,o.typeObj[n][a].itemObj[s].goodsName=e.goodsName,o.typeObj[n][a].itemObj[s].itemSpecs=e.goodsSpecs,o.typeObj[n][a].itemObj[s].itemCode=e.goodsSpecs.itemCode,o.typeObj[n][a].itemObj[s].stock=e.goodsSpecs.stock>0?e.goodsSpecs.stock:0,o.typeObj[n][a].itemObj[s].weight=e.goodsSpecs.weight,o.typeObj[n][a].itemObj[s].exciseTax=e.goodsSpecs.exciseTax,o.typeObj[n][a].itemObj[s].incrementTax=e.goodsSpecs.incrementTax,o.typeObj[n][a].itemObj[s].priceList=e.goodsSpecs.priceList,o.typeObj[n][a].itemObj[s].carton=e.goodsSpecs.carton,o.typeObj[n][a].itemObj[s].tagList=[],$.each(e.goodsSpecs.tagList,function(t,e){"预售"===e.tagName&&(o.typeObj[n][a].itemObj[s].tagFunId=e.tagFunId,o.typeObj[n][a].itemObj[s].preSaleName=e.tagName,o.typeObj[n][a].itemObj[s].preSaleDesc=e.description),o.typeObj[n][a].itemObj[s].tagList.push(e)})}}),t.response.global={},t.response.global.orders=o}}},config:{quantityTimer:null,quantityDeferred:null},request:{ORDER_SHOPPINGCART_QUERY:{platformSource:7}},response:{},sendArr:o?["ORDER_SHOPPINGCART_QUERY"]:[],reload:!1,".component-shoppingCart-ordersDetails    .goodsList                    touchmove":function(t,o){var n=$(t),s=o||window.event,r=Math.abs(e.jsEvent.touch.touchSX),a=Math.abs(e.jsEvent.touch.touchSY),i=n.parent().find(".goodsList").not(n),c=r<=280?r:280;a<r-80&&(e.jsEvent.touch.touchSX>0&&(n.parent().find(".goodsList .controlGroup").css("display","block"),n.hasClass("inControl")&&n.find(".body").css("transform","translate3d("+(c-80-200)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".body").css("-o-transform","translate3d("+(c-80-200)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".body").css("-ms-transform","translate3d("+(c-80-200)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".body").css("-moz-transform","translate3d("+(c-80-200)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".body").css("-webkit-transform","translate3d("+(c-80-200)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".controlGroup").css("transform","translate3d("+(c-80+550)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".controlGroup").css("-o-transform","translate3d("+(c-80+550)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".controlGroup").css("-ms-transform","translate3d("+(c-80+550)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".controlGroup").css("-moz-transform","translate3d("+(c-80+550)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".controlGroup").css("-webkit-transform","translate3d("+(c-80+550)+"px, 0, 0)"),n.hasClass("inControl")&&n.find(".body,.controlGroup").css("transition","none"),n.hasClass("inControl")&&n.find(".body,.controlGroup").css("-o-transition","none"),n.hasClass("inControl")&&n.find(".body,.controlGroup").css("-ms-transition","none"),n.hasClass("inControl")&&n.find(".body,.controlGroup").css("-moz-transition","none"),n.hasClass("inControl")&&n.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".body,.controlGroup").css("transition","none"),i.find(".body,.controlGroup").css("-o-transition","none"),i.find(".body,.controlGroup").css("-ms-transition","none"),i.find(".body,.controlGroup").css("-moz-transition","none"),i.find(".body,.controlGroup").css("-webkit-transition","none")),e.jsEvent.touch.touchSX<0&&(n.hasClass("inControl")||(n.find(".controlGroup").css("transform","translate3d("+(750-(c-80))+"px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),n.find(".body").css("transform","translate3d("+(0-(r-80))+"px, 0, 0)"),n.find(".body").css("-o-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),n.find(".body").css("-ms-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),n.find(".body").css("-moz-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d("+(0-(r-80))+"px, 0, 0)")),n.hasClass("inControl")&&(n.find(".body").css("transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),n.find(".body").css("-o-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),n.find(".body").css("-ms-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),n.find(".body").css("-moz-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d("+(-200-(r-80))+"px, 0, 0)")),n.find(".body,.controlGroup").css("transition","none"),n.find(".body,.controlGroup").css("-o-transition","none"),n.find(".body,.controlGroup").css("-ms-transition","none"),n.find(".body,.controlGroup").css("-moz-transition","none"),n.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)"),i.find(".body,.controlGroup").css("transition","200ms linear"),i.find(".body,.controlGroup").css("-o-transition","200ms linear"),i.find(".body,.controlGroup").css("-ms-transition","200ms linear"),i.find(".body,.controlGroup").css("-moz-transition","200ms linear"),i.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),i.find(".body").css("transform","translate3d(0, 0, 0)"),i.find(".body").css("-o-transform","translate3d(0, 0, 0)"),i.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),i.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),i.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.parent().find(".goodsList .controlGroup").css("display","block"),i.removeClass("inControl")),s.preventDefault(),s.stopPropagation())},".component-shoppingCart-ordersDetails    .goodsList                    touchend":function(t,o){var n=$(t),s=n.parent().find(".goodsList").not(n);e.jsEvent.touch.touchIsMoved&&(n.hasClass("inControl")&&e.jsEvent.touch.touchSX>=30&&(n.removeClass("inControl"),s.removeClass("inControl"),n.find(".body,.controlGroup").css("transition","200ms linear"),n.find(".body,.controlGroup").css("-o-transition","200ms linear"),n.find(".body,.controlGroup").css("-ms-transition","200ms linear"),n.find(".body,.controlGroup").css("-moz-transition","200ms linear"),n.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),n.find(".body").css("transform","translate3d(0, 0, 0)"),n.find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")),n.hasClass("inControl")&&e.jsEvent.touch.touchSX<30&&(n.addClass("inControl"),s.removeClass("inControl"),n.find(".body").css("transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),n.find(".body,.controlGroup").css("transition","200ms linear"),n.find(".body,.controlGroup").css("-o-transition","200ms linear"),n.find(".body,.controlGroup").css("-ms-transition","200ms linear"),n.find(".body,.controlGroup").css("-moz-transition","200ms linear"),n.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),n.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!n.hasClass("inControl")&&e.jsEvent.touch.touchSX<=-80&&(n.addClass("inControl"),s.removeClass("inControl"),n.find(".body").css("transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),n.find(".body,.controlGroup").css("transition","200ms linear"),n.find(".body,.controlGroup").css("-o-transition","200ms linear"),n.find(".body,.controlGroup").css("-ms-transition","200ms linear"),n.find(".body,.controlGroup").css("-moz-transition","200ms linear"),n.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),n.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!n.hasClass("inControl")&&e.jsEvent.touch.touchSX>-80&&(n.removeClass("inControl"),s.removeClass("inControl"),n.find(".body").css("transform","translate3d(0, 0, 0)"),n.find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.find(".body,.controlGroup").css("transition","200ms linear"),n.find(".body,.controlGroup").css("-o-transition","200ms linear"),n.find(".body,.controlGroup").css("-ms-transition","200ms linear"),n.find(".body,.controlGroup").css("-moz-transition","200ms linear"),n.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),n.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")))},".component-shoppingCart-ordersDetails    .btn_plus                     touchend":function(t){var e=this,o=$(t),n=e.modules.message,s=e.renderData.global.response.orders,r=o.parents("[goodsId]").attr("type"),a=o.parents("[goodsId]").attr("supplierId"),i=o.parents("[itemId]").attr("itemId"),c=1*o.parent().find("input").val(),d=s.typeObj[r][a].itemObj[i].attr("stock"),p=s.typeObj[r][a].itemObj[i].attr("minQuantity"),l=s.typeObj[r][a].itemObj[i].attr("maxQuantity");!r&&0!==r||!a&&0!==a||!i&&0!==i||(o.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),o.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),d<=0||c<=d&&p&&d<p?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>d?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):l&&c>l?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):p&&c<p&&n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(l||0===l)&&c>l?l:c,c=(p||0===p)&&c<p?p:c,c=c>d?d:c,c=c>0?c:1,o.val(1*c),s.typeObj[r][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_minus                    touchend":function(t){var e=this,o=$(t),n=e.modules.message,s=e.renderData.global.response.orders,r=o.parents("[goodsId]").attr("type"),a=o.parents("[goodsId]").attr("supplierId"),i=o.parents("[itemId]").attr("itemId"),c=1*o.parent().find("input").val(),d=s.typeObj[r][a].itemObj[i].attr("stock"),p=s.typeObj[r][a].itemObj[i].attr("minQuantity"),l=s.typeObj[r][a].itemObj[i].attr("maxQuantity");!r&&0!==r||!a&&0!==a||!i&&0!==i||(o.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),o.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),d<=0||c<=d&&p&&d<p?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>d?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):l&&c>l?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):p&&c<p&&n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(l||0===l)&&c>l?l:c,c=(p||0===p)&&c<p?p:c,c=c>d?d:c,c=c>0?c:1,o.val(1*c),s.typeObj[r][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_input                    input":function(t){var e=this,o=$(t),n=e.modules.message,s=e.renderData.global.response.orders,r=o.parents("[goodsId]").attr("type"),a=o.parents("[goodsId]").attr("supplierId"),i=o.parents("[itemId]").attr("itemId"),c=s.typeObj[r][a].itemObj[i].attr("stock"),d=(s.typeObj[r][a].itemObj[i].attr("quantity"),s.typeObj[r][a].itemObj[i].attr("minQuantity")),p=s.typeObj[r][a].itemObj[i].attr("maxQuantity");if((r||0===r)&&(a||0===a)&&(i||0===i)){var l=o.val()?o.val().trim():0,m=/\D/.test(l)?l.replace(/\D/g,""):l;clearTimeout(e.config.quantityTimer),e.config.quantityTimer=setTimeout(function(){var t=1*m>0?1*m:1;c<=0||t<=c&&d&&c<d?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,o.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):t>c?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量大于库存可用量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,o.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):p&&t>p?n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已大于最大购买量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,o.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):d&&t<d&&n.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已低于最小购买量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,o.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}})},650)}},".component-shoppingCart-ordersDetails    .btn_input                    blur":function(t){var e=this,o=$(t),n=e.renderData.global.response.orders,s=o.parents("[goodsId]").attr("type"),r=o.parents("[goodsId]").attr("supplierId"),a=o.parents("[itemId]").attr("itemId"),i=n.typeObj[s][r].itemObj[a].attr("stock"),c=n.typeObj[s][r].itemObj[a].attr("minQuantity"),d=n.typeObj[s][r].itemObj[a].attr("maxQuantity");if((s||0===s)&&(r||0===r)&&(a||0===a)){var p=o.val()?o.val().trim():0;p=(d||0===d)&&p>d?d:p,p=(c||0===c)&&p<c?c:p,p=p>i?i:p,p=p>0?p:1,o.val(1*p),n.typeObj[s][r].itemObj[a].attr("quantity",1*p)}},".component-shoppingCart-ordersDetails    .commodity-select             touchend":function(t){var e=this,o=$(t),n=e.renderData.global.config.attr("optionsOpen"),s=e.renderData.global.response.orders,r=o.parents("[goodsId]").attr("type"),a=o.parents("[goodsId]").attr("supplierId"),i=o.parents("[itemId]").attr("itemId");if(r&&a&&i){var c=s.typeObj[r][a].itemObj[i].attr("selected"),d=s.typeObj[r][a].itemObj[i].attr("status"),p=s.typeObj[r][a].itemObj[i].attr("stock"),l=s.typeObj[r][a].itemObj[i].attr("minQuantity"),m=c?!c:!!(0!==d&&p>0&&p>=l||n)&&!c;s.typeObj[r][a].itemObj[i].attr("selected",m)}},".component-shoppingCart-ordersDetails    .control_delete               touchend":function(t){var e=this,o=$(t),n=e.modules.footer,s=e.modules.header,r=e.modules.message,a=e.renderData.global.response,i=o.attr("ids"),c=a.orders;r.refresh({content:"是否删除该商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){e.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:i,platformSource:7}).done(function(t){t&&t.success&&($.each(c.attr().typeObj,function(t,e){$.each(e,function(e,o){$.each(o.itemObj,function(o,n){""+n.ids===i&&c.typeObj[t][e].itemObj.removeAttr(o)})})}),e.sendRequest("ORDER_SHOPPINGCART_COUNT",{platformSource:7}).done(function(t){t&&t.success&&(n.renderData.global.response.attr("count",t.obj),s.renderData.global.response.attr("shopCartCount",t.obj),t.obj||(s.renderData.global.config.attr("icon_search",!0),s.renderData.global.config.attr("icon_shopCartEdit",!1),s.renderData.global.config.attr("icon_shopCartSave",!1)))}))}),o.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})},".component-shoppingCart-optionsGroup     .control_selectAll            touchend":function(t){var e=this,o=e.renderData.global.response.orders,n=e.renderData.global.config.attr("optionsOpen"),s=!o.attr("allSelected"),r=o.attr();$.each(r.typeObj,function(t,e){$.each(e,function(e,r){$.each(r.itemObj,function(r,a){"boolean"==typeof a.selected&&(0!==a.status&&a.stock>0&&a.stock>=a.minQuantity||n?o.typeObj[t][e].itemObj[r].attr("selected",s):o.typeObj[t][e].itemObj[r].attr("selected",!1))})})})},".component-shoppingCart-optionsGroup     .btn_deleteMore:not(.lose)    touchend":function(t){var e=this,o=$(t),n=e.modules.footer,s=e.modules.header,r=e.modules.message,a=e.renderData.global.response.orders,i=a.attr(),c=[];$.each(i.typeObj,function(t,e){$.each(e,function(t,e){$.each(e.itemObj,function(t,e){!0===e.selected&&c.push(e.ids)})})});var d=c.join(",");d?r.refresh({content:"是否删除选中商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){e.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:d,platformSource:7}).done(function(t){t&&t.success&&($.each(a.attr().typeObj,function(t,e){$.each(e,function(e,o){$.each(o.itemObj,function(o,n){-1!==$.inArray(n.ids,c)&&a.typeObj[t][e].itemObj.removeAttr(o)})})}),e.sendRequest("ORDER_SHOPPINGCART_COUNT",{platformSource:7}).done(function(t){t&&t.success&&(n.renderData.global.response.attr("count",t.obj),s.renderData.global.response.attr("shopCartCount",t.obj),t.obj||(s.renderData.global.config.attr("icon_search",!0),s.renderData.global.config.attr("icon_shopCartEdit",!1),s.renderData.global.config.attr("icon_shopCartSave",!1)))})),o.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),o.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")})}}):r.refresh({content:"请选择所要删除的商品！"})},".component-shoppingCart-optionsGroup     .btn_commitOrder:not(.lose)   click":function(){var t=this,e=t.renderData.global.response.orders.attr(),o=t.config.global.pathUrl,r={},a=0,i=t.modules.message;if($.each(e.typeObj,function(t,e){$.each(e,function(e,o){var n=!1,s=0,i=0,c=0,d=0,p=0,l=0,m=0,b=0,f=0;$.each(o.itemObj,function(u,y){0!==y.status&&y.stock>0&&y.stock>=y.minQuantity&&y.selected&&y.quantity>0&&(n=!0,s+=y.weight*y.quantity,i+=y.price*y.quantity,c+=y.vipPrice*y.quantity,d+=y.realPrice*y.quantity,p+=y.realVipPrice*y.quantity,l+=y.itemSpecs.welfarePrice*y.quantity,m+=0*y.quantity,b+=y.itemSpecs.welfarePrice*y.quantity,f+=0*y.quantity,r.typeObj=r.typeObj||{},r.typeObj[t]=r.typeObj[t]||{},r.typeObj[t][e]=r.typeObj[t][e]||{},r.typeObj[t][e].taxFee=0,r.typeObj[t][e].postFee=0,r.typeObj[t][e].exciseTaxFee=0,r.typeObj[t][e].incrementTaxFee=0,r.typeObj[t][e].type=o.type,r.typeObj[t][e].typeName=o.typeName,r.typeObj[t][e].supplierId=o.supplierId,r.typeObj[t][e].supplierName=o.supplierName,r.typeObj[t][e].supplierWeight=1*s,r.typeObj[t][e].supplierPrice=1*i,r.typeObj[t][e].supplierVipPrice=1*c,r.typeObj[t][e].supplierRealPrice=1*d,r.typeObj[t][e].supplierRealVipPrice=1*p,r.typeObj[t][e].rakebackSupplierPrice=1*l,r.typeObj[t][e].rakebackSupplierVipPrice=1*m,r.typeObj[t][e].rakebackSupplierRealPrice=1*b,r.typeObj[t][e].rakebackSupplierRealVipPrice=1*f,r.typeObj[t][e].itemObj=r.typeObj[t][e].itemObj||{},r.typeObj[t][e].itemObj[u]={},r.typeObj[t][e].itemObj[u].ids=y.ids,r.typeObj[t][e].itemObj[u].type=o.type,r.typeObj[t][e].itemObj[u].href=y.href,r.typeObj[t][e].itemObj[u].status=y.status,r.typeObj[t][e].itemObj[u].itemId=y.itemId,r.typeObj[t][e].itemObj[u].freePost=y.freePost,r.typeObj[t][e].itemObj[u].freeTax=y.freeTax,r.typeObj[t][e].itemObj[u].goodsId=y.goodsId,r.typeObj[t][e].itemObj[u].firstCategory=y.firstCategory,r.typeObj[t][e].itemObj[u].secondCategory=y.secondCategory,r.typeObj[t][e].itemObj[u].thirdCategory=y.thirdCategory,r.typeObj[t][e].itemObj[u].itemImg=y.itemImg,r.typeObj[t][e].itemObj[u].picPath=y.picPath,r.typeObj[t][e].itemObj[u].goodsName=y.itemName,r.typeObj[t][e].itemObj[u].quantity=y.quantity,r.typeObj[t][e].itemObj[u].exciseTax=y.exciseTax,r.typeObj[t][e].itemObj[u].incrementTax=y.incrementTax,r.typeObj[t][e].itemObj[u].priceList=y.priceList,r.typeObj[t][e].itemObj[u].tagList=y.tagList,r.typeObj[t][e].itemObj[u].tagFunId=y.tagFunId,r.typeObj[t][e].itemObj[u].preSaleName=y.preSaleName,r.typeObj[t][e].itemObj[u].preSaleDesc=y.preSaleDesc,r.typeObj[t][e].itemObj[u].sku=y.itemSpecs.sku,r.typeObj[t][e].itemObj[u].info=y.itemSpecs.info,r.typeObj[t][e].itemObj[u].stock=y.itemSpecs.stock>0?y.itemSpecs.stock:0,r.typeObj[t][e].itemObj[u].weight=y.itemSpecs.weight,r.typeObj[t][e].itemObj[u].itemCode=y.itemSpecs.itemCode,r.typeObj[t][e].itemObj[u].price=y.price,r.typeObj[t][e].itemObj[u].vipPrice=y.vipPrice,r.typeObj[t][e].itemObj[u].realPrice=y.realPrice,r.typeObj[t][e].itemObj[u].realVipPrice=y.realVipPrice,r.typeObj[t][e].itemObj[u].rakebackPrice=y.rakebackPrice,r.typeObj[t][e].itemObj[u].rakebackVipPrice=y.rakebackVipPrice,r.typeObj[t][e].itemObj[u].rakebackRealPrice=y.rakebackRealPrice,r.typeObj[t][e].itemObj[u].rakebackRealVipPrice=y.rakebackRealVipPrice,r.typeObj[t][e].itemObj[u].minPrice=y.itemSpecs.minPrice,r.typeObj[t][e].itemObj[u].maxPrice=y.itemSpecs.maxPrice,r.typeObj[t][e].itemObj[u].vipMinPrice=y.itemSpecs.vipMinPrice,r.typeObj[t][e].itemObj[u].vipMaxPrice=y.itemSpecs.vipMaxPrice,r.typeObj[t][e].itemObj[u].realMinPrice=y.itemSpecs.realMinPrice,r.typeObj[t][e].itemObj[u].realMaxPrice=y.itemSpecs.realMaxPrice,r.typeObj[t][e].itemObj[u].realVipMinPrice=y.itemSpecs.realVipMinPrice,r.typeObj[t][e].itemObj[u].realVipMaxPrice=y.itemSpecs.realVipMaxPrice,r.typeObj[t][e].itemObj[u].carton=y.itemSpecs.carton,a++)}),n&&a++})}),r.orderCount=a,!$.isEmptyObject(r)){var c=0,d=0,p=!0,l=!0,m=!0;$.each(r.typeObj,function(t,e){if($.each(e,function(e,o){var r=0,a=0,b=o.supplierId,f=o.supplierName;return $.each(o.itemObj,function(t,e){0===e.type?(r+=e.rakebackRealPrice*e.quantity,c+=e.quantity):2===e.type&&(a+=e.rakebackRealPrice*e.quantity,d+=e.quantity)}),"0"===t&&r>n&&c>1?(m=p=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品单笔订单价格超过"+n+"元，请调整！"}),!1):"2"===t&&1*b==6&&a<s?(m=l=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品订单未满"+s+"元，请调整！"}),!1):!!m&&void 0}),!m)return!1}),m&&(p||l)&&(window.localStorage.setItem("showDiscount","{}"),window.localStorage.setItem("ordersInfo",JSON.stringify(r)),window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+o))}},"{document} .component-header-right       .icon_shopCartEdit            touchend":function(t){var e=this,o=e.element,n=o.find(".goodsList"),s=e.renderData.global.response.orders,r=e.modules.header,a=s.attr();$.each(a.typeObj,function(t,e){$.each(e,function(e,o){$.each(o.itemObj,function(o,n){s.typeObj[t][e].itemObj[o].attr("selected",!1)})})}),e.renderData.global.config.attr("optionsOpen",!0),r.renderData.global.config.attr("icon_shopCartSave",!0),r.renderData.global.config.attr("icon_shopCartEdit",!1),n.removeClass("inControl"),n.find(".body").css("transform","translate3d(0, 0, 0)"),n.find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")},"{document} .component-header-right       .icon_shopCartSave            touchend":function(t){var e=this,o=e.element,n=o.find(".goodsList"),s=e.renderData.global.response.orders,r=e.modules.header,a=s.attr();$.each(a.typeObj,function(t,e){$.each(e,function(e,o){$.each(o.itemObj,function(o,n){s.typeObj[t][e].itemObj[o].attr("selected",!1)})})}),e.renderData.global.config.attr("optionsOpen",!1),r.renderData.global.config.attr("icon_shopCartSave",!1),r.renderData.global.config.attr("icon_shopCartEdit",!0),n.removeClass("inControl"),n.find(".body").css("transform","translate3d(0, 0, 0)"),n.find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})});