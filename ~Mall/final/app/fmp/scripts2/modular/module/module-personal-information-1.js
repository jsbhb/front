define(["config.page.render"],function(e){"use strict";var n=window.capi.get();return e.extend({tags:{global:"<component-personal-information-1></component-personal-information-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,afterFunc:function(e,n){var a=n.response.global&&n.response.global.userDetail||{};a&&a.id?e.renderData.global.config.attr("detailExist",!0):e.renderData.global.config.attr("detailExist",!1),e.response.global=n.response.global||{},e.response.global.userDetail=e.response.global.userDetail||{}}}},config:{global:{detailExist:null}},request:{global:{}},response:{global:{}},sendArr:["USER_DETAIL_QUERY"],reload:!1,".component-personal-information-commit  touchend":function(e){var a=this,t=$(e),i=a.element,o=a.modules.message,r=a.config.global.jumpUrl,l=t.hasClass("edit")?"edit":t.hasClass("add")?"add":"",s=i.find("#identification").val().trim(),d=i.find(".headPortrait img").attr("src"),c=i.find("#nickname").val().trim(),m=i.find("#realname").val().trim(),g=i.find("#location").val().trim(),f=i.find("#gender").val().trim();m&&f&&s&&m.trim()&&f.trim()&&s.trim()?n.jsUtil.check.chinaName(m)?n.jsUtil.check.identity(s)?"edit"===l?a.sendRequest("USER_DETAIL_UPDATE",{headImg:d,nickName:c,name:m,sex:f,location:g,idNum:s}).done(function(){a.jsUtil.url.jumpPage(r,"/personal-center.html",!0)}):"add"===l&&a.sendRequest("USER_DETAIL_CREATE",{headImg:d,nickName:c,name:m,sex:f,location:g,idNum:s}).done(function(){a.jsUtil.url.jumpPage(r,"/personal-center.html",!0)}):o.refresh({content:"身份证填写有误！"}):o.refresh({content:"请正确填写您的中文姓名！"}):o.refresh({content:"请完善好个人信息！"})}})});