define(["text!modular/template/template-message-1.mustache"],function(n){"use strict";var e=window.capi.get();return can.Component.extend({tag:"component-message-1",template:n,helpers:{scopeModule:function(n){this.spcModule=e.jsUtil.mustache.getContent(n,"object")},returnHeaderText:function(n,t){var c=null,o=e.jsUtil.mustache.getContent(n,"string");if("en"===e.jsUtil.mustache.getContent(t,"string"))switch(o){case"success":c="Success";break;case"error":c="Error";break;case"warning":c="Warning";break;default:c="Information"}else switch(o){case"success":c="成功";break;case"error":c="失败";break;case"warning":c="警告";break;default:c="提示"}return can.mustache.safeString(c)},returnHeaderIcon:function(n){var t=null;switch(e.jsUtil.mustache.getContent(n,"string")){case"success":t="success";break;case"error":t="error";break;case"warning":t="warning";break;default:t="info"}return can.mustache.safeString(t)},returnConfirmBtn:function(n,t){return!1===e.jsUtil.mustache.getContent(n)?t.inverse(t.context||this):t.fn(t.context||this)},returnCancelBtn:function(n,t){return!0===e.jsUtil.mustache.getContent(n)?t.fn(t.context||this):t.inverse(t.context||this)},returnFooterText:function(n,t){var c=null,o=e.jsUtil.mustache.getContent(n,"string"),i=e.jsUtil.mustache.getContent(t,"string");return"confirm"===o?c="en"===i?"confirm":"确定":"cancel"===o&&(c="en"===i?"cancel":"取消"),can.mustache.safeString(c)},scopeFunction:function(n,t){var c=e.jsUtil.mustache.getContent(t,"object"),o=e.jsUtil.mustache.getContent(n,"string");"cancel"===o&&(this.cancelFun=c.cancelFun),"confirm"===o&&(this.confirmFun=c.confirmFun),"timeOutFun"===o&&(this.timeOutFun=c.timeOutFun)},scopeDOMClick:function(n){!1===("function"==typeof n?n():n)&&(this.DOMClick=!1)}},scope:{spcModule:null,DOMClick:!0,triggerMode:null,cancelFun:null,confirmFun:null},events:{inserted:function(){var n=this,e=n.element,t=n.scope.spcModule,c=t&&t.config||{},o=e.find(".component-message-content");c.global.content&&!1!==c.global.confirmBtn?(c.global.isShowing=!0,o.css({opacity:0}),o.animate({opacity:1},600,"linear",function(){c.global.isShowing=!1})):c.global.content&&(c.global.isShowing=!0,o.css({opacity:0}),o.finish().animate({opacity:1},360,function(){setTimeout(function(){o.finish().animate({opacity:0},600,function(){c.global={time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){}},c.global.isShowing=!1,$.isFunction(n.scope.timeOutFun)&&n.scope.timeOutFun(),t.refresh()})},c.global.time||2e3)}))},removed:function(){var n=this,e=n.scope.attr("triggerMode"),t=!1!==n.scope.confirmBtn;t&&"document"===e?!0===n.scope.cancelBtn&&$.isFunction(n.scope.cancelFun)?n.scope.cancelFun():!1!==n.scope.confirmBtn&&$.isFunction(n.scope.confirmFun)&&n.scope.confirmFun():t&&"cancel"===e?$.isFunction(n.scope.cancelFun)&&n.scope.cancelFun():t&&"confirm"===e&&$.isFunction(n.scope.confirmFun)&&n.scope.confirmFun()},"{document} touchend":function(n,e){var t=this,c=e||window.event,o=$(c.target||c.srcElement),i=o.parents(".component-message-content").length>0,s=!1!==t.scope.confirmBtn,r=!1!==t.scope.DOMClick;!i&&s&&r&&t.scope.attr("triggerMode","document")},".component-message-footer .btn_cancel touchend":function(){this.scope.attr("triggerMode","cancel")},".component-message-footer .btn_confirm touchend":function(){this.scope.attr("triggerMode","confirm")}}})});