!function(){"use strict";var e={};window.app.setModule=function(t,n){var i=window.app.getPage("jsUtil"),o=window.app.getPage("jsData"),a=window.app.getPage("jsModel"),r=window.app.getPage("jsEvent"),c=window.app.getPage("isLogin"),s=window.app.getPage("pathUrl"),d=window.app.getPage("jumpUrl"),u=window.app.getPage("backUrl"),l=window.app.getPage("siteInfo"),p=window.app.getPage("pageName"),m=window.app.getPage("shopName"),h=window.app.getPage("shopAbout"),f=window.app.getPage("shopHeadImg"),g=window.app.getPage("shopDescribe"),y=window.app.getPage("itemId"),w=window.app.getPage("goodsId"),b=window.app.getPage("shopId"),v=(window.app.getPage("pushUserId"),window.app.getPage("initList")),C=window.app.getPage("text_login"),I=window.app.getPage("icon_back"),P=window.app.getPage("icon_home"),O=window.app.getPage("title_shop"),_=window.app.getPage("title_text"),x=window.app.getPage("input"),S=window.app.getPage("icon_scan"),j=window.app.getPage("icon_news"),D=window.app.getPage("icon_search"),M=window.app.getPage("icon_AddressManage"),T=window.app.getPage("icon_AddressSure"),k=window.app.getPage("icon_shopCartEdit"),F=window.app.getPage("icon_shopCartSave"),B=window.app.getPage("icon_orderList"),N=window.app.getPage("icon_choose"),V=window.app.getPage("icon_close"),A=window.app.getPage("input_cancel"),R=window.app.getPage("info_shop"),L=window.app.getPage("icon_shopCart"),E=window.app.getPage("home"),H=window.app.getPage("nav"),U=window.app.getPage("shoppingCart"),q=window.app.getPage("personalCenter"),Q=window.app.getPage("goodsDetail"),G=window.app.getPage("gradientHide"),J=[];if(/^error-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){$("body").css("background-color","#f6f7f9")},mounted:function(){var e=$("#body-center").css("height");$(n).css("height",e)}})),/^message-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{time:0,type:"info",language:"zh",content:null,DOMClick:!1,cancelBtn:!1,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){},timeOutFun:function(){},isShowing:!1},computed:{typeClass:function(){return this.type?"icon_"+this.type:"icon_info"},getHeaderText:function(){var e="";if("en"===this.language)switch(this.type){case"success":e="Success";break;case"error":e="Error";break;case"warning":e="Warning";break;default:e="Information"}else switch(this.type){case"success":e="成功";break;case"error":e="失败";break;case"warning":e="警告";break;default:e="提示"}return e}},methods:{refresh:function(e){this.isShowing||(this.time=void 0!==e.time?e.time:0,this.type=void 0!==e.type?e.type:"info",this.language=void 0!==e.language?e.language:"zh",this.content=void 0!==e.content?e.content:"",this.DOMClick=void 0!==e.DOMClick&&e.DOMClick,this.cancelBtn=void 0!==e.cancelBtn&&e.cancelBtn,this.confirmBtn=void 0!==e.confirmBtn&&e.confirmBtn,this.cancelFun=void 0!==e.cancelFun?e.cancelFun:function(){},this.confirmFun=void 0!==e.confirmFun?e.confirmFun:function(){},this.timeOutFun=void 0!==e.timeOutFun?e.timeOutFun:function(){})}},watch:{content:function(){var e=this,t=$(e.$el);e.$nextTick(function(){e.content&&!1!==e.confirmBtn?(e.isShowing=!0,t.css({opacity:0}),t.animate({opacity:1},500,"linear",function(){e.isShowing=!1})):e.content&&(e.isShowing=!0,t.css({opacity:0}),t.stop(!0).animate({opacity:1},360,function(){setTimeout(function(){t.animate({opacity:0},600,function(){e.timeOutFun(),e.time=0,e.type="info",e.language="zh",e.content=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){},e.timeOutFun=function(){},e.isShowing=!1})},e.time||2e3)}))})}},mounted:function(){var e=this,t=$(e.$el);$(document).on("touchend",function(n){var i=n||window.event,o=$(i.target||i.srcElement),a=o.filter(".message-1-content").length>0,r=o.parents(".message-1-content").length>0,c=!1!==e.confirmBtn,s=!1!==e.DOMClick;!a&&!r&&c&&s&&t.animate({opacity:0},600,function(){e.cancelBtn?e.cancelFun():e.confirmFun(),e.time=0,e.type="info",e.language="zh",e.content=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){},e.timeOutFun=function(){},e.isShowing=!1})}),t.on("touchend",".message-footer .btn_confirm",function(){t.animate({opacity:0},600,function(){e.confirmFun(),e.time=0,e.type="info",e.language="zh",e.content=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){},e.timeOutFun=function(){},e.isShowing=!1})}),t.on("touchend",".message-footer .btn_cancel",function(){t.animate({opacity:0},600,function(){e.cancelFun(),e.time=0,e.type="info",e.language="zh",e.content=null,e.DOMClick=!1,e.cancelBtn=!1,e.confirmBtn=!0,e.cancelFun=function(){},e.confirmFun=function(){},e.timeOutFun=function(){},e.isShowing=!1})})}})),/^navInlet-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^navInlet-2-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){},mounted:function(){}})),/^alertDiscount-1-\d+$/.test(t)&&(J=c?["COUPON_NODE_QUERY"]:[],a.send(J,{node:1},!0).done(function(i){var o=e["message-1-1"],r=$.isArray(i)&&i.length>0,c=r?i[0]:{};e[t]=new Vue({el:n,data:{isShow:window.localStorage.getItem("alertDiscount")&&r},computed:{},methods:{},mounted:function(){var e=this,t=$(e.$el);t.on("touchend",".alertDiscount-show .msg-btn",function(){a.send("COUPON_RECEIVE",{couponId:c.couponId}).done(function(t){t.success?(o.refresh({content:"领取成功！是否跳转到我的优惠券？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.location.href="/discount.html?jumpUrl=/personal-center.html"}}),e.isShow=!1,window.localStorage.removeItem("alertDiscount")):(o.refresh({cancelBtn:!1,confirmBtn:!1,content:t&&t.errorMsg||"领取失败！"}),e.isShow=!1,window.localStorage.removeItem("alertDiscount"))}).fail(function(){o.refresh({cancelBtn:!1,confirmBtn:!1,content:"领取失败！"}),e.isShow=!1,window.localStorage.removeItem("alertDiscount")})}),t.on("touchend",".alertDiscount-show .cancel-btn",function(){t.animate({opacity:0},600,function(){e.isShow=!1,t.css("opacity",1),window.localStorage.removeItem("alertDiscount")})})}})})),/^header-1-\d+$/.test(t)&&(b&&J.push("USER_SHOPINFO_QUERY"),c&&J.push("ORDER_SHOPPINGCART_COUNT"),e[t]=new Vue({el:n,data:{title:"",searchCont:"",historyCache:[],text_login:C,icon_back:I,icon_home:P,title_shop:O,title_text:_,input:x,icon_scan:S,icon_news:j,icon_search:D,icon_AddressManage:M,icon_AddressSure:T,icon_shopCartEdit:k,icon_shopCartSave:F,icon_orderList:B,icon_choose:N,icon_close:V,input_cancel:A,info_shop:R,icon_shopCart:L,initList:v,shopName:m,shopAbout:h,shopHeadImg:f,shopDescribe:g,shopInfo:{},shopCartCount:0},computed:{},methods:{titleHandle:function(e){var t=this,n=null,i=document.querySelector("title").innerHTML,o=i&&i.split(/-+/i).pop()||"";switch(e){case"index":n=t.shopInfo.name+"--首页",document.querySelector("title").innerHTML=n;break;case"customerService":n="中国供销海外购--客服热线",document.querySelector("title").innerHTML=n;break;default:n=t.shopInfo.name+"--"+o,document.querySelector("title").innerHTML=n}}},beforeCreate:function(){var e=this;a.send(["PAGE_HEADER1_QUERY_NODE"],[]).done(function(t){e.title=t&&t.cont&&t.cont[0]&&t.cont[0].title||""})},created:function(){var t=this;a.send(J,[],!0).done(function(n){var i={},o=0;e["message-1-1"],J.length>1&&(i=n.USER_SHOPINFO_QUERY||{},o=n.ORDER_SHOPPINGCART_COUNT||0),1===J.length&&(b&&(i=n||{}),c&&(o=n||0)),t.shopInfo=i,t.shopCartCount=o,t.shopInfo.headImg=t.shopInfo.headImg||t.shopHeadImg,t.shopInfo.aboutus=t.shopInfo.aboutus||t.shopAbout,t.shopInfo.name=t.shopInfo.name||t.shopName,t.shopInfo.description=t.shopDescribe,t.titleHandle(p)}),t.shopInfo.headImg=t.shopInfo.headImg||t.shopHeadImg,t.shopInfo.aboutus=t.shopInfo.aboutus||t.shopAbout,t.shopInfo.name=t.shopInfo.name||t.shopName,t.shopInfo.description=t.shopDescribe,t.titleHandle(p)},mounted:function(){var t=this,n=$(t.$el);n.on("touchend",".header-left   .icon_scan",function(){var t=e["message-1-1"];i.weChat.browser()?wx?wx.ready(function(){wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){e&&e.resultStr&&(window.location.href=e.resultStr)}})}):t.refresh({confirmBtn:!1,content:"暂且无法使用扫一扫功能，敬请谅解！"}):t.refresh({confirmBtn:!1,content:"请在微信端进行操作！"})}),n.on("touchend",".header-left    .text_login",function(){d&&(window.location.href="/login.html?jumpUrl="+d),d||(window.location.href="/login.html")}),n.on("touchend",".header-left    .icon_back",function(){i.url.jumpPage(u,-1,!0)}),n.on("touchend",".header-left    .icon_home",function(){window.location.href="/index.html"}),n.on("focus",".header-input    input",function(n){var i=[],o=n||window.event,a=$(o.currentTarget),r=a.parents(".header-input"),c=JSON.parse(window.localStorage.getItem("historyCache"))||[];r.addClass("isFocus"),$("html,body").animate({scrollTop:0}),$(document).find("#footer-1-1").css("display","none"),$(e["searchHistory-1-1"].$el).css({display:"block"}),$(e["searchHistory-1-1"].$el).animate({left:"0"},500),t.input=!0,t.input_search=!0,t.input_cancel=!0,t.icon_scan=!1,t.icon_news=!1,t.info_shop=!1,t.icon_back=!1,t.icon_home=!1,t.text_edit=!1,t.text_save=!1,t.icon_close=!1,t.title_shop=!1,t.title_text=!1,t.text_login=!1,t.text_manage=!1,t.text_choose=!1,t.icon_search=!1,t.icon_shopCart=!1,t.text_orderList=!1,$.each(c,function(e,t){i.push(t)}),e["searchHistory-1-1"].historyCache=i}),n.on("keyup",".header-input    input",function(){var e=n.find(".header-input input").val(),t=n.find(".header-input input").attr("placeholder");if(!e&&t&&(e=t),13===r.keyboard.keyboardCode)if(e.trim()){var i=[],o=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(o,function(e,t){i.push(t.goodsName)});var a=$.inArray(e,i);-1!==a&&o.splice(a,1),o.unshift({goodsName:e}),o.splice(9,o.length-9),n.find(".header-input > input").blur(),window.localStorage.setItem("historyCache",JSON.stringify(o)),window.location.href=encodeURI("/searchProduct.html?goodsName="+e)}else window.location.href="/searchProduct.html?upShelves=1"}),n.on("touchend",".header-input   .i_clear",function(e){var t=e||window.event;$(t.currentTarget).parent().find("input").val("")}),n.on("touchend",".header-right   .input_cancel",function(){t.input=!1,t.input_search=!1,t.input_cancel=!1,$(e["searchHistory-1-1"].$el).animate({left:"101%"},500,function(){$(e["searchHistory-1-1"].$el).css({display:"none"})}),$.each(t.initList,function(e,n){t[e]=n}),$("body").css({position:"static",overflow:"visible"}),$(document).find("#footer-1-1").css("display","block"),n.find(".header-input").removeClass("isFocus"),n.find(".header-input input").blur()}),n.on("touchend",".header-right   .icon_search",function(){t.input=!0,t.$nextTick(function(){n.find(".header-input input").focus()})}),n.on("touchend",".header-right   .icon_close",function(){i.url.jumpPage(u,-1,!0)}),n.on("touchend",".header-right   .info_shop",function(){window.location.href=d?"/index.html?jumpUrl="+d:"/index.html"}),n.on("touchend",".header-right   .icon_shopCart",function(){window.location.href="/shoppingCart.html"}),n.on("touchend",".header-right   .icon_orderList",function(){window.location.href="/orderList.html?jumpUrl="+s}),n.on("touchend",".header-right   .icon_choose",function(){var t=e["discount-1-1"].type,n=e["discount-1-1"].orderInfo,o=e["discount-1-1"].supplierId,a=e["discount-1-1"].showDiscount,r=JSON.stringify(a||{}),c=window.localStorage.getItem("ordersInfo"),s=JSON.parse(c);s&&t&&o&&(s.typeObj[t][o]=n,c=JSON.stringify(s||{}),window.localStorage.removeItem("orderInfo"),window.localStorage.setItem("ordersInfo",c),window.localStorage.setItem("showDiscount",r),i.url.jumpPage(d,-1,!0))}),n.on("touchend",".header-right   .icon_news",function(){e["message-1-1"].refresh({confirmBtn:!1,content:"咨询功能暂未开放，敬请谅解！"})})}})),/^prompt-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{content:""},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^banner-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{gradientHide:G},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){var e=this,t=$(e.$el);t.roller({loop:!0,eVisual:t.find(".banner-bannerImg ul"),eRoller:t.find(".banner-bannerImg ul li"),eButton:t.find(".banner-carousel-spots .spot"),beRollFunc:function(e,t){var n=e.$eRoller.eq(t-1).attr("rollId");e.$eButton.removeClass("active").eq(n-1).addClass("active")},edRollFunc:function(e){}})}})),/^introduce-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^advertising-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^advertising-2-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^goodsList-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},computed:{},methods:{isShow:function(e){return e%2==1},showPrice:function(e){return 1*e>0?"￥"+(1*e).toFixed(2):"￥0.00"}},beforeCreate:function(){},created:function(){},mounted:function(){}})),/^goodsList-2-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{showPrice:function(e){return 1*e>0?"￥"+(1*e).toFixed(2):"￥0.00"},setStatistics:function(e){var t={type:"H5楼层-"+$(e.currentTarget).attr("title"),userId:localStorage.getItem("userId")||0,shopId:localStorage.getItem("shopId")||2,goodsId:$(e.currentTarget).attr("id"),logsName:"statistics"};a.send("SET_DATA_STATISTICS",t).done(function(e){})}},created:function(){},mounted:function(){}})),/^goodsList-3-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{showPrice:function(e){return 1*e>0?"￥"+(1*e).toFixed(2):"￥0.00"},imgSrc:function(e){var t="";return 0!==e&&"0"!==e||(t="/images/platform/tag/icon_cross.png"),2!==e&&"2"!==e||(t="/images/platform/tag/icon_normal.png"),t},tagExist:function(e){var t=!1,n="string"==typeof e,i=n&&e&&e.split(",");return $.each(i||[],function(e,n){if("爆款"===n||"必选"===n||"热销"===n||"优选"===n)return t=!0,!1}),t},tagHandle:function(e){var t=[],n="string"==typeof e,i=n&&e&&e.split(",")||[];return $.each(i||[],function(e,n){switch(n){case"必选":-1===$.inArray("/images/platform/goodsList/goodsList-tag1.png",t)&&t.push("/images/platform/goodsList/goodsList-tag1.png");break;case"爆款":-1===$.inArray("/images/platform/goodsList/goodsList-tag2.png",t)&&t.push("/images/platform/goodsList/goodsList-tag2.png");break;case"热销":-1===$.inArray("/images/platform/goodsList/goodsList-tag3.png",t)&&t.push("/images/platform/goodsList/goodsList-tag3.png");break;case"优选":-1===$.inArray("/images/platform/goodsList/goodsList-tag4.png",t)&&t.push("/images/platform/goodsList/goodsList-tag4.png")}}),t}},created:function(){},mounted:function(){var e=[0,0,0];$(this.$el).find(".commodity-item").each(function(t){var n=t%3,i=1*$(this).height()+10;$(this).css({top:e[n],left:240*n}),e[n]=e[n]+i}),$(this.$el).find(".commodity-center").css("height",Math.max.apply(null,e)+"px")}})),/^goodsList-4-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{nextHour:"00",nextMinute:"00",nextSecond:"00",EndHour:"00",EndMinute:"00",EndSecond:"00",activeType:null},methods:{},created:function(){},mounted:function(){function e(e){if(e){var t=new Date(e);return{year:t.getFullYear(),month:("0"+(t.getMonth()+1)).slice(-2),day:("0"+t.getDate()).slice(-2),hour:("0"+t.getHours()).slice(-2),minutes:("0"+t.getMinutes()).slice(-2),seconds:("0"+t.getSeconds()).slice(-2)}}}var t=this;!function(t){var n=new Date($.ajax({async:!1}).getResponseHeader("Date")).getTime(),i=e(n),o=i.year+"/"+i.month+"/"+i.day,a=new Date(o+" 10:00:00").getTime(),r=1*a+864e5,c=r-n;t.activeType=c>0?0:null;var s=parseInt(c)/1e3,d=0,u=0;s>=60&&(d=parseInt(s/60),s=parseInt(s%60),d>=60&&(u=parseInt(d/60),d=parseInt(d%60))),parseInt(s)<10?t.EndSecond="0"+parseInt(s):t.EndSecond=parseInt(s),t.EndMinute=d<10?"0"+parseInt(d):parseInt(d),t.EndHour=u<10?"0"+parseInt(u):u>=24?"00":parseInt(u)}(t)}})),/^activity-2-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{setStatistics:function(e){var t={type:"H5端本周特卖",userId:localStorage.getItem("userId")||0,shopId:localStorage.getItem("shopId")||2,goodsId:$(e.currentTarget).attr("id"),logsName:"statistics"};a.send("SET_DATA_STATISTICS",t).done(function(e){})}},created:function(){},mounted:function(){}})),/^activity-3-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{setStatistics:function(e){var t={type:"H5端新品推荐",userId:localStorage.getItem("userId")||0,shopId:localStorage.getItem("shopId")||2,goodsId:$(e.currentTarget).attr("id"),logsName:"statistics"};a.send("SET_DATA_STATISTICS",t).done(function(e){})}},created:function(){},mounted:function(){}})),/^footer-1-\d+$/.test(t)){var Y=e["message-1-1"];e[t]=new Vue({el:n,data:{nav:H,home:E,shoppingCart:U,personalCenter:q,goodsDetail:Q,isLogin:c,count:0},computed:{},methods:{},beforeCreate:function(){var e=this;c&&a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(t){t&&t.success&&(e.count=t.obj)})},created:function(){},mounted:function(){var t=this,n=$(t.$el);n.on("touchend",".footer-goodsDetail .icon_top",function(){$("html,body").animate({scrollTop:0},500)}),n.on("touchend",".footer-goodsDetail .icon_back",function(){var t=e["goodsDetail-1-1"];t&&(t.alertShow=!1,t.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none"),$("html,body").animate({scrollTop:0}))}),n.on("click",".footer-goodsDetail .text_toBuy",function(){var t=o.platform.rule.crossOrder.maxPrice,i=(o.platform.rule.normalOrder.minPrice,e["goodsDetail-1-1"]),a=i.alertShow;if(i&&!a)i.alertShow=!0,i.alertBgShow=!0,$("html,body").animate({scrollTop:0}),n.find(".footer-goodsDetail .icon_top").css("display","none"),n.find(".footer-goodsDetail .icon_back").css("display","block");else if(i){$("html,body").animate({scrollTop:0});var r={typeObj:{}},s=i.stock||0,d=i.quantity,u=i.minQuantity,l=(i.maxQuantity,$(i.$el).find("[itemContCode]").attr("itemContCode")||""),p=i.itemCont[l]||{};if(!c)return void Y.refresh({content:"您尚未登录，是否先进行登录!",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){i.alertShow=!1,i.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")},confirmFun:function(){window.location.href="/login.html?jumpUrl="+i.pathUrl}});if("itemHide"===l)return void Y.refresh({confirmBtn:!1,content:"请选择完规格，再加入购物车！"});if("downShelf"===l)return void Y.refresh({confirmBtn:!1,content:"该商品所选规格已下架, 无法购买下单！"});if(s<=0||s<u)return void Y.refresh({confirmBtn:!1,content:"当前商品库存不足, 无法加入购物车中！"});var m=p.type,h=p.itemId,f=p.supplierId,g=p.supplierName,y=0===m?"跨境":2===m?"一般":1===m?"大贸":"";r.orderCount=1,r.typeObj[m]={},r.typeObj[m][f]={},r.typeObj[m][f].taxFee=0,r.typeObj[m][f].postFee=0,r.typeObj[m][f].exciseTaxFee=0,r.typeObj[m][f].incrementTaxFee=0,r.typeObj[m][f].type=m,r.typeObj[m][f].typeName=y,r.typeObj[m][f].supplierId=f,r.typeObj[m][f].supplierName=g,r.typeObj[m][f].supplierWeight=p.weight*d,r.typeObj[m][f].supplierPrice=p.price*d,r.typeObj[m][f].supplierVipPrice=p.vipPrice*d,r.typeObj[m][f].supplierRealPrice=p.realPrice*d,r.typeObj[m][f].supplierRealVipPrice=p.realVipPrice*d,r.typeObj[m][f].itemObj={},r.typeObj[m][f].itemObj[h]={},r.typeObj[m][f].itemObj[h].quantity=d,r.typeObj[m][f].itemObj[h].status=p.status,r.typeObj[m][f].itemObj[h].itemId=p.itemId,r.typeObj[m][f].itemObj[h].goodsId=p.goodsId,r.typeObj[m][f].itemObj[h].itemImg=p.goodsImg,r.typeObj[m][f].itemObj[h].itemCode=p.itemCode,r.typeObj[m][f].itemObj[h].goodsName=p.goodsName,r.typeObj[m][f].itemObj[h].firstCategory=p.firstCategory,r.typeObj[m][f].itemObj[h].secondCategory=p.secondCategory,r.typeObj[m][f].itemObj[h].thirdCategory=p.thirdCategory,r.typeObj[m][f].itemObj[h].picPath=p.picPath||p.goodsImg,r.typeObj[m][f].itemObj[h].exciseTax=p.exciseTax,r.typeObj[m][f].itemObj[h].incrementTax=p.incrementTax,r.typeObj[m][f].itemObj[h].priceList=p.priceList,r.typeObj[m][f].itemObj[h].tagList=p.tagList,r.typeObj[m][f].itemObj[h].tagFunId=p.tagFunId,r.typeObj[m][f].itemObj[h].preSaleName=p.preSaleName,r.typeObj[m][f].itemObj[h].preSaleDesc=p.preSaleDesc,r.typeObj[m][f].itemObj[h].type=p.type,r.typeObj[m][f].itemObj[h].href=p.href,r.typeObj[m][f].itemObj[h].freePost=p.freePost,r.typeObj[m][f].itemObj[h].freeTax=p.freeTax,r.typeObj[m][f].itemObj[h].unit=p.unit,r.typeObj[m][f].itemObj[h].sku=p.sku,r.typeObj[m][f].itemObj[h].info=p.info,r.typeObj[m][f].itemObj[h].stock=p.stock>0?p.stock:0,r.typeObj[m][f].itemObj[h].weight=p.weight,r.typeObj[m][f].itemObj[h].price=p.price,r.typeObj[m][f].itemObj[h].vipPrice=p.vipPrice,r.typeObj[m][f].itemObj[h].realPrice=p.realPrice,r.typeObj[m][f].itemObj[h].realVipPrice=p.realVipPrice,r.typeObj[m][f].itemObj[h].minPrice=p.minPrice,r.typeObj[m][f].itemObj[h].maxPrice=p.maxPrice,r.typeObj[m][f].itemObj[h].vipMinPrice=p.vipMinPrice,r.typeObj[m][f].itemObj[h].vipMaxPrice=p.vipMaxPrice,r.typeObj[m][f].itemObj[h].realMinPrice=p.realMinPrice,r.typeObj[m][f].itemObj[h].realMaxPrice=p.realMaxPrice,r.typeObj[m][f].itemObj[h].realVipMinPrice=p.realVipMinPrice,r.typeObj[m][f].itemObj[h].realVipMaxPrice=p.realVipMaxPrice,1*p.type==2?window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+i.pathUrl):1*p.type==0&&(p.realPrice*d>t&&1*d>1?Y.refresh({confirmBtn:!1,content:"跨境商品单笔订单价格不得超过"+t+"元！"}):window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+i.pathUrl)),i.alertShow=!1,i.alertBgShow=!1,window.localStorage.setItem("showDiscount","{}"),window.localStorage.setItem("ordersInfo",JSON.stringify(r)),n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")}}),n.on("click",".footer-goodsDetail .text_addShopCart",function(){var t=e["header-1-1"],i=(e["footer-1-1"],e["goodsDetail-1-1"]),o=i.alertShow;if(i&&!o)i.alertShow=!0,i.alertBgShow=!0,$("html,body").animate({scrollTop:0}),n.find(".footer-goodsDetail .icon_top").css("display","none"),n.find(".footer-goodsDetail .icon_back").css("display","block");else if(i){$("html,body").animate({scrollTop:0});var r=i.stock||0,s=i.quantity,d=i.minQuantity,u=i.maxQuantity,l=$(i.$el).find("[itemContCode]").attr("itemContCode")||"",p=i.itemCont[l],m=function(e){var o=$(t.$el).find(".header-right .icon_shopCart"),r=$(i.$el).find(".goodsDetail-alert-body-msg-left a img"),c=r.clone();c.length&&(c.offset({top:r.offset().top+200,left:r.offset().left+350}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"99999999"}).appendTo($("body")).animate({top:o.offset().top+10,left:o.offset().left+10,width:50,height:50},1e3,"linear"),c.animate({width:0,height:0},function(){$(this).detach()})),a.send("ORDER_SHOPPINGCART_CREATE",{type:p.type,itemId:p.itemId,supplierId:p.supplierId,supplierName:p.supplierName,goodsName:p.goodsName,goodsImg:p.goodsImg,quantity:e}).done(function(e){e&&e.success&&a.send("ORDER_SHOPPINGCART_COUNT",{}).done(function(e){e&&e.success&&(t.shopCartCount=e.obj||0,Y.refresh({confirmBtn:!1,content:"添加成功"}))})}),i.alertShow=!1,i.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")};if(!c)return void Y.refresh({content:"您尚未登录，是否先登录！",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){i.alertShow=!1,i.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")},confirmFun:function(){window.location.href="/login.html?jumpUrl="+i.pathUrl}});if("itemHide"===l)return void Y.refresh({confirmBtn:!1,content:"请选择完规格，再加入购物车！"});if("downShelf"===l)return void Y.refresh({confirmBtn:!1,content:"该商品所选规格已下架, 无法购买下单！"});if(r<=0||r<d)return void Y.refresh({confirmBtn:!1,content:"当前商品库存不足, 无法加入购物车中！"});a.send("ORDER_SHOPPINGCART_COUNT_ID",{itemId:p.itemId}).done(function(e){if(e&&e.success){var t=e.obj||0;if(t>=u)Y.refresh({content:"当前该商品在购物车中的数量已达到最大购买量, 无法继续加入购物车中！",confirmFun:function(){i.alertShow=!1,i.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")}});else if(s+t>u){var o=u-t;Y.refresh({content:"该商品可允许最大购买量为:"+u+"件; 目前在购物车中已有:"+t+"件, 最多可往购物车中加入"+o+"件! 是否继续？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){i.alertShow=!1,i.alertBgShow=!1,n.find(".footer-goodsDetail .icon_top").css("display","block"),n.find(".footer-goodsDetail .icon_back").css("display","none")},confirmFun:function(){m(o)}})}else m(s)}})}})}})}if(/^scrollTop-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{show:!1},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){var e=this,t=$(e.$el);e.show=$(window).scrollTop()>=1500,$(window).on("scroll",function(){e.show=$(window).scrollTop()>=1500}),t.on("touchend",".scrollTop-1-content .scrollTop",function(){$("html,body").animate({scrollTop:0},500)})}})),/^searchHistory-1-\d+$/.test(t)&&a.send(["PAGE_NAVIGATION"],{},!0).done(function(i){var o=[];$.each(i||[],function(e,t){o.push({firstId:t.id,industryName:t.industryName})}),e[t]=new Vue({el:n,data:{historyCache:window.localStorage.getItem("historyCache")||[],hotSearchList:o},computed:{},methods:{},beforeCreate:function(){},created:function(){},mounted:function(){var t=this,n=$(t.$el),i=e["message-1-1"];n.on("touchend",".searchHistory-1-content li",function(e){var t=e||window.event,n=$(t.target||t.srcElement),i=n.text()&&n.text().trim()||"",o=n.attr("firstId")&&n.attr("firstId").trim()||"",a=n.attr("secondId")&&n.attr("secondId").trim()||"",c=n.attr("thirdId")&&n.attr("thirdId").trim()||"";if(!r.touch.touchIsMoved){var s=[],d=JSON.parse(window.localStorage.getItem("historyCache"))||[];$.each(d,function(e,t){s.push(t.goodsName)});var u=$.inArray(i,s);-1!==u&&d.splice(u,1),d.unshift({goodsName:i,firstId:o,secondId:a,thirdId:c}),d.splice(9,d.length-9),window.localStorage.setItem("historyCache",JSON.stringify(d)),window.location.href=encodeURI("/searchProduct.html?goodsName="+i+"&firstCategory="+o+"&secondCategory="+a+"&thirdCategory="+c)}}),n.on("touchend",".searchHistory-1-content .icon_delete ",function(){i.refresh({content:"是否清除所有搜索内容？",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){window.localStorage.setItem("historyCache",JSON.stringify([])),t.historyCache=[]}})})}})}),/^goodsDetail-1-\d+$/.test(t)){var Y=(e["header-1-1"],e["message-1-1"]);a.send("GOODS_ID_QUERY_NODE",{goodsId:w}).done(function(o){e[t]=new Vue({el:n,data:{pathUrl:s,isFreePost:null,alertBgShow:!1,alertShow:!1,status:null,stock:0,quantity:1,minQuantity:0,maxQuantity:1/0,spcExciseTax:0,spcIncrementTax:0,spcCarton:"",spcPrice:"0.00",spcVipPrice:"0.00",spcRealPrice:"0.00",spcRealVipPrice:"0.00",itemContCode:"itemHide",nextHour:"00",nextMinute:"00",nextSecond:"00",quantityTimer:null,quantityDes:"",couponList:[],objArr:[],mdData:o&&o.cont||{}},computed:{},methods:{getItemObj:function(e){var t,n=this,i=0,o=[],a={},r=n.codeArr,c=n.itemCont,s=n.objArr=[],d=$.extend(!0,{},n.itemKey);return $.each(d||{},function(t){e[t]||(e[t]="[^;]*")}),$.each(e||{},function(e,t){var n=t;"[^;]*"!=n&&(n=t.replace(/\//g,"\\/").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\^/g,"\\^").replace(/\$/g,"\\$").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\?/g,"\\?").replace(/\,/g,"\\,").replace(/\./g,"\\.").replace(/\&/g,"\\&"));var i=$.inArray(e,r);-1!==i&&(o[i]=n)}),t=new RegExp("^"+o.join(";")+"$",""),$.each(c,function(o,d){t.test(o)&&(s.push(c[o]),n.itemContCode=o,n.itemContTagList=d.tagList,n.itemContTag={preSaleName:d.preSaleName,preSaleDesc:d.preSaleDesc},n.stock=d.stock>0?d.stock:0,n.status=d.status,i++),$.each(e,function(t){var i,c=[],s=$.extend(!0,{},e);$.each(s||{},function(e,n){var i=n;if("[^;]*"!=n)var i=n.replace(/\//g,"\\/").replace(/\*/g,"\\*").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\^/g,"\\^").replace(/\$/g,"\\$").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\?/g,"\\?").replace(/\,/g,"\\,").replace(/\./g,"\\.").replace(/\&/g,"\\&");var o=$.inArray(e,r);t===e&&(c[o]="[^;]*"),t!==e&&-1!==o&&(c[o]=i)}),i=new RegExp("^"+c.join(";")+"$",""),i.test(o)&&$.each(o.split(";"),function(e,i){if(i){var o=n.codeArr[e];o===t&&(a[o]=a[o]||[],-1===$.inArray(i,a[o])&&a[o].push(i))}})})}),$.each(a,function(e,t){$.each(t,function(t,n){var i=$.inArray(n,d[e]);-1!==i&&d[e].splice(i,1)})}),1!==i?(n.stock=1/0,n.itemContTagList=[],n.itemContCode="itemHide",n.itemContTag=null):0===n.status?(n.itemContCode="downShelf",Y.refresh({confirmBtn:!1,content:"该商品所选规格已下架, 请选择其他规格！"})):n.stock<=0&&(n.itemContCode="noStock"),n.setItemCont(),d},setItemCont:function(){var e=this,t=[],n=[],i=[],o=[],a=[],r=[],c=[],s=[];$.each(e.objArr,function(d,u){var l=e.quantity,p=e.getNumRegion(u.priceList),m=p.minQuantity,h=p.maxQuantity;a.push(m),r.push(h),e.minQuantity=m,e.maxQuantity=h,"itemHide"!==e.itemContCode&&(l=l>h?h:l,l=l<m?m:l,l=l>u.stock?u.stock:l,l=l>0?l:1,e.spcCarton=u.carton,e.quantity=l);var f=e.getPriceList(u.priceList,l);u.realVipPrice=f.realVipPrice,u.realPrice=f.realPrice,u.vipPrice=f.vipPrice,u.price=f.price,t.push(f.price),n.push(f.vipPrice),i.push(f.realPrice),o.push(f.realVipPrice),c.push(u.incrementTax),s.push(u.exciseTax),a.push(m),r.push(h)}),0===t.length&&(t[0]=null),0===n.length&&(t[0]=null),0===i.length&&(t[0]=null),0===o.length&&(t[0]=null),0===a.length&&(a[0]=0),0===r.length&&(r[0]=1/0),0===c.length&&(c[0]=0),0===s.length&&(s[0]=0);var d=Math.min.apply(Math,a),u=Math.max.apply(Math,r),l=100*Math.min.apply(Math,s),p=100*Math.max.apply(Math,s),m=100*Math.min.apply(Math,c),h=100*Math.max.apply(Math,c),f=Math.min.apply(Math,t),g=Math.max.apply(Math,t),y=Math.min.apply(Math,n),w=Math.max.apply(Math,n),b=Math.min.apply(Math,i),v=Math.max.apply(Math,i),C=Math.min.apply(Math,o),I=Math.max.apply(Math,o);f=(f!==1/0?f:0).toFixed(2),g=(f!==-1/0?g:0).toFixed(2),y=(y!==1/0?y:0).toFixed(2),w=(w!==-1/0?w:0).toFixed(2),b=(b!==1/0?b:0).toFixed(2),v=(v!==-1/0?v:0).toFixed(2),C=(C!==1/0?C:0).toFixed(2),I=(I!==-1/0?I:0).toFixed(2),e.spcPrice=f===g?f:f+"~"+g,e.spcVipPrice=y===w?y:y+"~"+w,e.spcRealPrice=b===v?b:b+"~"+v,e.spcRealVipPrice=C===I?C:C+"~"+I,e.spcExciseTax=l===p?l:l+"~"+p,e.spcIncrementTax=m===h?m:m+"~"+h,e.quantityDes=d&&u&&d!==-1/0&&u!==1/0?"当前允许购买量为: "+d+"~"+u:d&&d!==-1/0?"当前最小购买量为: "+d:u&&u!==1/0?"当前最大购买量为: "+u:""},getNumRegion:function(e){var t={},n=[],i=[],o=!1;return $.each(e,function(e,t){var a=1*t.min?1*t.min:0,r=1*t.max?1*t.max:1/0;n.push(r),i.push(a),o=!0}),o?(t.minQuantity=Math.min.apply(Math,i),t.maxQuantity=Math.max.apply(Math,n),t):{minQuantity:0,maxQuantity:1/0}},getPriceList:function(e,t){var n={},i={},o=[],a=[],r=[],c=[],s=[],d=[],u=[],l=!1;return $.each(e,function(e,t){var n=t.min?t.min:0,i=t.max?t.max:1/0,p=t.price||0===t.price?(1*t.price).toFixed(2):null,m=t.vipPrice||0===t.vipPrice?(1*t.vipPrice).toFixed(2):null,h=p?t.discount?(t.price*t.discount/10).toFixed(2):(1*t.price).toFixed(2):null,f=m?t.discount?(t.vipPrice*t.discount/10).toFixed(2):(1*t.vipPrice).toFixed(2):null;o.push({prices:{price:p,vipPrice:m,realPrice:h,realVipPrice:f},min:n,max:i}),r.push(n),a.push(i),c.push(p),s.push(m),d.push(h),u.push(f),l=!0}),l?(i.min=Math.min.apply(Math,r),i.max=Math.max.apply(Math,a),i.minPrice=Math.min.apply(Math,c),i.vipMinPrice=Math.min.apply(Math,s),i.realMinPrice=Math.min.apply(Math,d),i.realVipMinPrice=Math.min.apply(Math,u),i.maxPrice=Math.max.apply(Math,c),i.vipMaxPrice=Math.max.apply(Math,s),i.realMaxPrice=Math.max.apply(Math,d),i.realVipMaxPrice=Math.max.apply(Math,u),t<i.min?{price:i.maxPrice,vipPrice:i.vipMaxPrice,realPrice:i.realMaxPrice,realVipPrice:i.realVipMaxPrice}:t>i.max?{price:i.minPrice,vipPrice:i.vipMinPrice,realPrice:i.realMinPrice,realVipPrice:i.realVipMinPrice}:($.each(o,function(e,i){if(t>=i.min&&t<=i.max)return n={price:i.prices.price,vipPrice:i.prices.vipPrice,
realPrice:i.prices.realPrice,realVipPrice:i.prices.realVipPrice},!1}),n)):{price:null,vipPrice:null,realPrice:null,realVipPrice:null}},imgSrc:function(e){var t="";switch(e){case 0:t="/images/platform/tag/icon_cross_big.png";break;case 2:t="/images/platform/tag/icon_normal_big.png"}return t},imgType:function(e){var t="";switch(e){case 0:t=!0;break;case 2:t=!1}return t},getTags:function(e){var t=[];return $.each(e||[],function(e,n){switch(n.tagName){case"必选":-1===$.inArray("icon_tag1",t)&&t.push("icon_tag1");break;case"爆款":-1===$.inArray("icon_tag2",t)&&t.push("icon_tag2");break;case"热销":-1===$.inArray("icon_tag3",t)&&t.push("icon_tag3");break;case"优选":-1===$.inArray("icon_tag4",t)&&t.push("icon_tag4")}}),t},returnMsg:function(e,t,n){var i="",o=this,a=this.mdData.freeTax,r=this.mdData.freePost,c=this.mdData.type;if("itemHide"!==this.itemContCode){if(0==c)if(0==a){var s=0,d=this.quantity*n;e/=100,t/=100,e&&0!=e&&(s+=(d+0)/(1-e)*e*.7),t&&0!=t&&(s+=(d+0+(d+0)/(1-e)*e)*t*.7),i+="预计税费￥"+s.toFixed(2)}else 1==a&&(i+="包税");else 2==c&&(i+="包税");switch(r){case 0:i+="";break;case 1:i+="包邮";break;case 2:i+=o.isFreePost?"包邮":"邮费到付"}}else i="请选择商品规格";return i},returnSupplierName:function(){var e="";switch(this.mdData.supplierName){case"天天仓":e="保税TT仓";break;case"粮油仓":e="保税LY仓";break;case"行云仓":e="保税XY仓";break;case"富邦仓":e="保税FB仓";break;default:e=this.mdData.supplierName}return e},classifyTouchend:function(e){var t=this,n={},o=e||window.event,a=$(o.currentTarget);if(!a.hasClass("lose")){var r=a.parents(".classifyGroup");a.toggleClass("active").siblings().removeClass("active"),r.find(".classify").removeClass("lose"),r.find(".classify.active").each(function(){var e=$(this).attr("data-name")||"",t=$(this).attr("data-val")||"";n[e]=t}),$.each(t.getItemObj(n),function(e,t){$.each(t,function(t,n){r.find("[data-name='"+e+"'][data-val='"+n+"']").addClass("lose")})})}if("itemHide"!==t.itemContCode){var c=this.objArr[0].itemId;c&&i.url.setParam({itemId:c},"cover"),c&&(t.pathUrl=i.path.setParam(t.pathUrl,{itemId:c}))}},inputInput:function(){var e=this,t=$(this.$el),n=e.stock||0,i=e.minQuantity,o=e.maxQuantity,a=t.find("[itemContCode]").attr("itemContCode"),r=/\D/.test(e.quantity)?e.quantity.replace(/\D/g,""):e.quantity;clearTimeout(e.quantityTimer),e.quantityTimer=setTimeout(function(){r=1*r>0?1*r:1,"itemHide"!==a&&(n<=0||r<=n&&i&&n<i?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！",timeOutFun:function(){r=(o||0===o)&&r>o?o:r,r=(i||0===i)&&r<i?i:r,r=r>n?n:r,e.quantity=1*r>0?1*r:1,e.setItemCont()}}):r>n?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量大于库存可用量！",timeOutFun:function(){r=(o||0===o)&&r>o?o:r,r=(i||0===i)&&r<i?i:r,r=r>n?n:r,e.quantity=1*r>0?1*r:1,e.setItemCont()}}):o&&r>o?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已大于最大购买量！",timeOutFun:function(){r=(o||0===o)&&r>o?o:r,r=(i||0===i)&&r<i?i:r,r=r>n?n:r,e.quantity=1*r>0?1*r:1,e.setItemCont()}}):i&&r<i&&Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已低于最小购买量！",timeOutFun:function(){r=(o||0===o)&&r>o?o:r,r=(i||0===i)&&r<i?i:r,r=r>n?n:r,e.quantity=1*r>0?1*r:1,e.setItemCont()}}))},650)},inputBlur:function(){var e=this,t=$(this.$el),n=e.stock||0,i=e.minQuantity,o=e.maxQuantity,a=t.find("[itemContCode]").attr("itemContCode"),r=/\D/.test(e.quantity)?e.quantity.replace(/\D/g,""):e.quantity;"itemHide"!==a&&(r=(o||0===o)&&r>o?o:r,r=(i||0===i)&&r<i?i:r,r=r>n?n:r),e.quantity=1*r>0?1*r:1,e.setItemCont()},quantityTouchend:function(e){var t=this,n=e||window.event,i=$(this.$el),o=$(n.currentTarget),a=i.find("[itemContCode]").attr("itemContCode"),r=t.stock||0,c=t.quantity,s=(t.quantity,t.minQuantity),d=t.maxQuantity;o.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),o.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),"itemHide"!==a&&(r<=0||c<=r&&s&&r<s?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>r?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):d&&c>d?Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):s&&c<s&&Y.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(d||0===d)&&c>d?d:c,c=(s||0===s)&&c<s?s:c,c=c>r?r:c,t.quantity=1*c>0?1*c:1,t.setItemCont())},returnIconSrc:function(e){var t=[],n=[];return $.each(e||[],function(e,t){$.each(t.tagList||[],function(e,t){n.push(t)})}),$.each(n||[],function(e,n){switch(n.tagName){case"特卖商品":-1===$.inArray("icon_tag1",t)&&t.push("icon_tag1");break;case"新品推荐":-1===$.inArray("icon_tag2",t)&&t.push("icon_tag2")}}),1==t.length&&"icon_tag1"==t[0]?"/images/platform/page/icon_hot.png":1==t.length&&"icon_tag2"==t[0]?"/images/platform/page/icon_new.png":2==t.length?"/images/platform/page/icon_hot.png":""}},beforeCreate:function(){var e=this;a.send("GOODS_STOCK_QUERY",{goodsId:w}).done(function(t){t&&t.success&&t.obj&&($.each(e.itemCont,function(e,n){$.each(t.obj,function(e,t){n.itemId===t.itemId&&(n.stock=t.stock)})}),y?e.getItemObj(e.itemIdMap[y]||{}):e.getItemObj({}))})},beforeMount:function(){y?this.getItemObj(this.itemIdMap[y]||{}):this.getItemObj({})},created:function(){var e=this,t="",n="",i=0,o=[],a={},r={},c={};$.each(e.mdData.goodsSpecsList,function(t,n){var s={},d=[],u="";s.infoObj=JSON.parse(n.info||"{}"),s.goodsId=e.mdData.goodsId,s.goodsName=e.mdData.customGoodsName,s.firstCategory=e.mdData.firstCategory,s.secondCategory=e.mdData.secondCategory,s.thirdCategory=e.mdData.thirdCategory,s.supplierId=e.mdData.supplierId,s.supplierName=e.mdData.supplierName,s.goodsFileObj=$.isArray(e.mdData.goodsFileList)&&e.mdData.goodsFileList[0],s.goodsImg=s.goodsFileObj&&s.goodsFileObj.path||"",s.type=e.mdData.type,s.href=e.mdData.href,s.freePost=e.mdData.freePost,s.freeTax=e.mdData.freeTax,s.unit=e.mdData.unit,s.info=n.info,s.carton=n.carton,s.itemId=n.itemId,s.itemCode=n.itemCode,s.status=n.status,s.minPrice=n.minPrice,s.maxPrice=n.maxPrice,s.vipMinPrice=n.vipMinPrice,s.vipMaxPrice=n.vipMaxPrice,s.realMinPrice=n.realMinPrice,s.realMaxPrice=n.realMaxPrice,s.realVipMinPrice=n.realVipMinPrice,s.realVipMaxPrice=n.realVipMaxPrice,s.incrementTax=e.mdData.incrementTax,s.exciseTax=n.exciseTax,s.priceList=n.priceList,s.weight=n.weight,s.stock=n.stock>0?n.stock:0,s.sku=n.sku,s.tagList=[],$.each(n.tagList||[],function(t,n){"预售"===n.tagName&&(s.tagFunId=n.tagFunId,s.preSaleName=n.tagName,s.preSaleDesc=n.description),"一般贸易(包邮)"===n.tagName&&(e.isFreePost=!0),s.tagList.push(n)}),$.each(s.infoObj,function(e,t){-1===$.inArray(t,a[e])&&(a[e]=a[e]||[],u=t.replace(";",""),a[e].push(t.replace(";",""))),-1===$.inArray(e,o)&&o.push(e);var n=$.inArray(e,o);d[n]=t});var l=d.join(";");r[l]=s,c[s.itemId]=s.infoObj,i++}),e.length=i,e.codeArr=o,e.itemKey=a,e.itemCont=r,e.itemIdMap=c,$.each(e.mdData.couponList||[],function(i,o){t=o.name.split("/")[0],n=o.name.split("/")[1],n=void 0!==n?n.trim():"",e.couponList[i]={type:n,name:t,couponId:o.couponId,receiveStatus:o.receiveStatus}}),($.isEmptyObject(e.mdData)||0===e.mdData.status)&&Y.refresh({content:"该商品已下架，请重新选择商品！",confirmBtn:!1,timeOutFun:function(){window.history.go(-1)}})},mounted:function(){function e(e){if(e){var t=new Date(e);return{year:t.getFullYear(),month:("0"+(t.getMonth()+1)).slice(-2),day:("0"+t.getDate()).slice(-2),hour:("0"+t.getHours()).slice(-2),minutes:("0"+t.getMinutes()).slice(-2),seconds:("0"+t.getSeconds()).slice(-2)}}}function t(t){var n=$(".productinfo .productinfo-left").attr("data-type"),i=new Date($.ajax({async:!1}).getResponseHeader("Date")).getTime(),o=e(i),a=o.year+"/"+o.month+"/"+o.day,r=new Date(a+" 10:00:00").getTime()+864e5,c=0;n&&(c=r-i);var s=parseInt(c)/1e3,d=0,u=0;s>=60&&(d=parseInt(s/60),s=parseInt(s%60),d>=60&&(u=parseInt(d/60),d=parseInt(d%60))),parseInt(s)<10?t.nextSecond="0"+parseInt(s):t.nextSecond=parseInt(s),t.nextMinute=d<10?"0"+parseInt(d):parseInt(d),t.nextHour=u<10?"0"+parseInt(u):u>=24?"00":parseInt(u)}var n=this,i=$(n.$el),o=i.find(".classifyGroup");/\.html$|\.htm$/i.test(n.mdData.detailPath)&&$(n.$el).find(".detailMsgContent").load(n.mdData.detailPath),$.each(y&&n.itemIdMap[y]||[],function(e,t){o.find("[data-name='"+e+"'][data-val='"+t+"']").addClass("active")}),i.find(".banner-bannerImg").roller({time:5e3,loop:i.find(".bannerImg_li").length>0,eVisual:i.find(".banner-bannerImg > ul"),eRoller:i.find(".bannerImg_li"),beRollFunc:function(e,t){var n=e.$eRoller.eq(t-1).attr("rollId");i.find(".banner-carousel-text .index").text(n)},edRollFunc:function(e){}}),i.on("touchend",".goodsDetail-discount .btn_lookDetail",function(e){var t=e||window.event,n=$(t.target||t.srcElement),i=n.parents(".goodsDetail-discount");i.hasClass("close")?(n.text("关闭"),i.removeClass("close")):(n.text("展开"),i.addClass("close"))}),i.on("touchend",".goodsDetail-discount .btn_needReceive",function(e){var t=e||window.event,n=$(t.target||t.srcElement),i=n.parents("li[couponId]"),o=i.attr("couponId");c?o?a.send("COUPON_RECEIVE",{couponId:o}).done(function(e){e.success?(Y.refresh({content:"领取成功！",confirmBtn:!1}),n.removeClass("btn btn_needReceive"),n.addClass("received"),n.text("已领取")):Y.refresh({content:e&&e.errorMsg||"领取失败！",confirmBtn:!1})}).fail(function(){Y.refresh({content:"领取失败！",confirmBtn:!1})}):Y.refresh({confirmBtn:!1,content:"未获取到该优惠券编号"}):Y.refresh({content:"您尚未登录，请先登录！",confirmFun:function(){window.location.href="/login.html?jumpUrl="+s}})}),$(".productinfo .productinfo-left").attr("data-type")&&setInterval(function(){t(n)},1e3)}})})}if(/^customerService-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{QQ:l.qq,name:l.name,address:l.address,emailBox:l.emailBox,telephone:l.telephone,isCall:!0},methods:{callTelephone:function(){var t=this,n=new Date,i=n.getDay(),o=n.getHours(),a=0===i||6===i,r=o<9||o>17,c=e["message-1-1"];a||r?(c.refresh({content:"客服在线时间为周一至周五9:00 - 18:00，敬请谅解！",confirmBtn:!1}),t.isCall=!1):t.isCall=!0}},created:function(){},mounted:function(){}})),/^amount-access-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{userName:"",userPhone:"",userWechat:"",visitTime:"-1",userCity:"",userCityOk:!1,userProvince:"",userContent:"",isClick:!0},methods:{changeName:function(e){var t=this,n=$(e.currentTarget),i=n.val();""!==i?(t.userName=i,n.removeClass("state_error")):(t.userName="",n.addClass("state_error"))},changePhone:function(e){var t=this,n=$(e.currentTarget),i=n.val();""!==i&&/^1(3|4|5|7|8)\d{9}$/gi.test(i)?(t.userPhone=i,n.removeClass("state_error")):(t.userPhone="",n.addClass("state_error"))},changeWechat:function(e){var t=this,n=$(e.currentTarget),i=n.val();t.userWechat=""!==i?i:""},changeVisit:function(e){var t=this,n=$(e.currentTarget),i=n.val();"-1"!==i?(t.visitTime=i,n.removeClass("state_error")):(t.visitTime="",n.addClass("state_error"))},changeProvince:function(e){var t=this,n=$(e.currentTarget),i=n.parent(),o=n.val();"---- 所在省 ----"!==o?(t.userProvince=o,n.removeClass("state_error")):(t.userProvince="",n.addClass("state_error")),i.find(".userAddress-city option").length<=1&&(t.userCity="",t.userCityOk=!0,n.removeClass("state_error")),i.find(".userAddress-city option").length>1&&(t.userCity="",t.userCityOk=!1,n.removeClass("state_error"))},changeCity:function(e){var t=this,n=$(e.currentTarget),i=n.val();1!==n.find("option").length?"---- 所在市 ----"!==i?(t.userCity=i,n.removeClass("state_error")):(t.userCity="",n.addClass("state_error")):(t.userCity="",n.removeClass("state_error"))},changeContent:function(e){var t=this,n=$(e.currentTarget),i=n.val();""!==i?(t.userContent=i,n.removeClass("state_error")):(t.userContent="",n.addClass("state_error"))},listSubmit:function(){var t=this,n=!0,i=$(t.$el),o=e["message-1-1"];if(""===t.userName&&(n=!1,i.find("#itemUserName").addClass("state_error")),""===t.userPhone&&(n=!1,i.find("#itemUserPhone").addClass("state_error")),"-1"===t.visitTime&&(n=!1,i.find("#itemVisitTime").addClass("state_error")),""===t.userProvince&&(n=!1,i.find("#itemUserProvince").addClass("state_error")),!1===t.userCityOk&&(n=!1,i.find("#itemUserCity").addClass("state_error")),""===t.userContent&&(n=!1,i.find("#itemUserContent").addClass("state_error")),n)if(t.isClick){var r={userName:t.userName,userPhone:t.userPhone,userWechat:t.userWechat,visitTime:t.visitTime,userAddress:t.userProvince+t.userCity,userContent:t.userContent};a.send("VISIT_JSON_CREATE_NODE",r).done(function(e){e.success?(o.refresh({content:"您的申请已提交成功，我们将在3个工作日之内联系到您。",confirmBtn:!0,cancelBtn:!1,confirmFun:function(){window.location.href="/"}}),setTimeout(function(){t.isClick=!0},1e4)):(o.refresh({confirmBtn:!1,content:"提交失败，请检查网络是否通畅."}),setTimeout(function(){t.isClick=!0},1e4))}),t.isClick=!1}else o.refresh({content:"请勿频繁操作，请稍后重试。",confirmBtn:!1});else o.refresh({content:"请填写必要信息，方便我们联系到您。",confirmBtn:!1})}},created:function(){var e=this,t=localStorage.getItem("shopId")||2;e.shopId=t,287==t&&$(document).attr("title","俄速通全球购--加入我们")},mounted:function(){$(".userAddress").picker()}})),/^bargainRule-1-\d+$/.test(t)){var Y=e["message-1-1"],z="https://static.cncoopay.com:8080/wechat/appletcode/"+(b||2)+"/"+(b||2)+".png";e[t]=new Vue({el:n,data:{miniPath:z},methods:{},created:function(){},mounted:function(){}})}/^themeBanner-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){},mounted:function(){}})),/^themeNavInlet-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){},mounted:function(){}})),/^themeNavInlet-2-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){},mounted:function(){}})),/^themeFloor-1-\d+$/.test(t)&&(e[t]=new Vue({el:n,data:{},methods:{},created:function(){},mounted:function(){}}))},window.app.getModule=function(t){return"string"==typeof t&&t.trim()?e[t]:e}}();