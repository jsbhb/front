define(["config.page.render"],function(t){"use strict";var o=window.capi.get(),n=o.jsData.userInfo.isLogin,e=o.jsData.platform.rule.crossOrder.maxPrice,s=o.jsData.platform.rule.normalOrder.minPrice;return t.extend({tags:{global:"<component-shoppingcart-1></component-shoppingcart-1>"},region:{global:{cfgDynamic:!0,reqDynamic:!0,resDynamic:!0,beforeFunc:function(t,o){var n={};n.typeObj={},n.quantity=0,n.allSelected=!1,n.oneSelected=!1,$.each(o.response.global,function(t,o){if(o.goodsSpecs){var e=o.type,s=o.itemId,r=o.goodsSpecs.status,a=o.supplierId,i=o.supplierName,c=0===e?"跨境":2===e?"一般":1===e?"大贸":"";n.quantity+=1,n.typeObj[e]=n.typeObj[e]||{},n.typeObj[e][a]=n.typeObj[e][a]||{},n.typeObj[e][a].type=e,n.typeObj[e][a].typeName=c,n.typeObj[e][a].supplierId=a,n.typeObj[e][a].supplierName=i,n.typeObj[e][a].itemObj=n.typeObj[e][a].itemObj||{},n.typeObj[e][a].itemObj[s]={},n.typeObj[e][a].itemObj[s].ids=o.id,n.typeObj[e][a].itemObj[s].status=r,n.typeObj[e][a].itemObj[s].selected=o.goodsSpecs.stock>0&&0!==r,n.typeObj[e][a].itemObj[s].goodsId=o.goodsSpecs.goodsId,n.typeObj[e][a].itemObj[s].firstCategory=o.goodsSpecs.firstCategory,n.typeObj[e][a].itemObj[s].secondCategory=o.goodsSpecs.secondCategory,n.typeObj[e][a].itemObj[s].thirdCategory=o.goodsSpecs.thirdCategory,n.typeObj[e][a].itemObj[s].type=e,n.typeObj[e][a].itemObj[s].href=o.href,n.typeObj[e][a].itemObj[s].itemId=o.itemId,n.typeObj[e][a].itemObj[s].freePost=o.freePost,n.typeObj[e][a].itemObj[s].freeTax=o.freeTax,n.typeObj[e][a].itemObj[s].itemImg=o.picPath,n.typeObj[e][a].itemObj[s].quantity=o.quantity,n.typeObj[e][a].itemObj[s].itemName=o.goodsName,n.typeObj[e][a].itemObj[s].goodsName=o.goodsName,n.typeObj[e][a].itemObj[s].itemSpecs=o.goodsSpecs,n.typeObj[e][a].itemObj[s].itemCode=o.goodsSpecs.itemCode,n.typeObj[e][a].itemObj[s].stock=o.goodsSpecs.stock>0?o.goodsSpecs.stock:0,n.typeObj[e][a].itemObj[s].weight=o.goodsSpecs.weight,n.typeObj[e][a].itemObj[s].exciseTax=o.goodsSpecs.exciseTax,n.typeObj[e][a].itemObj[s].incrementTax=o.goodsSpecs.incrementTax,n.typeObj[e][a].itemObj[s].priceList=o.goodsSpecs.priceList,n.typeObj[e][a].itemObj[s].carton=o.goodsSpecs.carton,n.typeObj[e][a].itemObj[s].tagList=[],$.each(o.goodsSpecs.tagList,function(t,o){"预售"===o.tagName&&(n.typeObj[e][a].itemObj[s].tagFunId=o.tagFunId,n.typeObj[e][a].itemObj[s].preSaleName=o.tagName,n.typeObj[e][a].itemObj[s].preSaleDesc=o.description),n.typeObj[e][a].itemObj[s].tagList.push(o)})}}),t.response.global={},t.response.global.orders=n}}},config:{quantityTimer:null},request:{},response:{},sendArr:n?["ORDER_SHOPPINGCART_QUERY"]:[],reload:!1,".component-shoppingCart-ordersDetails    .goodsList                    touchmove":function(t,n){var e=$(t),s=n||window.event,r=Math.abs(o.jsEvent.touch.touchSX),a=Math.abs(o.jsEvent.touch.touchSY),i=e.parent().find(".goodsList").not(e),c=r<=280?r:280;a<r-80&&(o.jsEvent.touch.touchSX>0&&(e.parent().find(".goodsList .controlGroup").css("display","block"),e.hasClass("inControl")&&e.find(".body").css("transform","translate3d("+(c-80-200)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".body").css("-o-transform","translate3d("+(c-80-200)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".body").css("-ms-transform","translate3d("+(c-80-200)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".body").css("-moz-transform","translate3d("+(c-80-200)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".body").css("-webkit-transform","translate3d("+(c-80-200)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".controlGroup").css("transform","translate3d("+(c-80+550)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".controlGroup").css("-o-transform","translate3d("+(c-80+550)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".controlGroup").css("-ms-transform","translate3d("+(c-80+550)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".controlGroup").css("-moz-transform","translate3d("+(c-80+550)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".controlGroup").css("-webkit-transform","translate3d("+(c-80+550)+"px, 0, 0)"),e.hasClass("inControl")&&e.find(".body,.controlGroup").css("transition","none"),e.hasClass("inControl")&&e.find(".body,.controlGroup").css("-o-transition","none"),e.hasClass("inControl")&&e.find(".body,.controlGroup").css("-ms-transition","none"),e.hasClass("inControl")&&e.find(".body,.controlGroup").css("-moz-transition","none"),e.hasClass("inControl")&&e.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".body,.controlGroup").css("transition","none"),i.find(".body,.controlGroup").css("-o-transition","none"),i.find(".body,.controlGroup").css("-ms-transition","none"),i.find(".body,.controlGroup").css("-moz-transition","none"),i.find(".body,.controlGroup").css("-webkit-transition","none")),o.jsEvent.touch.touchSX<0&&(e.hasClass("inControl")||(e.find(".controlGroup").css("transform","translate3d("+(750-(c-80))+"px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d("+(750-(c-80))+"px, 0, 0)"),e.find(".body").css("transform","translate3d("+(0-(r-80))+"px, 0, 0)"),e.find(".body").css("-o-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),e.find(".body").css("-ms-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),e.find(".body").css("-moz-transform","translate3d("+(0-(r-80))+"px, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d("+(0-(r-80))+"px, 0, 0)")),e.hasClass("inControl")&&(e.find(".body").css("transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),e.find(".body").css("-o-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),e.find(".body").css("-ms-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),e.find(".body").css("-moz-transform","translate3d("+(-200-(r-80))+"px, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d("+(-200-(r-80))+"px, 0, 0)")),e.find(".body,.controlGroup").css("transition","none"),e.find(".body,.controlGroup").css("-o-transition","none"),e.find(".body,.controlGroup").css("-ms-transition","none"),e.find(".body,.controlGroup").css("-moz-transition","none"),e.find(".body,.controlGroup").css("-webkit-transition","none"),i.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),i.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)"),i.find(".body,.controlGroup").css("transition","200ms linear"),i.find(".body,.controlGroup").css("-o-transition","200ms linear"),i.find(".body,.controlGroup").css("-ms-transition","200ms linear"),i.find(".body,.controlGroup").css("-moz-transition","200ms linear"),i.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),i.find(".body").css("transform","translate3d(0, 0, 0)"),i.find(".body").css("-o-transform","translate3d(0, 0, 0)"),i.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),i.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),i.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),e.parent().find(".goodsList .controlGroup").css("display","block"),i.removeClass("inControl")),s.preventDefault(),s.stopPropagation())},".component-shoppingCart-ordersDetails    .goodsList                    touchend":function(t,n){var e=$(t),s=e.parent().find(".goodsList").not(e);o.jsEvent.touch.touchIsMoved&&(e.hasClass("inControl")&&o.jsEvent.touch.touchSX>=30&&(e.removeClass("inControl"),s.removeClass("inControl"),e.find(".body,.controlGroup").css("transition","200ms linear"),e.find(".body,.controlGroup").css("-o-transition","200ms linear"),e.find(".body,.controlGroup").css("-ms-transition","200ms linear"),e.find(".body,.controlGroup").css("-moz-transition","200ms linear"),e.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),e.find(".body").css("transform","translate3d(0, 0, 0)"),e.find(".body").css("-o-transform","translate3d(0, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),e.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")),e.hasClass("inControl")&&o.jsEvent.touch.touchSX<30&&(e.addClass("inControl"),s.removeClass("inControl"),e.find(".body").css("transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),e.find(".body,.controlGroup").css("transition","200ms linear"),e.find(".body,.controlGroup").css("-o-transition","200ms linear"),e.find(".body,.controlGroup").css("-ms-transition","200ms linear"),e.find(".body,.controlGroup").css("-moz-transition","200ms linear"),e.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),e.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!e.hasClass("inControl")&&o.jsEvent.touch.touchSX<=-80&&(e.addClass("inControl"),s.removeClass("inControl"),e.find(".body").css("transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-o-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(-200px, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(-200px, 0, 0)"),e.find(".body,.controlGroup").css("transition","200ms linear"),e.find(".body,.controlGroup").css("-o-transition","200ms linear"),e.find(".body,.controlGroup").css("-ms-transition","200ms linear"),e.find(".body,.controlGroup").css("-moz-transition","200ms linear"),e.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),e.find(".controlGroup").css("transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(550px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(550px, 0, 0)")),!e.hasClass("inControl")&&o.jsEvent.touch.touchSX>-80&&(e.removeClass("inControl"),s.removeClass("inControl"),e.find(".body").css("transform","translate3d(0, 0, 0)"),e.find(".body").css("-o-transform","translate3d(0, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),e.find(".body,.controlGroup").css("transition","200ms linear"),e.find(".body,.controlGroup").css("-o-transition","200ms linear"),e.find(".body,.controlGroup").css("-ms-transition","200ms linear"),e.find(".body,.controlGroup").css("-moz-transition","200ms linear"),e.find(".body,.controlGroup").css("-webkit-transition","200ms linear"),e.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")))},".component-shoppingCart-ordersDetails    .btn_plus                     touchend":function(t){var o=this,n=$(t),e=o.modules.message,s=o.renderData.global.response.orders,r=n.parents("[goodsId]").attr("type"),a=n.parents("[goodsId]").attr("supplierId"),i=n.parents("[itemId]").attr("itemId"),c=1*n.parent().find("input").val(),d=s.typeObj[r][a].itemObj[i].attr("stock"),p=s.typeObj[r][a].itemObj[i].attr("minQuantity"),l=s.typeObj[r][a].itemObj[i].attr("maxQuantity");!r&&0!==r||!a&&0!==a||!i&&0!==i||(n.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),n.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),d<=0||c<=d&&p&&d<p?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>d?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):l&&c>l?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):p&&c<p&&e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(l||0===l)&&c>l?l:c,c=(p||0===p)&&c<p?p:c,c=c>d?d:c,c=c>0?c:1,n.val(1*c),s.typeObj[r][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_minus                    touchend":function(t){var o=this,n=$(t),e=o.modules.message,s=o.renderData.global.response.orders,r=n.parents("[goodsId]").attr("type"),a=n.parents("[goodsId]").attr("supplierId"),i=n.parents("[itemId]").attr("itemId"),c=1*n.parent().find("input").val(),d=s.typeObj[r][a].itemObj[i].attr("stock"),p=s.typeObj[r][a].itemObj[i].attr("minQuantity"),l=s.typeObj[r][a].itemObj[i].attr("maxQuantity");!r&&0!==r||!a&&0!==a||!i&&0!==i||(n.hasClass("btn_plus")&&(c=1*c+1,c=1*c>0?1*c:1),n.hasClass("btn_minus")&&(c=1*c-1,c=1*c>0?1*c:1),d<=0||c<=d&&p&&d<p?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！"}):c>d?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是库存可用量！"}):l&&c>l?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最大购买量！"}):p&&c<p&&e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已是最小购买量！"}),c=(l||0===l)&&c>l?l:c,c=(p||0===p)&&c<p?p:c,c=c>d?d:c,c=c>0?c:1,n.val(1*c),s.typeObj[r][a].itemObj[i].attr("quantity",1*c))},".component-shoppingCart-ordersDetails    .btn_input                    input":function(t){var o=this,n=$(t),e=o.modules.message,s=o.renderData.global.response.orders,r=n.parents("[goodsId]").attr("type"),a=n.parents("[goodsId]").attr("supplierId"),i=n.parents("[itemId]").attr("itemId"),c=s.typeObj[r][a].itemObj[i].attr("stock"),d=s.typeObj[r][a].itemObj[i].attr("minQuantity"),p=s.typeObj[r][a].itemObj[i].attr("maxQuantity");if((r||0===r)&&(a||0===a)&&(i||0===i)){var l=n.val()?n.val().trim():0,m=/\D/.test(l)?l.replace(/\D/g,""):l;clearTimeout(o.config.quantityTimer),o.config.quantityTimer=setTimeout(function(){var t=1*m>0?1*m:1;c<=0||t<=c&&d&&c<d?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前商品库存不足！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,n.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):t>c?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量大于库存可用量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,n.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):p&&t>p?e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已大于最大购买量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,n.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}}):d&&t<d&&e.refresh({cancelBtn:!1,confirmBtn:!1,content:"当前数量已低于最小购买量！",timeOutFun:function(){t=(p||0===p)&&t>p?p:t,t=(d||0===d)&&t<d?d:t,t=t>c?c:t,t=1*t>0?1*t:1,n.val(1*t),s.typeObj[r][a].itemObj[i].attr("quantity",1*t)}})},650)}},".component-shoppingCart-ordersDetails    .btn_input                    blur":function(t){var o=this,n=$(t),e=o.renderData.global.response.orders,s=n.parents("[goodsId]").attr("type"),r=n.parents("[goodsId]").attr("supplierId"),a=n.parents("[itemId]").attr("itemId"),i=e.typeObj[s][r].itemObj[a].attr("stock"),c=e.typeObj[s][r].itemObj[a].attr("minQuantity"),d=e.typeObj[s][r].itemObj[a].attr("maxQuantity");if((s||0===s)&&(r||0===r)&&(a||0===a)){var p=n.val()?n.val().trim():0;p=(d||0===d)&&p>d?d:p,p=(c||0===c)&&p<c?c:p,p=p>i?i:p,p=p>0?p:1,n.val(1*p),e.typeObj[s][r].itemObj[a].attr("quantity",1*p)}},".component-shoppingCart-ordersDetails    .commodity-select             touchend":function(t){var o=this,n=$(t),e=o.renderData.global.config.attr("optionsOpen"),s=o.renderData.global.response.orders,r=n.parents("[goodsId]").attr("type"),a=n.parents("[goodsId]").attr("supplierId"),i=n.parents("[itemId]").attr("itemId");if(r&&a&&i){var c=s.typeObj[r][a].itemObj[i].attr("selected"),d=s.typeObj[r][a].itemObj[i].attr("status"),p=s.typeObj[r][a].itemObj[i].attr("stock"),l=s.typeObj[r][a].itemObj[i].attr("minQuantity"),m=c?!c:!!(0!==d&&p>0&&p>=l||e)&&!c;s.typeObj[r][a].itemObj[i].attr("selected",m)}},".component-shoppingCart-ordersDetails    .control_delete               touchend":function(t){var o=this,n=$(t),e=o.modules.footer,s=o.modules.header,r=o.modules.message,a=o.renderData.global.response,i=n.attr("ids"),c=a.orders;r.refresh({content:"是否删除该商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){o.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:i}).done(function(t){t&&t.success&&($.each(c.attr().typeObj,function(t,o){$.each(o,function(o,n){$.each(n.itemObj,function(n,e){""+e.ids===i&&c.typeObj[t][o].itemObj.removeAttr(n)})})}),o.sendRequest("ORDER_SHOPPINGCART_COUNT").done(function(t){t&&t.success&&(e.renderData.global.response.attr("count",t.obj),s.renderData.global.response.attr("shopCartCount",t.obj),t.obj||(s.renderData.global.config.attr("icon_search",!0),s.renderData.global.config.attr("icon_shopCartEdit",!1),s.renderData.global.config.attr("icon_shopCartSave",!1)))}))}),n.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})},".component-shoppingCart-optionsGroup     .control_selectAll            touchend":function(t){var o=this,n=o.renderData.global.response.orders,e=o.renderData.global.config.attr("optionsOpen"),s=!n.attr("allSelected"),r=n.attr();$.each(r.typeObj,function(t,o){$.each(o,function(o,r){$.each(r.itemObj,function(r,a){"boolean"==typeof a.selected&&(0!==a.status&&a.stock>0&&a.stock>=a.minQuantity||e?n.typeObj[t][o].itemObj[r].attr("selected",s):n.typeObj[t][o].itemObj[r].attr("selected",!1))})})})},".component-shoppingCart-optionsGroup     .btn_deleteMore:not(.lose)    touchend":function(t){var o=this,n=$(t),e=o.modules.footer,s=o.modules.header,r=o.modules.message,a=o.renderData.global.response.orders,i=a.attr(),c=[];$.each(i.typeObj,function(t,o){$.each(o,function(t,o){$.each(o.itemObj,function(t,o){!0===o.selected&&c.push(o.ids)})})});var d=c.join(",");d?r.refresh({content:"是否删除选中商品",DOMClick:!1,cancelBtn:!0,confirmBtn:!0,cancelFun:function(){},confirmFun:function(){o.sendRequest("ORDER_SHOPPINGCART_DELETE",{ids:d}).done(function(t){t&&t.success&&($.each(a.attr().typeObj,function(t,o){$.each(o,function(o,n){$.each(n.itemObj,function(n,e){-1!==$.inArray(e.ids,c)&&a.typeObj[t][o].itemObj.removeAttr(n)})})}),o.sendRequest("ORDER_SHOPPINGCART_COUNT").done(function(t){t&&t.success&&(e.renderData.global.response.attr("count",t.obj),s.renderData.global.response.attr("shopCartCount",t.obj),t.obj||(s.renderData.global.config.attr("icon_search",!0),s.renderData.global.config.attr("icon_shopCartEdit",!1),s.renderData.global.config.attr("icon_shopCartSave",!1)))})),n.parents(".goodsList").find(".body").css("transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-o-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-ms-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-moz-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),n.parents(".goodsList").find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")})}}):r.refresh({cancelBtn:!1,confirmBtn:!1,content:"请选择所要删除的商品！"})},".component-shoppingCart-optionsGroup     .btn_commitOrder:not(.lose)   click":function(){var t=this,o=t.renderData.global.response.orders.attr(),n=t.config.global.pathUrl,r={},a=0,i=t.modules.message;if($.each(o.typeObj,function(t,o){$.each(o,function(o,n){var e=!1,s=0,i=0,c=0,d=0,p=0;$.each(n.itemObj,function(l,m){0!==m.status&&m.stock>0&&m.stock>=m.minQuantity&&m.selected&&m.quantity>0&&(e=!0,s+=m.weight*m.quantity,i+=m.price*m.quantity,c+=m.vipPrice*m.quantity,d+=m.realPrice*m.quantity,p+=m.realVipPrice*m.quantity,r.typeObj=r.typeObj||{},r.typeObj[t]=r.typeObj[t]||{},r.typeObj[t][o]=r.typeObj[t][o]||{},r.typeObj[t][o].taxFee=0,r.typeObj[t][o].postFee=0,r.typeObj[t][o].exciseTaxFee=0,r.typeObj[t][o].incrementTaxFee=0,r.typeObj[t][o].type=n.type,r.typeObj[t][o].typeName=n.typeName,r.typeObj[t][o].supplierId=n.supplierId,r.typeObj[t][o].supplierName=n.supplierName,r.typeObj[t][o].supplierWeight=1*s,r.typeObj[t][o].supplierPrice=1*i,r.typeObj[t][o].supplierVipPrice=1*c,r.typeObj[t][o].supplierRealPrice=1*d,r.typeObj[t][o].supplierRealVipPrice=1*p,r.typeObj[t][o].itemObj=r.typeObj[t][o].itemObj||{},r.typeObj[t][o].itemObj[l]={},r.typeObj[t][o].itemObj[l].ids=m.ids,r.typeObj[t][o].itemObj[l].type=n.type,r.typeObj[t][o].itemObj[l].href=m.href,r.typeObj[t][o].itemObj[l].status=m.status,r.typeObj[t][o].itemObj[l].itemId=m.itemId,r.typeObj[t][o].itemObj[l].freePost=m.freePost,r.typeObj[t][o].itemObj[l].freeTax=m.freeTax,r.typeObj[t][o].itemObj[l].goodsId=m.goodsId,r.typeObj[t][o].itemObj[l].firstCategory=m.firstCategory,r.typeObj[t][o].itemObj[l].secondCategory=m.secondCategory,r.typeObj[t][o].itemObj[l].thirdCategory=m.thirdCategory,r.typeObj[t][o].itemObj[l].itemImg=m.itemImg,r.typeObj[t][o].itemObj[l].picPath=m.picPath,r.typeObj[t][o].itemObj[l].goodsName=m.itemName,r.typeObj[t][o].itemObj[l].quantity=m.quantity,r.typeObj[t][o].itemObj[l].exciseTax=m.exciseTax,r.typeObj[t][o].itemObj[l].incrementTax=m.incrementTax,r.typeObj[t][o].itemObj[l].priceList=m.priceList,r.typeObj[t][o].itemObj[l].tagList=m.tagList,r.typeObj[t][o].itemObj[l].tagFunId=m.tagFunId,r.typeObj[t][o].itemObj[l].preSaleName=m.preSaleName,r.typeObj[t][o].itemObj[l].preSaleDesc=m.preSaleDesc,r.typeObj[t][o].itemObj[l].sku=m.itemSpecs.sku,r.typeObj[t][o].itemObj[l].info=m.itemSpecs.info,r.typeObj[t][o].itemObj[l].stock=m.itemSpecs.stock>0?m.itemSpecs.stock:0,r.typeObj[t][o].itemObj[l].weight=m.itemSpecs.weight,r.typeObj[t][o].itemObj[l].itemCode=m.itemSpecs.itemCode,r.typeObj[t][o].itemObj[l].price=m.price,r.typeObj[t][o].itemObj[l].vipPrice=m.vipPrice,r.typeObj[t][o].itemObj[l].realPrice=m.realPrice,r.typeObj[t][o].itemObj[l].realVipPrice=m.realVipPrice,r.typeObj[t][o].itemObj[l].minPrice=m.itemSpecs.minPrice,r.typeObj[t][o].itemObj[l].maxPrice=m.itemSpecs.maxPrice,r.typeObj[t][o].itemObj[l].vipMinPrice=m.itemSpecs.vipMinPrice,r.typeObj[t][o].itemObj[l].vipMaxPrice=m.itemSpecs.vipMaxPrice,r.typeObj[t][o].itemObj[l].realMinPrice=m.itemSpecs.realMinPrice,r.typeObj[t][o].itemObj[l].realMaxPrice=m.itemSpecs.realMaxPrice,r.typeObj[t][o].itemObj[l].realVipMinPrice=m.itemSpecs.realVipMinPrice,r.typeObj[t][o].itemObj[l].realVipMaxPrice=m.itemSpecs.realVipMaxPrice,r.typeObj[t][o].itemObj[l].carton=m.itemSpecs.carton,a++)}),e&&a++})}),r.orderCount=a,!$.isEmptyObject(r)){var c=0,d=0,p=!0,l=!0,m=!0;$.each(r.typeObj,function(t,o){if($.each(o,function(o,n){var r=0,a=0,b=n.supplierId,f=n.supplierName;return $.each(n.itemObj,function(t,o){0===o.type?(r+=o.realPrice*o.quantity,c+=o.quantity):2===o.type&&(a+=o.realPrice*o.quantity,d+=o.quantity)}),"0"===t&&r>e&&c>1?(m=p=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品单笔订单价格超过"+e+"元，请调整！"}),!1):"2"===t&&1*b==6&&a<s?(m=l=!1,i.refresh({cancelBtn:!1,confirmBtn:!1,content:f+"商品订单未满"+s+"元，请调整！"}),!1):!!m&&void 0}),!m)return!1}),m&&(p||l)&&(window.localStorage.setItem("showDiscount","{}"),window.localStorage.setItem("ordersInfo",JSON.stringify(r)),window.location.href=encodeURI("/orderConfirm.html?jumpUrl="+n))}},"{document} .component-header-right       .icon_shopCartEdit            touchend":function(t){var o=this,n=o.element,e=n.find(".goodsList"),s=o.renderData.global.response.orders,r=o.modules.header,a=s.attr();$.each(a.typeObj,function(t,o){$.each(o,function(o,n){$.each(n.itemObj,function(n,e){s.typeObj[t][o].itemObj[n].attr("selected",!1)})})}),o.renderData.global.config.attr("optionsOpen",!0),r.renderData.global.config.attr("icon_shopCartSave",!0),r.renderData.global.config.attr("icon_shopCartEdit",!1),e.removeClass("inControl"),e.find(".body").css("transform","translate3d(0, 0, 0)"),e.find(".body").css("-o-transform","translate3d(0, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),e.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")},"{document} .component-header-right       .icon_shopCartSave            touchend":function(t){var o=this,n=o.element,e=n.find(".goodsList"),s=o.renderData.global.response.orders,r=o.modules.header,a=s.attr();$.each(a.typeObj,function(t,o){$.each(o,function(o,n){$.each(n.itemObj,function(n,e){s.typeObj[t][o].itemObj[n].attr("selected",!1)})})}),o.renderData.global.config.attr("optionsOpen",!1),r.renderData.global.config.attr("icon_shopCartSave",!1),r.renderData.global.config.attr("icon_shopCartEdit",!0),e.removeClass("inControl"),e.find(".body").css("transform","translate3d(0, 0, 0)"),e.find(".body").css("-o-transform","translate3d(0, 0, 0)"),e.find(".body").css("-ms-transform","translate3d(0, 0, 0)"),e.find(".body").css("-moz-transform","translate3d(0, 0, 0)"),e.find(".body").css("-webkit-transform","translate3d(0, 0, 0)"),e.find(".controlGroup").css("transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-o-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-ms-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-moz-transform","translate3d(748px, 0, 0)"),e.find(".controlGroup").css("-webkit-transform","translate3d(748px, 0, 0)")}})});